{"id":"flywheel_connectors-07g","title":"Study clawdbot Telegram connector implementation","description":"Research and document the existing clawdbot Telegram connector implementation. Identify patterns for long polling, Bot API usage, message handling, inline keyboards, and error recovery. Document learnings and anti-patterns. Use findings to inform fcp.telegram improvements.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-11T10:27:31.668989156-05:00","created_by":"ubuntu","updated_at":"2026-01-11T12:08:16.161200164-05:00","closed_at":"2026-01-11T12:08:16.161200164-05:00","close_reason":"DUPLICATE: Merged with flywheel_connectors-w1g which has more detailed study plan."}
{"id":"flywheel_connectors-0bo","title":"fcp.docusign: Track Signature Status","description":"# fcp.docusign: Track Signature Status (FCP2)\n\n## Goal\nAllow agents to track envelope progress:\n- delivered/signed/completed/declined/voided\n- recipient-level status (without leaking PII)\n\n## Scope\n- Get envelope status.\n- List envelopes with filters (date range, status).\n- Optional: ingest Connect webhooks for real-time status updates.\n\n## Capability model (illustrative)\n- `docusign.envelopes.read`\n- `docusign.webhook.ingest` (optional)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- PII hygiene:\n  - recipient names/emails are sensitive\n  - logs include only envelope_id + status + timestamps\n\n## Deliverables\n- Operation schemas:\n  - `docusign.envelope.status.get`\n  - `docusign.envelope.list`\n  - Optional: `docusign.webhook.ingest`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - status parsing\n  - webhook replay/idempotency (if enabled)\n\n## Acceptance criteria\n- Envelope status tracking is reliable and safe for automation.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:21:33.859686294-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:38:01.178912708-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-0bo","depends_on_id":"flywheel_connectors-bijm","type":"parent-child","created_at":"2026-01-15T02:34:17.083739397-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-0bo","depends_on_id":"flywheel_connectors-bijm.1","type":"blocks","created_at":"2026-01-15T04:38:05.759810399-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-0bo","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T04:38:06.096842217-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-0ky","title":"fcp.salesforce: Enterprise SSO integration","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:19:42.657324478-05:00","created_by":"ubuntu","updated_at":"2026-01-11T12:09:27.135621851-05:00","closed_at":"2026-01-11T12:09:27.135621851-05:00","close_reason":"CONSOLIDATED: All Salesforce sub-features merged into comprehensive parent connector bead flywheel_connectors-4m0 (fcp.salesforce: Salesforce CRM Platform Connector)"}
{"id":"flywheel_connectors-0s6","title":"fcp.docusign: Add Recipients and Fields","description":"# fcp.docusign: Add Recipients and Fields (FCP2)\n\n## Goal\nConfigure envelope recipients and signature fields (tabs) in a safe, typed way.\n\n## Scope\n- Add recipients (signer/CC/etc) with routing order.\n- Add tabs/fields:\n  - signature\n  - initials\n  - date signed\n  - text fields\n  - checkbox\n- Support both:\n  - coordinate-based placement\n  - anchor-tag placement (preferred when possible)\n\n## Capability model (illustrative)\n- `docusign.envelopes.write`\n- `docusign.envelopes.tabs.write`\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- PII hygiene:\n  - recipient emails/names are sensitive; never log\n- Deterministic field placement:\n  - stable IDs for recipient roles/tabs\n\n## Deliverables\n- Operation schemas:\n  - `docusign.envelope.add_recipient`\n  - `docusign.envelope.update_recipient`\n  - `docusign.envelope.add_tabs`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - recipient routing rules\n  - anchor-tag placement\n  - redaction\n\n## Acceptance criteria\n- Envelopes can be configured reproducibly without leaking recipient PII.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:21:33.053600466-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:37:34.245152204-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-0s6","depends_on_id":"flywheel_connectors-bijm","type":"parent-child","created_at":"2026-01-15T02:34:17.169316115-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-0s6","depends_on_id":"flywheel_connectors-bijm.1","type":"blocks","created_at":"2026-01-15T04:37:37.762870517-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-14h8","title":"fcp.linkedin: Professional Networking Platform Connector","description":"# fcp.linkedin - Professional Networking Platform Connector\n\n## Overview\nComprehensive LinkedIn integration supporting professional profiles, connections, job search, company intelligence, and messaging for recruiting, networking, and business development workflows.\n\n## Value Assessment\n- **Value Score**: 72/100 (Tier 4)\n- **Use Cases**: Job market intelligence, professional networking, recruiting automation, company research, lead generation\n- **Strategic Value**: Access to the world's largest professional network with 900M+ members\n\n## Archetype\n**Request-Response**\n- LinkedIn APIs are strictly request-response based\n- No native streaming or webhook support\n- Polling required for real-time-like updates\n\n## API Access Tiers\nLinkedIn has multiple API tiers with different access levels:\n\n### Consumer API (Basic)\n- Profile read (authenticated user only)\n- Share content to user feed\n- Limited company page access\n\n### Marketing API (Requires Partnership)\n- Ad campaign management\n- Audience insights\n- Conversion tracking\n- Lead gen forms\n\n### Sales Navigator API (Premium)\n- Advanced people search\n- Lead recommendations\n- Account insights\n- InMail automation\n\n### Recruiter API (Enterprise)\n- Candidate search\n- Job posting management\n- Applicant tracking integration\n- Recruiter InMail\n\n### LinkedIn Learning API\n- Course catalog access\n- Learning progress tracking\n- Skill assessments\n\n## Key Operations\n\n### Profile Operations (Consumer API)\n- `linkedin.profile.me` - Get authenticated user profile\n- `linkedin.profile.get` - Get profile by URN (limited fields)\n- `linkedin.profile.picture.get` - Get profile picture\n- `linkedin.profile.email.get` - Get primary email (requires r_emailaddress)\n\n### Connection Operations\n- `linkedin.connections.list` - List first-degree connections\n- `linkedin.connections.count` - Get connection count\n- `linkedin.connections.mutual` - Get mutual connections with user\n\n### Sharing Operations\n- `linkedin.share.create` - Create share/post on feed\n- `linkedin.share.delete` - Delete owned share\n- `linkedin.ugc.create` - Create user-generated content\n- `linkedin.ugc.get` - Get UGC post details\n- `linkedin.media.upload` - Upload images/videos for posts\n- `linkedin.reactions.get` - Get reactions on content\n- `linkedin.comments.list` - List comments on post\n- `linkedin.comments.create` - Comment on post\n\n### Company Operations\n- `linkedin.company.get` - Get company page by ID\n- `linkedin.company.lookup` - Lookup by vanity name/domain\n- `linkedin.company.posts.list` - Get company updates\n- `linkedin.company.followers.count` - Follower statistics\n- `linkedin.company.admin.posts.create` - Post as company (admin only)\n\n### Job Operations (Jobs API)\n- `linkedin.jobs.search` - Search job listings\n- `linkedin.jobs.get` - Get job details by ID\n- `linkedin.jobs.recommended` - Get recommended jobs for user\n- `linkedin.jobs.saved.list` - List saved jobs\n- `linkedin.jobs.saved.add/remove` - Manage saved jobs\n- `linkedin.jobs.apply.start` - Initiate Easy Apply flow\n\n### Job Posting Operations (Recruiter API)\n- `linkedin.jobs.post.create` - Create job posting\n- `linkedin.jobs.post.update` - Update job posting\n- `linkedin.jobs.post.close` - Close job posting\n- `linkedin.jobs.applicants.list` - List applicants\n\n### Messaging Operations (Messaging API)\n- `linkedin.messaging.conversations.list` - List conversations\n- `linkedin.messaging.messages.list` - Get messages in conversation\n- `linkedin.messaging.messages.send` - Send message\n- `linkedin.messaging.inmail.send` - Send InMail (Premium)\n\n### Search Operations (Sales Navigator/Recruiter)\n- `linkedin.search.people` - Advanced people search\n- `linkedin.search.companies` - Company search\n- `linkedin.search.jobs` - Job search with filters\n- `linkedin.search.content` - Content/post search\n\n### Marketing Operations (Marketing API)\n- `linkedin.ads.accounts.list` - List ad accounts\n- `linkedin.ads.campaigns.list/create/update` - Campaign management\n- `linkedin.ads.creatives.list/create` - Ad creative management\n- `linkedin.ads.analytics.get` - Campaign analytics\n- `linkedin.leads.forms.list` - List lead gen forms\n- `linkedin.leads.submissions.list` - Get form submissions\n\n## Authentication\n- **OAuth 2.0 (3-legged)**: Primary authentication method\n- **Scopes**:\n  - `r_liteprofile` - Basic profile (deprecated)\n  - `r_basicprofile` - Basic profile data\n  - `r_emailaddress` - Primary email\n  - `r_organization_admin` - Company page admin\n  - `r_organization_social` - Company social features\n  - `w_member_social` - Post on behalf of member\n  - `w_organization_social` - Post as organization\n  - `rw_ads` - Advertising APIs\n  - `r_marketing_leadgen_automation` - Lead gen access\n  - `rw_organization_admin` - Full company admin\n- **Token Refresh**: 60-day refresh token validity\n\n## Rate Limiting\nLinkedIn has aggressive rate limiting:\n- **Daily call limit**: 100,000 calls/day per app\n- **Per-member limit**: Varies by endpoint\n- **Rate limit headers**: `X-RateLimit-Limit`, `X-RateLimit-Remaining`\n- **Throttling**: 429 responses with retry-after\n- **Rolling window**: Most limits use 24-hour rolling window\n\n### Rate Limit Strategy\n- Implement call budget tracking per day\n- Per-user rate limit isolation\n- Exponential backoff on 429\n- Request queuing with priority\n- Cache aggressively (profiles change infrequently)\n\n## Zone Architecture\n\n\u003c!-- fcp2-single-zone-note --\u003e\n**FCP2 single-zone binding note:** A connector instance binds to exactly one `ZoneId` for its entire lifetime.\nThe *\"zones\"* described in this section are a **recommended deployment pattern** (run separate connector instances in separate zones with different capability grants/policies) and/or conceptual risk tiers.\nThe connector MUST NOT multiplex multiple zones internally.\n\n```\nZone 0 (Public):     Public company pages, job listings\nZone 1 (Authorized): Own profile, connections list\nZone 2 (Private):    Messages, InMail content, saved jobs\nZone 3 (Sensitive):  OAuth tokens, ad account credentials\n```\n\n## API Quirks and Limitations\n1. **URN-based identifiers**: All entities use `urn:li:*` format\n2. **Projection fields**: Must explicitly request fields via projection parameter\n3. **API versioning**: Uses dated versioning (e.g., `202401`)\n4. **Strict TOS**: Many use cases require partnership approval\n5. **Scraping prohibited**: Strict enforcement against unauthorized access\n6. **No bulk operations**: Single-entity requests only\n7. **Limited historical data**: Most APIs return recent data only\n\n## Error Handling\n- `401 Unauthorized`: Token expired or invalid\n- `403 Forbidden`: Missing scope or TOS violation\n- `429 Too Many Requests`: Rate limit exceeded\n- `451 Unavailable For Legal Reasons`: Regional restrictions\n\n## Dependencies\n- `fcp-core`: Base connector traits, zone management\n- `fcp-oauth`: OAuth 2.0 flow handling\n- `fcp-ratelimit`: Daily/per-user rate limiting\n- `fcp-telemetry`: API call metrics and monitoring\n\n## Integration Considerations\n- LinkedIn API access requires app review for most scopes\n- Marketing/Sales Navigator APIs need partnership agreements\n- Consider implementing profile caching layer\n- URN resolution/mapping utilities needed\n- Support both v1 and v2 API formats\n\n## Implementation Priority\n1. OAuth flow with proper scope management\n2. Profile operations (me, basic get)\n3. Sharing/posting operations\n4. Company information retrieval\n5. Job search and listings\n6. Messaging (requires additional approval)\n7. Marketing APIs (partnership dependent)\n\n## Compliance Notes\n- GDPR data export support required\n- User consent for data access must be clear\n- Respect user privacy settings\n- LinkedIn Professional Community Guidelines apply\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T22:02:00.127224699-05:00","created_by":"ubuntu","updated_at":"2026-01-15T07:23:29.745785935-05:00","labels":["connector","professional","social","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-14h8","depends_on_id":"flywheel_connectors-lj2","type":"blocks","created_at":"2026-01-11T22:02:28.768855313-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-14h8","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T22:02:29.583917436-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-14h8","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T22:02:30.494740804-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-14h8","depends_on_id":"flywheel_connectors-iv7","type":"blocks","created_at":"2026-01-11T22:02:31.33214164-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-14h8","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:37:14.689079133-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-14h8","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T07:07:29.153163175-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-14h8","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T07:09:31.268001302-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-14h8","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T07:09:31.679619957-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-14h8","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T07:09:32.092542651-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-14h8","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T07:09:32.522917394-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-14h8","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T07:09:32.938084268-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-14h8","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:09:33.371224004-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-14h8.1","title":"fcp.linkedin: Manifest + Capability Map (FCP2)","description":"## Goal\nProduce the full FCP2 manifest and capability map for this connector.\n\nThis bead is where we translate the connector’s functional surface (operations) into a **mechanically checkable** contract:\n- operation schemas + schema IDs\n- capability families per operation\n- per-operation NetworkConstraints (default deny)\n- sandbox profile requirements\n- declared state model (stateless / singleton_writer / crdt)\n\n## Required content (must be explicit)\n- Operation list is exhaustive and stable for the current phase.\n- Capability IDs DO NOT encode hostnames/ports.\n- NetworkConstraints are minimal and per-operation.\n- Risk tier for each operation (Safe / Dangerous).\n- Explicit bounds: timeouts, max response sizes, pagination limits.\n\n## Tests\n- Add good/bad manifest examples for the compliance runner.\n\n## Acceptance Criteria\n- Passes static checks in `flywheel_connectors-1n78.21.5`.\n- Default-deny is enforced by manifest + capability requirements.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:06.352088376-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:13:06.352088376-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-14h8.1","depends_on_id":"flywheel_connectors-14h8","type":"parent-child","created_at":"2026-01-15T07:13:06.409230307-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-14h8.2","title":"fcp.linkedin: Provisioning Automation","description":"## Goal\nAutomate provisioning and configuration with minimal human steps.\n\nThis bead owns:\n- auth setup (OAuth / API keys / webhook secrets) via `CredentialObject`/`CredentialId` (egress proxy injection preferred)\n- endpoint configuration\n- `fcp doctor` readiness checks\n- deterministic, mockable provisioning flows\n\n## FCP2 requirements\n- Secrets never touch disk.\n- Provisioning is deterministic and testable.\n- Error messages are actionable and do not leak secrets/PII.\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Provisioning emits structured logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:06.956278909-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:51.882111911-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-14h8.2","depends_on_id":"flywheel_connectors-14h8","type":"parent-child","created_at":"2026-01-15T07:13:07.015357261-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-14h8.2","depends_on_id":"flywheel_connectors-14h8.1","type":"blocks","created_at":"2026-01-15T07:13:07.559235416-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-14h8.3","title":"TEST: fcp.linkedin Unit/Integration Tests (mock-only)","description":"## Goal\nMock-only unit/integration tests for this connector.\n\n## Required coverage\n- schema validation (inputs + outputs)\n- error taxonomy mapping (retry semantics)\n- pagination and bounds\n- rate limit behavior\n- redaction (no token/secret/PII leakage)\n- idempotency + receipts for Dangerous operations\n\n## Logging\nAll tests emit structured JSON logs per `flywheel_connectors-1n78.35`.\n\n## Acceptance Criteria\n- Deterministic tests; no live external calls.\n- Includes adversarial cases (timeouts, malformed responses, partial failures).\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:08.112451594-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:13:08.112451594-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-14h8.3","depends_on_id":"flywheel_connectors-14h8","type":"parent-child","created_at":"2026-01-15T07:13:08.171411643-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-14h8.3","depends_on_id":"flywheel_connectors-14h8.1","type":"blocks","created_at":"2026-01-15T07:13:08.72488702-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-14h8.3","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:13:09.285113645-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-14h8.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T07:32:07.814429149-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-14h8.4","title":"E2E: fcp.linkedin Connector Compliance Run","description":"## Goal\nRun the shared connector compliance runner and capture an evidence bundle.\n\n## Must validate\n- handshake + introspection correctness\n- default deny (no CapabilityToken → deny + DecisionReceipt)\n- NetworkConstraints enforcement\n- receipts/audit for Dangerous operations\n- structured logs\n\n## Acceptance Criteria\n- E2E run is deterministic and produces a stable artifact bundle.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:09.770654144-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:13:09.770654144-05:00","labels":["connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-14h8.4","depends_on_id":"flywheel_connectors-14h8","type":"parent-child","created_at":"2026-01-15T07:13:09.828708245-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-14h8.4","depends_on_id":"flywheel_connectors-14h8.1","type":"blocks","created_at":"2026-01-15T07:13:10.387791915-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-14h8.4","depends_on_id":"flywheel_connectors-14h8.2","type":"blocks","created_at":"2026-01-15T07:13:10.942707156-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-14h8.4","depends_on_id":"flywheel_connectors-14h8.3","type":"blocks","created_at":"2026-01-15T07:13:11.565012409-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-14h8.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T07:13:12.222419854-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1ah","title":"fcp.postgresql: PostgreSQL Database Connector","description":"# fcp.postgresql - PostgreSQL Database Connector\n\n## Overview\nPostgreSQL database connector for SQL queries, transactions, and connection pooling.\n\n## Manifest archetypes (closed set)\n- `storage`\n- `operational`\n- `streaming`\n\n\u003e Interaction patterns (non-archetype): Database access (SQL) + (optional) LISTEN/NOTIFY streaming\n\n## Key Operations\n\n### Query Operations\n- `pg.query` - Execute parameterized SQL query\n- `pg.execute` - Execute non-returning statement\n- `pg.batch` - Execute multiple statements\n- `pg.prepared` - Execute prepared statement\n- `pg.explain` - Explain query plan\n\n### Transaction Operations\n- `pg.transaction.begin` - Start transaction\n- `pg.transaction.commit` - Commit transaction\n- `pg.transaction.rollback` - Rollback transaction\n- `pg.transaction.savepoint` - Create savepoint\n- Isolation levels: READ COMMITTED, REPEATABLE READ, SERIALIZABLE\n\n### Schema Operations\n- `pg.schema.tables` - List tables\n- `pg.schema.columns` - Get column info\n- `pg.schema.indexes` - List indexes\n- `pg.schema.constraints` - Get constraints\n\n### Advanced Features\n- COPY protocol for bulk load/unload\n- LISTEN/NOTIFY for event handling\n- Row streaming for large results\n- JSON/JSONB operations\n- Full-text search support\n- PostGIS spatial queries\n\n### Connection Pool\n- Configurable pool size\n- Connection health checks\n- Statement timeout\n- Query logging\n\n## Authentication\n- Password authentication\n- SSL/TLS connections\n- Certificate authentication\n- AWS IAM (RDS)\n- Cloud SQL IAM (GCP)\n\n## Providers Supported\n- PostgreSQL (self-hosted)\n- AWS RDS/Aurora\n- Google Cloud SQL\n- Azure Database\n- Supabase\n- Neon\n- CockroachDB (compatible)\n\n## Zone Architecture\n\n\u003c!-- fcp2-single-zone-note --\u003e\n**FCP2 single-zone binding note:** A connector instance binds to exactly one `ZoneId` for its entire lifetime.\nThe *\"zones\"* described in this section are a **recommended deployment pattern** (run separate connector instances in separate zones with different capability grants/policies) and/or conceptual risk tiers.\nThe connector MUST NOT multiplex multiple zones internally.\n\n\\`\\`\\`\nZone 0 (Public):     Schema metadata\nZone 1 (Authorized): Read queries\nZone 2 (Private):    Write operations\nZone 3 (Sensitive):  DDL, admin operations\n\\`\\`\\`\n\n## Security\n- Parameterized queries (no SQL injection)\n- Query whitelisting option\n- Statement timeout enforcement\n- Connection limit enforcement\n\n## Dependencies\n- fcp-core, fcp-config, fcp-testkit, fcp-telemetry\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:49:01.662979528-05:00","created_by":"ubuntu","updated_at":"2026-01-15T07:42:51.118315628-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-1ah","depends_on_id":"flywheel_connectors-iv7","type":"blocks","created_at":"2026-01-11T10:53:16.288228342-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-1ah","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T10:53:16.316226754-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-1ah","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:31:39.638431993-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1ah","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T06:47:55.175921247-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1ah","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:47:55.594323649-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1ah","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T06:47:55.991704453-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1ah","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:47:56.392441724-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1ah","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T06:47:56.792038886-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1ah","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:47:57.164417056-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1ah","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T06:47:57.55917214-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1j7","title":"fcp-security: Security Testing and Audit Framework","description":"# fcp-security: Security Testing and Audit Framework\n\n## Overview\nSecurity-focused library providing capability validation, input sanitization, audit logging, and security testing utilities for FCP connectors.\n\n## Capability Token Validation\n- Ed25519 signature verification\n- Token expiration validation\n- Issuer/audience verification\n- Capability scope enforcement\n- Resource constraint checking\n- Constant-time comparison\n\n## Zone Security\n- Zone boundary enforcement\n- Trust level validation\n- Cross-zone access prevention\n- Zone hierarchy traversal\n- Provenance tracking\n\n## Input Validation\n- SQL injection detection\n- XSS pattern detection\n- Command injection patterns\n- Path traversal detection\n- SSRF prevention helpers\n- Content-Type validation\n\n## Audit Logging\n- Security event capture\n- Structured audit records\n- Tamper-evident logging\n- Correlation ID tracking\n- PII redaction\n- Retention policy support\n\n## Security Testing\n- Fuzzing helpers\n- Property-based testing utilities\n- Security assertion macros\n- Vulnerability pattern matchers\n\n## Cryptographic Utilities\n- Secure random generation\n- Key derivation functions\n- Constant-time operations\n- Secure memory handling (zeroize)\n\n## Dependencies\n- ed25519-dalek, sha2, hmac\n- zeroize, rand\n- regex (for pattern detection)\n- fcp-core","status":"closed","priority":0,"issue_type":"feature","created_at":"2026-01-11T10:51:04.978158109-05:00","created_by":"ubuntu","updated_at":"2026-01-15T03:22:23.784949585-05:00","closed_at":"2026-01-15T03:22:23.784949585-05:00","close_reason":"Superseded by FCP2 crypto primitives (1n78.5) and capabilities (1n78.7). The security framework functionality is now distributed across the FCP V2 architecture."}
{"id":"flywheel_connectors-1n78","title":"[FCP2] MVP: Mesh-Native Core Platform (Rust)","description":"# [FCP2] MVP: Mesh-Native Core Platform (Rust)\n\n## Why this exists\nWe are building the **FCP V2-only** reference implementation in Rust: a mesh-native, symbol-first, zone-isolated, capability-gated connector platform. The deliverable is the **system described by the FCP V2 specification + README + connector model guide**, implemented as a set of Rust crates and CLIs that can power a library of production connectors.\n\nThis epic is the parent for the concrete subsystem issues that implement the MVP conformance target.\n\n## Non-negotiable project constraints\n- **NO backwards compatibility:** We do **not** support FCP1/JSON-RPC compatibility modes, translators, or hybrid shims. If migrating from anything older, do a clean cutover.\n- **No unsafe Rust:** `#![forbid(unsafe_code)]` everywhere.\n- **Ultra-optimized defaults:** low latency, low allocation churn, bounded memory spikes, predictable performance.\n- **Security is mechanical:** enforcement must not depend on agent prompts.\n\n## The three axioms (what everything must preserve)\n1. **Universal Fungibility:** Every durable thing is a content-addressed object that is symbol-addressable (RaptorQ). Even when transported via a control-plane stream, it must still have a canonical object form.\n2. **Authenticated Mesh:** Tailscale is transport and identity (node IDs, ACL tags). FCP must assume the tailnet is authenticated but still enforce crypto + policy.\n3. **Explicit Authority:** No ambient authority. All authority chains back to the owner root key via verifiable signatures.\n\n## MVP conformance target (ship this first)\nThis epic is complete when we have a V2-only platform that supports, at minimum:\n- **Canonical object format**: deterministic CBOR with schema-hash prefix; stable schema IDs/hashes.\n- **Security object addressing**: keyed ObjectId derivation bound to zone + schema for security-relevant objects.\n- **Zone crypto**: ZoneKeyManifest distribution (HPKE sealed boxes) and rotation.\n- **Capability system**: COSE_Sign1 (CWT) CapabilityTokens with grant_object_ids verification; aud_binary binding for risky ops.\n- **Revocation**: revocation objects + head/seq freshness semantics + policy (Strict/Warn/BestEffort).\n- **Receipts**: OperationIntent + OperationReceipt for exactly-once semantics where required.\n- **Audit**: AuditEvent chain + AuditHead + ZoneCheckpoint + DecisionReceipt for explainability.\n- **Wire protocols**:\n  - **FCPS** symbol-native data plane (frame format, per-symbol AEAD, per-session MACs).\n  - **FCPC** control plane (ordered, backpressured framing of canonical control-plane objects).\n- **RaptorQ + chunking**: symbol encoding/decoding for objects; ChunkedObjectManifest for large objects.\n- **Stores**: object store + symbol store + placement policy + background repair loop + retention/GC roots.\n- **MeshNode**: peer discovery via Tailscale, routing, admission control, and distributed coordination primitives (leases).\n- **Sandbox + egress proxy**: enforce NetworkConstraints and deny-by-default egress.\n- **Connector SDK + manifest**: connectors implement standard methods and embed a manifest; SDK makes this ergonomic.\n- **Conformance harness**: golden vectors, fuzz targets, and mechanical compliance checks.\n\n## Definition of Done (quality gates)\n- `cargo check --all-targets`\n- `cargo clippy --all-targets -- -D warnings`\n- `cargo fmt --check`\n- `cargo test` (including conformance tests)\n- Fuzz targets exist for the spec-required surfaces (frame parsing, handshake transcripts, token verification, key manifests).\n- Benchmarks exist for the hot paths (ObjectId, CBOR canonicalization, FCPS parse, RaptorQ decode).\n\n## Work breakdown (child issues)\nThis epic is intentionally decomposed into subsystem issues (types/crypto/protocol/store/mesh/sandbox/sdk/conformance). Each child issue must be self-contained with:\n- a crisp scope and non-goals\n- concrete deliverables\n- acceptance criteria and test strategy\n- performance and security considerations\n\n## Success Criteria\n- The MVP system can execute a V2 connector end-to-end under zone/capability enforcement, producing receipts and audit events.\n- Conformance suite is green (golden vectors + fuzz targets exist and run).\n- No unsafe code; performance budgets are tracked and not regressing.\n","status":"open","priority":0,"issue_type":"epic","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:17:46.576921276-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T01:22:24.675920704-05:00","labels":["core","fcp2","mvp"]}
{"id":"flywheel_connectors-1n78.1","title":"[FCP2] Requirements Index: Spec-to-Implementation Matrix (V2-only)","description":"# [FCP2] Requirements Index: Spec-to-Implementation Matrix (V2-only)\n\n## Purpose\nThis bead is the **single source of truth** mapping from:\n- `FCP_Specification_V2.md`\n- `README.md`\n- `docs/fcp_model_connectors_rust.md`\n\n…to the **owning Beads** (implementation + tests).\n\nIf we keep this up to date, engineers should be able to implement FCP2 by following the Beads graph **without rereading the spec/docs**.\n\n## How to Use This Bead\n- Treat each entry as a **mechanical checklist** item.\n- When you discover a missing requirement, update this matrix first, then:\n  - create the missing owning bead(s), or\n  - expand the owning bead’s scope/acceptance criteria/tests.\n\n## Conformance Profiles (Spec §25)\n- **MVP Profile:** must ship first and is the default target for the reference implementation.\n- **Full Profile:** post-MVP hardening features (enabled by explicit configuration/policy).\n\nThis matrix labels some items as **MVP** or **Full**. Many are shared.\n\n## V2-Only Clarifications (Spec §26)\n- FCP2 makes **no backwards-compat guarantees** with FCP1.\n- No hybrid translator layer.\n- Clean cutover only.\n\n## Pricing / Cost Tracking Clarification (Connector-facing)\n- Connectors MUST emit **usage metrics**.\n- We do **not** embed hard-coded pricing tables in connectors (pricing changes frequently).\n- If cost estimates are supported, they are explicit and policy/ops-owned (e.g., `CostEstimate`).\n\n---\n\n# A) Spec Coverage Matrix — `FCP_Specification_V2.md`\n\nBelow, each chapter lists:\n- **Owners**: implementation beads responsible for building it.\n- **Primary Tests/Conformance**: golden vectors, fuzz, interop, E2E, compliance runner.\n- **Notes / Key Requirements**: the “sharp edges” we must not forget.\n\n## Spec: Conformance Language\nOwners:\n- `flywheel_connectors-1n78.21` (overall conformance)\n\nPrimary Tests/Conformance:\n- `flywheel_connectors-1n78.21.1` (CDDL + golden vectors)\n\nNotes / Key Requirements:\n- RFC2119 language interpretation.\n- Anything labeled NORMATIVE is part of the interop/security contract.\n\n## Spec §1: Introduction (informative)\nOwners:\n- `flywheel_connectors-1n78.1` (this matrix)\n\nPrimary Tests/Conformance:\n- n/a\n\nNotes / Key Requirements:\n- Establishes that FCP is object-native, mesh-authenticated, explicit authority.\n\n## Spec §2: Foundational Axioms\nOwners:\n- `flywheel_connectors-1n78.3` (canonical serialization)\n- `flywheel_connectors-1n78.4` (IDs + headers)\n- `flywheel_connectors-1n78.11` (audit/checkpoints as roots)\n\nPrimary Tests/Conformance:\n- `flywheel_connectors-1n78.21.1` (golden vectors + CDDL)\n\nNotes / Key Requirements:\n- Persisted/audited/mirrored things must be representable as canonical mesh objects.\n- Mesh is authenticated; authority is explicit and provable.\n\n## Spec §3: Foundational Primitives\nOwners:\n- `flywheel_connectors-1n78.4` (ObjectId/EpochId/ZoneId/Schemas/ObjectHeader)\n- `flywheel_connectors-1n78.3` (canonical CBOR + schema hash)\n- `flywheel_connectors-1n78.5` (crypto primitives)\n\nPrimary Tests/Conformance:\n- `flywheel_connectors-1n78.21.1` (golden vectors + CDDL)\n- `flywheel_connectors-1n78.21.2` (fuzz: parsers/decoders/verifiers)\n\nNotes / Key Requirements:\n- Canonical identifier formats; reject non-canonical forms (no silent normalization).\n- ObjectHeader rules + retention semantics and root pointers.\n- HPKE sealed box shape requirements (used by zone crypto).\n- ZoneCheckpoint is the “root pointer” (GC/security).\n\n## Spec §4: Symbol Layer\nOwners:\n- `flywheel_connectors-1n78.12` (FCPS framing + SymbolEnvelope AEAD)\n- `flywheel_connectors-1n78.24` (session auth, key schedule, anti-replay)\n- `flywheel_connectors-1n78.14` (RaptorQ + chunking)\n- `flywheel_connectors-1n78.17.2` (multipath + transport priority)\n\nPrimary Tests/Conformance:\n- `flywheel_connectors-1n78.21.1` (golden vectors)\n- `flywheel_connectors-1n78.21.2` (fuzz)\n- `flywheel_connectors-1n78.21.3` (interop)\n\nNotes / Key Requirements:\n- Session MACs required for throughput; Poly1305 key reuse rules.\n- MTU safety and explicit frame size limits.\n- Multipath delivery must respect ZoneTransportPolicy.\n\n## Spec §5: Zone Architecture\nOwners:\n- `flywheel_connectors-1n78.26` (ZoneDefinition/ZonePolicy/roles/resource objects/reason codes)\n- `flywheel_connectors-1n78.16` (Zone ↔ Tailscale tag mapping, port gating)\n- `flywheel_connectors-1n78.6` (zone crypto key distribution)\n- `flywheel_connectors-6o25.5` (optional MLS/TreeKEM PCS zones)\n\nPrimary Tests/Conformance:\n- `flywheel_connectors-1n78.26.1` (policy decision vectors)\n\nNotes / Key Requirements:\n- Zone hierarchy + mapping to Tailscale ACL tags.\n- ZoneDefinitionObject + ZonePolicyObject must be enforceable and auditable.\n\n## Spec §6: Provenance and Taint Tracking\nOwners:\n- `flywheel_connectors-1n78.8` (provenance model, taint propagation, elevation protocol)\n- `flywheel_connectors-1n78.11` (DecisionReceipt evidence + explainability)\n\nPrimary Tests/Conformance:\n- `flywheel_connectors-1n78.36.4` (E2E taint/approval flow)\n\nNotes / Key Requirements:\n- Taint propagation is mechanical.\n- Elevation/declassification requires ApprovalTokens and receipts.\n\n## Spec §7: Capability System\nOwners:\n- `flywheel_connectors-1n78.7` (CapabilityObject + COSE_Sign1 tokens)\n- `flywheel_connectors-1n78.18` (egress proxy + NetworkConstraints enforcement)\n- `flywheel_connectors-kt9r` (credential injection model + zeroize discipline)\n- `flywheel_connectors-1n78.26` (roles/bundles, placement policy)\n\nPrimary Tests/Conformance:\n- `flywheel_connectors-1n78.21.5` (mechanical compliance runner)\n- `flywheel_connectors-1n78.21.3` (interop tokens/handshake)\n\nNotes / Key Requirements:\n- Capability IDs MUST NOT encode hostnames/ports; use `network_constraints`.\n- Risky/Dangerous requires holder binding proof where applicable.\n- Egress proxy credential injection is normative for strict/moderate.\n\n## Spec §8: Mesh Architecture\nOwners:\n- `flywheel_connectors-1n78.17` (mesh node baseline)\n- `flywheel_connectors-1n78.17.3` (admission control + anti-amplification + quarantine enforcement)\n- `flywheel_connectors-1n78.17.5` (gossip baseline)\n- `flywheel_connectors-1n78.25` (trust/quorum/degraded mode semantics)\n\nPrimary Tests/Conformance:\n- `flywheel_connectors-1n78.21.4` (system E2E harness)\n\nNotes / Key Requirements:\n- Admission control is mandatory; symbol request bounding is the big DoS surface.\n- Distributed state must be convergent; quarantine prevents storage poisoning.\n\n## Spec §9: Wire Protocol\nOwners:\n- `flywheel_connectors-1n78.12` (FCPS)\n- `flywheel_connectors-1n78.13` (FCPC)\n- `flywheel_connectors-1n78.24` (sessions)\n- `flywheel_connectors-1n78.17.4` (SymbolRequest bounding + targeted repair plumbing)\n\nPrimary Tests/Conformance:\n- `flywheel_connectors-1n78.21.1` (golden vectors)\n- `flywheel_connectors-1n78.21.2` (fuzz)\n- `flywheel_connectors-1n78.21.3` (interop)\n\nNotes / Key Requirements:\n- SymbolRequest bounding and anti-amplification rules are NORMATIVE.\n- Control-plane object model is canonical; retention classes are enforced.\n- SimulateRequest/Response + CostEstimate are NORMATIVE control-plane objects; SDK support: `flywheel_connectors-1n78.20.2`; tests: `flywheel_connectors-r1sl`.\n\n## Spec §10: Connector Model\nOwners:\n- `flywheel_connectors-1n78.20` (SDK: standard method surface, typed schemas)\n- `flywheel_connectors-1n78.33` (connector state: persisted, snapshot, singleton-writer leases)\n- `flywheel_connectors-1n78.34` (leases)\n- `flywheel_connectors-1n78.31` (provisioning automation patterns)\n\nPrimary Tests/Conformance:\n- `flywheel_connectors-1n78.21.5` (mechanical compliance runner)\n- `flywheel_connectors-h32` (connector test standards)\n\nNotes / Key Requirements:\n- Connectors implement standard methods.\n- Stateful connectors externalize canonical state to mesh.\n\n## Spec §11: Connector Manifest\nOwners:\n- `flywheel_connectors-1n78.19` (manifest TOML + embedding + validation)\n- `flywheel_connectors-1n78.18` (sandbox profiles + egress enforcement)\n- `flywheel_connectors-1n78.27` (supply chain verification, mirroring)\n\nPrimary Tests/Conformance:\n- `flywheel_connectors-1n78.21.5` (static + dynamic checks)\n\nNotes / Key Requirements:\n- Manifests extractable without execution (`--manifest`).\n- Sandbox profiles + network guard are enforceable.\n\n## Spec §12: Automation Recipes\nOwners:\n- `flywheel_connectors-1n78.31` (recipe model + provisioning interface)\n\nPrimary Tests/Conformance:\n- Connector-specific provisioning test beads (per connector epic)\n\nNotes / Key Requirements:\n- Minimize human prompts; automate OAuth/webhook setup.\n\n## Spec §13: Registry and Supply Chain\nOwners:\n- `flywheel_connectors-1n78.27` (verify/install/mirror)\n- `flywheel_connectors-1n78.27.2` (optional transparency/TUF/sigstore)\n- `flywheel_connectors-1n78.9` (revocation of binaries)\n\nPrimary Tests/Conformance:\n- `flywheel_connectors-1n78.27.1` (registry verification + mirroring tests)\n\nNotes / Key Requirements:\n- Registries are sources, not dependencies.\n- Binaries are content-addressed and can be symbol-distributed.\n\n## Spec §14: Lifecycle Management\nOwners:\n- `flywheel_connectors-y1q8` (connector activate/update/rollback + crash-loop detection)\n- `flywheel_connectors-1n78.9` (revocation objects/heads/freshness)\n- `flywheel_connectors-7isb` (checkpoint/frontier advancement protocol)\n- `flywheel_connectors-1n78.27` (supply chain + install/mirror + update/rollback artifacts)\n\nPrimary Tests/Conformance:\n- `flywheel_connectors-dlfp` (lifecycle activation/update/rollback tests)\n- `flywheel_connectors-1n78.36.3` (revocation E2E)\n\nNotes / Key Requirements:\n- Activation MUST fail closed unless verification + policy ceilings + sandbox creation succeed.\n- Revocations enforced before use; freshness policy is mechanical.\n- Fork detection halts advancement unless explicit degraded mode.\n\n## Spec §15: Device-Aware Execution\nOwners:\n- `flywheel_connectors-1n78.34` (leases)\n- `flywheel_connectors-wwq8` (DeviceProfile schema + fitness)\n- `flywheel_connectors-1n78.17.6` (execution planner)\n\nPrimary Tests/Conformance:\n- `flywheel_connectors-1n78.34.1` (lease semantics tests)\n- `flywheel_connectors-u4ej` (DeviceProfile unit tests)\n\nNotes / Key Requirements:\n- Leases are fenced locks; quorum rules are explicit.\n- Planner decisions are explainable and deterministic.\n\n## Spec §16: Computation Migration (Full)\nOwners:\n- `flywheel_connectors-6o25.4` (migration protocol)\n\nPrimary Tests/Conformance:\n- `flywheel_connectors-fbql` (migration tests)\n\nNotes / Key Requirements:\n- Checkpoint objects + lease handoff before resume.\n- Fail closed under partition to prevent double execution.\n\n## Spec §17: Security Model\nOwners:\n- `flywheel_connectors-1n78.18` (sandbox/egress)\n- `flywheel_connectors-1n78.25` (trust/quorum/degraded mode)\n- `flywheel_connectors-1n78.27` (supply chain)\n- `flywheel_connectors-6o25.*` (full-profile hardening)\n\nPrimary Tests/Conformance:\n- `flywheel_connectors-1n78.21.2` (fuzz/adversarial)\n\nNotes / Key Requirements:\n- Defense-in-depth; threshold secrets; source diversity.\n\n## Spec §18: Trust Model and Byzantine Assumptions\nOwners:\n- `flywheel_connectors-1n78.25` (n/f assumptions, quorum rules, degraded mode semantics)\n\nPrimary Tests/Conformance:\n- `flywheel_connectors-1n78.25.*` (tests as defined under that bead)\n\nNotes / Key Requirements:\n- Explicit degraded mode; fail-closed semantics for high-safety tiers.\n\n## Spec §19: Tailscale Integration\nOwners:\n- `flywheel_connectors-1n78.16` (tailscale client + tag mapping)\n- `flywheel_connectors-1n78.32` (device enrollment/removal)\n- `flywheel_connectors-1n78.17.2` (DERP/Funnel policy controls)\n\nPrimary Tests/Conformance:\n- `flywheel_connectors-wyz0` (tailscale integration unit tests)\n\nNotes / Key Requirements:\n- Enrollment/removal is normative; removal triggers revocations.\n\n## Spec §20: RaptorQ Deep Integration\nOwners:\n- `flywheel_connectors-1n78.37` (epoch event buffer + binary distribution)\n- `flywheel_connectors-1n78.14` (RaptorQ primitives)\n- `flywheel_connectors-1n78.15` (stores/repair/quarantine)\n- `flywheel_connectors-1n78.27` (binary verification + mirroring)\n\nPrimary Tests/Conformance:\n- `flywheel_connectors-1n78.37.1` (epoch/binary distribution tests)\n- `flywheel_connectors-1n78.36.6` (E2E epoch replay + mesh-only install)\n\nNotes / Key Requirements:\n- Epoch finalization must be deterministic and bounded.\n- Binary bytes are untrusted until verified; quarantine-by-default.\n\n## Spec §21: Offline Access\nOwners:\n- `flywheel_connectors-31c7` (offline capability + predictive pre-staging)\n- `flywheel_connectors-1n78.15` (background repair + coverage evaluation)\n\nPrimary Tests/Conformance:\n- `flywheel_connectors-f3xi` (offline capability unit tests)\n- `flywheel_connectors-1n78.36.5` (E2E offline/repair)\n\nNotes / Key Requirements:\n- Coverage is measurable; repair is periodic and bounded.\n\n## Spec §22: Agent Integration\nOwners:\n- `flywheel_connectors-1n78.30` (introspection + MCP descriptors)\n\nPrimary Tests/Conformance:\n- `flywheel_connectors-1n78.36.*` (E2E scripts validate explainability)\n\nNotes / Key Requirements:\n- Agents can query schemas/ops/caps; MCP integration is first-class.\n\n## Spec §23: Observability and Audit\nOwners:\n- `flywheel_connectors-1n78.28` (structured logs + metrics)\n- `flywheel_connectors-1n78.11` (audit chain + DecisionReceipt)\n- `flywheel_connectors-1n78.35` (testing/logging requirements)\n\nPrimary Tests/Conformance:\n- `flywheel_connectors-1n78.36.*` (E2E requires structured logs)\n\nNotes / Key Requirements:\n- Structured logs MUST include trace/correlation.\n- Audit chain advancement requires quorum unless degraded.\n\n## Spec §24: Error Taxonomy\nOwners:\n- `flywheel_connectors-1n78.29` (FCP-XXXX ranges, retry semantics, AI recovery hints)\n\nPrimary Tests/Conformance:\n- included in all E2E harness scripts (error codes must be stable)\n\nNotes / Key Requirements:\n- Retryable semantics are explicit; recovery hints are safe (no secret leakage).\n\n## Spec §25: Implementation Phases\nOwners:\n- MVP: `flywheel_connectors-1n78` + children\n- Full: `flywheel_connectors-6o25` + children\n\nPrimary Tests/Conformance:\n- `flywheel_connectors-1n78.21` (suite distinguishes MVP vs Full)\n\nNotes / Key Requirements:\n- Profiles are conformance targets; tests should be profile-aware.\n\n## Spec §27: Conformance Requirements\nOwners:\n- `flywheel_connectors-1n78.21.1` (CDDL + golden vectors)\n- `flywheel_connectors-1n78.21.2` (fuzz)\n- `flywheel_connectors-1n78.21.3` (interop)\n- `flywheel_connectors-1n78.21.4` (system E2E harness)\n- `flywheel_connectors-1n78.21.5` (mechanical connector compliance)\n\nPrimary Tests/Conformance:\n- same as above\n\nNotes / Key Requirements:\n- MUST ship CDDL for normative CBOR objects.\n- MUST include fuzz targets for parse/verify hot surfaces.\n\n## Spec Appendices (A–G)\nOwners:\n- Appendix A (FZPF v0.1 JSON Schema): `flywheel_connectors-1n78.21.6`\n- Appendix B (RaptorQ configuration + chunking): `flywheel_connectors-1n78.14`\n- Appendix C (Reference connector patterns): `flywheel_connectors-lszk.5`\n- Appendix D (SDK crates list): informational; reflected by crate layout owned by `flywheel_connectors-1n78.2` and the SDK surface owned by `flywheel_connectors-1n78.20`.\n- Appendix E (Conformance checklist): `flywheel_connectors-1n78.21`, `flywheel_connectors-1n78.21.5`, `flywheel_connectors-h32`\n- Appendix F (Golden decision vectors): `flywheel_connectors-1n78.26.1` (policy decisions) + `flywheel_connectors-1n78.21.1` (byte-level canonicalization vectors)\n- Appendix G (Transport priority): `flywheel_connectors-1n78.17.2`\n\nNotes / Key Requirements:\n- Appendix A/F currently point at V1 appendices in the spec; the reference implementation MUST ship equivalent artifacts under the V2 conformance suite (owned by the beads above).\n\n---\n\n# B) Connector Reference Doc Coverage — `docs/fcp_model_connectors_rust.md`\n\nThis doc is the connector-facing “how to implement correctly in Rust” view. Map its major sections to owners:\n\n## Doc §1: Scope and Alignment\nOwners:\n- `flywheel_connectors-1n78.1` (this matrix)\n- `flywheel_connectors-lszk.5` (connector planning template)\n\n## Doc §2: Connector Model and Lifecycle\nOwners:\n- `flywheel_connectors-1n78.20` (SDK standard method surface)\n- `flywheel_connectors-1n78.33` (state model)\n- `flywheel_connectors-1n78.34` (leases)\n\n## Doc §3: Control-Plane Protocol (FCP2-SYM)\nOwners:\n- `flywheel_connectors-1n78.12` (FCPS)\n- `flywheel_connectors-1n78.13` (FCPC)\n- `flywheel_connectors-1n78.24` (sessions)\n\n## Doc §4: Canonical Types and Serialization\nOwners:\n- `flywheel_connectors-1n78.3` (canonical CBOR + schema hash)\n- `flywheel_connectors-1n78.4` (ObjectId/SchemaId/ObjectHeader)\n- `flywheel_connectors-1n78.6` (ZoneKeyManifest)\n\n## Doc §5: Zones, Approval Tokens, Provenance, and Taint\nOwners:\n- `flywheel_connectors-1n78.26` (zones/policy)\n- `flywheel_connectors-1n78.8` (approval + taint)\n\n## Doc §6: Capability System\nOwners:\n- `flywheel_connectors-1n78.7` (capability tokens)\n- `flywheel_connectors-1n78.18` (egress proxy + constraints)\n\n## Doc §7: Invoke, Receipts, and Event Envelopes\nOwners:\n- `flywheel_connectors-1n78.10` (OperationIntent/Receipt)\n- `flywheel_connectors-1n78.20` (SDK request/response surface)\n\n## Doc §8: Streaming, Replay, and Acks\nOwners:\n- `flywheel_connectors-1n78.20.1` (streaming/replay/acks)\n- `flywheel_connectors-1n78.33` (cursor/state persistence)\n\n## Doc §9: Error Taxonomy\nOwners:\n- `flywheel_connectors-1n78.29`\n\n## Doc §10: Agent Integration\nOwners:\n- `flywheel_connectors-1n78.30`\n\n## Doc §11: Connector Manifest and Embedding\nOwners:\n- `flywheel_connectors-1n78.19`\n\n## Doc §12: Sandbox Profiles and Enforcement\nOwners:\n- `flywheel_connectors-1n78.18`\n\n## Doc §13: Automation Recipes and Provisioning\nOwners:\n- `flywheel_connectors-1n78.31`\n\n## Doc §14: Registry and Supply Chain\nOwners:\n- `flywheel_connectors-1n78.27`\n\n## Doc §15: Lifecycle Management and Revocation\nOwners:\n- `flywheel_connectors-1n78.9`\n\n## Doc §16: Device-Aware Execution and Leases\nOwners:\n- `flywheel_connectors-1n78.34`\n- `flywheel_connectors-wwq8`\n\n## Doc §17: Observability and Audit\nOwners:\n- `flywheel_connectors-1n78.28`\n- `flywheel_connectors-1n78.11`\n\n## Doc §18–20: Connector Archetypes, Skeleton, Checklist\nOwners:\n- `flywheel_connectors-lszk.5` (planning template)\n- `flywheel_connectors-h32` (connector testing standards)\n- `flywheel_connectors-1n78.21.5` (mechanical compliance runner)\n\n---\n\n# C) README Coverage — `README.md`\n\nThis is a high-level narrative doc. Map its major sections to the engineering owners:\n\n- Axioms / Terminology / Architecture: `flywheel_connectors-1n78.1`, `flywheel_connectors-1n78.3`, `flywheel_connectors-1n78.4`\n- Zone Architecture + Tailscale mapping: `flywheel_connectors-1n78.16`, `flywheel_connectors-1n78.26`, `flywheel_connectors-1n78.6`\n- Symbol layer + frames: `flywheel_connectors-1n78.12`, `flywheel_connectors-1n78.24`, `flywheel_connectors-1n78.14`\n- Mesh architecture: `flywheel_connectors-1n78.17`, `flywheel_connectors-1n78.25`\n- Connector binary structure + sandbox: `flywheel_connectors-1n78.18`, `flywheel_connectors-1n78.19`, `flywheel_connectors-1n78.20`\n- Security model (receipts/revocation/audit): `flywheel_connectors-1n78.10`, `flywheel_connectors-1n78.9`, `flywheel_connectors-1n78.11`\n- Registry architecture: `flywheel_connectors-1n78.27`\n- Performance targets: `flywheel_connectors-1n78.23`\n- Ops \u0026 debugging (doctor/explain/audit/repair): `flywheel_connectors-iqrb`, `flywheel_connectors-1n78.22`\n- Profiles/roadmap: `flywheel_connectors-1n78` (MVP), `flywheel_connectors-6o25` (Full)\n- Connector catalog (tiers): `flywheel_connectors-lszk` (connector library)\n\n---\n\n## Acceptance Criteria\n- Every spec chapter that has normative requirements has at least one explicit owner bead listed above.\n- Spec §20 is explicitly owned by `flywheel_connectors-1n78.37` (and tested).\n- The E2E vertical slice has scenario coverage for allow/deny/revocation/taint/offline (and the new epoch+binary scenario).\n- Running `bd dep cycles` reports no cycles.\n\n\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:18:32.796948617-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:20:55.49742895-05:00","labels":["fcp2","mvp","planning"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.1","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:18:32.798156854-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.10","title":"[FCP2] Exactly-Once Semantics: OperationIntent + OperationReceipt + Idempotency","description":"# [FCP2] Exactly-Once Semantics: OperationIntent + OperationReceipt + Idempotency\n\n## Goal\nProvide exactly-once semantics for external side effects (where required) by combining:\n- an idempotency key\n- an OperationIntent pre-commit object\n- an OperationReceipt object that is returned on retries\n\n## Required behavior (spec-aligned)\n- For Strict idempotency and for Risky/Dangerous operations:\n  - MeshNode MUST store OperationIntent (Required retention) **before** executing external side effects.\n  - OperationIntent SHOULD bind to the execution lease fencing token (`lease_seq`) when applicable.\n  - OperationReceipt MUST reference the OperationIntent.\n  - Retries with the same idempotency key must return the prior receipt without re-executing.\n\n## Subtasks\n- Define OperationIntent and OperationReceipt schemas (include refs/evidence fields; include optional upstream idempotency handle).\n- Define storage/indexing model to look up receipts by idempotency key.\n- Integrate with audit: emitting audit events on intent and receipt.\n\n## Acceptance Criteria\n- Unit tests: retry returns same receipt without re-execution.\n- Fault injection tests: crash between intent and receipt is handled safely (detect and reconcile incomplete intents).\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:19:40.11591418-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:22:23.270737053-05:00","labels":["fcp2","mvp","receipts","security"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.10","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:19:40.11717702-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.10","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T01:21:42.677060048-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.10","depends_on_id":"flywheel_connectors-1n78.7","type":"blocks","created_at":"2026-01-15T01:21:42.722662857-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.10","depends_on_id":"flywheel_connectors-1n78.34","type":"blocks","created_at":"2026-01-15T01:51:14.381303697-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.10","depends_on_id":"flywheel_connectors-1n78.29","type":"blocks","created_at":"2026-01-15T01:51:14.431196758-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.11","title":"[FCP2] Audit + Explainability: AuditEvent Chain, AuditHead, ZoneCheckpoint, DecisionReceipt","description":"# [FCP2] Audit + Explainability: AuditEvent Chain, AuditHead, ZoneCheckpoint, DecisionReceipt\n\n## Goal\nMake all security-relevant actions tamper-evident and explainable.\n\n## Required artifacts\n- AuditEvent: append-only hash-linked chain per zone.\n- AuditHead: quorum-signed checkpoint.\n- ZoneCheckpoint: quorum-signed frontier of enforceable heads (revocation + audit) and policy/config heads.\n- DecisionReceipt: content-addressed \"why allowed/denied\" record with stable reason_code and evidence ObjectIds.\n\n## Required behaviors\n- Emit DecisionReceipt for denied Risky/Dangerous operations.\n- Maintain monotonic sequence numbers for O(1) freshness checks.\n- Fork detection: multiple heads for same epoch must halt advancement and alert.\n\n## Subtasks\n- Define event schemas and hashing rules.\n- Define quorum rules (n-f for CriticalWrite by default; configurable).\n- Integrate TraceContext propagation (optional but must be preserved when present).\n\n## Acceptance Criteria\n- Unit tests: audit chain hash linking works.\n- Unit tests: decision receipt includes evidence and stable reason code.\n- Property tests: monotonic seq invariants.\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:19:40.186594509-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T01:19:40.186594509-05:00","labels":["audit","fcp2","mvp","security"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.11","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:19:40.200115165-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.11","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T01:21:42.774120613-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.11","depends_on_id":"flywheel_connectors-1n78.5","type":"blocks","created_at":"2026-01-15T01:21:42.821736147-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.11","depends_on_id":"flywheel_connectors-1n78.9","type":"blocks","created_at":"2026-01-15T01:21:42.866384477-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.11","depends_on_id":"flywheel_connectors-1n78.10","type":"blocks","created_at":"2026-01-15T01:21:42.909739449-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.11","depends_on_id":"flywheel_connectors-1n78.25","type":"blocks","created_at":"2026-01-15T01:51:14.326992853-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.12","title":"[FCP2] Wire Protocol (Data Plane): FCPS Frames + SymbolEnvelope AEAD + Session MACs","description":"# [FCP2] Wire Protocol (Data Plane): FCPS Frames + SymbolEnvelope AEAD + Session MACs\n\n## Goal\nImplement the symbol-native data plane: FCPS frames carrying encrypted symbol payloads.\n\nThis issue owns **byte-accurate encoding/decoding** of:\n- the authenticated FCPS datagram envelope (session_id/seq/mac)\n- the inner FCPS frame (114-byte fixed header + symbol records)\n- per-symbol AEAD rules and AAD binding\n\n## On-wire envelope (NORMATIVE)\nFCPS frames are carried inside an authenticated datagram envelope bound to a MeshSession:\n\n```\nFCPS_DATAGRAM:\n  Bytes 0-15:   session_id [16]\n  Bytes 16-23:  seq (u64 LE)\n  Bytes 24-39:  mac [16] (Suite1/Suite2; truncated)\n  Bytes 40..:   fcps_frame_bytes (exact FCPS frame bytes per §4.3)\n```\n\nMAC computation (NORMATIVE):\n- `mac = MAC(k_mac_dir, session_id || direction || seq || fcps_frame_bytes)[:16]`\n- `direction = 0x00` for initiator→responder, `0x01` for responder→initiator\n\nMTU rule (NORMATIVE):\n- `len(FCPS_DATAGRAM) ≤ max_datagram_bytes` (default: 1200; may be negotiated via Session TransportLimits)\n\n## FCPS frame format (NORMATIVE; fixed 114-byte header)\n```\nBytes 0-3:    Magic (\"FCPS\")\nBytes 4-5:    Version (u16 LE)\nBytes 6-7:    Flags (u16 LE)\nBytes 8-11:   Symbol Count (u32 LE)\nBytes 12-15:  Total Payload Length (u32 LE)\nBytes 16-47:  Object ID (32 bytes)\nBytes 48-49:  Symbol Size (u16 LE, default 1024)\nBytes 50-57:  Zone Key ID (8 bytes)\nBytes 58-89:  Zone ID hash (32 bytes)\nBytes 90-97:  Epoch ID (u64 LE)\nBytes 98-105: Sender Instance ID (u64 LE; reboot-safety)\nBytes 106-113: Frame Seq (u64 LE; per-sender monotonic)\nBytes 114+:   Symbol records (concatenated)\n```\n\n**NORMATIVE note:** there is **no separate checksum**. Integrity is provided by:\n- per-symbol AEAD auth tags (content-plane)\n- the MeshSession MAC envelope (data-plane)\n\n### Symbol record format (NORMATIVE)\nEach symbol record is:\n- `esi` (u32 LE)\n- `k` (u16 LE)\n- `data` (N bytes)\n- `auth_tag` (16 bytes)\n\n## Frame flags (must match spec)\nImplement `FrameFlags` exactly as the spec defines, including at least:\n- `REQUIRES_ACK`, `COMPRESSED`, `ENCRYPTED`, `RESPONSE`, `ERROR`\n- `STREAMING`, `STREAM_END`, `HAS_CAP_TOKEN`, `ZONE_CROSSING`, `PRIORITY`\n- `RAPTORQ` (default), `CONTROL_PLANE`\n\nThis issue owns the **bit-level parsing/serialization** of flags; the **semantic handling** (acks, streaming, control-plane routing) is owned by MeshNode/FCPC.\n\n## Per-symbol AEAD (NORMATIVE)\nSecurity goal: deterministic, replay-resistant, reboot-safe encryption with bounded parsing.\n\n### Per-sender subkey\nDerive a per-sender subkey from the zone symmetric key:\n- `sender_key = HKDF-SHA256(ikm=zone_symmetric_key, salt=zone_key_id, info=\"FCP2-SENDER-KEY-V1\" || sender_node_id || sender_instance_id_le)`\n\n### Deterministic nonce\nNonce derivation is deterministic (no RNG in hot path):\n- ChaCha20-Poly1305 (12-byte): `nonce12 = frame_seq_le || esi_le`\n- XChaCha20-Poly1305 (24-byte): `nonce24 = sender_instance_id_le || frame_seq_le || esi_le || 0u32`\n\n### AAD binding (MUST match spec exactly)\nThe AEAD associated data MUST be fixed-size and interop-stable. For each symbol it MUST include:\n- `object_id` (32)\n- `esi` (u32)\n- `k` (u16)\n- `zone_id_hash` (32)\n- `zone_key_id` (8)\n- `epoch_id` (u64)\n\n**Important:** `sender_instance_id` and `frame_seq` are already bound cryptographically via the deterministic nonce and per-sender subkey derivation. They are not part of the SymbolEnvelope AAD in the spec.\n\n## Strict bounds / DoS resistance (MUST)\n- Reject frames where computed lengths do not match `total_payload_len`.\n- Reject frames/datagrams exceeding configured MTU/bounds.\n- Avoid unbounded allocations for malformed `symbol_count` or `symbol_size`.\n\n## Degraded/bootstrap mode (spec surface)\nThe spec includes a per-frame signature format (Ed25519) for bootstrap/degraded scenarios. This implementation should support it as a **non-default** path:\n- `SignedFcpsFrame { frame, source_id, timestamp, signature }`\n\n## Acceptance Criteria\n- Golden vectors for:\n  - FCPS_DATAGRAM MAC computation\n  - FCPS frame parsing/encoding\n  - per-symbol AEAD encrypt/decrypt (nonce + AAD correctness)\n  - representative FrameFlags encodings\n- Fuzz target for FCPS datagram + inner frame parsing (lengths, malformed counts, flags).\n- Benchmarks for parse+verify hot path.\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:19:40.254833888-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:55:01.589181562-05:00","labels":["fcp2","mvp","protocol","security"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.12","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:19:40.256158785-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.12","depends_on_id":"flywheel_connectors-1n78.5","type":"blocks","created_at":"2026-01-15T01:21:42.95838802-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.12","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T01:21:43.004036335-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.12","depends_on_id":"flywheel_connectors-1n78.6","type":"blocks","created_at":"2026-01-15T01:21:43.05245885-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.12","depends_on_id":"flywheel_connectors-1n78.24","type":"blocks","created_at":"2026-01-15T01:51:14.176560069-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.13","title":"[FCP2] Wire Protocol (Control Plane): FCPC Frames + Canonical ControlPlaneObject Retention","description":"# [FCP2] Wire Protocol (Control Plane): FCPC Frames + Canonical ControlPlaneObject Retention\n\n## Goal\nImplement reliable, ordered, backpressured control-plane framing for canonical objects (invoke/response/receipts/approvals/audit/etc).\n\nFCPC exists to make small control-plane messages fast and reliable without forcing everything through RaptorQ.\n\n## Normative transport requirements\n- Implementations **MUST** support FCPC over **QUIC streams** inside the tailnet.\n- Implementations **MAY** support FCPC over TCP as a fallback.\n\n## Security requirements (NORMATIVE)\n- FCPC messages MUST be bound to an authenticated MeshSession.\n- FCPC payloads MUST be authenticated using `k_ctx` derived from the MeshSession key schedule.\n- Implementations SHOULD encrypt FCPC payloads (AEAD) using `k_ctx`.\n\n## Control-plane object model (NORMATIVE)\nAll control-plane message types MUST have a canonical CBOR object representation with SchemaId/ObjectId.\n\n### ControlPlaneObject\n- `ObjectHeader`\n- `body` = canonical payload bytes (`schema_hash || canonical_cbor`)\n\n### Retention classes (NORMATIVE)\nSome control-plane objects MUST be stored (auditable/replayable), others MAY be ephemeral.\n\nExamples:\n- **Required**: invoke/response, receipts, approvals, secret access, revocations, audit events/heads\n- **Ephemeral**: health, handshake objects, decode_status, symbol_ack, introspect, configure, simulate\n\n## FCPC frame format (NORMATIVE)\nConceptual frame:\n\n```\nmagic = \"FCPC\"\nversion = u16\nsession_id = [16]\nseq = u64 (per-direction monotonic)\nflags = u16\nlen = u32\nciphertext[len] (AEAD under k_ctx)\ntag = [16]\n```\n\nAEAD rules:\n- Nonce derived deterministically from `seq` (direction-specific).\n- AAD includes at minimum `session_id || seq || flags`.\n\nReplay protection:\n- Receivers MUST enforce a bounded replay/reorder window (same scale as SessionReplayPolicy.max_reorder_window).\n- `seq` MUST be strictly increasing per direction for an authenticated session.\n\n## Transport options (spec surface)\nThe spec describes multiple ways to transport control-plane objects:\n1. **FCPC (required)**: QUIC stream framing using `k_ctx`\n2. **Direct local (optional)**: canonical bytes over local connector transport (may reuse FCPC framing)\n3. **Mesh fallback (optional but important)**: encode canonical ControlPlaneObjects to symbols and send inside FCPS frames with `FrameFlags::CONTROL_PLANE` set\n\nThis issue owns (1) and a reusable framing library. (3) is implemented/owned by MeshNode because it couples to routing, stores, and repair.\n\n## Deliverables\n- `FcpcFrame` encoder/decoder with strict bounds checks and no unbounded allocation.\n- Backpressure/flow control integration with QUIC stream semantics.\n- Retention enforcement hooks: Required objects are stored; Ephemeral objects may be dropped after processing.\n\n## Tests\n- Unit tests:\n  - seq ordering\n  - replay window enforcement\n  - backpressure behavior under slow consumers\n- Fuzz target for FCPC frame parsing.\n\n## Acceptance Criteria\n- FCPC can carry InvokeRequest/Response + receipts end-to-end in the system harness.\n- Conformance fuzz target runs without panics.\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:19:40.303037891-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:17:04.471604363-05:00","labels":["fcp2","mvp","protocol"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.13","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:19:40.30425224-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.13","depends_on_id":"flywheel_connectors-1n78.12","type":"blocks","created_at":"2026-01-15T01:21:43.09858169-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.13","depends_on_id":"flywheel_connectors-1n78.5","type":"blocks","created_at":"2026-01-15T01:21:43.147006739-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.13","depends_on_id":"flywheel_connectors-1n78.24","type":"blocks","created_at":"2026-01-15T01:51:14.225765074-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.13","depends_on_id":"flywheel_connectors-1n78.3","type":"blocks","created_at":"2026-01-15T02:17:10.285474278-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.13","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T02:17:10.335552615-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.14","title":"[FCP2] RaptorQ + Chunking: Symbol Encoding/Decoding, ChunkedObjectManifest, Decode DoS Mitigation","description":"# [FCP2] RaptorQ + Chunking: Symbol Encoding/Decoding, ChunkedObjectManifest, Decode DoS Mitigation\n\n## Goal\nImplement symbol encoding/decoding for mesh objects and large payload handling.\n\n## Required behavior (spec-aligned)\n### RaptorQ encoding\n- Objects MUST be representable as RaptorQ symbols with fixed symbol size (default: 1024 bytes).\n- Encoding should support repair symbols controlled by a stable, interop-safe policy.\n\nSuggested baseline config (matches spec defaults; policy-tunable):\n- `symbol_size`: 1024\n- `repair_ratio_bps`: 500 (5%)\n- `max_object_size`: 64MB\n- `decode_timeout`: 30s\n\n### ChunkedObjectManifest (NORMATIVE for large objects)\n- If object size exceeds `max_chunk_threshold` (default: 256KB), it MUST be represented as a `ChunkedObjectManifest` referencing ordered `RawChunk` objects.\n- Default `chunk_size`: 64KB.\n\nChunking is required to:\n- bound memory spikes\n- enable targeted repair (repair a missing chunk, not a whole multi-MB payload)\n- allow partial retrieval\n\n### Decode DoS mitigation (NORMATIVE intent)\nDecoding MUST be bounded:\n- enforce timeouts\n- bound concurrent decodes\n- bound allocation and symbol buffering\n\n## Subtasks\n- Select and integrate a RaptorQ implementation (crate choice must be vetted).\n- Define encoding policy: repair symbols as basis points (no floats).\n- Define ChunkedObjectManifest + RawChunk schemas.\n- Implement bounded decode scheduling hooks (for admission control integration).\n\n## Acceptance Criteria\n- Unit tests: encode-\u003edecode roundtrip.\n- Adversarial corpus: \"decode DoS\" inputs to ensure timeouts/bounds.\n- Benchmarks for 1MB reconstruction and for chunked reconstruction.\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:19:40.352087868-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:04:05.867578975-05:00","labels":["fcp2","mvp","raptorq"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.14","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:19:40.353267071-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.14","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T01:21:43.218527393-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.15","title":"[FCP2] Stores: Object Store + Symbol Store + Placement Policy + Background Repair + Retention/GC","description":"# [FCP2] Stores: Object Store + Symbol Store + Placement Policy + Background Repair + Retention/GC\n\n## Goal\nMake offline resilience real by implementing:\n- content-addressed object store (canonical objects)\n- symbol store (partial availability)\n- placement policies and measurable coverage\n- periodic repair loop (targeted + rate-limited)\n- retention classes and well-defined GC roots\n- quarantine admission pipeline for untrusted/unreferenced objects\n\n## Required behaviors (spec-aligned)\n### Coverage is measurable\nNodes must quantify symbol/object availability using stable, interop-safe metrics (basis points):\n- coverage ratio (bps)\n- max concentration (avoid single-node dependency)\n- distinct-node count\n\n### Repair is bounded and convergent\n- Repair loop must push coverage toward policy targets over time.\n- Repair must be rate-limited and account for admission-control budgets.\n\n### Retention + GC roots are explicit\n- **Store retention** uses `RetentionClass` semantics for stored objects (Pinned | Lease{expires_at} | Ephemeral).\n- **Control-plane retention** (Required vs Ephemeral) is a separate concept owned by FCPC/control-plane and maps to store retention by policy.\n- GC roots include the zone’s pinned `ZoneCheckpoint` (and other pinned policy/config heads).\n\n### Quarantine admission pipeline (NORMATIVE)\nTo prevent storage exhaustion from injected garbage ObjectIds:\n- Unknown/unreferenced ObjectIds MUST be stored in a **bounded quarantine store** by default.\n- Quarantined ObjectIds MUST NOT be inserted into global gossip filters/state until promoted.\n- Promotion from quarantine → admitted is allowed only if:\n  - object becomes reachable from the zone’s pinned `ZoneCheckpoint`, OR\n  - object is explicitly requested by an authenticated peer via a bounded request, OR\n  - object is explicitly pinned locally by user action/policy.\n- Promotion MUST require successful reconstruction + schema verification (prevents admitting garbage as “real”).\n\n## Subtasks\n- Define ObjectPlacementPolicy and CoverageEvaluation (basis points for interop stability).\n- Implement ObjectStore + SymbolStore interfaces with strict bounds.\n- Implement RepairController run loop with rate limiting + targeted repair support.\n- Define retention classes and GC roots.\n- Implement quarantine store quotas (per-zone bytes/objects + TTL eviction) and promotion logic.\n\n## Acceptance Criteria\n- Unit tests for placement evaluation + retention semantics.\n- Simulation tests for repair loop improving coverage.\n- Adversarial tests for quarantine quotas + promotion rules.\n- Benchmarks for symbol store operations.\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:20:22.421689058-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:55:16.426349886-05:00","labels":["fcp2","mvp","storage"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.15","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:20:22.423315885-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.15","depends_on_id":"flywheel_connectors-1n78.14","type":"blocks","created_at":"2026-01-15T01:21:43.269857939-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.15","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T01:21:43.316647675-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.15.1","title":"TEST: Store/Placement/Repair Simulation + Bounds","description":"# TEST: Store/Placement/Repair Simulation + Bounds\n\n## Goal\nMake offline resilience measurable and bounded. Prove that the store layer maintains availability guarantees.\n\n## Test Categories\n\n### Object Store Tests\n- [ ] Object write produces correct ObjectId (keyed derivation)\n- [ ] Object read returns identical bytes\n- [ ] Missing object returns appropriate error\n- [ ] Object metadata (zone, schema, retention) is preserved\n- [ ] Object reference counting works correctly\n- [ ] Object deletion respects GC roots\n\n### Symbol Store Tests\n- [ ] Symbols stored with correct ESI mapping\n- [ ] Symbol retrieval by ESI works\n- [ ] Symbol availability tracking is accurate\n- [ ] Symbol eviction respects retention class\n- [ ] Quarantine zone isolation\n\n### Placement Policy Tests\n- [ ] Coverage evaluation correctness (basis points calculation)\n- [ ] min_coverage threshold enforcement\n- [ ] max_concentration limit enforcement (no single-source)\n- [ ] Geographic diversity when node location available\n- [ ] Placement decisions are deterministic (same inputs → same placement)\n\n### Background Repair Loop Tests\n- [ ] Repair loop improves coverage over time (measurable)\n- [ ] Repair respects bandwidth budget\n- [ ] Repair prioritizes objects below threshold\n- [ ] Repair actions produce audit events\n- [ ] Repair loop is idempotent (no duplicate work)\n\n### Retention/GC Tests\n- [ ] GC roots (ZoneCheckpoint) prevent premature eviction\n- [ ] Retention class ordering: Required \u003e Pinned \u003e Cached \u003e Ephemeral\n- [ ] Ephemeral objects evicted first under pressure\n- [ ] GC produces audit events\n- [ ] No orphaned symbols after GC\n\n### ChunkedObjectManifest Tests\n- [ ] Large object → manifest + chunks\n- [ ] Chunk placement distributed correctly\n- [ ] Manifest references valid chunk ObjectIds\n- [ ] Reassembly produces original object\n- [ ] Partial chunk availability tracked correctly\n\n### Quarantine Tests\n- [ ] Quarantine eviction order matches policy (by age, by risk)\n- [ ] Quarantined objects isolated from normal storage\n- [ ] Quarantine entry produces audit event\n- [ ] Quarantine promotion/demotion paths\n\n## Simulation Framework\n```rust\n#[test]\nfn test_repair_improves_coverage() {\n    let harness = StoreSimulation::new()\n        .with_nodes(5)\n        .with_failure_rate(0.1);\n    \n    harness.store_object(test_object, min_coverage: 5000);\n    harness.fail_node(2);\n    \n    assert!(harness.coverage() \u003c 5000);\n    harness.run_repair_loop(Duration::from_secs(10));\n    assert!(harness.coverage() \u003e= 5000);\n}\n```\n\n## Golden Vectors\n- Object storage: content → ObjectId mapping\n- Placement decisions: node set → placement result\n- Coverage calculation: symbol distribution → basis points\n\n## Logging Requirements\nAll store tests MUST emit structured JSON:\n```json\n{\n  \"timestamp\": \"RFC3339\",\n  \"test_name\": \"test_repair_improves_coverage\",\n  \"module\": \"fcp-store\",\n  \"phase\": \"execute|verify\",\n  \"operation\": \"write|read|repair|gc|placement\",\n  \"object_id\": \"...\",\n  \"object_size\": 12345,\n  \"symbol_count\": 13,\n  \"coverage_bps\": 7500,\n  \"nodes_holding\": [\"node-0\", \"node-2\", \"node-4\"],\n  \"result\": \"pass|fail\",\n  \"duration_us\": 1234\n}\n```\n\n### For Repair Actions\n```json\n{\n  \"repair_action\": \"replicate\",\n  \"object_id\": \"...\",\n  \"source_node\": \"node-0\",\n  \"target_node\": \"node-3\",\n  \"coverage_before_bps\": 4000,\n  \"coverage_after_bps\": 6000,\n  \"reason_code\": \"BELOW_THRESHOLD\"\n}\n```\n\n### For GC Events\n```json\n{\n  \"gc_action\": \"evict\",\n  \"object_id\": \"...\",\n  \"retention_class\": \"Ephemeral\",\n  \"reason\": \"SPACE_PRESSURE\",\n  \"gc_root_checked\": true\n}\n```\n\n## Determinism Requirements\n- Simulation tests MUST use seeded RNG\n- All tests MUST be reproducible from seed\n- No flaky tests allowed\n\n## Acceptance Criteria\n- Simulation tests run deterministically\n- Repair loop measurably improves coverage\n- GC respects retention and roots\n- All operations produce structured logs\n- Performance bounds verified","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:53:15.876297693-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:52:30.753004851-05:00","labels":["fcp2","mvp","storage","testing"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.15.1","depends_on_id":"flywheel_connectors-1n78.15","type":"parent-child","created_at":"2026-01-15T01:53:15.877470052-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.15.1","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:52:31.665556957-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.16","title":"[FCP2] Tailscale Integration: MeshIdentity, NodeKeyAttestation, Peer Discovery, ACL Tag Mapping","description":"# [FCP2] Tailscale Integration: MeshIdentity, NodeKeyAttestation, Peer Discovery, ACL Tag Mapping\n\n## Goal\nAbstract Tailscale as the authenticated mesh substrate.\n\n## Required behaviors\n### MeshIdentity model\nMeshIdentity MUST include:\n- tailscale node_id\n- hostname\n- IPs\n- ACL tags\n- owner_pubkey anchor\n- node signing/encryption/issuance pubkeys + kids\n- owner-signed NodeKeyAttestation binding `node_id ↔ keys ↔ tags` (and optional DevicePostureAttestation)\n\n### Peer discovery\nProvide peer discovery and a stable view of online peers (mockable for tests).\n\nImplementation guidance (non-binding):\n- use Tailscale LocalAPI (`/localapi/v0/status`, `/localapi/v0/whois`) behind an interface\n\n### Zone ↔ tag mapping + ACL generation\n- ZoneId maps to a Tailscale tag: `tag:fcp-\u003csuffix\u003e`.\n- Port-gating ACL generation is a defense-in-depth feature:\n  - zone members can reach only zone ports (symbol_port/control_port)\n  - policy engine still enforces the true integrity/confidentiality lattice\n\n## Acceptance Criteria\n- Unit tests for tag\u003c-\u003ezone mapping.\n- Mockable interface so tests don't require a real tailnet.\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:20:22.471768456-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:04:14.84591618-05:00","labels":["fcp2","mesh","mvp","tailscale"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.16","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:20:22.473097942-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.16","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T01:21:43.363872422-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.16","depends_on_id":"flywheel_connectors-1n78.5","type":"blocks","created_at":"2026-01-15T01:21:43.410649205-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.17","title":"[FCP2] MeshNode: Routing, Gossip, Admission Control, Leases, Device-Aware Execution","description":"# [FCP2] MeshNode: Routing, Gossip, Admission Control, Leases, Device-Aware Execution\n\n## Goal\nImplement the core runtime node that turns the spec into behavior:\n- peer discovery (via Tailscale abstraction)\n- session establishment + replay policy\n- symbol routing + multipath delivery\n- gossip / announcements + reconciliation\n- admission control + anti-amplification\n- enforcement: zones/caps/taint/approvals/revocation/checkpoint/policy\n- distributed coordination: leases\n- connector state coordination hooks (singleton_writer)\n- device-aware execution planner + delegation\n\n## Why users care\nMeshNode is where \"mechanical security\" becomes real:\n- It is the enforcement boundary between untrusted inputs and privileged side effects.\n- It produces DecisionReceipts and audit events, enabling `fcp explain` and incident response.\n- It makes offline availability measurable (coverage) and repairable.\n\n## Normative behaviors (spec-aligned)\n### Default deny enforcement spine\nNo operation executes unless it passes, in order:\n1. canonical decode + schema validation\n2. capability token verification (including checkpoint freshness + holder proof)\n3. revocation freshness enforcement (per policy tier)\n4. taint/approval enforcement (elevation/declassification)\n5. zone policy ceilings + connector manifest constraints\n6. (when required) execution lease acquisition/validation\n\nEvery denial MUST emit a DecisionReceipt with stable `reason_code` and evidence ObjectIds.\n\n### Transport priority + multipath delivery\nTransport path selection is user-visible and policy-controlled.\n- Priority order: Direct (LAN) → Mesh NAT traversal → DERP → Funnel\n- ZoneTransportPolicy controls DERP/Funnel availability (deny-by-default for high-trust zones).\n- Multipath symbol delivery MAY use multiple paths concurrently when allowed.\n\n### Admission control + DoS resistance (NORMATIVE)\nMeshNodes MUST implement admission control for:\n- per-peer inbound bytes/symbols\n- failed decrypt/MAC counters\n- bounded concurrent decodes + decode CPU budgets\n- bounded gossip reconciliation work\n\nAnti-amplification rule (NORMATIVE):\n- do not send more than `N` symbols in response to a request unless the requester is authenticated AND presents bounded proof-of-need (e.g., missing-hint).\n\n### Control-plane fallback over FCPS (spec surface)\nIn degraded/offline sync scenarios, control-plane objects may be encoded to symbols and transported in FCPS frames with `FrameFlags::CONTROL_PLANE`.\nMeshNode owns the semantics here (routing + reconstruction + retention enforcement).\n\n### Execution planner (device-aware)\nMeshNode chooses where to execute operations based on:\n- device profiles (cpu/mem/battery)\n- connector availability + version requirements\n- symbol locality scoring + DERP penalty\n- (full profile) secret reconstruction cost\n\n## Acceptance Criteria\n- Integration tests (simulated mesh) for:\n  - sessions + replay\n  - routing + reconstruction\n  - allow path (receipt + audit)\n  - deny path (DecisionReceipt with evidence)\n  - admission control rejecting floods\n- Benchmarks for local invoke overhead.\n\n## Notes\nThis issue is intentionally an umbrella; complex sub-behaviors are tracked as child beads (routing/multipath, admission+quarantine, gossip, execution planner, FCPS control-plane fallback).\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:20:22.524135095-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:18:50.226397742-05:00","labels":["fcp2","mesh","mvp"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.17","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:20:22.525478217-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17","depends_on_id":"flywheel_connectors-1n78.16","type":"blocks","created_at":"2026-01-15T01:21:43.456725707-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17","depends_on_id":"flywheel_connectors-1n78.12","type":"blocks","created_at":"2026-01-15T01:21:43.506602753-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17","depends_on_id":"flywheel_connectors-1n78.13","type":"blocks","created_at":"2026-01-15T01:21:43.555556339-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17","depends_on_id":"flywheel_connectors-1n78.15","type":"blocks","created_at":"2026-01-15T01:21:43.6030329-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17","depends_on_id":"flywheel_connectors-1n78.6","type":"blocks","created_at":"2026-01-15T01:21:43.650714188-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17","depends_on_id":"flywheel_connectors-1n78.7","type":"blocks","created_at":"2026-01-15T01:21:43.69923079-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17","depends_on_id":"flywheel_connectors-1n78.8","type":"blocks","created_at":"2026-01-15T01:21:43.747069193-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17","depends_on_id":"flywheel_connectors-1n78.9","type":"blocks","created_at":"2026-01-15T01:21:43.794216103-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17","depends_on_id":"flywheel_connectors-1n78.10","type":"blocks","created_at":"2026-01-15T01:21:43.839121929-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17","depends_on_id":"flywheel_connectors-1n78.11","type":"blocks","created_at":"2026-01-15T01:21:43.887082122-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17","depends_on_id":"flywheel_connectors-1n78.24","type":"blocks","created_at":"2026-01-15T01:51:14.635952348-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17","depends_on_id":"flywheel_connectors-1n78.34","type":"blocks","created_at":"2026-01-15T01:51:14.68370659-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T01:51:14.736200051-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17","depends_on_id":"flywheel_connectors-1n78.32","type":"blocks","created_at":"2026-01-15T01:51:14.785032835-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T01:51:14.83794864-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17","depends_on_id":"flywheel_connectors-1n78.29","type":"blocks","created_at":"2026-01-15T01:51:14.888116299-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17","depends_on_id":"flywheel_connectors-1n78.28","type":"blocks","created_at":"2026-01-15T01:51:14.937838478-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17","depends_on_id":"flywheel_connectors-gqvh","type":"blocks","created_at":"2026-01-15T02:54:46.369233247-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17","depends_on_id":"flywheel_connectors-7isb","type":"blocks","created_at":"2026-01-15T02:55:32.302265625-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.17.1","title":"TEST: MeshNode Integration Scenarios (Routing + Enforcement)","description":"# TEST: MeshNode Integration Scenarios (Routing + Enforcement)\n\n## Scope\nIntegration tests for MeshNode routing, admission control, and policy enforcement.\n\n## Test Categories\n\n### Routing\n- [ ] Symbol routing to correct nodes based on placement\n- [ ] Control-plane message routing\n- [ ] Multi-hop routing when direct path unavailable\n- [ ] Routing table updates on topology changes\n- [ ] Load balancing across equivalent paths\n\n### Admission Control\n- [ ] Valid requests admitted\n- [ ] Requests without session rejected\n- [ ] Rate-limited requests rejected with backpressure\n- [ ] Quarantined nodes blocked\n- [ ] Anti-amplification limits enforced\n\n### Policy Enforcement\n- [ ] Zone boundary enforcement in routing\n- [ ] Capability verification before forwarding\n- [ ] Revocation checks on forwarded requests\n- [ ] Taint labels propagated correctly\n\n### Gossip Integration\n- [ ] Object availability propagates\n- [ ] Reconciliation completes after partition\n- [ ] Stale gossip is rejected\n- [ ] Gossip rate limiting\n\n### Lease Coordination\n- [ ] Lease acquisition via HRW\n- [ ] Lease renewal works\n- [ ] Lease transfer on node failure\n- [ ] Lease conflicts detected\n\n## Golden Vectors\nLocation: `tests/vectors/mesh_node/`\n- `routing_table.json` - Expected routing decisions\n- `admission_scenarios.json` - Allow/deny test cases\n- `gossip_messages.cbor` - Gossip message examples\n\n## Test Infrastructure\n- Deterministic mesh harness (3+ nodes)\n- Network fault injection\n- Clock control for timeouts\n- Structured log collection\n\n## Logging Requirements\nAll tests MUST emit structured JSON:\n```json\n{\n  \"timestamp\": \"RFC3339\",\n  \"test_name\": \"test_symbol_routing\",\n  \"module\": \"fcp-mesh\",\n  \"phase\": \"execute\",\n  \"correlation_id\": \"uuid\",\n  \"nodes\": [\"node-0\", \"node-1\", \"node-2\"],\n  \"source_node\": \"node-0\",\n  \"target_node\": \"node-2\",\n  \"hops\": 1,\n  \"result\": \"pass\"\n}\n```\n\n### For Admission Tests\n```json\n{\n  \"request_type\": \"invoke\",\n  \"admission_decision\": \"allow|deny\",\n  \"deny_reason\": \"FCP-4001\",\n  \"rate_limit_remaining\": 95\n}\n```\n\n### For Gossip Tests\n```json\n{\n  \"gossip_type\": \"object_available\",\n  \"object_id\": \"...\",\n  \"propagation_time_ms\": 50,\n  \"nodes_reached\": 3\n}\n```\n\n## CI Integration\n```bash\ncargo test -p fcp-mesh --test mesh_integration -- --nocapture --test-threads=1\n```\n\n## Acceptance Criteria\n- All routing scenarios tested\n- Admission control is complete\n- Gossip converges correctly\n- Structured logs produced\n\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:53:15.928119859-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:30:48.236840477-05:00","labels":["fcp2","mesh","mvp","testing"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.17.1","depends_on_id":"flywheel_connectors-1n78.17","type":"parent-child","created_at":"2026-01-15T01:53:15.929801927-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.1","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:32:27.073627599-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.17.2","title":"[FCP2-MESH] Transport Priority + Multipath Delivery Engine","description":"# [FCP2-MESH] Transport Priority + Multipath Delivery Engine\n\n## Goal\nImplement spec-aligned **path selection** and **multipath symbol delivery**.\n\n## Requirements\n- Transport priority order (default):\n  1. Tailscale Direct (same LAN)\n  2. Tailscale Mesh (NAT traversal)\n  3. Tailscale DERP Relay (policy-controlled per zone)\n  4. Tailscale Funnel/public ingress (policy-controlled; low-trust zones only by default)\n\n- ZoneTransportPolicy MUST be enforced:\n  - high-trust zones can forbid DERP/Funnel\n  - low-trust zones can allow Funnel with explicit constraints\n\n- Multipath symbol delivery:\n  - when multiple paths are available and allowed by policy, MeshNode can send/receive symbols on multiple paths concurrently\n  - load balancing strategy must be deterministic (so behavior is testable and reproducible)\n\n## Deliverables\n- A routing/path-selection module that:\n  - ranks candidate paths based on priority + penalties (e.g., DERP penalty)\n  - emits structured logs of chosen path and policy decision\n- Multipath sender/receiver plumbing:\n  - consistent session establishment per peer\n  - bounded concurrency and backpressure\n\n## Tests\n- Deterministic tests for path ranking given a fixed peer topology.\n- Policy tests: DERP forbidden in z:owner-like zones yields denial reason codes.\n\n## Acceptance Criteria\n- In the E2E harness, symbol transfer works over each supported path type.\n- Logs clearly show which path was used and why.\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T02:19:42.197423686-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:19:42.197423686-05:00","labels":["fcp2","mesh","mvp"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.17.2","depends_on_id":"flywheel_connectors-1n78.17","type":"parent-child","created_at":"2026-01-15T02:19:42.243710075-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.2","depends_on_id":"flywheel_connectors-1n78.16","type":"blocks","created_at":"2026-01-15T02:19:50.165773322-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.2","depends_on_id":"flywheel_connectors-1n78.24","type":"blocks","created_at":"2026-01-15T02:19:50.216472415-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.2","depends_on_id":"flywheel_connectors-1n78.12","type":"blocks","created_at":"2026-01-15T02:19:50.264827392-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.2","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T02:19:50.313063456-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.2","depends_on_id":"flywheel_connectors-1n78.28","type":"blocks","created_at":"2026-01-15T02:19:50.36210291-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.2","depends_on_id":"flywheel_connectors-1n78.29","type":"blocks","created_at":"2026-01-15T02:19:50.412233825-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.2","depends_on_id":"flywheel_connectors-1n78.15","type":"blocks","created_at":"2026-01-15T02:19:50.460033629-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.2","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T02:19:50.508623618-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.17.3","title":"[FCP2-MESH] Admission Control + Anti-Amplification + Quarantine Enforcement","description":"# [FCP2-MESH] Admission Control + Anti-Amplification + Quarantine Enforcement\n\n## Goal\nImplement the **DoS resistance** and **admission-control** requirements for the mesh layer.\n\nThis is non-negotiable: without bounded budgets, the mesh becomes the largest attack surface.\n\n## Normative requirements (spec-aligned)\nMeshNodes MUST implement admission control for:\n- per-peer inbound bytes/symbols\n- failed decrypt/MAC counters\n- bounded concurrent decodes\n- bounded gossip reconciliation work\n\n### PeerBudget (defaults are policy-tunable)\n- `max_bytes_per_min` (default 64MB/min)\n- `max_symbols_per_min` (default 200k/min)\n- `max_failed_auth_per_min` (default 100/min)\n- `max_inflight_decodes` (default 32)\n- `max_decode_cpu_ms_per_min` (default 5000ms/min)\n\n### Anti-amplification rule (NORMATIVE)\nMeshNodes MUST NOT send more than `N` symbols in response to a request unless the requester:\n1. is authenticated (session MAC or node signature), AND\n2. presents bounded proof-of-need (e.g., DecodeStatus.missing_hint) or comparable evidence.\n\n### Quarantine enforcement (owned jointly with Stores)\n- Unknown/unreferenced ObjectIds MUST be quarantined by default (bounded TTL + quotas).\n- Quarantined objects MUST NOT be inserted into global gossip state.\n- Promotion rules are strict (reachability from ZoneCheckpoint / authenticated bounded request / explicit pin) and MUST require schema validation.\n\n## Deliverables\n- A single admission-control module used consistently by:\n  - FCPS datagram handling\n  - symbol_request handling\n  - gossip reconciliation\n  - decode/reconstruction scheduling\n- Explicit reason codes + structured logs for rejections.\n\n## Tests\n- Property tests: budgets cannot go negative; counters are monotonic and bounded.\n- Adversarial tests:\n  - flood of invalid MACs triggers peer ban/throttle\n  - decode CPU DoS corpus stays within time bounds\n  - quarantine quotas enforce eviction\n\n## Acceptance Criteria\n- E2E harness can simulate malicious peers and show bounded impact.\n- Logs clearly explain admission-control denials.\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T02:20:06.097266267-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:20:06.097266267-05:00","labels":["fcp2","mesh","mvp","security"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.17.3","depends_on_id":"flywheel_connectors-1n78.17","type":"parent-child","created_at":"2026-01-15T02:20:06.143468227-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.3","depends_on_id":"flywheel_connectors-1n78.24","type":"blocks","created_at":"2026-01-15T02:20:12.724833527-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.3","depends_on_id":"flywheel_connectors-1n78.12","type":"blocks","created_at":"2026-01-15T02:20:12.775678635-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.3","depends_on_id":"flywheel_connectors-1n78.15","type":"blocks","created_at":"2026-01-15T02:20:12.827829246-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.3","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T02:20:12.878407973-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.3","depends_on_id":"flywheel_connectors-1n78.28","type":"blocks","created_at":"2026-01-15T02:20:12.925891583-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.3","depends_on_id":"flywheel_connectors-1n78.29","type":"blocks","created_at":"2026-01-15T02:20:12.974681678-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.3","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T02:20:13.025022798-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.17.4","title":"[FCP2-MESH] SymbolRequest + Targeted Repair (DecodeStatus/SymbolAck)","description":"# [FCP2-MESH] SymbolRequest + Targeted Repair (DecodeStatus/SymbolAck)\n\n## Goal\nMake symbol transfer efficient and DoS-resistant by implementing:\n- bounded SymbolRequest handling\n- flow-control feedback via DecodeStatus\n- stop conditions via SymbolAck\n- targeted repair (send missing symbols, not floods)\n\n## Normative requirements (spec-aligned)\n### SymbolRequest bounding\n- A requester MUST bound requests (max_symbols and/or missing-hint proof-of-need).\n- A responder MUST NOT send more than `max_symbols` symbols in response.\n- Unauthenticated requests MUST be capped tighter (default max_symbols_unauthenticated = 32) unless zone policy allows.\n- Accounting rule: SymbolRequest processing counts against PeerBudget (bytes + CPU + inflight decodes).\n\n### DecodeStatus (control-plane object)\n- Receiver reports how many unique symbols received vs required, optionally with a compact missing-hint.\n- Used for targeted repair and anti-amplification compliance.\n\n### SymbolAck (control-plane object)\n- Receiver can tell sender to stop: object reconstructed.\n\n## Deliverables\n- Canonical object schemas for DecodeStatus + SymbolAck (retention: Ephemeral).\n- MeshNode handlers that:\n  - validate bounds and enforce admission control\n  - use missing-hint when present for targeted repair\n  - stop sending on SymbolAck\n  - emit structured logs/metrics for repair actions\n\n## Tests\n- Property tests: bounded requests never trigger unbounded sends.\n- Adversarial tests: spoofed SymbolRequests can’t amplify traffic.\n- Integration tests in E2E harness: reconstruction converges faster with targeted repair.\n\n## Acceptance Criteria\n- Multi-node simulation shows stable convergence under loss without budget blowups.\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T02:20:29.27289728-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:20:29.27289728-05:00","labels":["fcp2","mesh","mvp"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.17.4","depends_on_id":"flywheel_connectors-1n78.17","type":"parent-child","created_at":"2026-01-15T02:20:29.317246047-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.4","depends_on_id":"flywheel_connectors-1n78.12","type":"blocks","created_at":"2026-01-15T02:20:37.398344644-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.4","depends_on_id":"flywheel_connectors-1n78.13","type":"blocks","created_at":"2026-01-15T02:20:37.450301171-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.4","depends_on_id":"flywheel_connectors-1n78.24","type":"blocks","created_at":"2026-01-15T02:20:37.501209337-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.4","depends_on_id":"flywheel_connectors-1n78.15","type":"blocks","created_at":"2026-01-15T02:20:37.550347537-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.4","depends_on_id":"flywheel_connectors-1n78.14","type":"blocks","created_at":"2026-01-15T02:20:37.599803714-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.4","depends_on_id":"flywheel_connectors-1n78.3","type":"blocks","created_at":"2026-01-15T02:20:37.649878524-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.4","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T02:20:37.700127932-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.4","depends_on_id":"flywheel_connectors-1n78.17.3","type":"blocks","created_at":"2026-01-15T02:20:37.749817708-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.4","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T02:20:37.803421992-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.17.5","title":"[FCP2-MESH] Gossip Baseline: Object Availability + Reconciliation","description":"# [FCP2-MESH] Gossip Baseline: Object Availability + Reconciliation\n\n## Goal\nImplement the **baseline gossip layer** needed for discovery and offline resilience.\n\nThis is the minimal mechanism for nodes to learn:\n- which peers exist\n- which ObjectIds/symbols peers can serve\n- which zone frontiers/checkpoints are current\n\n(Advanced XOR-filter/IBLT optimizations are tracked separately in the Full Profile epic.)\n\n## Requirements\n- Gossip must be bounded and admission-controlled (no unbounded reconciliation work).\n- Quarantined ObjectIds MUST NOT pollute global gossip state.\n- Gossip state must be deterministic enough to test in simulation.\n\n## Deliverables\n- A baseline gossip protocol that can:\n  - announce newly admitted objects/symbol availability\n  - exchange compact summaries/digests\n  - reconcile missing objects via bounded SymbolRequests\n- Hooks to publish/check ZoneCheckpoint heads.\n\n## Tests\n- Simulation tests with multiple nodes joining/leaving.\n- Ensure gossip does not leak quarantined ObjectIds.\n\n## Acceptance Criteria\n- E2E harness can bootstrap a small N-node mesh without manual configuration.\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T02:20:49.833750484-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:20:49.833750484-05:00","labels":["fcp2","mesh","mvp"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.17.5","depends_on_id":"flywheel_connectors-1n78.17","type":"parent-child","created_at":"2026-01-15T02:20:49.912188996-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.5","depends_on_id":"flywheel_connectors-1n78.15","type":"blocks","created_at":"2026-01-15T02:20:56.107422708-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.5","depends_on_id":"flywheel_connectors-1n78.16","type":"blocks","created_at":"2026-01-15T02:20:56.158873665-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.5","depends_on_id":"flywheel_connectors-1n78.24","type":"blocks","created_at":"2026-01-15T02:20:56.209899923-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.5","depends_on_id":"flywheel_connectors-1n78.17.3","type":"blocks","created_at":"2026-01-15T02:20:56.259248047-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.5","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T02:20:56.314403998-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.17.6","title":"[FCP2-MESH] Execution Planner: Device Profiles + Connector Requirements","description":"# [FCP2-MESH] Execution Planner: Device Profiles + Connector Requirements\n\n## Goal\nImplement the MeshNode **device-aware execution planner** that decides where an operation should run.\n\n## Inputs (spec + README aligned)\n- Device profiles:\n  - CPU/memory class, battery state (when available), platform/arch\n  - trust posture constraints (e.g., hardware-backed keys required for sensitive zones)\n- Connector constraints:\n  - connector availability on node\n  - version requirements (`min_mesh_version`, `min_protocol`, `interface_hash` compatibility)\n  - sandbox runtime requirements (native vs wasi support)\n- Data locality:\n  - symbol locality scoring (prefer nodes that already have needed objects)\n  - DERP penalty vs direct paths\n- Coordination:\n  - singleton_writer connectors must respect ConnectorStateWrite leases\n  - risky/dangerous operations must respect execution leases\n\n## Deliverables\n- A deterministic scoring + selection algorithm that:\n  - produces a ranked candidate set\n  - includes explainable reasons in logs/DecisionReceipts\n- Delegation mechanism:\n  - route InvokeRequest to selected peer over FCPC\n  - preserve TraceContext + correlation IDs\n\n## Tests\n- Deterministic tests for planner scoring with fixed inputs.\n- Integration tests: failover picks a new device; singleton_writer respects lease.\n\n## Acceptance Criteria\n- In the E2E harness, operations can be delegated to a remote node correctly.\n- Denials due to device constraints are explainable (stable reason_code + evidence).\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T02:21:09.542318927-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:21:09.542318927-05:00","labels":["fcp2","mesh","mvp","ux"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.17.6","depends_on_id":"flywheel_connectors-1n78.17","type":"parent-child","created_at":"2026-01-15T02:21:09.588563418-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.6","depends_on_id":"flywheel_connectors-1n78.16","type":"blocks","created_at":"2026-01-15T02:21:17.935624644-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.6","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T02:21:17.986640012-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.6","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T02:21:18.037036867-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.6","depends_on_id":"flywheel_connectors-1n78.34","type":"blocks","created_at":"2026-01-15T02:21:18.088803818-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.6","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T02:21:18.138773079-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.6","depends_on_id":"flywheel_connectors-1n78.13","type":"blocks","created_at":"2026-01-15T02:21:18.191473905-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.6","depends_on_id":"flywheel_connectors-1n78.28","type":"blocks","created_at":"2026-01-15T02:21:18.241633725-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.6","depends_on_id":"flywheel_connectors-1n78.29","type":"blocks","created_at":"2026-01-15T02:21:18.292071066-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.6","depends_on_id":"flywheel_connectors-1n78.15","type":"blocks","created_at":"2026-01-15T02:21:18.341107314-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.6","depends_on_id":"flywheel_connectors-1n78.32","type":"blocks","created_at":"2026-01-15T02:21:18.390449026-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.6","depends_on_id":"flywheel_connectors-wwq8","type":"blocks","created_at":"2026-01-15T02:54:35.640352021-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.17.7","title":"[FCP2-MESH] Degraded Mode: Control-Plane Objects over FCPS (FrameFlags::CONTROL_PLANE)","description":"# [FCP2-MESH] Degraded Mode: Control-Plane Objects over FCPS (FrameFlags::CONTROL_PLANE)\n\n## Goal\nImplement the spec-described **mesh fallback** transport option where canonical control-plane objects are:\n- encoded to symbols (RaptorQ / chunking)\n- transported inside FCPS frames with `FrameFlags::CONTROL_PLANE` set\n\nThis is critical for degraded/offline sync and for making the whole system mesh-native.\n\n## Requirements\n- Sender:\n  - wrap a canonical ControlPlaneObject (schema-hash + CBOR) as symbols\n  - send as FCPS frames with CONTROL_PLANE flag\n- Receiver:\n  - verify session MAC + per-symbol AEAD\n  - reconstruct object payload (raw chunking or RaptorQ)\n  - verify schema\n  - enforce retention:\n    - Required objects MUST be stored\n    - Ephemeral objects MAY be dropped after processing\n\n## Deliverables\n- Encoding/decoding path that reuses the same object store + symbol store as normal objects.\n- Clear structured logs identifying CONTROL_PLANE traffic and retention decisions.\n\n## Tests\n- E2E harness scenario: force-disable FCPC and verify control-plane still converges (degraded mode).\n- Ensure required objects persist and are replayable after restart.\n\n## Acceptance Criteria\n- Degraded-mode control-plane transport works in simulation and remains bounded under admission control.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T02:21:30.233621522-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:21:30.233621522-05:00","labels":["fcp2","mesh","protocol"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.17.7","depends_on_id":"flywheel_connectors-1n78.17","type":"parent-child","created_at":"2026-01-15T02:21:30.27824687-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.7","depends_on_id":"flywheel_connectors-1n78.12","type":"blocks","created_at":"2026-01-15T02:21:36.797994504-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.7","depends_on_id":"flywheel_connectors-1n78.14","type":"blocks","created_at":"2026-01-15T02:21:36.850284076-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.7","depends_on_id":"flywheel_connectors-1n78.15","type":"blocks","created_at":"2026-01-15T02:21:36.901844659-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.7","depends_on_id":"flywheel_connectors-1n78.3","type":"blocks","created_at":"2026-01-15T02:21:36.95308518-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.7","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T02:21:37.004679957-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.7","depends_on_id":"flywheel_connectors-1n78.13","type":"blocks","created_at":"2026-01-15T02:21:37.055698991-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.17.7","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T02:21:37.106033539-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.18","title":"[FCP2] Sandbox + Egress Proxy: NetworkConstraints, Secret Injection, OS/WASI Profiles","description":"# [FCP2] Sandbox + Egress Proxy: NetworkConstraints, Secret Injection, OS/WASI Profiles\n\n## Goal\nMake connectors safe by default:\n- filesystem and process sandboxing\n- deny-by-default networking\n- capability-gated Network Guard (egress proxy) enforcing NetworkConstraints\n- secret injection without persisting secrets to disk\n\n## Required behaviors (spec-aligned)\n### Sandbox profiles\nSupport the manifest-defined sandbox profiles:\n- `strict`, `strict_plus`, `moderate`, `permissive`\n\nCore invariants:\n- In `strict`/`moderate`, connectors MUST NOT have raw outbound sockets.\n- Networking is mediated by the MeshNode Network Guard and authorized by capabilities + constraints.\n\n### NetworkConstraints (deny-by-default)\nNetworkConstraints MUST enforce:\n- host allow-list + port allow-list\n- canonicalize hostnames (lowercase, IDNA2008, strip trailing dot)\n- deny IP literals unless explicitly allowed\n- deny localhost / RFC1918 / link-local / tailnet ranges by default\n- DNS resolution through a policy-checked resolver\n- TLS rules: require SNI match; optional SPKI pin verification\n\n### Network Guard (egress proxy) supports HTTP and TCP\nThe proxy MUST support:\n- HTTP/HTTPS requests\n- raw TCP connect (for database/queue connectors) while still enforcing constraints\n\n### Secretless connectors via credential injection\nThe Network Guard MUST support applying credentials at the boundary:\n- connectors specify `credential` references (CredentialId)\n- proxy validates caller authority and constraint allow-lists\n- proxy injects headers/query params without exposing raw secret bytes to the connector\n- all secret materialization is ephemeral and never written to disk\n\n### OS sandboxes + WASI\n- Native connectors: OS sandboxing (Linux/macOS/Windows) with explicit allow-lists for filesystem and IPC.\n- WASI connectors: WASI preview2 (or later) runtime with capability-gated hostcalls.\n\n## Deliverables\n- A sandbox configuration model derived from the manifest.\n- OS-specific sandbox adapters and a WASI runtime adapter.\n- Network Guard service with strict allow/deny behavior and structured audit/logging.\n- Secret handling discipline:\n  - never persist secrets to disk\n  - never log secrets\n  - zeroize where applicable\n\n## Tests\n- Unit tests for constraint evaluation and hostname canonicalization edge cases.\n- Integration tests with a mock Network Guard to verify deny/allow.\n- Negative tests for SSRF-style bypass attempts (IP literals, funky host encodings, private CIDRs).\n\n## Acceptance Criteria\n- In strict/moderate profiles, connectors cannot reach the network except through the Network Guard.\n- Network constraints are enforced identically across OSes.\n- Secrets never touch disk and never appear in logs.\n\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:20:22.577434813-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:57:37.148191609-05:00","labels":["fcp2","mvp","sandbox","security"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.18","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:20:22.578638431-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.18","depends_on_id":"flywheel_connectors-1n78.17","type":"blocks","created_at":"2026-01-15T01:21:43.979446876-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.18","depends_on_id":"flywheel_connectors-1n78.7","type":"blocks","created_at":"2026-01-15T01:21:44.027246206-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.18","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T01:21:44.075282723-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.18.1","title":"TEST: Sandbox + Egress Proxy Allow/Deny Matrix","description":"# TEST: Sandbox + Egress Proxy Allow/Deny Matrix\n\n## Goal\nProve that NetworkConstraints are enforced mechanically and safely - no ambient network access.\n\n## Test Categories\n\n### Default Deny Tests\n- [ ] Localhost (127.0.0.0/8, ::1) denied by default\n- [ ] Private ranges (10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16) denied by default\n- [ ] Tailnet ranges denied by default\n- [ ] Link-local addresses denied\n- [ ] Loopback device traffic blocked\n\n### Allow List Tests\n- [ ] Declared host allowed\n- [ ] Declared port allowed\n- [ ] Declared protocol (HTTP/HTTPS) allowed\n- [ ] TLS requirement enforced (http:// denied when tls_required=true)\n- [ ] Wildcard host patterns work correctly\n- [ ] Port range patterns work correctly\n\n### Socket Restriction Tests\n- [ ] Strict sandbox: no raw sockets\n- [ ] Moderate sandbox: no raw sockets\n- [ ] Permissive sandbox: raw sockets allowed only with explicit grant\n- [ ] UDP socket restrictions\n- [ ] TCP socket restrictions\n\n### DNS Resolution Tests\n- [ ] DNS queries go through proxy (no direct resolution)\n- [ ] DNS resolution for allowed hosts succeeds\n- [ ] DNS resolution for denied hosts fails cleanly\n- [ ] DNS cache poisoning mitigations\n\n### TLS Verification Tests\n- [ ] Proxy validates TLS certificates\n- [ ] Invalid certificates rejected\n- [ ] Certificate pinning when specified\n- [ ] TLS version requirements enforced\n\n### Credential Injection Tests\n- [ ] Secrets injected via proxy headers (not connector args)\n- [ ] Secrets never appear in connector logs\n- [ ] Secrets zeroized after use\n- [ ] Credential rotation handled\n\n### Egress Proxy Integration\n- [ ] All HTTP traffic routes through proxy\n- [ ] All TCP traffic routes through proxy\n- [ ] Proxy logs all requests with correlation_id\n- [ ] Proxy enforces rate limits\n\n## Mock Infrastructure\n```rust\nlet proxy = MockEgressProxy::new()\n    .allow_host(\"api.example.com\")\n    .deny_localhost()\n    .with_tls_required();\n```\n\n## Golden Vectors\n- NetworkConstraints → expected allow/deny decisions\n- Request patterns → expected proxy behavior\n- Secret injection headers (redacted)\n\n## Logging Requirements\nAll sandbox tests MUST emit structured JSON:\n```json\n{\n  \"timestamp\": \"RFC3339\",\n  \"test_name\": \"test_localhost_denied\",\n  \"module\": \"fcp-sandbox\",\n  \"operation\": \"egress_check\",\n  \"target_host\": \"127.0.0.1\",\n  \"target_port\": 8080,\n  \"protocol\": \"http\",\n  \"sandbox_profile\": \"strict\",\n  \"decision\": \"deny\",\n  \"reason_code\": \"FCP-4100\",\n  \"constraint_matched\": \"deny_localhost\",\n  \"result\": \"pass\"\n}\n```\n\n### For Proxy Tests\n```json\n{\n  \"proxy_action\": \"forward|block\",\n  \"target_url\": \"https://api.example.com/v1/data\",\n  \"method\": \"GET\",\n  \"tls_verified\": true,\n  \"credential_injected\": true,\n  \"response_status\": 200,\n  \"duration_ms\": 150\n}\n```\n\n### Security Invariants\n```json\n{\n  \"invariant\": \"secrets_not_logged\",\n  \"check\": \"grep_for_patterns\",\n  \"patterns_checked\": [\"Authorization:\", \"Bearer \", \"api_key=\"],\n  \"violations_found\": 0\n}\n```\n\n## Acceptance Criteria\n- Integration tests run against mock proxy server\n- All denials produce reason codes\n- No secrets leak to logs (verified by grep)\n- Sandbox profiles are complete and tested\n- All allow/deny paths exercised","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:53:15.985316629-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:53:06.211048476-05:00","labels":["fcp2","mvp","sandbox","testing"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.18.1","depends_on_id":"flywheel_connectors-1n78.18","type":"parent-child","created_at":"2026-01-15T01:53:15.986648628-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.18.1","depends_on_id":"flywheel_connectors-1n78.18.2","type":"blocks","created_at":"2026-01-15T03:04:26.014895085-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.18.1","depends_on_id":"flywheel_connectors-1n78.18.3","type":"blocks","created_at":"2026-01-15T03:04:26.094557347-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.18.1","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:53:06.848381054-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.18.2","title":"[FCP2-SANDBOX] Network Guard (Egress Proxy): HTTP+TCP, DNS, TLS, Credential Injection","description":"# [FCP2-SANDBOX] Network Guard (Egress Proxy): HTTP+TCP, DNS, TLS, Credential Injection\n\n## Goal\nImplement the MeshNode-owned **Network Guard** (aka egress proxy): the only outbound network path for connectors under `strict`/`moderate` sandbox profiles.\n\nThis is the mechanical enforcement point for `NetworkConstraints` and (optionally) credential injection.\n\n## Why this exists\n- Prevent SSRF / localhost / tailnet pivot attacks.\n- Ensure every outbound connection is capability-authorized and policy-constrained.\n- Keep raw secrets out of connector memory by default.\n\n## Core invariants (NORMATIVE intent)\n- If the connector runs in `strict`/`moderate`, it MUST NOT be able to open outbound sockets directly.\n- All outbound network activity MUST be mediated through this service.\n- The service MUST be deny-by-default.\n\n## Interface surface (spec-aligned)\n### Requests\nSupport a single request envelope with a closed set of variants:\n- `EgressRequest::Http(EgressHttpRequest)`\n- `EgressRequest::TcpConnect(EgressTcpConnectRequest)`\n\nThe caller MUST present:\n- a valid CapabilityToken (provable authority)\n- an operation/capability context so the proxy can evaluate the correct NetworkConstraints + credential_allow set\n\n### HTTP behavior\n- Validate URL parsing strictly.\n- Canonicalize hostname:\n  - lowercase\n  - IDNA2008\n  - strip trailing dot\n- Reject IP literals by default (unless policy explicitly allows).\n- Resolve DNS via a proxy-controlled resolver.\n- After DNS resolution, enforce:\n  - deny localhost/link-local/RFC1918/tailnet CIDRs by default\n  - allow-lists by host/port\n- TLS:\n  - require SNI match when configured\n  - verify SPKI pins when configured\n\n### TCP connect behavior\nSupport non-HTTP connectors (postgres/redis/etc) without granting raw sockets:\n- Allow establishing a TCP connection to `host:port` if constraints allow.\n- Optional TLS upgrade:\n  - SNI enforcement\n  - SPKI pin verification\n\n### Credential injection (secretless connectors)\nWhen a request references a `CredentialId`:\n- The proxy MUST verify the caller is authorized AND `credential` ∈ `CapabilityConstraints.credential_allow`.\n- The proxy MUST fetch/validate the corresponding `CredentialObject` and referenced secret handle.\n- The proxy MUST apply the credential without revealing raw secret bytes to the connector process.\n\nNote: full secret materialization may depend on the Threshold Secrets subsystem; this bead still owns the injection surface + policy checks.\n\n## Deliverables\n- Network Guard service implementation + IPC contract used by sandboxes.\n- Constraint evaluator:\n  - host_allow / port_allow\n  - cidr_deny defaults\n  - deny_ip_literals default\n  - require_host_canonicalization default\n- DNS resolver path with anti-bypass checks.\n- TLS enforcement path (SNI + optional SPKI pins).\n- Credential injection hooks (plumbed; secret backend integration may be gated).\n\n## Logging + audit\n- Structured JSON logs for every decision:\n  - request_id/correlation_id\n  - connector_id, operation_id\n  - decision allow/deny + reason_code\n- NEVER log:\n  - raw headers containing Authorization\n  - secret bytes\n  - full URLs if they may contain secrets in query params (log a redacted form)\n\n## Tests\n- Unit tests for hostname canonicalization edge cases.\n- Unit tests for IP-literal rejection and CIDR deny defaults.\n- Integration tests with a mock connector using the proxy:\n  - allow to permitted host\n  - deny to localhost\n  - deny to private RFC1918\n  - deny to tailnet range\n  - deny to SNI mismatch\n  - deny to SPKI mismatch\n- If feasible: property tests for canonicalization + constraint evaluation consistency.\n\n## Acceptance Criteria\n- A connector under `strict`/`moderate` cannot reach the network except through the Network Guard.\n- The Network Guard enforces NetworkConstraints deterministically and produces explainable deny reasons.\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T02:58:25.291877038-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:58:25.291877038-05:00","dependencies":[{"issue_id":"flywheel_connectors-1n78.18.2","depends_on_id":"flywheel_connectors-1n78.18","type":"parent-child","created_at":"2026-01-15T02:58:25.293297894-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.18.2","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T02:59:01.373119751-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.18.2","depends_on_id":"flywheel_connectors-1n78.7","type":"blocks","created_at":"2026-01-15T02:59:01.445500233-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.18.2","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T02:59:01.519828874-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.18.2","depends_on_id":"flywheel_connectors-1n78.28","type":"blocks","created_at":"2026-01-15T02:59:01.591966479-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.18.2","depends_on_id":"flywheel_connectors-1n78.29","type":"blocks","created_at":"2026-01-15T02:59:01.662071064-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.18.2","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T02:59:01.732336012-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.18.3","title":"[FCP2-SANDBOX] OS Sandboxes: Linux/macOS/Windows Profiles (seccomp/seatbelt/AppContainer)","description":"# [FCP2-SANDBOX] OS Sandboxes: Linux/macOS/Windows Profiles (seccomp/seatbelt/AppContainer)\n\n## Goal\nImplement the **native connector sandbox** layer across supported platforms:\n- Linux (Tier 1)\n- macOS (Tier 1)\n- Windows (Tier 2)\n\nThis bead owns translating a manifest `[sandbox]` section into OS enforcement.\n\n## Required behaviors\n- Enforce resource limits:\n  - memory\n  - CPU\n  - wall-clock timeouts\n- Enforce filesystem allow-lists:\n  - explicit readonly paths\n  - explicit writable paths (e.g., `$CONNECTOR_STATE`)\n- Enforce process restrictions:\n  - deny child process spawn when configured\n  - deny ptrace/debug when configured\n- Enforce networking model:\n  - under `strict`/`moderate`, block raw outbound sockets (all network via Network Guard IPC)\n\n## Platform-specific notes (implementation guidance)\n- Linux:\n  - syscall filtering (seccomp)\n  - optionally landlock/AppArmor where feasible\n  - `strict_plus` may use microVM-backed isolation (Linux only) as an optional upgrade\n- macOS:\n  - seatbelt profiles + entitlements discipline\n- Windows:\n  - AppContainer + job objects / firewall rules as needed\n\n## Deliverables\n- A `Sandbox` trait and per-OS implementations.\n- A policy compiler translating manifest config to OS-specific rules.\n- A test harness that can run a tiny “canary connector” and assert:\n  - file reads/writes succeed/fail as configured\n  - process spawn fails when denied\n  - outbound sockets fail when they should\n\n## Tests\n- Unit tests for sandbox policy translation.\n- Integration tests per platform (best-effort on CI):\n  - deny write outside `$CONNECTOR_STATE`\n  - deny exec when `deny_exec=true`\n  - deny ptrace when `deny_ptrace=true`\n\n## Acceptance Criteria\n- The sandbox meaning is consistent across OSes.\n- In strict/moderate profiles, connectors cannot bypass the Network Guard.\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T02:58:39.398234147-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:58:39.398234147-05:00","dependencies":[{"issue_id":"flywheel_connectors-1n78.18.3","depends_on_id":"flywheel_connectors-1n78.18","type":"parent-child","created_at":"2026-01-15T02:58:39.399511292-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.18.3","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T02:59:08.16049368-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.18.3","depends_on_id":"flywheel_connectors-1n78.18.2","type":"blocks","created_at":"2026-01-15T02:59:08.230195417-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.18.3","depends_on_id":"flywheel_connectors-1n78.28","type":"blocks","created_at":"2026-01-15T02:59:08.307372311-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.18.3","depends_on_id":"flywheel_connectors-1n78.29","type":"blocks","created_at":"2026-01-15T02:59:08.377776302-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.18.4","title":"[FCP2-SANDBOX] WASI Runtime: Preview2 Hostcalls + Capability-Gated IO","description":"# [FCP2-SANDBOX] WASI Runtime: Preview2 Hostcalls + Capability-Gated IO\n\n## Goal\nSupport running connectors as WASI (WASM) modules with capability-gated hostcalls.\n\nWASI is RECOMMENDED for high-risk connectors because it provides strong isolation and more consistent sandbox semantics across OSes.\n\n## Requirements\n- Runtime MUST implement WASI preview2 (or later).\n- File IO hostcalls must be scoped to the manifest-declared directories.\n- Network access must be mediated by the Network Guard and constrained by NetworkConstraints.\n- Clocks/entropy must be deterministic or explicitly granted (avoid hidden ambient authority).\n\n## Deliverables\n- WASI runtime adapter for connector execution.\n- Hostcall surface that matches the platform’s capabilities model (no extra ambient syscalls).\n- Interop strategy for `--manifest` extraction for WASI connectors.\n\n## Tests\n- Integration tests: a minimal WASI connector can:\n  - read/write only declared paths\n  - make an allowed Network Guard request\n  - fail closed on forbidden host/port\n\n## Acceptance Criteria\n- WASI connectors are usable as first-class connectors under the same conformance rules.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T02:58:49.699376856-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:58:49.699376856-05:00","dependencies":[{"issue_id":"flywheel_connectors-1n78.18.4","depends_on_id":"flywheel_connectors-1n78.18","type":"parent-child","created_at":"2026-01-15T02:58:49.700760312-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.18.4","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T02:59:16.709529177-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.18.4","depends_on_id":"flywheel_connectors-1n78.18.2","type":"blocks","created_at":"2026-01-15T02:59:16.780960145-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.18.4","depends_on_id":"flywheel_connectors-1n78.28","type":"blocks","created_at":"2026-01-15T02:59:16.864146974-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.18.4","depends_on_id":"flywheel_connectors-1n78.29","type":"blocks","created_at":"2026-01-15T02:59:16.935798478-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.19","title":"[FCP2] Connector Manifest (TOML): Embedding, Validation, Supply Chain Metadata","description":"# [FCP2] Connector Manifest (TOML): Embedding, Validation, Supply Chain Metadata\n\n## Goal\nDefine and implement the connector manifest as a verifiable, machine-checkable contract.\n\nThe manifest is the connector’s **mechanical interface** to the platform:\n- what it is\n- what it can do\n- what it requires\n- what it must never do\n\n## Manifest format requirements (spec + model-guide aligned)\nThe manifest must be strict, deterministic, and stable.\n\n### Required top-level identity/versioning\n- `format` / `schema_version` (manifest schema)\n- `min_mesh_version` (NORMATIVE: minimum mesh version required)\n- `min_protocol` (NORMATIVE: required protocol feature set, e.g. `fcp2-sym`)\n- `interface_hash` (NORMATIVE: deterministic hash of the connector API surface: operations + schemas + caps)\n\n### Connector metadata\n- connector `id`, `name`, `version`, `description`\n- `archetypes` (NORMATIVE: allowed values are a closed set: `bidirectional`, `streaming`, `operational`, `storage`, `knowledge`)\n  - NOTE: patterns like polling/webhook/queue are *interaction patterns*, not manifest archetype values; they must map onto the allowed archetypes.\n- runtime `format` (`native` | `wasi`)\n\n### Zones (mechanical trust boundaries)\n- `home` zone binding\n- `allowed_sources` / `allowed_targets`\n- `forbidden` zones\n\nThese are enforced by policy; they are not “documentation”.\n\n### Capabilities\n- `required` / `optional` / `forbidden` capability IDs\n- operation-level capability declarations\n- risk tier / safety tier metadata per operation\n\n**NORMATIVE rule:** host restrictions MUST NOT be encoded inside capability IDs.\n- Do **not** invent IDs like `network.egress:api.telegram.org:443`.\n- Use `NetworkConstraints` (host_allow/port_allow/SNI/SPKI pins/CIDR denies) on operations/capability constraints instead.\n\n### Operations / Events / Resources\n- operations: input/output schema IDs, descriptions, examples, rate limits\n- events: topics, replay support, cursor model, min replay buffer (`min_buffer_events`)\n- resources: ResourceObject types and classifications\n\n### Sandbox profile (NORMATIVE surface)\n- OS sandbox profile and/or WASI profile\n- NetworkConstraints (host/port/TLS, CIDR deny defaults)\n- filesystem access model (RO/RW paths)\n- timeouts, cpu/mem limits\n\n### Connector state model\n- `stateless` | `singleton_writer` | `crdt`\n- state schema versioning rules\n- snapshot cadence settings (for stateful models)\n- optional `migration_hint` (for safe upgrades; reference to a procedure, not an auto-run script)\n\n### Supply chain metadata\n- publisher signature binding manifest ↔ binary\n- optional transparency log reference (NORMATIVE if policy requires)\n- optional in-toto / SLSA attestations (policy-controlled)\n\n## Required behaviors\n- Connector binaries must support `--manifest` output.\n- Manifest validation must be strict:\n  - canonical IDs\n  - schema/version fields\n  - `interface_hash` is well-formed and computed deterministically\n  - zone constraints and sandbox constraints are within policy ceilings\n  - capability declarations are explicit and consistent\n\n## How it’s used\n- Registry/install path verifies signatures/checksums and enforces policy ceilings + supply-chain requirements.\n- Host uses manifest to build the sandbox, network constraints, and connector lifecycle defaults.\n- Conformance runner uses it for mechanical compliance checks.\n\n## Acceptance Criteria\n- Unit tests for manifest parsing/validation.\n- Golden manifest examples (good + bad) including:\n  - invalid IDs\n  - inconsistent capabilities\n  - forbidden network constraints\n  - invalid interface_hash\n- A deterministic function exists to compute `interface_hash` from the declared API surface.\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:20:22.629104849-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:55:35.857686962-05:00","labels":["fcp2","manifest","mvp"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.19","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:20:22.630419667-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.19","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T01:21:43.933261699-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.2","title":"[FCP2] Workspace Bootstrap: Crate Layout, No-Unsafe, CI Quality Gates","description":"# [FCP2] Workspace Bootstrap: Crate Layout, No-Unsafe, CI Quality Gates\n\n## Goal\nRestructure the repository into the target crate architecture for FCP V2 (mesh-native), with enforceable quality gates.\n\n## Key decisions\n- Rust 2024 edition + nightly toolchain.\n- `#![forbid(unsafe_code)]` across all crates.\n- Keep crate boundaries aligned to enforcement boundaries (e.g., tokens/crypto separate from higher-level orchestration).\n\n## Deliverables\n- Workspace crate layout aligned to FCP2 components (names are suggestions; the important part is clean boundaries):\n  - `fcp-core` (IDs, headers, canonical types)\n  - `fcp-canon` or `fcp-cbor` (canonical CBOR + schema hash prefix)\n  - `fcp-crypto` (ed25519/x25519/hpke/hkdf/aead/cose)\n  - `fcp-protocol` (FCPS/FCPC framing)\n  - `fcp-raptorq` (encoding/decoding + chunking policy)\n  - `fcp-store` (object+symbol stores, placement/repair/retention)\n  - `fcp-tailscale` (identity/peer discovery abstraction)\n  - `fcp-mesh` (routing, admission control, gossip, leases)\n  - `fcp-audit` (audit chain, receipts, decision receipts)\n  - `fcp-manifest` (manifest parsing/verification)\n  - `fcp-sandbox` (sandbox profiles + egress proxy)\n  - `fcp-sdk` (connector authoring SDK)\n  - `fcp-cli` (ops/dev CLI)\n  - `fcp-conformance` (CDDL, golden vectors, fuzz harness)\n\n- CI / local quality gates:\n  - `cargo check --all-targets`\n  - `cargo clippy --all-targets -- -D warnings`\n  - `cargo fmt --check`\n  - `cargo test`\n\n## Important constraint\nWe will likely need to *remove or replace* existing crates that are not aligned with FCP2. **File deletion is forbidden without explicit permission**, so migrations should be done by:\n- creating the new crate structure\n- moving code where it belongs\n- leaving old crates unused until we explicitly decide how to retire them\n\n## Acceptance Criteria\n- The workspace builds with the gates above.\n- No unsafe code in the workspace.\n- Crate dependency graph is acyclic and reflects layering (lower-level crates do not depend on higher-level orchestration).\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:18:32.843872797-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T01:18:32.843872797-05:00","labels":["build","fcp2","mvp"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.2","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:18:32.845135748-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.20","title":"[FCP2] Connector SDK (Rust): Standard Methods, Typed Schemas, Error Taxonomy, State Model","description":"# [FCP2] Connector SDK (Rust): Standard Methods, Typed Schemas, Error Taxonomy, State Model\n\n## Goal\nProvide a Rust SDK so connectors are easy to implement *correctly* and hard to implement *incorrectly*.\n\nThe SDK should make the \"right thing\" the default: strict validation, correct receipts/audit hooks, and zero secret leakage.\n\n## Connector Archetypes (NORMATIVE - Closed Set)\n\nThe SDK must support the **five V2 archetypes** declared in manifests. These are the ONLY valid values:\n\n```rust\npub enum ConnectorArchetype {\n    /// Send and receive messages (e.g., Telegram, Discord, Slack)\n    Bidirectional,\n    /// Emit events, read-only (e.g., webhook receivers, notification streams)\n    Streaming,\n    /// Execute operations, request/response (e.g., API wrappers, CLI tools)\n    Operational,\n    /// Store/retrieve data (e.g., S3, databases, file systems)\n    Storage,\n    /// Search/index/answer (e.g., Obsidian, Notion, knowledge bases)\n    Knowledge,\n}\n```\n\nInteraction patterns (Polling, Webhook, Queue/Pub-Sub) are NOT archetypes - they map onto these:\n- Request/Response → Operational\n- Polling → Operational (often paired with Streaming events)\n- Webhook → Streaming (and/or Operational for acknowledgments)\n- Queue/Pub-Sub → Bidirectional or Streaming depending on API\n\n## Must Support\n\n### Standard Method Surface (NORMATIVE)\n\nThe SDK MUST provide typed handlers for:\n- `--manifest` output (binary invocation)\n- `handshake` - initial negotiation\n- `describe` - capability/feature advertisement\n- `introspect` - MCP-compatible tool descriptors\n- `capabilities` - capability token requirements\n- `configure` - runtime configuration\n- `invoke` - operation execution\n- `health` - liveness/readiness probes\n- `shutdown` - graceful termination\n- `simulate` / `simulate_response` - preflight checks (MUST be side-effect-free; can return CostEstimate/Availability)\n- `subscribe` - event subscription (Streaming/Bidirectional connectors)\n\n### Typed Schemas + Validation\n\n- Dispatch on SchemaId (not JSON method strings)\n- Validate inputs against manifest-declared schemas\n- Enforce input/output schema compliance at SDK boundary\n- Reject invalid inputs before reaching connector logic\n\n### Connector State Model Integration\n\nSupport mesh-persisted state models from manifest:\n\n```rust\npub enum ConnectorStateModel {\n    /// No persistent state\n    Stateless,\n    /// Single-writer with lease-based fencing\n    SingletonWriter,\n    /// CRDT-based collaborative state (LwwMap, OrSet, GCounter, PnCounter)\n    Crdt { crdt_type: CrdtType },\n}\n```\n\nProvide helpers for:\n- State snapshots and delta application\n- Fork detection and reconciliation hooks\n- Singleton-writer lease acquisition/renewal (via 1n78.34)\n\n### Error Taxonomy + Recovery Hints\n\n- Emit FCP-XXXX error codes with retry semantics\n- Provide `ai_recovery_hint` for common failures\n- Map internal errors to stable public codes\n- Never include secrets in error messages\n\n### Observability Defaults\n\n- Structured JSON logs with correlation/trace context\n- W3C TraceContext propagation (trace_id, span_id)\n- Hooks to emit audit events/receipts via host\n- Automatic redaction of secrets/PII in logs\n\n## SDK-Provided Traits\n\n```rust\n#[async_trait]\npub trait FcpConnector {\n    /// Return connector metadata consistent with manifest\n    fn metadata(\u0026self) -\u003e Connector;\n    \n    /// Handle control-plane objects by SchemaId dispatch\n    async fn handle_control_plane(\n        \u0026self, \n        obj: ControlPlaneObject\n    ) -\u003e Result\u003cControlPlaneObject, FcpError\u003e;\n}\n```\n\nImplementation notes:\n- Dispatch on SchemaId from obj.header.schema, not JSON method strings\n- Validate inputs against manifest schemas\n- Enforce Strict idempotency when required; return prior receipts on duplicate idempotency_key\n- When producing mesh objects, include ObjectHeader with provenance\n\n## Acceptance Criteria\n\n- Example skeleton connector compiles and passes conformance checks\n- SDK provides safe defaults so connectors do not implement crypto, framing, or policy evaluation directly\n- All 5 archetypes can be implemented using SDK primitives\n- State model helpers integrate with lease system\n- Error codes are stable and well-documented","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:20:22.679914332-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:33:42.70130696-05:00","labels":["fcp2","mvp","sdk"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.20","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:20:22.681210466-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.20","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T01:21:44.122268639-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.20","depends_on_id":"flywheel_connectors-1n78.13","type":"blocks","created_at":"2026-01-15T01:21:44.168166705-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.20","depends_on_id":"flywheel_connectors-1n78.7","type":"blocks","created_at":"2026-01-15T01:21:44.214987821-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.20","depends_on_id":"flywheel_connectors-1n78.8","type":"blocks","created_at":"2026-01-15T01:21:44.263504604-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.20","depends_on_id":"flywheel_connectors-1n78.10","type":"blocks","created_at":"2026-01-15T01:21:44.311158048-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.20","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T01:51:14.481926175-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.20","depends_on_id":"flywheel_connectors-1n78.29","type":"blocks","created_at":"2026-01-15T01:51:14.532113661-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.20","depends_on_id":"flywheel_connectors-1n78.28","type":"blocks","created_at":"2026-01-15T01:51:14.582712632-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.20","depends_on_id":"flywheel_connectors-kt9r","type":"blocks","created_at":"2026-01-15T02:54:36.70676967-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.20.1","title":"[FCP2-SDK] Streaming + Replay + Acks (EventEnvelope)","description":"# [FCP2-SDK] Streaming + Replay + Acks (EventEnvelope)\n\n## Goal\nMake streaming connectors easy to implement correctly by standardizing:\n- EventEnvelope encoding\n- subscription lifecycle\n- replay-from-cursor semantics\n- ack semantics for reliable delivery\n\n## Requirements (model-guide aligned)\n- Events are emitted as canonical objects (schema-hash + deterministic CBOR).\n- EventEnvelope includes at minimum:\n  - `topic`, `timestamp`, `seq`, `cursor`, `requires_ack`, `data`\n- If `requires_ack=true`, consumers MUST be able to ack; connectors can track delivery state.\n- If `event_caps.replay=true`, connectors MUST support replay from a cursor.\n- `event_caps.min_buffer_events` sets the minimum replay buffer size.\n\n## Deliverables\n- SDK types + helpers:\n  - `EventEnvelope` type + canonical encoding\n  - `subscribe` handler scaffolding\n  - `ack` API surface (host → connector)\n  - replay cursor plumbing\n- Conformance hooks:\n  - compliance runner can verify declared event behavior (replay/acks)\n\n## Tests\n- Unit tests: cursor monotonicity; ack required/optional behavior.\n- Integration tests: subscribe → receive events → ack → replay from cursor.\n\n## Acceptance Criteria\n- A reference streaming connector can pass conformance without writing bespoke streaming machinery.\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T02:22:35.64789948-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:22:35.64789948-05:00","labels":["fcp2","mvp","sdk","streaming"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.20.1","depends_on_id":"flywheel_connectors-1n78.20","type":"parent-child","created_at":"2026-01-15T02:22:35.693832905-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.20.1","depends_on_id":"flywheel_connectors-1n78.3","type":"blocks","created_at":"2026-01-15T02:22:44.125846116-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.20.1","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T02:22:44.1777744-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.20.1","depends_on_id":"flywheel_connectors-1n78.13","type":"blocks","created_at":"2026-01-15T02:22:44.229242929-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.20.1","depends_on_id":"flywheel_connectors-1n78.28","type":"blocks","created_at":"2026-01-15T02:22:44.281803922-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.20.1","depends_on_id":"flywheel_connectors-1n78.29","type":"blocks","created_at":"2026-01-15T02:22:44.332665381-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.20.1","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T02:22:44.383083757-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.20.1","depends_on_id":"flywheel_connectors-1n78.21","type":"blocks","created_at":"2026-01-15T02:22:44.459185807-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.20.2","title":"[FCP2-SDK] Simulate + CostEstimate (Preflight, Availability Checks, No Pricing Tables)","description":"# [FCP2-SDK] Simulate + CostEstimate (Preflight, Availability Checks, No Pricing Tables)\n\n## Goal\nAdd **spec-accurate** support for `SimulateRequest`/`SimulateResponse` so agents (and the host) can run **preflight checks** for an operation *without executing side effects*.\n\nThis is a connector-facing ergonomics + safety feature:\n- fast “would this succeed?” answers\n- capability/policy denials surfaced *before* we do expensive work\n- bounded “cost estimate” and availability checks for planning\n\nSpec anchor:\n- `SimulateRequest` / `SimulateResponse` / `CostEstimate` in `FCP_Specification_V2.md` (Wire Protocol section).\n\n## Hard Requirements (NORMATIVE intent)\n- **No side effects:** simulate MUST NOT perform external writes or mutate external state.\n- **Policy-aware:** simulate must reflect capability/policy gating as closely as invoke.\n- **Deterministic \u0026 bounded:** cost estimation and availability checks must be bounded (timeouts, size limits) and deterministic given the same inputs.\n\n## Deliverables\n### 1) SDK Types + Dispatch\n- Provide typed structures aligned to spec:\n  - `SimulateRequest { id, operation, input, capability_token, estimate_cost, check_availability }`\n  - `SimulateResponse { id, would_succeed, failure_reason, missing_capabilities, estimated_cost, availability }`\n  - `CostEstimate { api_credits, estimated_duration_ms, estimated_bytes, currency }` (all optional)\n- Add SDK dispatch wiring so connectors can implement `simulate` alongside `invoke`.\n\n### 2) Cost Tracking Policy (NO hard-coded pricing)\n- Connectors SHOULD populate **usage estimates** (tokens/credits/bytes/duration) when they can.\n- We do **not** embed pricing tables in connectors.\n- `CurrencyCost` is OPTIONAL and should only be populated when the connector has a stable, explicit currency basis that does not require volatile price tables.\n\n### 3) Availability Checks\nWhen `check_availability=true`, connectors MAY return:\n- resource existence/availability\n- rate limit headroom signals (remaining/reset)\n\nAvailability checks MUST:\n- be read-only\n- be time-bounded\n- avoid leaking secrets in error strings/logs\n\n## Tests\n- Add SDK unit tests ensuring:\n  - simulate dispatch works and round-trips canonical object encoding\n  - `estimate_cost` / `check_availability` toggles affect response shape deterministically\n  - simulate never calls write paths in test connectors (guarded by mocks)\n  - missing capability results are stable and do not depend on ordering\n\n## Acceptance Criteria\n- A reference/test connector can implement simulate via the SDK.\n- E2E harness can run at least one simulate scenario (preflight deny + preflight allow).\n- No connector is required to implement simulate for all operations, but the platform MUST support the message types and the SDK must make it easy.\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T05:56:46.518831568-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:56:46.518831568-05:00","labels":["fcp2","mvp","sdk"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.20.2","depends_on_id":"flywheel_connectors-1n78.20","type":"parent-child","created_at":"2026-01-15T05:56:49.437295291-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.20.2","depends_on_id":"flywheel_connectors-1n78.13","type":"blocks","created_at":"2026-01-15T05:57:14.680035752-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.20.2","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T05:57:14.928073987-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.20.2","depends_on_id":"flywheel_connectors-1n78.28","type":"blocks","created_at":"2026-01-15T05:57:15.218006462-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.20.2","depends_on_id":"flywheel_connectors-1n78.29","type":"blocks","created_at":"2026-01-15T05:57:15.491172902-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.20.2","depends_on_id":"flywheel_connectors-1n78.3","type":"blocks","created_at":"2026-01-15T05:57:15.742377378-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.20.2","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T05:57:15.992330845-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.21","title":"[FCP2] Conformance: Golden Vectors, Fuzz Targets, Interop Tests, Mechanical Connector Compliance","description":"# [FCP2] Conformance: Golden Vectors, Fuzz Targets, Interop Tests, Mechanical Connector Compliance\n\n## Goal\nMake the spec enforceable by tests.\n\nConformance is the bridge between \"the spec says\" and \"the implementation actually does\".\n\n## Must include\n- CDDL for normative CBOR objects.\n- Golden byte vectors for:\n  - canonical serialization + schema hash prefix\n  - ObjectId derivation for security objects\n  - COSE_Sign1 capability token encoding/verification\n  - HPKE sealed boxes (ZoneKeyManifest + ObjectIdKey distribution)\n  - FCPS frame parsing (valid + invalid)\n  - session transcripts + derived keys\n\n- Fuzz targets for:\n  - FCPS frame parsing\n  - FCPC frame parsing\n  - session handshake transcript verification\n  - capability token verification (grant mismatches, revocation staleness)\n  - ZoneKeyManifest parsing + unwrap\n\n- Interop tests:\n  - handshake negotiation\n  - symbol exchange + reconstruction\n  - capability verification\n  - cross-zone denials/approvals\n\n- E2E harness:\n  - multi-node simulation\n  - standard E2E scenarios with structured logs\n\n- Mechanical connector compliance runner:\n  - static manifest checks\n  - dynamic method/capability checks under harness\n\n## Acceptance Criteria\n- `cargo test -p fcp-conformance` is green.\n- Fuzz targets are runnable and have a seed corpus.\n- CI can reject a non-compliant connector artifact automatically.\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:20:22.728474376-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T01:56:01.504833021-05:00","labels":["conformance","fcp2","mvp","security"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.21","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:20:22.729879625-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21","depends_on_id":"flywheel_connectors-1n78.3","type":"blocks","created_at":"2026-01-15T01:21:44.356618129-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T01:21:44.405384231-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21","depends_on_id":"flywheel_connectors-1n78.5","type":"blocks","created_at":"2026-01-15T01:21:44.454078909-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21","depends_on_id":"flywheel_connectors-1n78.6","type":"blocks","created_at":"2026-01-15T01:21:44.501129758-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21","depends_on_id":"flywheel_connectors-1n78.7","type":"blocks","created_at":"2026-01-15T01:21:44.551009549-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21","depends_on_id":"flywheel_connectors-1n78.9","type":"blocks","created_at":"2026-01-15T01:21:44.597268916-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21","depends_on_id":"flywheel_connectors-1n78.12","type":"blocks","created_at":"2026-01-15T01:21:44.642291753-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21","depends_on_id":"flywheel_connectors-1n78.24","type":"blocks","created_at":"2026-01-15T01:51:14.987658652-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T01:51:15.03898819-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21","depends_on_id":"flywheel_connectors-1n78.34","type":"blocks","created_at":"2026-01-15T01:51:15.090726297-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21","depends_on_id":"flywheel_connectors-1n78.25","type":"blocks","created_at":"2026-01-15T01:51:15.139172062-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.21.1","title":"[FCP2-CONF] Golden Vectors + CDDL Pack","description":"# [FCP2-CONF] Golden Vectors + CDDL Pack\n\n## Goal\nProduce the canonical interoperability artifacts that prevent cross-implementation drift.\n\n## Deliverables\n- `FCP_CDDL_V2.cddl` covering NORMATIVE CBOR object schemas.\n- Golden byte vectors for:\n  - schema hash prefix + canonical CBOR\n  - keyed ObjectId derivation for security object classes\n  - signing-bytes canonicalization (\"unsigned view\" + deterministic CBOR) for at least:\n    - ZoneCheckpoint / AuditHead / RevocationHead\n    - and deterministic sorting of quorum signature arrays by node_id\n  - COSE_Sign1 capability tokens (including chk_id/chk_seq + holder_node)\n  - holder_proof signable bytes + verification\n  - HPKE sealed boxes (ZoneKeyManifest + ObjectIdKey distribution) including required AAD binding\n  - FCPS datagram envelope (session_id/seq/mac) + inner frame parsing (valid/invalid)\n  - session transcript bytes + derived keys (including HelloRetry cookie + TransportLimits)\n\n## Test/CI behavior\n- Vectors are tested as exact bytes (no \"close enough\").\n- A small CLI/test helper can regenerate vectors only with explicit intent.\n\n## Acceptance Criteria\n- Vectors run in CI and are stable.\n- Changing canonicalization or hashing causes an obvious failing diff.\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:52:04.203077549-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:06:00.642341518-05:00","labels":["conformance","fcp2","mvp","vectors"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.21.1","depends_on_id":"flywheel_connectors-1n78.21","type":"parent-child","created_at":"2026-01-15T01:52:04.204789644-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21.1","depends_on_id":"flywheel_connectors-1n78.3","type":"blocks","created_at":"2026-01-15T01:54:31.173138969-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21.1","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T01:54:31.223197883-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21.1","depends_on_id":"flywheel_connectors-1n78.5","type":"blocks","created_at":"2026-01-15T01:54:31.273222562-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21.1","depends_on_id":"flywheel_connectors-1n78.24","type":"blocks","created_at":"2026-01-15T01:54:31.323095335-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.21.2","title":"[FCP2-CONF] Fuzz Targets + Seed Corpora (Decode/Parse/Verify)","description":"# [FCP2-CONF] Fuzz Targets + Seed Corpora (Decode/Parse/Verify)\n\n## Goal\nMake decode/parse/verify surfaces resilient against malformed and adversarial inputs.\n\n## Required fuzz targets (minimum)\n- FCPS frame parsing\n- FCPC frame parsing\n- session handshake transcript verification\n- capability token verification\n- ZoneKeyManifest parsing + HPKE unseal behavior\n\n## Corpora\n- Include at least one \"decode DoS\" corpus designed to maximize decode CPU.\n- Include corpora for common signature/CBOR malformations.\n\n## Logging\n- Fuzz failures must dump minimal reproducer input IDs and reason codes.\n\n## Acceptance Criteria\n- Fuzz targets are runnable via cargo (documented).\n- Seed corpora committed.\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:52:04.261662214-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T01:52:04.261662214-05:00","labels":["conformance","fcp2","fuzz","mvp"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.21.2","depends_on_id":"flywheel_connectors-1n78.21","type":"parent-child","created_at":"2026-01-15T01:52:04.263536004-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21.2","depends_on_id":"flywheel_connectors-1n78.12","type":"blocks","created_at":"2026-01-15T01:54:31.37211966-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21.2","depends_on_id":"flywheel_connectors-1n78.13","type":"blocks","created_at":"2026-01-15T01:54:31.422544393-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21.2","depends_on_id":"flywheel_connectors-1n78.24","type":"blocks","created_at":"2026-01-15T01:54:31.473916912-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21.2","depends_on_id":"flywheel_connectors-1n78.7","type":"blocks","created_at":"2026-01-15T01:54:31.525598142-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21.2","depends_on_id":"flywheel_connectors-1n78.6","type":"blocks","created_at":"2026-01-15T01:54:31.576300387-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.21.3","title":"[FCP2-CONF] Interop Test Suite (Handshake, Symbols, Tokens, Cross-Zone)","description":"# [FCP2-CONF] Interop Test Suite (Handshake, Symbols, Tokens, Cross-Zone)\n\n## Goal\nVerify that independent implementations can interoperate on the wire.\n\nEven though the reference implementation is Rust, these tests should be structured so a second implementation (future Rust rewrite, Go/Python test client, etc.) can plug in.\n\n## Scenarios (minimum)\n### Sessions / handshake\n- MeshSessionHello/Ack transcript verification:\n  - deterministic transcript bytes\n  - suite negotiation determinism\n- HelloRetry cookie path:\n  - responder issues cookie\n  - initiator retries with cookie\n- TransportLimits negotiation + enforcement:\n  - max_datagram_bytes affects FCPS_DATAGRAM acceptance\n\n### FCPS data plane\n- FCPS_DATAGRAM envelope:\n  - MAC computation and verification for Suite1 and Suite2\n  - bounded replay window behavior\n  - MTU enforcement\n- Inner FCPS frame parsing:\n  - header fields parsed exactly\n  - symbol record parsing with strict bounds\n- Per-symbol AEAD:\n  - deterministic nonce derivation\n  - AAD binding matches spec\n\n### FCPC control plane\n- FCPC frame parsing/ordering:\n  - ordered delivery per direction\n  - bounded replay window\n  - k_ctx AEAD integrity (and confidentiality if enabled)\n\n### Capability tokens + provable authority\n- COSE_Sign1 encoding/verification\n- grant_object_ids subset enforcement\n- chk_id/chk_seq freshness binding\n- holder_node + holder_proof verification\n\n### Cross-zone enforcement\n- deny cross-zone operations without required ApprovalToken\n- allow with correct ApprovalToken evidence\n- DecisionReceipt reason_code + evidence stability\n\n## Acceptance Criteria\n- Tests are deterministic and can run in CI without a real tailnet.\n- The test harness can ingest golden vectors as inputs and validate byte-for-byte expectations.\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:52:04.320779733-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:06:16.937255248-05:00","labels":["conformance","fcp2","interop","mvp"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.21.3","depends_on_id":"flywheel_connectors-1n78.21","type":"parent-child","created_at":"2026-01-15T01:52:04.322068802-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21.3","depends_on_id":"flywheel_connectors-1n78.24","type":"blocks","created_at":"2026-01-15T01:54:31.62643832-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21.3","depends_on_id":"flywheel_connectors-1n78.12","type":"blocks","created_at":"2026-01-15T01:54:31.676120925-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21.3","depends_on_id":"flywheel_connectors-1n78.7","type":"blocks","created_at":"2026-01-15T01:54:31.727601447-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21.3","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T01:54:31.777087401-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.21.4","title":"[FCP2-CONF] System E2E Harness: Multi-Node Simulation + Structured Logs","description":"# [FCP2-CONF] System E2E Harness: Multi-Node Simulation + Structured Logs\n\n## Goal\nProvide end-to-end confidence that the platform works as a coherent system.\n\n## Key idea\nRun a multi-node simulation (in-process or multi-process) with deterministic identities and keys, so we can test:\n- sessions\n- symbol routing\n- policy decisions\n- receipts/audit\n- repair loop behavior\n\n## Deliverables\n- A harness that can spin up N MeshNodes with deterministic keys.\n- A \"minimal connector\" (or test connector) that exercises invoke + events.\n- Scripts/tests that run the required E2E scenarios from STANDARD.\n\n## Logging\n- Every scenario emits structured JSON logs with correlation_id and phase.\n\n## Acceptance Criteria\n- CI can run the E2E harness with `--nocapture` and produce usable logs.\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:52:04.378297188-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T01:52:04.378297188-05:00","labels":["conformance","e2e","fcp2","mvp"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.21.4","depends_on_id":"flywheel_connectors-1n78.21","type":"parent-child","created_at":"2026-01-15T01:52:04.379508019-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21.4","depends_on_id":"flywheel_connectors-1n78.17","type":"blocks","created_at":"2026-01-15T01:54:31.827701912-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21.4","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T01:54:31.879968655-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21.4","depends_on_id":"flywheel_connectors-1n78.27","type":"blocks","created_at":"2026-01-15T01:54:31.933951491-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21.4","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T01:54:31.985495602-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.21.5","title":"[FCP2-CONF] Mechanical Connector Compliance Runner (Static + Dynamic)","description":"# [FCP2-CONF] Mechanical Connector Compliance Runner (Static + Dynamic)\n\n## Goal\nGiven a connector binary, mechanically verify it meets the FCP2 connector contract.\n\n## Static checks\n- `--manifest` output parses and validates strictly.\n- Manifest versioning fields are present and sane:\n  - `schema_version`, `min_mesh_version`, `min_protocol`, `interface_hash`\n- Canonical IDs and schema versions.\n- Capability declarations are explicit (required/optional/forbidden).\n- Zone constraints (`home`, allowed_sources/targets, forbidden) are present.\n- Sandbox profile + network constraints are within zone ceilings.\n\n## Dynamic checks\nRun the connector under the host/SDK harness and probe:\n- standard methods (handshake/describe/introspect/capabilities/configure/invoke/health/shutdown)\n- **optional** preflight: if connector exposes `simulate`, probe simulate for at least one operation and verify:\n  - response is well-formed and deterministic\n  - no side effects are observed in the harness (no receipts/intents, no state mutation beyond caches)\n- capability gating (default deny)\n- DecisionReceipt production on denials (stable reason_code + evidence)\n- event subscription/replay behavior (if declared)\n- no secret leakage in logs\n\n## Acceptance Criteria\n- Compliance runner can be used in CI to accept/reject a connector artifact.\n\n\nLABELS: conformance, connectors, fcp2, mvp\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:52:04.434929285-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:21:46.89349417-05:00","labels":["conformance","connectors","fcp2","mvp"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.21.5","depends_on_id":"flywheel_connectors-1n78.21","type":"parent-child","created_at":"2026-01-15T01:52:04.436585735-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21.5","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T01:54:32.033713909-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21.5","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T01:54:32.084587016-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21.5","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T01:54:32.132758745-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21.5","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T01:54:32.185378623-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.21.6","title":"[FCP2-CONF] FZPF v0.1 JSON Schema Pack (Policy Authoring + Validation)","description":"# [FCP2-CONF] FZPF v0.1 JSON Schema Pack (Policy Authoring + Validation)\n\n## Goal\nMake policy authoring **mechanical and verifiable** by shipping the **FZPF v0.1 JSON Schema** (Spec Appendix A) as an explicit artifact, with tests.\n\nEven though FCP2’s canonical objects are deterministic CBOR, users and tools still need a **human-authorable** representation for zone/policy definitions.\n\n## Scope\n- Define/ship `FZPF_v0.1.schema.json` (or equivalent) in-repo.\n- Provide golden example documents that cover the important policy shapes.\n- Validate that policy JSON inputs can be validated deterministically and fail-closed.\n\n## Design Notes\n- This is **V2-only**. Any older “hub” concepts are out of scope.\n- FZPF should be aligned to the V2 policy object model:\n  - ZoneDefinitionObject\n  - ZonePolicyObject\n  - RoleObject / RoleAssignment\n  - ApprovalToken constraints (JSON Pointer only)\n  - ZoneTransportPolicy and port-gating fields\n\n## Deliverables\n- JSON schema file for FZPF (v0.1).\n- Example policy documents:\n  - minimal zone definition + policy\n  - role bundles + assignment + attenuation\n  - transport restrictions (DERP/Funnel forbidden)\n  - revocation/checkpoint freshness policy (Strict/Warn/BestEffort)\n  - taint/approval constraints (elevation + declassification)\n- Unit tests:\n  - validate example docs against schema\n  - negative tests for forbidden constructs (regex/JSONPath, unbounded globs, unknown fields)\n  - deterministic ordering and stable validation errors (no non-deterministic maps)\n\n## Acceptance Criteria\n- Schema is present in the repo and referenced by conformance docs.\n- Example docs validate and are comprehensive enough to exercise the sharp edges.\n- Validation is fail-closed: unknown/extra fields are rejected.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T05:58:56.405185586-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:58:56.405185586-05:00","labels":["conformance","fcp2","policy"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.21.6","depends_on_id":"flywheel_connectors-1n78.21","type":"parent-child","created_at":"2026-01-15T05:58:59.318440597-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21.6","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T05:59:04.14739501-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21.6","depends_on_id":"flywheel_connectors-1n78.3","type":"blocks","created_at":"2026-01-15T05:59:04.401901652-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.21.6","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T05:59:04.6578375-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.22","title":"[FCP2] CLI: install/doctor/explain/bench/audit/repair","description":"# [FCP2] CLI: install/doctor/explain/bench/audit/repair\n\n## Goal\nShip an operator/dev CLI that makes the system operable **without disabling security**.\n\nKey principle: if you can't explain a denial or quantify offline availability, the system isn't finished.\n\n## Command set (MVP)\n### Safety + debugging\n- `fcp doctor --zone \u003czone\u003e`\n  - report checkpoint freshness, revocation freshness, degraded-mode state\n  - report transport policy state (DERP/Funnel allowed?)\n- `fcp explain --request \u003cobjectid\u003e`\n  - render DecisionReceipt evidence and reason_code\n  - include pointers to relevant objects (token, grants, checkpoint, approvals)\n\n### Storage + availability\n- `fcp repair status --zone \u003czone\u003e`\n  - report coverage metrics (bps), distinct nodes, max concentration\n  - report pending/last repair actions\n- `fcp audit tail --zone \u003czone\u003e`\n  - tail AuditEvent stream with trace correlation\n\n### Install + verification\n- `fcp install \u003cconnector\u003e`\n  - verify supply chain chain and policy requirements\n  - install/mirror connector into mesh store\n\n### Performance\n- `fcp bench ...`\n  - canonical CBOR encode/decode\n  - ObjectId derivation\n  - token verify\n  - FCPS parse+verify\n  - RaptorQ decode\n  - invoke-local and invoke-mesh\n\n## Output contracts\n- All commands MUST support a machine-readable `--json` output mode.\n- Errors MUST be stable FCP-XXXX codes with retry semantics.\n- Commands MUST NOT print secrets (including auth headers, tokens, and raw secret material).\n\n## Testing\n- Snapshot tests for `--json` output schemas.\n- E2E tests in the deterministic harness:\n  - `fcp install` + invoke\n  - `fcp explain` on a denial\n  - `fcp doctor` showing stale/fresh transitions\n  - `fcp repair status` showing coverage changes\n\n## Acceptance Criteria\n- CLI commands operate purely from mesh objects and verifiable receipts.\n- A denial can be diagnosed from DecisionReceipt + CLI output alone.\n\n## Implementation note\nThe concrete CLI implementation work is tracked in the child bead `flywheel_connectors-iqrb`.\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:20:22.779127696-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:59:57.716336469-05:00","labels":["cli","fcp2","mvp"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.22","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:20:22.780441963-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.22","depends_on_id":"flywheel_connectors-1n78.17","type":"blocks","created_at":"2026-01-15T01:21:44.687776179-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.22","depends_on_id":"flywheel_connectors-1n78.15","type":"blocks","created_at":"2026-01-15T01:21:44.734719465-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.22","depends_on_id":"flywheel_connectors-1n78.11","type":"blocks","created_at":"2026-01-15T01:21:44.780276558-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.22","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T01:21:44.829613266-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.22","depends_on_id":"flywheel_connectors-1n78.21","type":"blocks","created_at":"2026-01-15T01:21:44.879537482-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.22","depends_on_id":"flywheel_connectors-iqrb","type":"blocks","created_at":"2026-01-15T03:02:09.899903264-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.23","title":"[FCP2] Performance Budgets: Benchmarks, Profiles, Binary Size Targets","description":"# [FCP2] Performance Budgets: Benchmarks, Profiles, Binary Size Targets\n\n## Goal\nMake performance and binary size regressions **visible, measurable, and hard to ignore**.\n\nThe benchmark suite is part of the product: if we can’t measure cold start, invoke latency, decode costs, and offline-repair overhead, we can’t keep the system fast and reliable.\n\n## Canonical Targets (README-aligned)\nTrack these as p50/p99 where applicable:\n- **Cold start (connector activate):** p50 \u003c 100ms / p99 \u003c 500ms (stretch goal: p50 \u003c 50ms)\n- **Local invoke latency (same node):** p50 \u003c 2ms / p99 \u003c 10ms\n- **Tailnet invoke latency (LAN/direct):** p50 \u003c 20ms / p99 \u003c 100ms\n- **Tailnet invoke latency (DERP):** p50 \u003c 150ms / p99 \u003c 500ms\n- **Symbol reconstruction (1MB):** p50 \u003c 50ms / p99 \u003c 250ms\n- **Secret reconstruction (k-of-n):** p50 \u003c 150ms / p99 \u003c 750ms\n- **Memory overhead:** \u003c 10MB per connector (idle)\n- **CPU overhead:** \u003c 1% idle (event-driven)\n- **Binary size:** \u003c 20MB compressed (release profile: opt-level=z, lto, strip)\n\n## Bench Suite Shape (CLI contract)\nThe reference implementation ships `fcp bench` with stable subcommands:\n- `fcp bench connector-activate`\n- `fcp bench invoke-local`\n- `fcp bench invoke-mesh --path=direct`\n- `fcp bench invoke-mesh --path=derp`\n- `fcp bench raptorq --size=1mb`\n- `fcp bench secrets --k=3 --n=5`\n\nAdditionally, we want microbenches for hot primitives:\n- canonical CBOR encode/decode\n- ObjectId derivation\n- CapabilityToken verify\n- FCPS parse + session MAC verify\n\n## Output + Regression Tracking\n- Emit machine-readable JSON results (with environment metadata + versions + commit hash).\n- Provide deterministic bench fixtures where possible.\n- CI policy can start as “report-only” and later move to strict thresholds once baselines stabilize.\n\n## Acceptance Criteria\n- Bench suite runs in CI (or as a gated job) and outputs machine-readable JSON.\n- The CLI subcommand surface is stable enough to track regressions over time.\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:20:22.857300118-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:03:22.96191737-05:00","labels":["fcp2","mvp","perf"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.23","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:20:22.872237083-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.23","depends_on_id":"flywheel_connectors-1n78.2","type":"blocks","created_at":"2026-01-15T01:21:44.926982233-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.24","title":"[FCP2] Sessions: MeshSessionHello/Ack, Suite Negotiation, Key Schedule, Anti-Replay","description":"# [FCP2] Sessions: MeshSessionHello/Ack, Suite Negotiation, Key Schedule, Anti-Replay\n\n## Goal\nImplement the **session layer** that authenticates FCPS datagrams and secures FCPC frames.\n\nThe key idea: Ed25519 per-frame signatures are too expensive; FCP2 uses a one-time authenticated handshake to derive session keys, then MACs/encrypts frames with a monotonic sequence and a bounded replay window.\n\n## Why users care\n- High throughput with strong attribution and replay protection.\n- Debuggable: we can explain why a frame/handshake was rejected (bad MAC, stale seq, cookie missing, wrong suite, etc.).\n- DoS-resistant: the stateless cookie path prevents responder resource exhaustion.\n\n## Protocol objects (canonical CBOR; spec-aligned)\n### MeshSessionHello (initiator → responder)\nFields:\n- `from`, `to` (TailscaleNodeId)\n- `eph_pubkey` (X25519)\n- `nonce` ([u8;16])\n- `cookie` (Option\u003c[u8;32]\u003e) **NORMATIVE when responder requires it**\n- `timestamp` (u64)\n- `suites` (ordered preferences)\n- `transport_limits` (Option\u003cTransportLimits\u003e) **NORMATIVE when present**\n- `signature` (Ed25519 by node signing key)\n\nTranscript binding (must be exact and domain-separated):\n- transcript = `\"FCP2-HELLO-V1\" || from || to || eph_pubkey || nonce || cookie || timestamp || suites || transport_limits`\n\n### MeshSessionAck (responder → initiator)\nFields:\n- `from`, `to`\n- `eph_pubkey`\n- `nonce` ([u8;16])\n- `session_id` ([u8;16])\n- `suite` (selected)\n- `timestamp`\n- `signature` over full transcript:\n  - transcript = `\"FCP2-ACK-V1\" || from || to || eph_pubkey || nonce || session_id || suite || timestamp || hello.eph_pubkey || hello.nonce`\n\n### MeshSessionHelloRetry (stateless cookie challenge)\nUsed to defer expensive work (signature verification, ECDH) until the initiator proves reachability.\nFields:\n- `from`, `to`\n- `cookie` ([u8;32])\n- `timestamp`\n\nCookie computation (NORMATIVE when used):\n- cookie = `HMAC(cookie_key, from || to || hello.eph_pubkey || hello.nonce || hello.timestamp)[:32]`\n\nCookie-key operational rule:\n- Rotate `cookie_key` periodically (e.g., every 60s) with a grace window for in-flight handshakes.\n\n### TransportLimits\n- `max_datagram_bytes: u16` (default: 1200)\n\n## Crypto suites (must match spec intent)\n- Suite1: X25519 + HKDF-SHA256 + HMAC-SHA256 (tag truncated to 16 bytes)\n- Suite2: X25519 + HKDF-SHA256 + BLAKE3 keyed MAC (tag truncated to 16 bytes)\n\n**NORMATIVE safety rule:** do not use Poly1305 as a multi-message MAC.\n\n## Key schedule (deterministic; must be spec-aligned)\n- prk = `HKDF-SHA256(ikm=ECDH(eph_i, eph_r), salt=session_id, info=\"FCP2-SESSION-V1\" || initiator_node_id || responder_node_id || hello_nonce || ack_nonce)`\n- keys = `HKDF-Expand(prk, info=\"FCP2-SESSION-KEYS-V1\", L=96)` split as:\n  - `k_mac_i2r` (32)\n  - `k_mac_r2i` (32)\n  - `k_ctx` (32) (FCPC AEAD / reserved control-plane confidentiality)\n\n## Anti-replay / time policy requirements\n- Maintain per-session monotonic `seq` with a bounded reorder window (default: 128).\n- Enforce datagram size: `len(fcps_datagram) ≤ max_datagram_bytes` (default 1200).\n- Enforce max clock skew on hello/ack timestamps (default 120s; log skew events).\n- Rekey triggers (configurable): max frames, max time, or max bytes.\n\n## Deliverables\n- Canonical schemas for hello/ack/retry and key derivation.\n- Implementation that:\n  - verifies NodeKeyAttestation before trusting signatures\n  - negotiates suite deterministically\n  - supports the cookie retry path (HelloRetry)\n  - derives keys exactly as above\n  - exposes `SessionKeys` + negotiated `TransportLimits` to FCPS/FCPC\n- Structured logs for session lifecycle (no secrets):\n  - `session_id`, `peer_node_id`, `suite`, `decision` (accept/reject), `reason_code`\n\n## Tests (must be comprehensive)\n- Golden vectors:\n  - transcript bytes (hello/ack)\n  - derived keys\n  - cookie computation\n- Adversarial tests:\n  - missing/invalid cookie rejected when required\n  - replayed hello/ack rejected\n  - tampered suites/limits rejected\n  - mismatched hello/ack nonces rejected\n- Fuzz target:\n  - handshake parsing and transcript verification\n\n## Acceptance Criteria\n- Golden vectors exist for transcripts + derived keys + cookie.\n- Fuzz target runs without panics and finds no trivial bypass.\n- FCPS/FCPC can consume session keys in integration tests.\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:49:54.431532468-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:16:08.767334267-05:00","labels":["fcp2","mvp","protocol","security","session"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.24","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:49:54.433150106-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.24","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T01:51:11.332333715-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.24","depends_on_id":"flywheel_connectors-1n78.5","type":"blocks","created_at":"2026-01-15T01:51:11.405274475-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.24","depends_on_id":"flywheel_connectors-1n78.16","type":"blocks","created_at":"2026-01-15T01:51:11.453877315-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.24","depends_on_id":"flywheel_connectors-1n78.3","type":"blocks","created_at":"2026-01-15T01:51:11.502185581-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.24.1","title":"TEST: Sessions Unit/Adversarial Tests (Handshake + Key Schedule)","description":"# TEST: Sessions Unit/Adversarial Tests (Handshake + Key Schedule)\n\n## Goal\nMake the session layer provably correct and resilient - no authentication bypasses, no key compromise paths.\n\n## Test Categories\n\n### MeshSessionHello Tests\n- [ ] Valid Hello parses correctly\n- [ ] Suite list parsing\n- [ ] Supported suites only\n- [ ] Suite preference ordering\n- [ ] Random bytes present and non-zero\n- [ ] Timestamp within acceptable skew\n- [ ] NodeId format validation\n\n### MeshSessionAck Tests\n- [ ] Valid Ack parses correctly\n- [ ] Chosen suite present in Hello list\n- [ ] Cookie validation\n- [ ] Random bytes present\n- [ ] Signature verification\n\n### Transcript Tests\n- [ ] Transcript formation is stable (deterministic)\n- [ ] Transcript includes all required fields\n- [ ] Domain separation prefix included\n- [ ] Hash is BLAKE3\n- [ ] Transcript binding prevents MITM\n\n### Signature Verification Tests\n- [ ] Valid signature with valid NodeKeyAttestation passes\n- [ ] Invalid signature rejected\n- [ ] Expired attestation rejected\n- [ ] Revoked attestation rejected\n- [ ] Wrong node key rejected\n- [ ] Malformed signature rejected\n\n### Suite Negotiation Tests\n- [ ] Negotiation is deterministic\n- [ ] Server picks highest mutual preference\n- [ ] No mutual suite → connection rejected\n- [ ] Downgrade attack prevented (suite pinning)\n\n### Key Derivation Tests\n- [ ] Key schedule follows HKDF(transcript, ...) spec\n- [ ] Derived keys match golden vectors\n- [ ] Key roles are separated (encrypt/MAC/auth)\n- [ ] Forward secrecy: session keys independent of long-term keys\n- [ ] Key zeroization after use\n\n### HelloRetry / Cookie Tests\n- [ ] Missing cookie rejected when required\n- [ ] Invalid cookie format rejected\n- [ ] Expired cookie rejected\n- [ ] Cookie from wrong server rejected\n- [ ] Valid cookie accepted\n- [ ] Cookie-key rotation grace period works\n- [ ] Cookie replay rejected\n\n### TransportLimits Tests\n- [ ] max_datagram_bytes negotiation honored\n- [ ] Frames exceeding limit rejected\n- [ ] Limit applied symmetrically\n\n### Anti-Replay Tests\n- [ ] Exact replay rejected\n- [ ] Duplicate sequence number rejected\n- [ ] Stale timestamp rejected (beyond skew window)\n- [ ] Sequence regression rejected (seq \u003c last seen)\n- [ ] Window-based replay detection works\n- [ ] Out-of-order within window accepted\n\n### Adversarial Handshake Tests\n- [ ] Truncated Hello rejected\n- [ ] Oversized Hello rejected\n- [ ] Malformed CBOR rejected without panic\n- [ ] Invalid suite ID rejected\n- [ ] Future-dated timestamp rejected\n- [ ] Ancient timestamp rejected\n- [ ] Garbage after valid message rejected\n\n## Golden Vectors\nLocation: `tests/vectors/sessions/`\n- `hello.cbor` - Valid Hello message bytes\n- `ack.cbor` - Valid Ack message bytes\n- `transcript.hex` - Expected transcript hash\n- `key_schedule.json` - Input → derived keys\n- `bad_handshakes.json` - Invalid messages with expected rejection reason\n\n## Fuzz Targets\n- MeshSessionHello parsing\n- MeshSessionAck parsing\n- Cookie parsing\n- Key schedule with random inputs\n\n## Logging Requirements\nAll session tests MUST emit structured JSON:\n```json\n{\n  \"timestamp\": \"RFC3339\",\n  \"test_name\": \"test_replay_rejected\",\n  \"module\": \"fcp-session\",\n  \"phase\": \"handshake|established|teardown\",\n  \"session_id\": \"uuid\",\n  \"peer_node_id\": \"...\",\n  \"suite\": \"X25519_CHACHA20_BLAKE3\",\n  \"operation\": \"hello|ack|verify|derive|replay_check\",\n  \"result\": \"pass|fail\",\n  \"reason_code\": \"FCP-3001\"\n}\n```\n\n### For Key Derivation Tests (NEVER log actual keys)\n```json\n{\n  \"operation\": \"key_derive\",\n  \"transcript_hash\": \"...\",\n  \"key_roles_derived\": [\"encrypt\", \"mac\", \"auth\"],\n  \"golden_vector_match\": true\n}\n```\n\n### For Replay Tests\n```json\n{\n  \"operation\": \"replay_check\",\n  \"sequence_received\": 1234,\n  \"sequence_expected_min\": 1230,\n  \"decision\": \"accept|reject\",\n  \"reason\": \"IN_WINDOW|STALE|DUPLICATE\"\n}\n```\n\n## Security Invariants\n- NEVER log keys, raw transcript bytes, or cookies\n- Hash sensitive data if logging needed for debugging\n- All rejections must have specific reason_code\n\n## Acceptance Criteria\n- All tests run under `--nocapture` with structured JSON logs\n- Known-bad handshakes rejected for correct reason_code\n- Golden vectors match exactly\n- Fuzz targets find no panics\n- Key material never appears in logs","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:53:15.620007619-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:53:41.426726958-05:00","labels":["fcp2","mvp","session","testing"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.24.1","depends_on_id":"flywheel_connectors-1n78.24","type":"parent-child","created_at":"2026-01-15T01:53:15.621262453-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.24.1","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:53:42.083964657-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.25","title":"[FCP2] Trust/Quorum Model: n/f Assumptions, Threshold Rules, Degraded Mode Semantics","description":"# [FCP2] Trust/Quorum Model: n/f Assumptions, Threshold Rules, Degraded Mode Semantics\n\n## Goal\nMake quorum-signed objects and conflict behavior **well-defined and testable**.\n\nMany FCP2 objects require multiple signatures (AuditHead, RevocationHead, ZoneCheckpoint, leases for risky ops). Without a crisp trust model, implementations drift and security becomes ambiguous.\n\n## Core concepts\n- `n`: eligible nodes for a zone (by membership)\n- `f`: maximum Byzantine faults assumed for that zone\n- Default thresholds (configurable per zone):\n  - **CriticalWrite** (e.g., AuditHead, ZoneCheckpoint): require `n - f` signatures\n  - **Dangerous ops** (leases): require `n - f` signatures\n  - **Risky ops** (leases): require `f + 1` signatures\n  - **Safe ops**: MAY allow coordinator-only signature\n\n## Degraded mode (offline / partition behavior)\nDefine an explicit degraded mode policy:\n- Which writes are allowed with reduced quorum?\n- Which operations must fail closed?\n- How we record degraded mode in audit/decision receipts.\n\n## Determinism rules\n- Quorum signatures must be sorted deterministically (by node_id) before hashing/encoding.\n- When multiple valid candidates exist (e.g., overlapping leases), tie-breakers must be deterministic and audited.\n\n## Deliverables\n- A `QuorumPolicy` structure used by audit, revocation, checkpoints, and leases.\n- A small library of deterministic helpers:\n  - `required_quorum(n,f,purpose,risk_tier)`\n  - signature set canonicalization + verification\n  - degraded-mode reason codes\n\n## Tests\n- Property tests: signature sorting determinism.\n- Unit tests: threshold computations across edge cases.\n- Integration tests: simulated membership change updates required quorum.\n\n## Acceptance Criteria\n- All quorum-required objects share a single source of truth for threshold rules.\n- Conformance suite can validate quorum semantics with golden vectors.\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:49:54.483565491-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T01:49:54.483565491-05:00","labels":["fcp2","mvp","quorum","security","trust"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.25","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:49:54.484796771-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.25","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T01:51:11.556978073-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.26","title":"[FCP2] Policy Engine: ZoneDefinition/ZonePolicy, Roles, ResourceObjects, Decision Reason Codes","description":"# [FCP2] Policy Engine: ZoneDefinition/ZonePolicy, Roles, ResourceObjects, Decision Reason Codes\n\n## Goal\nImplement the **policy objects + evaluation engine** that makes enforcement mechanical.\n\nThis is where we decide (with evidence) whether a request is allowed or denied.\n\n## Why users care\n- \"Why was this denied?\" becomes answerable via DecisionReceipt.\n- Zones are not labels: policy binds capabilities, taint/approval, revocation/checkpoint freshness, and connector constraints.\n- Prevents prompt injection from becoming a security incident.\n\n## Policy objects (canonical CBOR + content-addressed)\n### ZoneDefinitionObject (owner-signed)\nThe canonical, signed definition of a zone, including at least:\n- `zone_id`, `name`\n- `integrity_level`, `confidentiality_level`\n- `symbol_port`, `control_port` (for Tailscale ACL port-gating defense-in-depth)\n- `transport_policy` (ZoneTransportPolicy: DERP/Funnel/LAN broadcast allows)\n- `policy_object_id` pointer to the current ZonePolicyObject\n- optional `prev` for history/rollback\n\n### ZonePolicyObject (owner-signed)\n- principal/connector/capability allow/deny rules (glob-only; bounded patterns)\n- capability ceilings: what can ever be granted in this zone\n- audit policy (when to emit DecisionReceipts for allowed ops)\n- revocation/checkpoint freshness policy per risk tier (Strict/Warn/BestEffort)\n- retention rules and default storage policies\n- execution/sandbox defaults (may be overridden per connector manifest within ceilings)\n- **ZoneTransportPolicy** enforcement rules (DERP/Funnel controls)\n\n### RoleObject + RoleAssignment (capability bundles)\n- RoleObject: named bundle of capabilities, optional inheritance\n- RoleAssignment: binds RoleObject to PrincipalId with optional attenuation\n- Inheritance MUST be a DAG (no cycles) and is purely additive\n\n### ResourceObject + Resource Visibility\n- zone-bound handles to external resources\n- classification (integrity/confidentiality + taint) for sinks/sources\n- rules for declassification when writing to lower-confidentiality resources (including external sinks)\n\n### ApprovalToken (unified)\nApprovalToken is a first-class mesh object used for:\n- `Elevation` (integrity uphill)\n- `Declassification` (confidentiality downgrade)\n- `Execution` (scoped approval for a specific connector/method and optionally a specific request_object_id/input_hash)\n\nExecution-scope approvals MUST use JSON Pointer (RFC 6901) input constraints only; JSONPath/regex are forbidden.\n\n## Evaluation pipeline\nGiven an InvokeRequest (or other enforcement point):\n1. Verify canonical IDs + schemas.\n2. Verify token validity (signature + grants) and enforce checkpoint freshness (`chk_id/chk_seq`).\n3. Verify revocation freshness for all authority inputs (issuer keys, grant objects, connector binary).\n4. Verify taint + provenance (including sanitizer receipts and proof-carrying taint reductions).\n5. Resolve roles/assignments into effective capabilities (bundle + attenuation).\n6. Evaluate zone policy ceilings and connector manifest constraints (sandbox, network, zones, rate limits).\n7. Enforce transport policy (if request implies mesh routing / DERP / funnel usage).\n8. Decide Allow/Deny and emit:\n   - DecisionReceipt (required on denied Risky/Dangerous; optional on allowed depending on audit_level)\n   - audit events / receipts as required.\n\n## Reason code taxonomy (must be stable)\nDefine stable, enumerable reason codes for denials (and optionally allows), e.g.:\n- `capability.insufficient`\n- `checkpoint.stale_frontier`\n- `revocation.stale_frontier`\n- `taint.public_input_dangerous`\n- `zone_policy.connector_denied`\n- `approval.missing_declassification`\n- `transport.derp_forbidden`\n\nThis taxonomy is what powers `fcp explain`.\n\n## Tests (must be exhaustive)\n- Golden decision vectors:\n  - allow + deny cases with evidence object IDs\n  - cross-zone flows requiring approval\n  - stale checkpoint / stale revocation denial\n  - transport policy denial (DERP/Funnel forbidden)\n  - taint reduction success/failure\n  - execution-scope approval binding (request_object_id/input_hash/input_constraints)\n- Property tests:\n  - merge rule: integrity=min, confidentiality=max\n  - role inheritance DAG enforcement\n- Fuzz tests:\n  - policy object parsing and evaluation safety\n\n## Acceptance Criteria\n- Policy engine can produce DecisionReceipts with correct evidence.\n- `fcp explain` can render denials without guessing.\n- No \"ambient authority\" paths exist (tests enforce).\n\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:49:54.536381659-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:56:21.714619253-05:00","labels":["fcp2","mvp","policy","security"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.26","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:49:54.537633588-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.26","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T01:51:11.60688497-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.26","depends_on_id":"flywheel_connectors-1n78.7","type":"blocks","created_at":"2026-01-15T01:51:11.655218283-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.26","depends_on_id":"flywheel_connectors-1n78.8","type":"blocks","created_at":"2026-01-15T01:51:11.704176623-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.26","depends_on_id":"flywheel_connectors-1n78.9","type":"blocks","created_at":"2026-01-15T01:51:11.754220058-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.26","depends_on_id":"flywheel_connectors-1n78.11","type":"blocks","created_at":"2026-01-15T01:51:11.807469693-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.26","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T01:51:11.857205588-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.26","depends_on_id":"flywheel_connectors-1n78.25","type":"blocks","created_at":"2026-01-15T01:51:11.904314685-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.26","depends_on_id":"flywheel_connectors-1n78.29","type":"blocks","created_at":"2026-01-15T01:51:11.95377957-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.26","depends_on_id":"flywheel_connectors-1n78.28","type":"blocks","created_at":"2026-01-15T01:51:12.003099972-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.26.1","title":"TEST: Policy Engine Golden Decision Vectors + Property Tests","description":"# TEST: Policy Engine Golden Decision Vectors + Property Tests\n\n## Goal\nEnsure policy decisions are deterministic, explainable, and cannot be bypassed - policy is the guardian.\n\n## Test Categories\n\n### Golden Decision Vectors (Core)\n- [ ] Allow decision with full evidence chain\n- [ ] Deny decision with specific reason_code\n- [ ] Risk tier escalation triggers additional checks\n- [ ] Zone boundary enforcement produces DecisionReceipt\n\n### ApprovalToken Tests\n- [ ] Elevation required when integrity flows up\n- [ ] Declassification required when writing to lower-confidentiality sink\n- [ ] Execution-scope approvals bind to request_object_id\n- [ ] Execution-scope approvals bind to input_hash\n- [ ] JSON Pointer constraints respected\n- [ ] Missing approval → deny with FCP-2XXX code\n- [ ] Expired approval → deny\n- [ ] Wrong scope approval → deny\n\n### Taint/Provenance Tests\n- [ ] Tainted input to clean output → deny\n- [ ] SanitizerReceipt reduces taint\n- [ ] Sanitizer coverage check (all tainted inputs covered)\n- [ ] Transitive taint propagation\n- [ ] Taint merge rules: max(sources)\n- [ ] Taint labels preserved in DecisionReceipt\n\n### Revocation Freshness Tests\n- [ ] Stale checkpoint → deny for Risky/Dangerous (Strict policy)\n- [ ] Stale checkpoint → warn for Risky/Dangerous (Warn policy)\n- [ ] Stale checkpoint → allow for Normal (BestEffort)\n- [ ] Freshness window calculation is correct\n- [ ] DecisionReceipt cites freshness state\n\n### Transport Policy Tests\n- [ ] DERP forbidden → stable reason_code\n- [ ] Funnel forbidden → stable reason_code\n- [ ] Transport constraints in ZonePolicy enforced\n- [ ] Fallback transport only when permitted\n\n### Zone Policy Tests\n- [ ] ZoneDefinition fields parsed correctly\n- [ ] ZonePolicy inherits from parent zones\n- [ ] Override rules applied correctly\n- [ ] Resource type → allowed operations mapping\n- [ ] Role → capabilities resolution\n\n### Role Resolution Tests\n- [ ] Role inheritance DAG traversal\n- [ ] Cycle detection in role inheritance\n- [ ] Role capability aggregation\n- [ ] Role attenuation (restrictions)\n- [ ] RoleAssignment binding\n\n### Reason Code Tests\n- [ ] All reason codes are stable and enumerable\n- [ ] Reason code includes denial category\n- [ ] Reason code parseable by humans and machines\n- [ ] Each denial path has unique reason code\n\n## Property Tests\n- [ ] Merge rule: integrity = min(sources)\n- [ ] Merge rule: confidentiality = max(sources)\n- [ ] No ambient authority: capability not granted → deny\n- [ ] Attenuation can only restrict, never expand\n- [ ] Decision determinism: same inputs → same decision\n\n## Golden Vector Files\nLocation: `tests/vectors/policy/`\n```\nallow_simple.json       - Basic allow with evidence\ndeny_missing_cap.json   - Deny for missing capability\ndeny_tainted.json       - Deny for taint violation\ndeny_stale.json         - Deny for freshness violation\napproval_elevation.json - Elevation approval required\napproval_declass.json   - Declassification approval required\n```\n\n## Logging Requirements\nAll policy tests MUST emit structured JSON:\n```json\n{\n  \"timestamp\": \"RFC3339\",\n  \"test_name\": \"test_deny_missing_capability\",\n  \"module\": \"fcp-policy\",\n  \"operation\": \"evaluate\",\n  \"zone_id\": \"z:work\",\n  \"principal_id\": \"...\",\n  \"resource_type\": \"ConnectorOperation\",\n  \"operation_id\": \"gmail.send_message\",\n  \"risk_tier\": \"Risky\",\n  \"decision\": \"allow|deny\",\n  \"reason_code\": \"FCP-2001\",\n  \"evidence_object_ids\": [\"...\"],\n  \"result\": \"pass\"\n}\n```\n\n### For Approval Tests\n```json\n{\n  \"approval_type\": \"elevation|declassification|execution\",\n  \"approval_token_id\": \"...\",\n  \"scope_match\": true,\n  \"constraints_satisfied\": true\n}\n```\n\n### For Taint Tests\n```json\n{\n  \"input_taint_labels\": [\"user_input\", \"external_api\"],\n  \"output_confidentiality\": \"z:work\",\n  \"sanitizer_receipts\": [\"...\"],\n  \"taint_cleared\": true\n}\n```\n\n## DecisionReceipt Verification\nEvery denied Risky/Dangerous operation MUST produce a DecisionReceipt containing:\n- decision (Deny)\n- reason_code\n- evidence_object_ids\n- policy_snapshot_id\n- timestamp\n\n## Acceptance Criteria\n- Golden vectors exist and run in CI\n- All denied Risky/Dangerous produce DecisionReceipts\n- Reason codes are stable across versions\n- Property tests verify invariants\n- Logging is complete and structured","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:53:15.673432554-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:54:20.544539781-05:00","labels":["fcp2","mvp","policy","testing"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.26.1","depends_on_id":"flywheel_connectors-1n78.26","type":"parent-child","created_at":"2026-01-15T01:53:15.675156532-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.26.1","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:54:21.155470029-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.27","title":"[FCP2] Registry + Supply Chain: Install/Verify Manifests \u0026 Binaries, Mirroring, Attestations","description":"# [FCP2] Registry + Supply Chain: Install/Verify Manifests \u0026 Binaries, Mirroring, Attestations\n\n## Goal\nMake connector acquisition and execution **safe and offline-friendly**.\n\nRegistries are sources of signed manifests/binaries. The mesh can mirror/pin connectors as content-addressed objects so installs/updates work offline.\n\n## Deliverables\n### Verification chain (must be explicit)\nBefore execution, verify:\n1. Manifest signature (registry or trusted publisher quorum)\n2. Binary checksum matches manifest\n3. Binary signature matches trusted key\n4. Platform/arch match\n5. Requested capabilities ⊆ zone ceilings (policy engine)\n6. Optional (if policy requires): transparency log inclusion\n7. Optional (if policy requires): in-toto/SLSA attestations and builder allowlist\n\n### Distribution model\n- Treat connector binaries as mesh objects (symbol-addressable) so they can be mirrored.\n- Support pinning known-good versions in a high-trust zone.\n\n### Rollback / incident response\n- Support revoking a connector binary via RevocationObject scope `ConnectorBinary`.\n- Policy can require transparency/attestations for high-risk zones.\n\n## Tests\n- Unit tests: signature and checksum failures reject.\n- Integration tests: install from local mock registry; mirror into local object store.\n- Adversarial tests: rollback/freeze attempts fail when policy requires transparency.\n\n## Logging\n- Emit audit events for install/update, including verified manifest/binary object IDs.\n- Never log secrets or raw tokens.\n\n## Acceptance Criteria\n- A connector cannot execute without passing the verification chain.\n- Policy can tighten requirements per zone without changing connector binaries.\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:49:54.589535213-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T01:49:54.589535213-05:00","labels":["fcp2","mvp","registry","security","supply-chain"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.27","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:49:54.590769558-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.27","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T01:51:12.053146603-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.27","depends_on_id":"flywheel_connectors-1n78.5","type":"blocks","created_at":"2026-01-15T01:51:12.102017078-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.27","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T01:51:12.147268996-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.27","depends_on_id":"flywheel_connectors-1n78.15","type":"blocks","created_at":"2026-01-15T01:51:12.19079336-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.27","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T01:51:12.235697182-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.27","depends_on_id":"flywheel_connectors-1n78.11","type":"blocks","created_at":"2026-01-15T01:51:12.285476279-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.27","depends_on_id":"flywheel_connectors-1n78.9","type":"blocks","created_at":"2026-01-15T01:51:12.335211172-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.27","depends_on_id":"flywheel_connectors-1n78.29","type":"blocks","created_at":"2026-01-15T01:51:12.382043357-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.27","depends_on_id":"flywheel_connectors-1n78.28","type":"blocks","created_at":"2026-01-15T01:51:12.433730298-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.27.1","title":"TEST: Registry/Supply Chain Verification + Mirroring Tests","description":"# TEST: Registry/Supply Chain Verification + Mirroring Tests\n\n## Goal\nPrevent executing unverified or downgraded connector artifacts - supply chain is the first gate.\n\n## Test Categories\n\n### Manifest Verification Tests\n- [ ] Valid manifest signature passes\n- [ ] Invalid signature rejected\n- [ ] Expired signature rejected (if time-bound)\n- [ ] Wrong signing key rejected\n- [ ] Manifest CBOR malformed → rejection\n- [ ] Required fields missing → rejection\n- [ ] Schema version mismatch → rejection\n\n### Binary Verification Tests\n- [ ] Binary checksum matches manifest\n- [ ] Checksum mismatch → reject installation\n- [ ] Truncated binary → reject\n- [ ] Extra bytes after binary → reject\n- [ ] Zero-length binary → reject\n\n### Platform/Architecture Tests\n- [ ] Wrong platform (linux vs darwin) → reject\n- [ ] Wrong architecture (amd64 vs arm64) → reject\n- [ ] Platform in manifest matches runtime\n- [ ] Fallback platform handling (if applicable)\n\n### Policy Enforcement Tests\n- [ ] Policy requires attestation → attestation verified\n- [ ] Policy requires transparency log → log checked\n- [ ] Policy requires specific signers → signer verified\n- [ ] Missing required metadata → reject per policy\n- [ ] Downgrade attempt detected → reject\n\n### Attestation Tests (when required)\n- [ ] Valid attestation chain verified\n- [ ] Attestation covers binary content\n- [ ] Attestation timestamp within window\n- [ ] Attestation revocation checked\n\n### Transparency Log Tests (when required)\n- [ ] Entry exists in log\n- [ ] Entry matches manifest hash\n- [ ] Log consistency proof verified\n- [ ] Log inclusion proof verified\n\n### Mirroring Tests\n- [ ] Mirror produces expected ObjectIds\n- [ ] Mirrored symbols match original\n- [ ] Symbol availability correct after mirror\n- [ ] Partial mirror handles interruption\n- [ ] Mirror respects placement policy\n\n### Version Management Tests\n- [ ] Newer version replaces older\n- [ ] Downgrade blocked (unless forced)\n- [ ] Version comparison is semver-correct\n- [ ] Pre-release versions handled correctly\n\n### Audit Event Tests\n- [ ] Install produces audit event\n- [ ] Update produces audit event\n- [ ] Failed install produces audit event with reason\n- [ ] Audit event includes manifest hash and signer\n\n## Mock Registry Setup\n```rust\nlet registry = MockRegistry::new()\n    .with_connector(\"fcp.example\", version: \"1.0.0\", signed: true)\n    .with_invalid_signature(\"fcp.malicious\")\n    .with_checksum_mismatch(\"fcp.corrupted\");\n```\n\n## Golden Vectors\nLocation: `tests/vectors/registry/`\n```\nvalid_manifest.cbor     - Valid signed manifest\ninvalid_sig_manifest.cbor - Manifest with bad signature\nchecksum_mismatch/      - Binary that fails checksum\nattestation_chain.json  - Valid attestation chain\n```\n\n## Logging Requirements\nAll registry tests MUST emit structured JSON:\n```json\n{\n  \"timestamp\": \"RFC3339\",\n  \"test_name\": \"test_invalid_signature_rejected\",\n  \"module\": \"fcp-registry\",\n  \"operation\": \"verify|install|mirror\",\n  \"connector_id\": \"fcp.example\",\n  \"version\": \"1.0.0\",\n  \"manifest_hash\": \"...\",\n  \"signer_key_id\": \"...\",\n  \"verification_step\": \"signature|checksum|attestation|policy\",\n  \"result\": \"pass|fail\",\n  \"reason_code\": \"FCP-5001\"\n}\n```\n\n### For Install Events\n```json\n{\n  \"operation\": \"install\",\n  \"connector_id\": \"fcp.example\",\n  \"version\": \"1.0.0\",\n  \"manifest_hash\": \"...\",\n  \"binary_size\": 12345678,\n  \"platform\": \"linux\",\n  \"arch\": \"amd64\",\n  \"install_path\": \"...\",\n  \"audit_event_id\": \"...\"\n}\n```\n\n### For Mirror Events\n```json\n{\n  \"operation\": \"mirror\",\n  \"connector_id\": \"fcp.example\",\n  \"source_registry\": \"https://registry.fcp.dev\",\n  \"objects_mirrored\": 42,\n  \"symbols_created\": 1337,\n  \"total_bytes\": 12345678,\n  \"duration_ms\": 5000\n}\n```\n\n## Offline Testing\n- All tests use mock registry\n- No network calls to real registries\n- Mock responses are deterministic\n\n## Acceptance Criteria\n- Tests are fully offline with mock registry\n- Audit events emitted for all install/update operations\n- All rejection paths have specific reason codes\n- Supply chain attacks are detected and blocked\n- Logging is complete for forensics","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:53:15.753498397-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:54:51.364023322-05:00","labels":["fcp2","mvp","registry","testing"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.27.1","depends_on_id":"flywheel_connectors-1n78.27","type":"parent-child","created_at":"2026-01-15T01:53:15.765894319-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.27.1","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:54:51.98427486-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.27.2","title":"[FCP2] Registry Hardening (Optional): Transparency Log + TUF + Sigstore","description":"# [FCP2] Registry Hardening (Optional): Transparency Log + TUF + Sigstore\n\n## Goal\nAdd optional-but-powerful supply-chain hardening layers that can be enforced by zone policy:\n- transparency log inclusion\n- TUF root pinning (anti-rollback / freeze / mix-and-match)\n- Sigstore/cosign verification (builder provenance)\n\n## Requirements\n- These features are **policy-controlled**:\n  - high-trust zones can require transparency + attestations\n  - lower-trust zones can allow unsigned/less strict sources if explicitly configured\n\n- If enabled by policy, verification must be mechanical:\n  - fail closed when required artifacts are missing/invalid\n  - produce DecisionReceipts/AuditEvents with evidence object IDs\n\n## Deliverables\n- Verification adapters:\n  - transparency log inclusion proof verification\n  - TUF metadata fetch/verify + root pinning\n  - Sigstore bundle verification (publisher/builders)\n- Clear reason codes:\n  - `supply_chain.missing_transparency`\n  - `supply_chain.tuf_root_mismatch`\n  - `supply_chain.sigstore_invalid`\n\n## Tests\n- Mock transparency log server tests.\n- Mock TUF repo tests (rollback/freeze/mix-and-match attempts).\n- Sigstore verification tests with known bundles.\n\n## Acceptance Criteria\n- Policy can require these checks per zone without changing connector binaries.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T02:22:57.130579867-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:22:57.130579867-05:00","labels":["fcp2","registry","security"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.27.2","depends_on_id":"flywheel_connectors-1n78.27","type":"parent-child","created_at":"2026-01-15T02:22:57.17800697-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.27.2","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T02:24:24.37444355-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.27.2","depends_on_id":"flywheel_connectors-1n78.5","type":"blocks","created_at":"2026-01-15T02:24:24.451927538-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.27.2","depends_on_id":"flywheel_connectors-1n78.9","type":"blocks","created_at":"2026-01-15T02:24:24.504024559-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.27.2","depends_on_id":"flywheel_connectors-1n78.11","type":"blocks","created_at":"2026-01-15T02:24:24.55513241-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.27.2","depends_on_id":"flywheel_connectors-1n78.29","type":"blocks","created_at":"2026-01-15T02:24:24.605942282-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.27.2","depends_on_id":"flywheel_connectors-1n78.28","type":"blocks","created_at":"2026-01-15T02:24:24.657167804-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.28","title":"[FCP2] Observability: Structured Logs, Metrics, TraceContext Propagation","description":"# [FCP2] Observability: Structured Logs, Metrics, TraceContext Propagation\n\n## Goal\nMake the system operable without disabling security. Provide first-class observability that enables debugging denied requests, tracing operations end-to-end, and monitoring system health.\n\n## TraceContext (NORMATIVE)\n\nW3C-compatible trace context for end-to-end request tracing:\n\n```rust\n/// W3C TraceContext (NORMATIVE when present)\n///\n/// Enables stitching mesh routing, connector execution, receipts, and audit together.\npub struct TraceContext {\n    /// 16-byte trace ID (W3C traceparent format)\n    pub trace_id: [u8; 16],\n    /// 8-byte span ID (W3C traceparent format)\n    pub span_id: [u8; 8],\n    /// Trace flags (sampled, etc.)\n    pub trace_flags: u8,\n    /// Optional tracestate for vendor-specific context\n    pub trace_state: Option\u003cString\u003e,\n}\n```\n\nTraceContext MUST be propagated through:\n- InvokeRequest → OperationReceipt → AuditEvent\n- Cross-node symbol routing\n- Connector execution spans\n- DecisionReceipt evidence\n\n## Structured Logs (JSON - NORMATIVE)\n\nAll components MUST log structured JSON with required fields:\n- `timestamp` (RFC3339 with microsecond precision)\n- `level` (trace, debug, info, warn, error)\n- `correlation_id` (16-byte UUID; same as trace_id when available)\n- `zone_id` (when applicable)\n- `connector_id` + `operation_id` (when applicable)\n- `decision` + `reason_code` for policy decisions\n- `node_id` (local TailscaleNodeId)\n\n### Redaction Guarantees (NORMATIVE)\n\nMUST never log:\n- Secret material (tokens, keys, passwords)\n- PII (email addresses, phone numbers, IP addresses outside mesh)\n- Request/response bodies containing sensitive data\n\nMUST redact:\n- Credential fields in audit logs\n- Token payloads (log token JTI only)\n\n## Required Metrics (NORMATIVE)\n\nImplementations MUST expose:\n\n### Request Metrics\n- `fcp_request_total{connector, operation, risk_tier, status}` - Request counts\n- `fcp_request_duration_seconds{connector, operation, risk_tier}` - Latency histogram\n- `fcp_denial_total{reason_code, zone}` - Denial counts by reason\n\n### Revocation/Checkpoint Metrics\n- `fcp_revocation_freshness{zone}` - Gauge (0=stale, 1=ok)\n- `fcp_checkpoint_seq{zone}` - Current checkpoint sequence\n- `fcp_checkpoint_coverage{zone}` - Node coverage fraction\n\n### Store Metrics\n- `fcp_symbol_store_objects_total{zone}` - Total objects\n- `fcp_symbol_coverage{zone}` - Coverage fraction\n- `fcp_repair_actions_total{zone, type}` - Repair operations\n\n### Admission Control Metrics\n- `fcp_admission_rejected_total{peer, reason}` - Rejection counts\n- `fcp_decode_budget_exhausted_total` - DoS mitigation triggers\n\n### Rate Limiting Metrics\n- `fcp_rate_limit_violations_total{connector, operation}` - Throttle events\n\n## Audit Event Integration\n\nAll security-relevant decisions MUST be recorded in the audit chain (1n78.11):\n- Secret access with SecretAccessToken\n- High-risk capability invocations\n- Approvals/elevations\n- Zone transitions\n- Security violations\n\nAuditEvents MUST include TraceContext when present in the originating request.\n\n## Tests\n\n- Unit tests: log lines contain required keys (using a test subscriber)\n- Unit tests: redaction works for known secret patterns\n- E2E tests: trace_id can be followed across components (invoke → audit → explain)\n- Integration tests: metrics are exposed and can be scraped\n\n## Acceptance Criteria\n\n- A denied request can be debugged from logs + DecisionReceipt without guessing\n- TraceContext propagates end-to-end (verify via test harness)\n- CI can fail if logging contracts regress (schema validation)\n- Metrics enable SLO dashboards for availability and latency","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:49:54.642773957-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:34:10.265072292-05:00","labels":["fcp2","mvp","observability","telemetry"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.28","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:49:54.644227686-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.28","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T01:51:12.483983778-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.29","title":"[FCP2] Error Taxonomy: FCP-XXXX Codes, Retry Semantics, AI Recovery Hints","description":"# [FCP2] Error Taxonomy: FCP-XXXX Codes, Retry Semantics, AI Recovery Hints\n\n## Goal\nProvide stable, user-friendly, machine-actionable errors.\n\n## Requirements\n- Implement the FCP error code ranges (FCP-1000..9999).\n- Errors must include:\n  - `code` (stable string)\n  - `message` (human)\n  - `retryable` (bool)\n  - `retry_after_ms` (optional)\n  - `details` (optional structured data)\n  - `ai_recovery_hint` (optional, but used heavily)\n\n## Design principles\n- Never include secrets in error messages.\n- Prefer deterministic errors over ambiguous failures.\n- Map internal errors to stable codes so clients can react.\n\n## Tests\n- Unit tests for each major subsystem mapping (protocol, auth, capability, zone, store).\n- Golden vectors for a small set of representative errors.\n\n## Acceptance Criteria\n- Errors returned by SDK/host are stable and well-classified.\n- `ai_recovery_hint` exists for the top 20 operational failure modes.\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:49:54.693600086-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T01:49:54.693600086-05:00","labels":["errors","fcp2","mvp","ux"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.29","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:49:54.694819794-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.29","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T01:51:12.533600279-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.3","title":"[FCP2] Canonical Serialization: SchemaId/SchemaHash + Deterministic CBOR + CDDL","description":"# [FCP2] Canonical Serialization: SchemaId/SchemaHash + Deterministic CBOR + CDDL\n\n## Goal\nImplement the canonical object encoding used everywhere in FCP2:\n- stable SchemaId and SchemaHash\n- deterministic canonical CBOR encoding\n- schema-hash-prefixed payloads\n- CDDL output for cross-language interop\n\n## Required properties\n- Deterministic bytes for the same logical object.\n- Bounded parsing behavior (no untrusted-length footguns).\n- Schema binding is explicit: schema hash is available for ObjectId derivation and for decode-time validation.\n\n## Subtasks\n- Define `SchemaId { namespace, name, version }` and `SchemaHash([u8;32])` with stable hashing.\n- Implement canonical CBOR serializer rules (RFC 8949 deterministic encoding).\n- Define the canonical payload format: `schema_hash || canonical_cbor_bytes`.\n- Define and enforce signature canonicalization rule (NORMATIVE):\n  - for signed objects, create an \"unsigned view\" (remove signature fields)\n  - serialize the unsigned view using the canonical payload format\n  - for multi-signature vectors: sort lexicographically by node_id before hashing/signing/verifying\n- Add golden vectors for canonicalization and schema hash binding.\n- Generate / maintain a `FCP_CDDL_V2.cddl` file (or equivalent) for the normative CBOR objects.\n\n## Acceptance Criteria\n- Roundtrip tests: encode-\u003edecode for all core object types.\n- Golden vectors: canonical bytes match exactly.\n- Fuzz harness for CBOR decoding rejects malformed/oversized inputs without panic.\n- Benchmarks exist for encoding/decoding hot paths.\n\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:18:32.893521523-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:57:19.178097639-05:00","labels":["core","fcp2","mvp","serialization"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.3","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:18:32.894655981-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.3","depends_on_id":"flywheel_connectors-1n78.2","type":"blocks","created_at":"2026-01-15T01:21:42.049502566-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.30","title":"[FCP2] Agent Integration: Introspection, Operation Schemas, MCP-Compatible Tool Descriptors","description":"# [FCP2] Agent Integration: Introspection, Operation Schemas, MCP-Compatible Tool Descriptors\n\n## Goal\nMake FCP2 operations discoverable and safe for agents.\n\n## Requirements\nAgents MUST be able to query:\n- connector operations + schemas\n- risk levels + approval requirements\n- rate limits\n- recovery hints\n\n## Deliverables\n- Introspection object schemas (canonical CBOR) returned by connectors/host.\n- A mapping from operations to MCP-like tool descriptors:\n  - name\n  - input schema\n  - output schema\n  - risk tier\n  - examples\n  - rate limits\n\n## Tests\n- E2E: an agent can enumerate tools and invoke a safe operation end-to-end.\n\n## Acceptance Criteria\n- Introspection is complete enough that an agent can operate without hardcoded knowledge of a connector.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:49:54.74502836-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T01:49:54.74502836-05:00","labels":["agent","fcp2","mcp","mvp","ux"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.30","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:49:54.74607977-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.30","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T01:51:12.585030215-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.30","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T01:51:12.635253128-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.30","depends_on_id":"flywheel_connectors-1n78.29","type":"blocks","created_at":"2026-01-15T01:51:12.684233811-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.30","depends_on_id":"flywheel_connectors-1n78.28","type":"blocks","created_at":"2026-01-15T01:51:12.734680194-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.31","title":"[FCP2] Automation Recipes: Provisioning Interface, OAuth/Webhook Setup, Minimal Human Prompts","description":"# [FCP2] Automation Recipes: Provisioning Interface, OAuth/Webhook Setup, Minimal Human Prompts\n\n## Goal\nHonor the project philosophy: **if it can be automated, it should be automated**.\n\nConnectors should not require hand-written setup steps when the system can do them deterministically.\n\n## Deliverables\n- A provisioning interface for connectors (SDK-facing):\n  - declare required external setup steps\n  - run setup flows via host (with explicit approvals)\n  - store resulting state as mesh objects (never secrets on disk)\n\n- Recipe objects:\n  - OAuth flows (redirect URLs, token exchange)\n  - webhook endpoint verification and registration\n  - periodic polling schedules / cursors\n\n## Security requirements\n- Any privileged setup produces audit events.\n- Secrets handled in memory only; zeroize when possible.\n\n## Tests\n- Integration tests using mock OAuth/webhook servers.\n- E2E scripts verifying a recipe can configure a connector without manual copy/paste.\n\n## Acceptance Criteria\n- A connector can ship with a fully automated setup path where the upstream API allows it.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:49:54.792891858-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T01:49:54.792891858-05:00","labels":["automation","fcp2","mvp","ux"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.31","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:49:54.79409809-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.31","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T01:51:12.784377767-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.31","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T01:51:12.834932986-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.31","depends_on_id":"flywheel_connectors-1n78.11","type":"blocks","created_at":"2026-01-15T01:51:12.883836363-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.31","depends_on_id":"flywheel_connectors-1n78.10","type":"blocks","created_at":"2026-01-15T01:51:12.93435333-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.31","depends_on_id":"flywheel_connectors-1n78.27","type":"blocks","created_at":"2026-01-15T01:51:12.986180325-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.31","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T01:51:13.035260354-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.31","depends_on_id":"flywheel_connectors-1n78.29","type":"blocks","created_at":"2026-01-15T01:51:13.083285096-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.31","depends_on_id":"flywheel_connectors-1n78.28","type":"blocks","created_at":"2026-01-15T01:51:13.132511371-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.32","title":"[FCP2] Enrollment + Key Lifecycle: DeviceEnrollment, NodeKeyAttestation, Removal, Rotation","description":"# [FCP2] Enrollment + Key Lifecycle: DeviceEnrollment, NodeKeyAttestation, Removal, Rotation\n\n## Goal\nMake adding/removing devices and rotating keys a first-class, testable workflow.\n\n## Deliverables\n- `DeviceEnrollment` object (owner-signed) that authorizes a Tailscale node to join the mesh.\n- `NodeKeyAttestation` issuance + verification:\n  - binds node_id to signing/encryption/issuance pubkeys + kids + tags\n- Device removal workflow:\n  - publish revocations for enrollment + attestation + issuer keys\n  - trigger zone key rotation\n  - trigger secret resharing (full profile)\n\n## Tests\n- Unit tests for attestation verification.\n- Integration tests:\n  - enroll a node in a simulated mesh\n  - remove node and verify:\n    - old issuer tokens are rejected\n    - zone keys rotate\n\n## Acceptance Criteria\n- Compromised device removal is a coherent sequence of objects and enforcement points.\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:49:54.842342506-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T01:49:54.842342506-05:00","labels":["enrollment","fcp2","mvp","security"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.32","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:49:54.843658505-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.32","depends_on_id":"flywheel_connectors-1n78.16","type":"blocks","created_at":"2026-01-15T01:51:13.180015422-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.32","depends_on_id":"flywheel_connectors-1n78.5","type":"blocks","created_at":"2026-01-15T01:51:13.231386989-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.32","depends_on_id":"flywheel_connectors-1n78.9","type":"blocks","created_at":"2026-01-15T01:51:13.280236614-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.32","depends_on_id":"flywheel_connectors-1n78.6","type":"blocks","created_at":"2026-01-15T01:51:13.331637957-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.32","depends_on_id":"flywheel_connectors-1n78.25","type":"blocks","created_at":"2026-01-15T01:51:13.379246415-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.32","depends_on_id":"flywheel_connectors-1n78.11","type":"blocks","created_at":"2026-01-15T01:51:13.426194989-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.32","depends_on_id":"flywheel_connectors-1n78.29","type":"blocks","created_at":"2026-01-15T01:51:13.478525803-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.32","depends_on_id":"flywheel_connectors-1n78.28","type":"blocks","created_at":"2026-01-15T01:51:13.52946778-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.33","title":"[FCP2] Connector State: Mesh-Persisted State Objects, Snapshots, Singleton-Writer Leases, Fork Detection","description":"# [FCP2] Connector State: Mesh-Persisted State Objects, Snapshots, Singleton-Writer Leases, Fork Detection\n\n## Goal\nImplement the connector state model so polling/cursors/dedup are safe under failover and migration. Authoritative state lives in mesh objects; local `$CONNECTOR_STATE` is a cache only.\n\n## Why This Matters\n- **Safe failover**: Another node can resume from the last committed state\n- **Resumable polling**: Cursors survive node restarts and migrations\n- **Deterministic migration semantics**: State is explicit, not implicit in process memory\n\n## Normative Types (from FCP Specification V2 §10 and docs §2.2)\n\n### ConnectorStateModel\n```rust\npub enum ConnectorStateModel {\n    /// No mesh-persisted state required\n    Stateless,\n    /// Exactly one writer enforced via Lease (ConnectorStateWrite purpose)\n    SingletonWriter,\n    /// Multi-writer state using CRDT deltas + periodic snapshots\n    Crdt { crdt_type: CrdtType },\n}\n```\n\n### CrdtType\n```rust\npub enum CrdtType {\n    LwwMap,      // Last-write-wins map (key-value with timestamps)\n    OrSet,       // Observed-remove set (add/remove operations)\n    GCounter,    // Grow-only counter (only increments)\n    PnCounter,   // PN-Counter (positive-negative counter)\n}\n```\n\n### ConnectorStateRoot\n```rust\npub struct ConnectorStateRoot {\n    pub header: ObjectHeader,\n    pub connector_id: ConnectorId,\n    pub instance_id: Option\u003cInstanceId\u003e,\n    pub zone_id: ZoneId,\n    pub model: ConnectorStateModel,\n    pub head: Option\u003cObjectId\u003e,  // Latest ConnectorStateObject\n}\n```\n\n### ConnectorStateObject\n```rust\npub struct ConnectorStateObject {\n    pub header: ObjectHeader,\n    pub connector_id: ConnectorId,\n    pub instance_id: Option\u003cInstanceId\u003e,\n    pub zone_id: ZoneId,\n    pub prev: Option\u003cObjectId\u003e,\n    pub seq: u64,                    // Monotonic sequence\n    pub state_cbor: Vec\u003cu8\u003e,         // Canonical state blob\n    pub updated_at: u64,\n    pub lease_seq: u64,              // Fencing token (NORMATIVE for singleton_writer)\n    pub lease_object_id: ObjectId,   // The Lease granting write authority\n    pub signature: Signature,\n}\n```\n\n### ConnectorStateDelta (for CRDT models)\n```rust\npub struct ConnectorStateDelta {\n    pub header: ObjectHeader,\n    pub connector_id: ConnectorId,\n    pub instance_id: Option\u003cInstanceId\u003e,\n    pub zone_id: ZoneId,\n    pub crdt_type: CrdtType,\n    pub delta_cbor: Vec\u003cu8\u003e,         // Delta payload (type depends on crdt_type)\n    pub applied_at: u64,\n    pub applied_by: TailscaleNodeId,\n    pub signature: Signature,\n}\n```\n\n### ConnectorStateSnapshot\n```rust\npub struct ConnectorStateSnapshot {\n    pub header: ObjectHeader,\n    pub connector_id: ConnectorId,\n    pub instance_id: Option\u003cInstanceId\u003e,\n    pub zone_id: ZoneId,\n    pub covers_head: ObjectId,       // Latest state included in snapshot\n    pub covers_seq: u64,\n    pub state_cbor: Vec\u003cu8\u003e,         // Full canonical state at covers_head\n    pub snapshotted_at: u64,\n    pub signature: Signature,\n}\n```\n\n## Manifest Declaration\n\n```toml\n[connector.state]\nmodel = \"singleton_writer\"           # \"stateless\" | \"singleton_writer\" | \"crdt\"\nstate_schema_version = \"1\"           # NORMATIVE: versioning for safe upgrades\n# For CRDT models:\n# crdt_type = \"lww_map\"\n# snapshot_every_updates = 5000\n# snapshot_every_bytes = 1048576\n```\n\n## Singleton-Writer Fencing (NORMATIVE)\n\nFor connectors requiring single-writer semantics:\n1. State writes MUST be fenced by a Lease with `LeasePurpose::ConnectorStateWrite`\n2. Every `ConnectorStateObject` MUST include:\n   - `lease_seq` (fencing token observed/used)\n   - `lease_object_id` (the specific Lease object)\n   - Reference to Lease in `ObjectHeader.refs`\n3. Verifiers MUST reject state updates whose `lease_seq` is stale\n\n## Compaction Rules (NORMATIVE)\n\n- MeshNode SHOULD create a snapshot every N updates or M bytes (configurable)\n- After snapshot is replicated to placement targets, MeshNode MAY GC older state objects\n  strictly before `covers_head`, unless required by audit/policy pins\n\n## Fork Detection (NORMATIVE for singleton_writer)\n\nIf two different `ConnectorStateObject` share the same `prev` (competing seq):\n1. Pause connector execution\n2. Require manual resolution OR automated \"choose-by-lease\" recovery\n3. Log the fork event for audit\n\n## CRDT Merge Semantics\n\n- **LwwMap**: Merge by taking entry with latest timestamp per key\n- **OrSet**: Merge via observed-remove set algebra\n- **GCounter**: Merge by taking max per actor\n- **PnCounter**: Merge positive and negative counters separately\n\n## Deliverables\n- `ConnectorStateRoot`, `ConnectorStateObject`, `ConnectorStateSnapshot`, `ConnectorStateDelta` schemas\n- Lease purpose `ConnectorStateWrite` semantics\n- Snapshot cadence configuration + compaction rules\n- CRDT merge implementations for all supported types\n\n## Tests\n- Unit tests: state chain append/verify\n- Unit tests: CRDT merge operations (LwwMap, OrSet, GCounter, PnCounter)\n- Integration tests: failover resumes from last committed state\n- Fork tests: competing writers triggers pause + audit\n- Adversarial tests: stale lease holder attempts to write (must be rejected)\n- Snapshot tests: compaction + GC behavior\n\n## Acceptance Criteria\n- [ ] All ConnectorStateModel variants implemented\n- [ ] CRDT types implemented with correct merge semantics\n- [ ] Singleton-writer fencing via Leases\n- [ ] Fork detection and safety incident handling\n- [ ] Snapshot compaction with configurable thresholds\n- [ ] Stateful connectors can migrate/failover without duplicate processing","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:49:54.892084011-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:28:13.056011112-05:00","labels":["connectors","fcp2","mvp","state"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.33","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:49:54.893265156-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.33","depends_on_id":"flywheel_connectors-1n78.15","type":"blocks","created_at":"2026-01-15T01:51:13.61381068-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.33","depends_on_id":"flywheel_connectors-1n78.34","type":"blocks","created_at":"2026-01-15T01:51:13.672651698-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.33","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T01:51:13.723096419-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.33","depends_on_id":"flywheel_connectors-1n78.11","type":"blocks","created_at":"2026-01-15T01:51:13.773586425-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.33","depends_on_id":"flywheel_connectors-1n78.29","type":"blocks","created_at":"2026-01-15T01:51:13.823148062-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.33","depends_on_id":"flywheel_connectors-1n78.28","type":"blocks","created_at":"2026-01-15T01:51:13.873637997-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.34","title":"[FCP2] Leases: HRW Coordinator, Fencing Tokens, Quorum Rules, Conflict Resolution","description":"# [FCP2] Leases: HRW Coordinator, Fencing Tokens, Quorum Rules, Conflict Resolution\n\n## Goal\nProvide a **unified distributed coordination primitive** used for:\n- Operation execution (prevent duplicate side effects)\n- ConnectorState writes (singleton_writer fencing)\n- Computation migration (safe handoffs)\n\nFCP unifies all these under a single `Lease` struct with a `LeasePurpose` discriminant.\n\n## Lease Structure (NORMATIVE; see FCP Specification §16.1)\n\n```rust\n/// Generic lease primitive (NORMATIVE)\n///\n/// A short-lived, renewable lock that says \"node X owns subject S for purpose P until time T.\"\npub struct Lease {\n    pub header: ObjectHeader,\n    /// The subject being leased (request, state object, computation)\n    pub subject_object_id: ObjectId,\n    /// What this lease authorizes\n    pub purpose: LeasePurpose,\n    /// Fencing token (NORMATIVE): monotonically increases per (zone_id, subject_object_id)\n    /// The highest lease_seq wins deterministically, regardless of wall-clock exp.\n    pub lease_seq: u64,\n    /// Which node currently owns execution/write\n    pub owner_node: TailscaleNodeId,\n    /// Lease issued at\n    pub iat: u64,\n    /// Lease expires at (short-lived; renewable)\n    pub exp: u64,\n    /// Deterministic coordinator for this lease (NORMATIVE)\n    /// Selected via HRW/Rendezvous hashing over (zone_id, subject_object_id).\n    pub coordinator: TailscaleNodeId,\n    /// Quorum signatures (NORMATIVE for Risky/Dangerous)\n    pub quorum_signatures: Vec\u003c(TailscaleNodeId, Signature)\u003e,\n}\n\n/// Lease purpose discriminant (NORMATIVE)\npub enum LeasePurpose {\n    /// Prevents duplicate execution of operations with side effects\n    OperationExecution,\n    /// Serializes writes to SingleWriter connector state\n    ConnectorStateWrite,\n    /// Coordinates computation migration between nodes\n    ComputationMigration,\n}\n```\n\n## Coordinator Selection (NORMATIVE)\n\nCoordinator selection uses HRW/Rendezvous hashing for deterministic, consistent selection:\n\n```rust\nfn select_coordinator(\n    zone_id: \u0026ZoneId,\n    subject_id: \u0026ObjectId,\n    nodes: \u0026[TailscaleNodeId]\n) -\u003e TailscaleNodeId {\n    nodes.iter()\n        .max_by_key(|n| hrw_hash(zone_id, subject_id, n))\n        .cloned()\n        .unwrap()\n}\n```\n\nThis ensures:\n- No central coordinator\n- Consistent selection across nodes\n- Automatic failover when coordinator becomes unavailable\n\n## Quorum Rules (NORMATIVE)\n\nDifferent risk tiers require different quorum signatures:\n\n- **Safe ops:** Single coordinator signature MAY be sufficient\n- **Risky ops:** Require f+1 signatures (prevents 1 compromised node from unilaterally leasing)\n- **Dangerous ops:** Require n-f signatures (matches CriticalWrite default)\n\n## Conflict Resolution Rules (NORMATIVE)\n\nIf two valid leases overlap for the same `subject_object_id`, nodes MUST:\n\n1. For **Dangerous ops:** \n   - Refuse execution\n   - Alert owner for manual resolution\n   - Emit audit event\n\n2. For **Risky ops:** \n   - Pick the lease with higher `(exp, coordinator_id)` \n   - Log the fork\n   - Emit audit event\n\n## Fencing Token Semantics\n\nThe `lease_seq` is critical for safety:\n- Monotonically increases per (zone_id, subject_object_id)\n- Higher lease_seq wins deterministically, regardless of wall-clock expiry\n- Prevents \"zombie lease\" problems where an old lease holder believes it still owns\n\n## Lease Lifecycle\n\n1. **Request**: Node sends `LeaseRequest` to coordinator\n2. **Validation**: Coordinator checks quorum, existing leases\n3. **Grant**: Lease is issued with next `lease_seq`\n4. **Renewal**: Before expiry, holder requests renewal (increments lease_seq)\n5. **Expiry/Release**: Lease expires or holder explicitly releases\n\n## Integration Points\n\n- **Exactly-Once (1n78.10)**: OperationExecution leases prevent duplicate side effects\n- **Connector State (1n78.33)**: ConnectorStateWrite leases implement singleton_writer\n- **Computation Migration (6o25.4)**: ComputationMigration leases coordinate handoffs\n\n## Deliverables\n\n- `Lease` and `LeaseRequest` schemas\n- Lease issuance and renewal flows\n- HRW coordinator selection\n- Conflict detection + tie-breaking rules\n- Fencing token enforcement\n\n## Tests\n\n- Unit tests: coordinator selection determinism\n- Unit tests: fencing token monotonicity\n- Integration tests: node failure leads to lease expiry and reassignment\n- Adversarial tests: overlapping leases are handled according to risk tier\n- Property tests: lease_seq always increases\n\n## Acceptance Criteria\n\n- Exactly-once external side effects are enforceable via leases\n- Singleton-writer connector state is fenced correctly\n- Computation migration can hand off safely","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:49:54.96613894-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:33:08.768068539-05:00","labels":["fcp2","leases","mesh","mvp","security"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.34","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:49:54.980911179-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.34","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T01:51:13.924129586-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.34","depends_on_id":"flywheel_connectors-1n78.5","type":"blocks","created_at":"2026-01-15T01:51:13.975805286-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.34","depends_on_id":"flywheel_connectors-1n78.25","type":"blocks","created_at":"2026-01-15T01:51:14.026045251-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.34","depends_on_id":"flywheel_connectors-1n78.29","type":"blocks","created_at":"2026-01-15T01:51:14.077848521-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.34","depends_on_id":"flywheel_connectors-1n78.28","type":"blocks","created_at":"2026-01-15T01:51:14.128057467-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.34.1","title":"TEST: Lease Conflict/Expiry/Quorum Semantics","description":"# TEST: Lease Conflict/Expiry/Quorum Semantics\n\n## Goal\nEnsure leases prevent duplicate side effects and remain safe under node churn and failures.\n\n## Test Categories\n\n### HRW Coordinator Selection Tests\n- [ ] Coordinator selection is deterministic (same inputs → same coordinator)\n- [ ] All nodes compute same coordinator\n- [ ] Coordinator changes correctly when node set changes\n- [ ] Weighted HRW (if applicable) respects weights\n- [ ] Stable coordinator under minor topology changes\n\n### Fencing Token (lease_seq) Tests\n- [ ] lease_seq is monotonically increasing\n- [ ] New lease has higher lease_seq than previous\n- [ ] Stale lease_seq rejected by storage layer\n- [ ] lease_seq stored in OperationIntent\n- [ ] Receipt references correct lease_seq\n\n### Quorum Rules by Risk Tier\n- [ ] Normal operations: standard quorum\n- [ ] Risky operations: elevated quorum\n- [ ] Dangerous operations: strict quorum\n- [ ] Quorum calculation is correct for n/f assumptions\n- [ ] Insufficient quorum → operation blocked\n\n### Conflict Resolution Tests\n- [ ] Overlap conflict detected (two leases for same resource)\n- [ ] Dangerous operation conflict → deny both\n- [ ] Risky operation conflict → deterministic winner selection\n- [ ] Winner selection is stable (same inputs → same winner)\n- [ ] Loser receives FCP-4320 (LeaseConflict)\n\n### Lease Lifecycle Tests\n- [ ] Lease acquisition succeeds with quorum\n- [ ] Lease renewal extends expiry\n- [ ] Lease renewal preserves lease_seq relationship\n- [ ] Lease release is explicit and logged\n- [ ] Lease expiry detected after timeout\n\n### Failover Tests\n- [ ] Node failure triggers lease reassignment\n- [ ] Reassignment is safe (no overlap)\n- [ ] Reassignment respects quorum\n- [ ] In-flight operations complete or abort cleanly\n- [ ] Audit events track reassignment\n\n### Partition Recovery Tests\n- [ ] Lease state converges after partition heals\n- [ ] No duplicate lease grants during partition\n- [ ] Stale coordinator detects it is stale\n\n### Audit/Decision Receipt Tests\n- [ ] Conflict produces AuditEvent\n- [ ] Conflict produces DecisionReceipt\n- [ ] Expiry produces AuditEvent\n- [ ] Reassignment produces AuditEvent\n\n## Simulation Framework\n```rust\nlet harness = LeaseSimulation::new()\n    .with_nodes(5)\n    .with_f_tolerance(1);\n\n// Test conflict resolution\nharness.request_lease(\"resource-1\", node_a);\nharness.request_lease(\"resource-1\", node_b);\nassert\\!(harness.exactly_one_granted());\nassert\\!(harness.loser_has_conflict_error());\n```\n\n## Golden Vectors\nLocation: `tests/vectors/leases/`\n```\nhrw_coordinator.json    - Node set → expected coordinator\nconflict_winner.json    - Conflict inputs → deterministic winner\nquorum_thresholds.json  - n/f → required quorum size\n```\n\n## Logging Requirements\nAll lease tests MUST emit structured JSON:\n```json\n{\n  \"timestamp\": \"RFC3339\",\n  \"test_name\": \"test_conflict_deterministic_winner\",\n  \"module\": \"fcp-lease\",\n  \"operation\": \"acquire|renew|release|expire|conflict\",\n  \"resource_id\": \"...\",\n  \"requester_node\": \"node-a\",\n  \"lease_seq\": 12345,\n  \"quorum_required\": 3,\n  \"quorum_achieved\": 3,\n  \"result\": \"granted|denied|conflict\",\n  \"reason_code\": \"FCP-4320\"\n}\n```\n\n### For Conflict Events\n```json\n{\n  \"conflict_type\": \"overlap\",\n  \"contenders\": [\"node-a\", \"node-b\"],\n  \"winner\": \"node-a\",\n  \"selection_method\": \"deterministic_hash\",\n  \"audit_event_id\": \"...\"\n}\n```\n\n### For Failover Events\n```json\n{\n  \"event\": \"lease_reassign\",\n  \"resource_id\": \"...\",\n  \"old_holder\": \"node-a\",\n  \"new_holder\": \"node-b\",\n  \"reason\": \"node_failure\",\n  \"reassign_latency_ms\": 150\n}\n```\n\n## Acceptance Criteria\n- Simulated node failure causes safe lease reassignment\n- Conflicts emit audit/decision receipts\n- lease_seq fencing is mechanically enforced\n- Deterministic winner selection is verified\n- All tests produce structured logs","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:53:15.823574821-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:55:31.45720277-05:00","labels":["fcp2","leases","mvp","testing"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.34.1","depends_on_id":"flywheel_connectors-1n78.34","type":"parent-child","created_at":"2026-01-15T01:53:15.824955051-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.34.1","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:55:32.105308133-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.35","title":"STANDARD: FCP2 Platform Testing + Logging Requirements","description":"# STANDARD: FCP2 Platform Testing + Logging Requirements\n\n## Purpose\nDefine the **mandatory** testing and logging standards for the FCP2 platform. This standard applies to ALL platform test beads.\n\nThe goal is that failures are diagnosable from CI artifacts alone.\n\n## Quality Gates (Required for All PRs)\n```bash\ncargo check --all-targets\ncargo clippy --all-targets -- -D warnings\ncargo fmt --check\ncargo test --workspace -- --nocapture\n```\n\n## Unit Test Requirements\n\nEvery platform subsystem MUST have:\n1. **Success-path tests** - Happy path with valid inputs\n2. **Negative tests** - Malformed inputs, invalid signatures, expired tokens, stale revocations\n3. **Bounds tests** - Timeout handling, size limits, decode DoS prevention\n4. **Golden vectors** - Canonical test data with expected outputs\n\n### Golden Vector Format\nLocation: `tests/vectors/\u003csubsystem\u003e/`\n- Use `.cbor` for binary canonical data\n- Use `.json` for human-readable test parameters\n- Include source reference (RFC, spec section)\n\nExample:\n```\ntests/vectors/crypto/\n├── ed25519_sign_verify.json\n├── hpke_seal_unseal.cbor\n└── cose_sign1_vectors.cbor\n```\n\n## Property + Fuzz Testing Requirements\n\n### Property Tests (Required)\n- Invariant tests for deterministic behavior\n- Round-trip tests for serialization\n- Ordering tests for sorted collections\n\n### Fuzz Targets (Required for Security Surfaces)\nMandatory fuzz targets:\n- FCPS frame parsing\n- FCPC frame parsing\n- Session handshake transcript verification\n- Capability token verification\n- ZoneKeyManifest parsing/unsealing\n- CBOR deserialization for all object types\n\nLocation: `fuzz/`\nCorpus: `fuzz/corpus/\u003ctarget\u003e/`\n\n## E2E Scenario Requirements\n\nAt minimum, ship scripts/tests that exercise:\n1. **Happy path**: install → invoke → receipt → audit → verify\n2. **Default deny**: invoke without cap → denial + DecisionReceipt\n3. **Revocation**: issue → use → revoke → denial\n4. **Taint/approval**: tainted input → denial → approval → success\n5. **Offline/repair**: reduced availability → repair → recovery\n\n## Logging Requirements (CRITICAL)\n\n### Structured JSON Format\nAll tests MUST emit structured JSON logs with these fields:\n\n```json\n{\n  \"timestamp\": \"2026-01-15T10:30:00.123Z\",\n  \"level\": \"info\",\n  \"test_name\": \"test_capability_verification\",\n  \"module\": \"fcp-auth\",\n  \"phase\": \"setup|execute|verify|teardown\",\n  \"correlation_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"result\": \"pass|fail\",\n  \"duration_ms\": 45,\n  \"assertions\": {\n    \"passed\": 10,\n    \"failed\": 0\n  }\n}\n```\n\n### Context-Specific Fields\nAdd context fields as appropriate:\n- `zone_id` - For zone-related tests\n- `connector_id` - For connector tests\n- `operation_id` - For invoke tests\n- `session_id` - For session tests\n- `token_id` - For capability tests\n- `object_id` - For object/symbol tests\n\n### For Denials\n```json\n{\n  \"decision\": \"deny\",\n  \"reason_code\": \"FCP-2101\",\n  \"reason_message\": \"Missing capability token\",\n  \"evidence\": {\n    \"required_capability\": \"invoke:fcp.test:echo\",\n    \"request_id\": \"...\"\n  }\n}\n```\n\n### Secrets/PII Protection\n- NEVER log actual secret values\n- NEVER log raw credentials\n- Use `\"redacted\"` or omit sensitive fields\n- Log secret IDs/handles only, not content\n\n## Test Output Format\n\n### Console Output\n```\n[PASS] test_capability_verification (45ms)\n[FAIL] test_expired_token - assertion failed: expected denial\n```\n\n### JSON Output (for CI)\n```bash\ncargo test -- --format json \u003e test_results.jsonl\n```\n\n## CI Integration\n\n### GitHub Actions Example\n```yaml\ntest:\n  runs-on: ubuntu-latest\n  steps:\n    - uses: actions/checkout@v4\n    - run: cargo test --workspace -- --nocapture 2\u003e\u00261 | tee test.log\n    - run: |\n        if grep -q \"FAIL\" test.log; then\n          echo \"::error::Tests failed\"\n          exit 1\n        fi\n    - uses: actions/upload-artifact@v4\n      if: always()\n      with:\n        name: test-logs\n        path: |\n          test.log\n          tests/vectors/\n```\n\n## Coverage Requirements\n- Core library (fcp-core): \u003e95%\n- Security surfaces (crypto, auth, zones): \u003e90%\n- Protocol handling: \u003e85%\n- Overall workspace: \u003e80%\n\n## Acceptance Criteria\n- CI artifacts include structured logs for failed tests\n- A new contributor can debug a failure without rerunning locally\n- All test beads reference this standard as a dependency\n- No test passes without producing required log fields\n\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:52:04.125872686-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:31:20.689819686-05:00","labels":["fcp2","logging","mvp","standard","testing"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.35","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:52:04.138463405-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.36","title":"[FCP2] MVP Vertical Slice: Install → Invoke → Receipt/Audit → Explain (Deterministic Harness)","description":"# [FCP2] MVP Vertical Slice: Install → Invoke → Receipt/Audit → Explain (Deterministic Harness)\n\n## Goal\nDeliver a minimal end-to-end system that proves the architecture works **before** we build breadth.\n\n## Scenario\nIn a deterministic local harness:\n1. Install a minimal test connector via registry verification (or local pinned objects).\n2. Create/verify a capability token.\n3. Invoke a safe operation (Allow path): produce OperationReceipt + AuditEvent.\n4. Invoke without required capability (Deny path): produce DecisionReceipt with reason_code and evidence.\n5. Run `fcp explain` on the denial and verify it is correct.\n\n## Why this matters\nThis prevents building disconnected subsystems that only integrate months later.\n\n## Dependencies\nThis slice requires the essentials:\n- canonical serialization + IDs\n- sessions + FCPS/FCPC\n- policy engine + reason codes\n- audit + receipts\n- conformance harness + logs\n\n## Acceptance Criteria\n- The scenario runs in CI and emits structured JSON logs.\n- Denials are explainable and stable (same reason_code/evidence).\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:57:04.030886034-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T01:57:04.030886034-05:00","labels":["e2e","fcp2","mvp","ux"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.36","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:57:04.032159083-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.36","depends_on_id":"flywheel_connectors-1n78.21.4","type":"blocks","created_at":"2026-01-15T01:57:04.086537113-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.36","depends_on_id":"flywheel_connectors-1n78.27","type":"blocks","created_at":"2026-01-15T01:57:04.148990286-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.36","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T01:57:04.201250907-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.36","depends_on_id":"flywheel_connectors-1n78.11","type":"blocks","created_at":"2026-01-15T01:57:04.257000221-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.36","depends_on_id":"flywheel_connectors-1n78.10","type":"blocks","created_at":"2026-01-15T01:57:04.311685651-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.36","depends_on_id":"flywheel_connectors-1n78.22","type":"blocks","created_at":"2026-01-15T01:57:04.371733753-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.36.1","title":"E2E Script: Happy Path (Install → Invoke → Receipt → Audit → Verify)","description":"# E2E Script: Happy Path\n\n## Scenario\nComplete successful operation flow from connector installation to audit verification.\n\n## Script Steps\n\n### 1. Environment Setup\n```bash\n# Initialize deterministic test mesh (3 nodes)\nfcp-harness init --nodes=3 --deterministic --seed=0xDEADBEEF\n\n# Verify mesh health\nfcp-harness health --expect=healthy\n```\n\n### 2. Connector Installation\n```bash\n# Install test connector via registry\nfcp install fcp.test-echo --zone=z:work\n\n# Verify installation\nfcp verify fcp.test-echo --expect=valid\n```\n\n### 3. Capability Token Creation\n```bash\n# Create capability token for invoke\nfcp-harness create-token \\\n  --connector=fcp.test-echo \\\n  --operations=echo \\\n  --zone=z:work \\\n  --ttl=3600 \\\n  --output=token.cbor\n```\n\n### 4. Invoke Operation\n```bash\n# Invoke with capability token\nfcp-harness invoke \\\n  --connector=fcp.test-echo \\\n  --operation=echo \\\n  --args='{\"message\": \"hello\"}' \\\n  --token=token.cbor \\\n  --output=receipt.cbor\n```\n\n### 5. Receipt Verification\n```bash\n# Verify operation receipt\nfcp-harness verify-receipt \\\n  --receipt=receipt.cbor \\\n  --expect-success\n\n# Extract decision receipt\nfcp explain --receipt=receipt.cbor --output=decision.json\n```\n\n### 6. Audit Trail Verification\n```bash\n# Verify audit event was created\nfcp audit tail --zone=z:work --limit=1 --filter=operation_id=$(cat receipt.cbor | jq -r .operation_id)\n\n# Verify audit chain integrity\nfcp-harness verify-audit --zone=z:work\n```\n\n### 7. Cleanup\n```bash\nfcp-harness teardown\n```\n\n## Expected Outputs\n\n### receipt.cbor\n- status: success\n- operation_id: deterministic\n- result: {\"echo\": \"hello\"}\n\n### Audit Event\n- type: OperationCompleted\n- connector_id: fcp.test-echo\n- operation_id: matches receipt\n- decision: Allow\n\n## Logging Requirements\nAll script steps emit:\n```json\n{\n  \"timestamp\": \"RFC3339\",\n  \"script\": \"e2e_happy_path\",\n  \"step\": \"invoke\",\n  \"step_number\": 4,\n  \"correlation_id\": \"uuid\",\n  \"duration_ms\": 45,\n  \"result\": \"pass\",\n  \"artifacts\": [\"receipt.cbor\"]\n}\n```\n\n## CI Integration\n```yaml\ne2e-happy-path:\n  runs-on: ubuntu-latest\n  steps:\n    - run: cargo build --release\n    - run: ./scripts/e2e/happy_path.sh\n    - uses: actions/upload-artifact@v4\n      with:\n        name: e2e-happy-path-logs\n        path: logs/\n```\n\n## Acceptance Criteria\n- Script runs deterministically (same seed = same results)\n- All artifacts are verifiable\n- Audit chain is intact\n- Script completes in \u003c 30 seconds\n\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:28:10.848063379-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:28:10.848063379-05:00","labels":["e2e","fcp2","mvp","testing"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.36.1","depends_on_id":"flywheel_connectors-1n78.36","type":"parent-child","created_at":"2026-01-15T03:28:10.849369629-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.36.1","depends_on_id":"flywheel_connectors-1n78.21.4","type":"blocks","created_at":"2026-01-15T03:28:33.165925488-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.36.2","title":"E2E Script: Denial Path (Invoke Without Cap → DecisionReceipt → Explain)","description":"# E2E Script: Denial Path\n\n## Scenario\nVerify that operations without proper capability are denied with clear, explainable receipts.\n\n## Script Steps\n\n### 1. Environment Setup\n```bash\nfcp-harness init --nodes=3 --deterministic --seed=0xDEADBEEF\nfcp install fcp.test-echo --zone=z:work\n```\n\n### 2. Attempt Invoke Without Token\n```bash\n# Invoke without capability token (should fail)\nfcp-harness invoke \\\n  --connector=fcp.test-echo \\\n  --operation=echo \\\n  --args='{\"message\": \"hello\"}' \\\n  --expect-failure=FCP-2101 \\\n  --output=denial.cbor\n```\n\n### 3. Verify DecisionReceipt\n```bash\n# Extract and verify decision receipt\nfcp explain --receipt=denial.cbor --output=decision.json\n\n# Verify decision contains expected fields\njq -e '.decision == \"deny\"' decision.json\njq -e '.reason_code == \"FCP-2101\"' decision.json\njq -e '.evidence | length \u003e 0' decision.json\n```\n\n### 4. Attempt with Expired Token\n```bash\n# Create expired token\nfcp-harness create-token \\\n  --connector=fcp.test-echo \\\n  --operations=echo \\\n  --ttl=-1 \\\n  --output=expired_token.cbor\n\n# Invoke with expired token\nfcp-harness invoke \\\n  --connector=fcp.test-echo \\\n  --operation=echo \\\n  --token=expired_token.cbor \\\n  --expect-failure=FCP-2102 \\\n  --output=expired_denial.cbor\n```\n\n### 5. Attempt with Wrong Zone\n```bash\n# Create token for wrong zone\nfcp-harness create-token \\\n  --connector=fcp.test-echo \\\n  --operations=echo \\\n  --zone=z:private \\\n  --output=wrong_zone_token.cbor\n\n# Invoke (connector is in z:work, token is for z:private)\nfcp-harness invoke \\\n  --connector=fcp.test-echo \\\n  --operation=echo \\\n  --token=wrong_zone_token.cbor \\\n  --expect-failure=FCP-3001 \\\n  --output=zone_denial.cbor\n```\n\n### 6. Verify Audit Trail\n```bash\n# Verify denial events logged\nfcp audit tail --zone=z:work --filter=decision=deny --limit=3\n```\n\n## Expected Outputs\n\n### denial.cbor\n- status: denied\n- reason_code: FCP-2101 (MissingCapabilityToken)\n- evidence: request_id, connector_id, operation_id\n\n### decision.json\n```json\n{\n  \"decision\": \"deny\",\n  \"reason_code\": \"FCP-2101\",\n  \"reason_message\": \"No capability token provided\",\n  \"evidence\": {\n    \"request_id\": \"...\",\n    \"required_capability\": \"invoke:fcp.test-echo:echo\"\n  },\n  \"ai_recovery_hint\": \"Obtain a capability token with grant_object_ids including...\"\n}\n```\n\n## Logging Requirements\n```json\n{\n  \"timestamp\": \"RFC3339\",\n  \"script\": \"e2e_denial_path\",\n  \"step\": \"invoke_without_token\",\n  \"expected_failure\": \"FCP-2101\",\n  \"actual_failure\": \"FCP-2101\",\n  \"result\": \"pass\"\n}\n```\n\n## Acceptance Criteria\n- All denial paths produce DecisionReceipts\n- Reason codes are stable and documented\n- AI recovery hints are actionable\n- Denials are audit-logged\n\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:28:33.415665448-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:28:33.415665448-05:00","labels":["e2e","fcp2","mvp","testing"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.36.2","depends_on_id":"flywheel_connectors-1n78.36","type":"parent-child","created_at":"2026-01-15T03:28:33.416998278-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.36.2","depends_on_id":"flywheel_connectors-1n78.21.4","type":"blocks","created_at":"2026-01-15T03:28:58.479459443-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.36.3","title":"E2E Script: Revocation Flow (Issue Token → Use → Revoke → Denial)","description":"# E2E Script: Revocation Flow\n\n## Scenario\nVerify that revocation propagates correctly and previously-valid tokens are rejected.\n\n## Script Steps\n\n### 1. Setup and Initial Success\n```bash\nfcp-harness init --nodes=3 --deterministic --seed=0xDEADBEEF\nfcp install fcp.test-echo --zone=z:work\n\n# Create and use token successfully\nfcp-harness create-token \\\n  --connector=fcp.test-echo \\\n  --operations=echo \\\n  --output=token.cbor\n\nfcp-harness invoke \\\n  --connector=fcp.test-echo \\\n  --operation=echo \\\n  --token=token.cbor \\\n  --expect-success\n```\n\n### 2. Revoke Token\n```bash\n# Revoke the capability token\nfcp-harness revoke \\\n  --token-id=$(cat token.cbor | jq -r .token_id) \\\n  --reason=\"Testing revocation\"\n\n# Wait for propagation\nfcp-harness wait-revocation \\\n  --token-id=$(cat token.cbor | jq -r .token_id) \\\n  --timeout=5s\n```\n\n### 3. Attempt Use After Revocation\n```bash\n# Same token should now fail\nfcp-harness invoke \\\n  --connector=fcp.test-echo \\\n  --operation=echo \\\n  --token=token.cbor \\\n  --expect-failure=FCP-2201 \\\n  --output=revoked_denial.cbor\n\n# Verify reason code\nfcp explain --receipt=revoked_denial.cbor | jq -e '.reason_code == \"FCP-2201\"'\n```\n\n### 4. Verify Revocation in Audit\n```bash\n# Check revocation event exists\nfcp audit tail --zone=z:work --filter=type=RevocationEvent --limit=1\n\n# Check denial references revocation\nfcp explain --receipt=revoked_denial.cbor | jq -e '.evidence.revocation_id'\n```\n\n### 5. Test Issuer Key Revocation\n```bash\n# Create new token with test issuer\nfcp-harness create-token \\\n  --issuer=test-issuer \\\n  --connector=fcp.test-echo \\\n  --output=issuer_token.cbor\n\n# Use token (should succeed)\nfcp-harness invoke --token=issuer_token.cbor --expect-success\n\n# Revoke issuer key\nfcp-harness revoke-issuer --issuer=test-issuer\n\n# Token should now fail\nfcp-harness invoke \\\n  --token=issuer_token.cbor \\\n  --expect-failure=FCP-2202\n```\n\n## Expected Outputs\n\n### revoked_denial.cbor\n- status: denied\n- reason_code: FCP-2201 (TokenRevoked)\n- evidence.revocation_id: present\n\n### Revocation Event\n```json\n{\n  \"type\": \"RevocationEvent\",\n  \"target_type\": \"capability_token\",\n  \"target_id\": \"...\",\n  \"reason\": \"Testing revocation\",\n  \"revoked_by\": \"owner\",\n  \"timestamp\": \"...\"\n}\n```\n\n## Logging Requirements\n```json\n{\n  \"timestamp\": \"RFC3339\",\n  \"script\": \"e2e_revocation_flow\",\n  \"step\": \"revoke_token\",\n  \"token_id\": \"...\",\n  \"propagation_time_ms\": 150,\n  \"result\": \"pass\"\n}\n```\n\n## Acceptance Criteria\n- Revocation propagates within freshness window\n- Previously-valid tokens are rejected\n- DecisionReceipt references revocation\n- Audit trail complete\n\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:28:58.729110976-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:28:58.729110976-05:00","labels":["e2e","fcp2","mvp","revocation","testing"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.36.3","depends_on_id":"flywheel_connectors-1n78.36","type":"parent-child","created_at":"2026-01-15T03:28:58.730425943-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.36.3","depends_on_id":"flywheel_connectors-1n78.21.4","type":"blocks","created_at":"2026-01-15T03:29:22.357765092-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.36.4","title":"E2E Script: Taint/Approval Flow (Tainted Input → Denial → Approval → Success)","description":"# E2E Script: Taint/Approval Flow\n\n## Scenario\nVerify that tainted data requires approval before processing and that approval tokens work correctly.\n\n## Script Steps\n\n### 1. Setup with Taint Policy\n```bash\nfcp-harness init --nodes=3 --deterministic --seed=0xDEADBEEF\nfcp install fcp.test-echo --zone=z:work\n\n# Configure zone policy requiring approval for tainted data\nfcp-harness set-policy \\\n  --zone=z:work \\\n  --require-approval-for=\"taint:external_input\"\n```\n\n### 2. Create Tainted Input\n```bash\n# Create input object with taint label\nfcp-harness create-object \\\n  --content='{\"message\": \"untrusted user input\"}' \\\n  --taint=\"external_input\" \\\n  --output=tainted_input.cbor\n```\n\n### 3. Invoke with Tainted Input (Should Fail)\n```bash\nfcp-harness invoke \\\n  --connector=fcp.test-echo \\\n  --operation=echo \\\n  --args-file=tainted_input.cbor \\\n  --token=token.cbor \\\n  --expect-failure=FCP-4401 \\\n  --output=taint_denial.cbor\n\n# Verify reason\nfcp explain --receipt=taint_denial.cbor | jq -e '.reason_code == \"FCP-4401\"'\nfcp explain --receipt=taint_denial.cbor | jq -e '.evidence.taint_labels | contains([\"external_input\"])'\n```\n\n### 4. Create Approval Token\n```bash\n# Create approval token for the tainted operation\nfcp-harness create-approval \\\n  --operation-intent=$(cat taint_denial.cbor | jq -r .operation_id) \\\n  --taint=\"external_input\" \\\n  --approver=owner \\\n  --output=approval.cbor\n```\n\n### 5. Invoke with Approval (Should Succeed)\n```bash\nfcp-harness invoke \\\n  --connector=fcp.test-echo \\\n  --operation=echo \\\n  --args-file=tainted_input.cbor \\\n  --token=token.cbor \\\n  --approval=approval.cbor \\\n  --expect-success \\\n  --output=approved_receipt.cbor\n\n# Verify approval was used\nfcp explain --receipt=approved_receipt.cbor | jq -e '.approval_used == true'\n```\n\n### 6. Verify Audit Trail\n```bash\n# Check taint denial logged\nfcp audit tail --zone=z:work --filter=reason_code=FCP-4401 --limit=1\n\n# Check approved operation logged with approval reference\nfcp audit tail --zone=z:work --filter=approval_id --limit=1\n```\n\n## Expected Outputs\n\n### taint_denial.cbor\n- status: denied\n- reason_code: FCP-4401 (TaintRequiresApproval)\n- evidence.taint_labels: [\"external_input\"]\n- evidence.required_approver: \"owner\"\n\n### approved_receipt.cbor\n- status: success\n- approval_id: present\n- sanitizer_receipt: optional\n\n## Logging Requirements\n```json\n{\n  \"timestamp\": \"RFC3339\",\n  \"script\": \"e2e_taint_approval\",\n  \"step\": \"invoke_with_approval\",\n  \"taint_labels\": [\"external_input\"],\n  \"approval_id\": \"...\",\n  \"approver\": \"owner\",\n  \"result\": \"pass\"\n}\n```\n\n## Acceptance Criteria\n- Tainted inputs are blocked without approval\n- Approval tokens grant access\n- Audit trail shows full taint→denial→approval→success flow\n- DecisionReceipts explain what approval is needed\n\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:29:22.62507672-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:29:22.62507672-05:00","labels":["e2e","fcp2","mvp","taint","testing"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.36.4","depends_on_id":"flywheel_connectors-1n78.36","type":"parent-child","created_at":"2026-01-15T03:29:22.626544304-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.36.4","depends_on_id":"flywheel_connectors-1n78.21.4","type":"blocks","created_at":"2026-01-15T03:29:48.702032355-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.36.5","title":"E2E Script: Offline/Repair Flow (Reduced Availability → Repair → Recovery)","description":"# E2E Script: Offline/Repair Flow\n\n## Scenario\nVerify that the system handles reduced symbol availability and the repair loop recovers coverage.\n\n## Script Steps\n\n### 1. Setup Distributed Object\n```bash\nfcp-harness init --nodes=3 --deterministic --seed=0xDEADBEEF\n\n# Create large object that gets symbol-encoded\nfcp-harness create-object \\\n  --content-size=1MB \\\n  --zone=z:work \\\n  --placement=distributed \\\n  --output=large_object.cbor\n\n# Verify initial coverage\nfcp repair status --zone=z:work --object=$(cat large_object.cbor | jq -r .object_id)\n# Expected: coverage \u003e= 1.0 (can reconstruct)\n```\n\n### 2. Simulate Node Failure\n```bash\n# Disable one node\nfcp-harness node-down --node=node-2\n\n# Check coverage dropped\nfcp repair status --zone=z:work --object=$(cat large_object.cbor | jq -r .object_id)\n# Expected: coverage \u003c 1.0 but \u003e threshold\n```\n\n### 3. Verify Read Still Works\n```bash\n# Object should still be readable (k' symbols available)\nfcp-harness read-object \\\n  --object-id=$(cat large_object.cbor | jq -r .object_id) \\\n  --expect-success\n```\n\n### 4. Monitor Repair Loop\n```bash\n# Watch repair progress\nfor i in 1 2 3 4 5; do\n  sleep 2\n  fcp repair status --zone=z:work --object=$(cat large_object.cbor | jq -r .object_id) --json \u003e\u003e repair_progress.jsonl\ndone\n\n# Verify repair is making progress\njq -s 'map(.coverage) | . as $c | ($c | last) \u003e ($c | first)' repair_progress.jsonl\n```\n\n### 5. Bring Node Back\n```bash\n# Re-enable node\nfcp-harness node-up --node=node-2\n\n# Wait for gossip reconciliation\nfcp-harness wait-convergence --timeout=10s\n\n# Verify full coverage restored\nfcp repair status --zone=z:work --object=$(cat large_object.cbor | jq -r .object_id) | jq -e '.coverage \u003e= 1.0'\n```\n\n### 6. Verify Audit Trail\n```bash\n# Check repair events logged\nfcp audit tail --zone=z:work --filter=type=RepairAction --limit=10 --json \u003e\u003e repair_audit.jsonl\n\n# Verify coverage improvement is tracked\njq 'select(.coverage_before \u003c .coverage_after)' repair_audit.jsonl\n```\n\n## Expected Outputs\n\n### repair_progress.jsonl\n```json\n{\"timestamp\": \"...\", \"object_id\": \"...\", \"coverage\": 0.75, \"symbols_held\": 45, \"symbols_needed\": 60}\n{\"timestamp\": \"...\", \"object_id\": \"...\", \"coverage\": 0.80, \"symbols_held\": 48, \"symbols_needed\": 60}\n{\"timestamp\": \"...\", \"object_id\": \"...\", \"coverage\": 0.85, \"symbols_held\": 51, \"symbols_needed\": 60}\n```\n\n### Repair Audit Event\n```json\n{\n  \"type\": \"RepairAction\",\n  \"object_id\": \"...\",\n  \"zone_id\": \"z:work\",\n  \"coverage_before\": 0.75,\n  \"coverage_after\": 0.80,\n  \"symbols_fetched\": 3,\n  \"source_nodes\": [\"node-0\", \"node-1\"]\n}\n```\n\n## Logging Requirements\n```json\n{\n  \"timestamp\": \"RFC3339\",\n  \"script\": \"e2e_offline_repair\",\n  \"step\": \"monitor_repair\",\n  \"object_id\": \"...\",\n  \"coverage\": 0.85,\n  \"repair_in_progress\": true,\n  \"result\": \"pass\"\n}\n```\n\n## Acceptance Criteria\n- Read succeeds with reduced availability (above K')\n- Repair loop improves coverage over time\n- Full coverage restored after node returns\n- All repair actions are audit-logged\n\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:29:48.970902058-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:29:48.970902058-05:00","labels":["e2e","fcp2","mvp","repair","testing"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.36.5","depends_on_id":"flywheel_connectors-1n78.36","type":"parent-child","created_at":"2026-01-15T03:29:48.972475862-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.36.5","depends_on_id":"flywheel_connectors-1n78.21.4","type":"blocks","created_at":"2026-01-15T03:29:55.961723494-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.36.6","title":"E2E Script: Epoch Replay + Binary Mirror Install","description":"# E2E Script: Epoch Replay + Binary Mirror Install\n\n## Goal\nExtend the deterministic multi-node harness to cover Spec §20 end-to-end:\n- epoch-based event buffer replay after an offline gap\n- connector binary distribution via symbols (mesh mirror) with verification enforced\n\nThis is an E2E script bead (not an implementation bead): it defines the scenario, assertions, artifacts, and logging.\n\n## Scenario\n### Setup\n- Start 3 MeshNodes in a deterministic simulation.\n- Create a zone `z:project:e2e` with a policy that:\n  - permits symbol/control traffic only over allowed transports\n  - requires supply-chain verification for connector installs\n\n### Part A: Epoch Replay\n1. Node A produces a stream of events for multiple epochs.\n2. Node B is taken offline (or isolated) for N epochs.\n3. Node B returns.\n4. Assertions:\n   - Node B detects an epoch gap.\n   - Node B requests symbols and reconstructs missing epoch objects.\n   - Node B replays events in order and reaches the same epoch frontier as Node A.\n\n### Part B: Binary Mirror Install\n1. Node A installs a connector from a mock registry.\n2. Verify Node A mirrors the verified binary into the mesh as content-addressed objects (and/or symbol sets).\n3. Node C installs the same connector WITHOUT contacting the registry (only from mesh symbols).\n4. Assertions:\n   - Node C refuses to execute until verification completes.\n   - The installed binary hash matches the manifest.\n   - Audit events exist for install + verification.\n\n## Required Artifacts\n- Structured JSON logs for all nodes (trace_id correlated).\n- A minimal “evidence bundle”:\n  - epoch ids and object ids reconstructed\n  - symbol coverage metrics\n  - install/verify audit events\n\n## Acceptance Criteria\n- Script is deterministic (repeat runs produce identical assertions and stable artifacts).\n- Failures produce actionable `fcp_error_code` + reason_code in logs.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T05:20:19.030662914-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:20:19.030662914-05:00","labels":["e2e","fcp2","raptorq","testing"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.36.6","depends_on_id":"flywheel_connectors-1n78.36","type":"parent-child","created_at":"2026-01-15T05:20:35.547602054-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.36.6","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T05:20:35.820161704-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.36.6","depends_on_id":"flywheel_connectors-1n78.37","type":"blocks","created_at":"2026-01-15T05:20:36.071069936-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.37","title":"[FCP2] RaptorQ Deep Integration: Epoch Event Buffer + Binary Distribution","description":"# [FCP2] RaptorQ Deep Integration: Epoch Event Buffer + Binary Distribution\n\n## Goal\nImplement Spec §20 “RaptorQ Deep Integration” so the mesh can:\n- turn **continuous events** into **epoch-addressed, repairable symbol sets** (Epoch Event Buffer)\n- distribute **large binaries** (connector updates) efficiently and resumably via the symbol layer\n\nThis is *not* “just chunking”. The goal is to make the symbol layer feel like a **mesh-native CDN + event log** with bounded overhead and strong DoS resistance.\n\n## Why This Matters\n- **Streaming needs replay**: if a node was offline, it must reconstruct the missing epoch(s) from symbols.\n- **Offline-first installs/updates**: connector binaries should be mirrorable and retrievable from peers, not only from a registry/CDN.\n- **Bandwidth is unreliable**: RaptorQ lets us retrieve *any* K symbols rather than “the exact missing pieces”, which plays well with P2P and partial availability.\n\n## Normative Alignment (Spec §20)\n### 20.1 Epoch-Based Event Buffer (NORMATIVE intent)\n- Events are finalized into epoch objects.\n- Epoch objects are content-addressed and symbol-distributed.\n- Epoch finalization emits enough symbols (incl. repair symbols) for reliable reconstruction under churn.\n\n### 20.2 Connector Binary Distribution\n- Binaries should be representable as symbol sets so they can be fetched from multiple sources (registry + peers) and resumed.\n\n## Scope / Deliverables\n### A) Epoch Event Buffer\n- Define an **epoch object model** suitable for deterministic reconstruction:\n  - `EpochId` / epoch sequence boundaries\n  - `EpochMetadata` (object id, size, symbol policy, producer node ids, coverage targets)\n  - `EpochEvents` payload object(s) (canonical CBOR), chunked if needed\n- Implement epoch lifecycle:\n  1. accumulate events in current epoch (bounded memory)\n  2. finalize epoch → produce canonical event bytes\n  3. encode to symbols using the canonical RaptorQ parameters\n  4. distribute symbols using existing SymbolRequest/repair plumbing\n  5. publish epoch metadata for discovery/replay\n- Replay API surface (host-side):\n  - `list_epochs(zone_id, since_epoch)`\n  - `fetch_epoch(epoch_id)` → reconstruct bytes via symbols → decode events\n  - “gap detection” and replay catch-up when node reconnects\n\n### B) Binary Distribution via Symbols\n- Treat connector binaries as **content-addressed objects** (already required by registry/supply chain).\n- Implement a distribution strategy that supports:\n  - parallel fetch (registry + peers)\n  - resumable partial progress\n  - bounded disk/memory impact\n- Explicitly integrate with supply chain verification:\n  - symbols/binary bytes are untrusted until verified against manifest checksum/signatures\n  - quarantine-by-default until verification completes\n\n## Mechanical Safety / DoS Considerations\n- Epoch and binary symbol reconstruction MUST be bounded:\n  - max concurrent decodes\n  - per-decode memory bounds (symbol buffer caps)\n  - per-decode wall-time budget and cancellation\n- Admission control MUST account for:\n  - symbol fetch amplification\n  - decode CPU budgets\n  - disk write amplification\n\n## Dependencies\n- RaptorQ + chunking primitives: `flywheel_connectors-1n78.14`\n- Store/placement/repair/quarantine: `flywheel_connectors-1n78.15`\n- Symbol routing + targeted repair plumbing: `flywheel_connectors-1n78.17` (esp. SymbolRequest / repair)\n- Registry + supply chain verification + mirroring: `flywheel_connectors-1n78.27`\n- Observability requirements for structured logs/metrics: `flywheel_connectors-1n78.28`\n\n## Tests (required)\n### Unit\n- epoch finalization determinism (same events → same bytes → same ObjectId)\n- epoch encoding/decoding roundtrip\n- symbol scheduling bounds (timeouts, concurrency)\n\n### Integration\n- multi-node: produce epochs on node A, reconstruct on node B via symbols\n- partial symbol availability: reconstruct with different symbol subsets\n\n### Adversarial\n- decode DoS corpora for epoch/binary payload shapes\n- peer sends malformed epoch metadata / symbol spam → bounded rejection\n\n### E2E\n- extend the deterministic E2E harness:\n  - epoch replay after offline gap\n  - binary mirror from one node → install on another (verification enforced)\n\n## Acceptance Criteria\n- Epoch replay works end-to-end in the E2E harness with deterministic artifacts.\n- Binary distribution can succeed without contacting the registry once the mesh has mirrored symbols.\n- All reconstruction is bounded (timeouts + memory caps) and emits structured logs/metrics.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T05:19:07.139027253-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:19:07.139027253-05:00","labels":["fcp2","full","protocol","raptorq","storage"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.37","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T05:19:09.937818716-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.37","depends_on_id":"flywheel_connectors-1n78.14","type":"blocks","created_at":"2026-01-15T05:19:16.808767041-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.37","depends_on_id":"flywheel_connectors-1n78.15","type":"blocks","created_at":"2026-01-15T05:19:17.051620595-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.37","depends_on_id":"flywheel_connectors-1n78.17","type":"blocks","created_at":"2026-01-15T05:19:17.294059638-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.37","depends_on_id":"flywheel_connectors-1n78.27","type":"blocks","created_at":"2026-01-15T05:19:17.539047357-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.37","depends_on_id":"flywheel_connectors-1n78.28","type":"blocks","created_at":"2026-01-15T05:19:17.778900313-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.37.1","title":"TEST: RaptorQ Deep Integration (Epoch Buffer + Binary Distribution)","description":"# TEST: RaptorQ Deep Integration (Epoch Buffer + Binary Distribution)\n\n## Goal\nProvide comprehensive tests for Spec §20 behaviors implemented by `flywheel_connectors-1n78.37`:\n- epoch finalization and replay from symbols\n- binary distribution via symbols with strict supply-chain verification\n- bounded decode/repair behavior under adversarial inputs\n\n## Test Categories\n### 1) Epoch Finalization Determinism\n- same event sequence → identical canonical CBOR bytes → identical ObjectId\n- epoch metadata is deterministic and schema-validated\n\n### 2) Replay / Gap Catch-up\n- node misses N epochs → reconstructs via symbols → replays in order\n- missing symbols repaired via targeted repair flow (bounded)\n\n### 3) Partial Availability Reconstruction\n- reconstruct epoch with different subsets of symbols (K-of-N)\n- ensure reconstruction correctness does not depend on symbol identity\n\n### 4) Binary Distribution + Verification\n- binary bytes remain quarantined until verified against manifest checksum/signatures\n- install fails closed if verification cannot complete\n- resume logic works across interrupted downloads\n\n### 5) Adversarial / DoS Bounds\n- decode DoS corpora for epoch payloads and large binaries\n- enforce per-decode timeouts, memory caps, and concurrency limits\n- malformed epoch metadata must not cause unbounded allocation or panics\n\n## Fuzz Targets\n- epoch metadata parsing (CBOR)\n- epoch event decoding (CBOR)\n- symbol frame parsing related to epoch replay paths\n\n## Logging Requirements (per 1n78.35)\n- tests emit structured JSON logs with:\n  - `trace_id`, `zone_id`, `epoch_id`, `object_id`\n  - `symbols_needed`, `symbols_available`, `repair_attempts`\n  - `bytes_written`, `verify_result`\n  - `result` + `fcp_error_code` (when failing)\n\n## Acceptance Criteria\n- Determinism tests pass across platforms (CI).\n- Replay tests pass with randomized symbol subsets.\n- Adversarial tests demonstrate enforced decode bounds.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T05:19:51.589610349-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:19:51.589610349-05:00","labels":["fcp2","raptorq","testing"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.37.1","depends_on_id":"flywheel_connectors-1n78.37","type":"parent-child","created_at":"2026-01-15T05:19:56.133798081-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.37.1","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T05:19:56.388750159-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.4","title":"[FCP2] Core Types: Identifier Canonicalization, ZoneId, ObjectHeader, Keyed ObjectId","description":"# [FCP2] Core Types: Identifier Canonicalization, ZoneId, ObjectHeader, Keyed ObjectId\n\n## Goal\nImplement the foundational types that everything else depends on.\n\n## Normative invariants (must be enforced)\n- Canonical identifiers are ASCII/lowercase, length-bounded, and regex-constrained.\n- Zone IDs are canonical strings, with a fixed-size ZoneIdHash for framing/AAD.\n- ObjectIds for security-relevant objects are **keyed** and bound to zone + schema.\n\n## Concrete requirements\n- Identifier canonicalization rule (reject non-canonical):\n  - ASCII only\n  - lowercase only\n  - length ≤ 128 bytes\n  - regex: `^[a-z0-9][a-z0-9._:-]*$`\n\n- `ZoneId`:\n  - UTF-8 string restricted to `[a-z0-9:_-]`\n  - length ≤ 64 bytes\n  - `hash()` =\u003e `ZoneIdHash([u8;32])` for fixed-size usage\n  - standard zones: `z:owner`, `z:private`, `z:work`, `z:community`, `z:public`\n  - mapping to tailscale tag: `tag:fcp-\u003csuffix\u003e`\n\n- `ObjectId`:\n  - 32-byte content address\n  - **SECURITY RULE:** security objects MUST use keyed derivation that includes domain separation + zone bytes + schema hash + content bytes.\n  - unscoped hashes may exist only for non-security caching/debug.\n\n- `ObjectHeader`:\n  - must carry zone, schema, retention class, refs, provenance fields needed for enforcement.\n\n## Acceptance Criteria\n- Unit tests for canonical ID validation.\n- Golden vectors for ObjectId derivation for at least the core security object classes.\n- No panics on malformed inputs.\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:18:32.941985195-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T01:18:32.941985195-05:00","labels":["core","fcp2","ids","mvp"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.4","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:18:32.943433195-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.4","depends_on_id":"flywheel_connectors-1n78.3","type":"blocks","created_at":"2026-01-15T01:21:42.0977972-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.5","title":"[FCP2] Crypto Primitives: Ed25519/X25519, HPKE Sealing, HKDF, AEAD, COSE Helpers","description":"# [FCP2] Crypto Primitives: Ed25519/X25519, HPKE Sealing, HKDF, AEAD, COSE Helpers\n\n## Goal\nProvide the cryptographic building blocks used by zone key distribution, capability tokens, sessions, receipts, and audit.\n\nThis bead is intentionally “low-level”: other subsystems should consume these helpers instead of re-implementing crypto rules.\n\n## Key role separation (must preserve)\nFCP uses distinct keys for:\n- owner signing key (Ed25519 public anchor; private should support threshold signing later)\n- node signing key (Ed25519)\n- node encryption key (X25519)\n- node issuance key (Ed25519) for token minting\n- zone symmetric encryption keys (ChaCha20-Poly1305 / XChaCha20-Poly1305)\n\n## Required algorithms (MVP)\n- Ed25519 signatures\n- X25519 ECDH\n- HKDF-SHA256\n- AEAD: ChaCha20-Poly1305 (and optionally XChaCha20-Poly1305)\n- Session MACs: HMAC-SHA256 or BLAKE3-keyed MAC (NOT Poly1305 across multiple frames)\n- HPKE sealed boxes (RFC 9180) for distributing keys/shares to node encryption keys\n\n### HPKE baseline profile (MUST implement)\n- KEM: DHKEM(X25519, HKDF-SHA256)\n- KDF: HKDF-SHA256\n- AEAD: ChaCha20-Poly1305\n\n### HPKE AAD binding (NORMATIVE when sealing keys/shares)\nSeal/unseal helpers MUST support the spec’s AAD requirements, binding at least:\n- zone_id_hash (or zone_id)\n- recipient_node_id\n- purpose string (e.g., \"FCP2-ZONE-KEY\", \"FCP2-OBJECTID-KEY\", \"FCP2-OWNER-SHARE\", \"FCP2-SECRET-SHARE\")\n- issued_at\n\n## Signature canonicalization helpers (NORMATIVE)\nTo prevent cross-implementation drift, we need a single signing-bytes procedure:\n- define an \"unsigned view\" of an object (remove `signature` / `quorum_signatures` fields)\n- serialize using deterministic CBOR with schema-hash prefix\n- for multi-signature vectors: sort lexicographically by node_id before hashing/signing/verifying\n\nThis helper is used by:\n- ZoneKeyManifest, ZoneDefinitionObject, ZonePolicyObject\n- Revocation objects/heads\n- Audit events/heads and ZoneCheckpoint\n- Leases\n\n## COSE/CWT helpers (CapabilityToken)\n- Build/verify COSE_Sign1 tokens with deterministic CBOR payload maps.\n- Verify signature **before** trusting/parsing untrusted claims (avoid parser-footguns).\n- Extract protected `kid` and route to the correct issuance pubkey.\n\n## Subtasks\n- Define stable KID formats (`[u8;8]`) and key-rotation semantics.\n- Implement Ed25519 signing/verification wrappers (no raw bytes ambiguity).\n- Implement X25519 ECDH + HKDF key schedule helpers.\n- Implement HPKE seal/unseal helpers (baseline profile + AAD binding).\n- Implement AEAD helpers used by symbol encryption and FCPC `k_ctx`.\n- Implement COSE_Sign1/CWT helpers needed for CapabilityToken.\n- Provide constant-time comparisons where relevant.\n- Provide test vectors for Ed25519, HKDF, HPKE, and COSE verification.\n\n## Acceptance Criteria\n- Unit tests + golden vectors for signatures, HKDF, HPKE, and COSE verification.\n- Fuzz: reject malformed COSE/CBOR inputs without panic.\n- Benchmarks for hot path primitives (Ed25519 verify, HKDF, HPKE open/verify).\n\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:19:02.785056175-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:57:09.045308709-05:00","labels":["crypto","fcp2","mvp","security"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.5","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:19:02.786312513-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.5","depends_on_id":"flywheel_connectors-1n78.2","type":"blocks","created_at":"2026-01-15T01:21:42.145808369-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.5","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T01:21:42.193914307-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.6","title":"[FCP2] Zone Crypto: ZoneKeyManifest + ObjectIdKey Distribution + Rotation","description":"# [FCP2] Zone Crypto: ZoneKeyManifest + ObjectIdKey Distribution + Rotation\n\n## Goal\nImplement zone key distribution and rotation as mesh objects.\n\n## Why\nZones are cryptographic boundaries. Without correct zone key distribution, the rest of the security model is not real.\n\n## Required behaviors (spec-aligned)\n- Zone keys are random symmetric keys per zone (NOT derived from owner secret).\n- Distribution is via owner-signed `ZoneKeyManifest` objects.\n- Keys are sealed to each node's X25519 encryption pubkey using HPKE (RFC 9180).\n- Rotation produces a new `zone_key_id` and a new symmetric key.\n\n### Deterministic key selection (no trial-decrypt)\n- Symbol/control-plane decrypt must select the correct key by `zone_key_id` (and reject unknown ids).\n\n### ObjectIdKey distribution (privacy hard requirement)\nSecurity-relevant ObjectIds are keyed to prevent dictionary attacks on low-entropy objects.\n- Each zone has an `ObjectIdKey` that MUST be distributed to zone members.\n- `ObjectIdKey` is expected to remain stable across routine `zone_key_id` rotations.\n\n### Rekey policy hooks (MVP supports fields; full profile may implement stronger modes)\nZoneKeyManifest may carry a rekey policy describing:\n- epoch ratchet (derive + delete epoch subkeys for bounded past secrecy)\n- overlap window for skew/delayed frames\n- retain_epochs bound\n- rewrap on membership change\n- optional rotate ObjectIdKey on membership change (privacy hardening)\n\n## Subtasks\n- Define `ZoneKeyManifest` schema with at least:\n  - `zone_id`, `zone_key_id`, algorithm\n  - `valid_from/valid_until` + optional `prev_zone_key_id` for overlap\n  - `wrapped_keys: Vec\u003cWrappedZoneKey\u003e` sealed per node\n  - `wrapped_object_id_keys: Vec\u003cWrappedObjectIdKey\u003e` sealed per node\n  - `object_id_key_id` for deterministic selection/rotation tracking\n  - optional `rekey_policy`\n  - owner signature (deterministic signing bytes per canonical serialization rules)\n- Define `ZoneKeyRing`/key storage model:\n  - map `zone_key_id -\u003e ZoneKey` + `active` pointer\n  - strict rejection of unknown/expired keys (policy-controlled)\n- Implement HPKE sealing/unsealing helpers with required AAD binding:\n  - AAD binds `zone_id_hash` (or zone_id), `recipient_node_id`, `purpose` string, `issued_at`.\n- Define rotation workflows:\n  - publish new ZoneKeyManifest\n  - update ZoneCheckpoint to point to active manifest\n  - ensure FCPS frames carry the new `zone_key_id` deterministically\n- Define membership-change workflows:\n  - on removal: publish revocations, rotate zone_key, rewrap to remaining members\n  - if policy enables: rotate ObjectIdKey on membership change\n\n## Acceptance Criteria\n- Golden vectors for HPKE sealed box correctness (baseline profile: X25519 + HKDF-SHA256 + ChaCha20-Poly1305).\n- Unit tests: node without membership cannot decrypt zone key or ObjectIdKey.\n- Rotation tests:\n  - new symbols decrypt under new key\n  - deterministic selection by `zone_key_id` (no trial decrypt)\n- Membership-change tests:\n  - removed node cannot decrypt newly wrapped keys\n\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:19:02.836042021-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:56:50.351690337-05:00","labels":["fcp2","mvp","security","zone"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.6","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:19:02.837308649-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.6","depends_on_id":"flywheel_connectors-1n78.5","type":"blocks","created_at":"2026-01-15T01:21:42.240812067-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.6","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T01:21:42.285377952-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.7","title":"[FCP2] Capabilities: CapabilityObject + COSE_Sign1 CapabilityToken Verification","description":"# [FCP2] Capabilities: CapabilityObjects + COSE_Sign1 CapabilityToken Verification\n\n## Goal\nImplement the provable authority layer: capabilities as objects and capability tokens as COSE_Sign1/CWT.\n\n## Non-negotiable semantics\n- No ambient authority: every operation must present explicit authority.\n- Capability tokens must be verifiable mechanically (with only object fetches + freshness checks), not “trust the issuer”.\n\n## CapabilityToken (FCT) essentials (spec-aligned)\nTokens are short-lived, signed by a **node issuance key** (distinct from node signing keys).\n\nKey fields that MUST exist and be enforced:\n- `jti` (UUID)\n- `sub` (PrincipalId)\n- `iss_zone` (ZoneId)\n- `iss_node` (TailscaleNodeId)\n- `kid` ([u8;8])\n- `aud` (ConnectorId)\n- `aud_binary` (Option\u003cObjectId\u003e) **NORMATIVE: REQUIRED for Risky/Dangerous**\n- `instance` (optional binding)\n- `iat`/`exp` (time validity; enforce with skew tolerance)\n- `grant_object_ids` (CapabilityObjects that authorize this token)\n- `caps` (CapabilityGrants; MUST be subset of union of grant objects)\n- `attenuation` (optional; MUST ONLY RESTRICT)\n- `holder_node` (Option\u003cTailscaleNodeId\u003e) **NORMATIVE: REQUIRED for Risky/Dangerous**\n- `chk_id` (ZoneCheckpoint ObjectId)\n- `chk_seq` (ZoneCheckpoint monotonic seq; enables O(1) freshness checks)\n\n## COSE/CWT encoding (NORMATIVE)\n- Token MUST be serialized as COSE_Sign1.\n- COSE payload MUST be deterministic canonical CBOR using CWT conventions (RFC 8392) + FCP private claims.\n- `kid` MUST be in protected headers.\n\n## Verification pipeline (MUST)\n1. **Structural validation** (types, required fields present for risk tier)\n2. **Time validity**: `iat/exp` with TimePolicy skew tolerance; reject “issued in future” beyond skew.\n3. **Issuer verification**:\n   - verify COSE_Sign1 signature using node **issuance** pubkey (not node signing key)\n   - issuance key MUST be authorized via NodeKeyAttestation\n   - enforce issuer policy: node is allowed to mint tokens for `iss_zone`\n4. **Checkpoint freshness**:\n   - verifier MUST have `checkpoint_seq \u003e= token.chk_seq` (or enter explicit degraded mode per policy)\n   - checkpoint identity must match `chk_id` at that sequence\n5. **Grant verification (`grant_object_ids`)**:\n   - fetch/verify each referenced CapabilityObject\n   - ensure token `caps` is subset of union of grant caps/constraints\n   - ensure attenuation never expands authority\n   - ensure referenced objects are not revoked\n6. **Holder proof (NORMATIVE when holder_node present)**:\n   - InvokeRequest MUST include `holder_proof`\n   - verify `holder_proof` signature using holder node **signing** pubkey\n   - holder signable bytes MUST bind at least: request id, operation id, and token jti (prevents replay by non-holder)\n\n## CapabilityObjects + Roles (spec surface)\n- `CapabilityObject` is the mesh-native grant object that tokens reference.\n- `RoleObject` is a named bundle (with optional inheritance).\n- `RoleAssignment` binds a RoleObject to a PrincipalId with optional attenuation.\n- Role inheritance MUST be a DAG (no cycles) and is purely additive.\n\n## Egress proxy credential injection (NORMATIVE surface)\nCapability constraints may authorize injecting credentials into the MeshNode egress proxy for specific operations/hosts.\nThis is enforced jointly by:\n- capability verification (this issue)\n- sandbox/egress proxy enforcement (sandbox issue)\n\n## Acceptance Criteria\n- Golden vectors for COSE_Sign1 encoding/verification, including:\n  - `grant_object_ids` enforcement\n  - `chk_id/chk_seq` freshness binding\n  - `holder_node` + holder_proof verification\n- Adversarial tests for common token attacks (stale checkpoint, grant mismatch, wrong audience, wrong holder).\n- Benchmarks for token verification hot path.\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:19:02.886835515-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:17:38.885762289-05:00","labels":["capabilities","fcp2","mvp","security"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.7","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:19:02.888064812-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.7","depends_on_id":"flywheel_connectors-1n78.5","type":"blocks","created_at":"2026-01-15T01:21:42.429164635-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.7","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T01:21:42.480734532-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.7","depends_on_id":"flywheel_connectors-1n78.9","type":"blocks","created_at":"2026-01-15T01:21:42.529629898-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.8","title":"[FCP2] Provenance + Taint + Unified ApprovalToken (Elevation/Declassification)","description":"# [FCP2] Provenance + Taint + Unified ApprovalToken (Elevation/Declassification/Execution)\n\n## Goal\nMake trust boundaries compositional and mechanically enforceable:\n- provenance tracking on every mesh object (and on control-plane inputs/outputs)\n- taint accumulation + proof-carrying taint reductions\n- a unified ApprovalToken model for **elevation**, **declassification**, and **scoped execution**\n\n## Required semantics (spec-aligned)\n### Provenance merge is SECURITY-CRITICAL\nWhen combining data from multiple inputs, the result MUST have:\n- integrity = `MIN(effective_integrity(inputs))`\n- confidentiality = `MAX(effective_confidentiality(inputs))`\n\nThis is what prevents “mix one trusted thing with one untrusted thing” from upgrading trust.\n\n### Zone lattice enforcement\n- Integrity can flow DOWN freely; integrity flowing UP requires an ApprovalToken::Elevation.\n- Confidentiality can flow UP freely; confidentiality flowing DOWN requires an ApprovalToken::Declassification.\n\n### Taint is compositional but reducible with proof\n- Taint flags accumulate via OR.\n- Specific taints MAY be cleared only by referencing a valid SanitizerReceipt (proof object).\n- Verifiers MUST validate SanitizerReceipt signature, authority, and **coverage** (the inputs being reduced are included).\n\n### Taint → operation safety gating\nAt minimum:\n- Public-tainted input MUST NOT directly drive Dangerous operations.\n- Risky operations with tainted input may require elevation based on integrity levels (policy-controlled but must be mechanically enforceable).\n\n### Unified ApprovalToken (NORMATIVE)\nApprovalToken is a first-class mesh object (ObjectHeader + signature) with a closed set of scopes:\n- `Elevation { operation, original_provenance }`\n- `Declassification { from_zone, to_zone, object_ids }`\n- `Execution { connector_id, method_pattern, request_object_id?, input_hash?, input_constraints[] }`\n\n**Execution scope** is how we support “allow this exact invocation” in degraded/offline cases and how we avoid broad, reusable approvals.\n\n**Input constraints are interop-stable:**\n- JSON Pointer (RFC 6901) only\n- No JSONPath, no regex\n\n### Label adjustments are proof-carrying\nAny elevation/declassification must be reflected by appending a LabelAdjustment entry that references the ApprovalToken.\n\n**Declassification output label rule (NORMATIVE):**\nWhen declassifying data into a lower-confidentiality zone, the resulting object’s confidentiality_label MUST be set to the target zone’s confidentiality and the declassification Adjustment MUST reference the ApprovalToken.\n\n## Subtasks\n- Define core provenance model:\n  - origin_zone, current_zone\n  - integrity_label, confidentiality_label\n  - label_adjustments (proof-carrying)\n  - taint flags + taint_reductions\n  - zone_crossings\n- Define unified ApprovalToken and ApprovalScope (including Execution + InputConstraint).\n- Define SanitizerReceipt and verifier rules (signature + authority + coverage).\n- Define TaintDecision rules and how they interact with SafetyTier + policy.\n- Define integration points:\n  - InvokeRequest carries approval_tokens\n  - MeshNode/policy engine evaluate approvals + taint reductions\n  - DecisionReceipt evidence includes ApprovalToken/SanitizerReceipt object IDs when relevant\n\n## Acceptance Criteria\n- Unit tests:\n  - merge rule (MIN integrity, MAX confidentiality)\n  - taint reduction only applies with valid SanitizerReceipt covering inputs\n  - elevation/declassification required when crossing lattice boundaries\n  - execution-scope approvals bind to request_object_id and/or input_hash\n- Property tests for provenance invariants under random merges.\n- Golden decision vectors (in policy tests) include at least:\n  - deny Dangerous due to PUBLIC_INPUT taint\n  - allow after sanitizer receipt clears UNVERIFIED_LINK\n  - deny declassification without ApprovalToken\n\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:19:02.937639198-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:55:57.915251795-05:00","labels":["fcp2","mvp","security","taint"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.8","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:19:02.939251607-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.8","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T01:21:42.581406304-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.8","depends_on_id":"flywheel_connectors-1n78.7","type":"blocks","created_at":"2026-01-15T01:21:42.626883377-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-1n78.9","title":"[FCP2] Revocation: Objects, RevocationEvent Chain, RevocationHead + Freshness Policy","description":"# [FCP2] Revocation: Objects, RevocationEvent Chain, RevocationHead + Freshness Policy\n\n## Goal\nMake compromised devices/keys/tokens recoverable via revocation. The V2 spec explicitly states: \"Without revocation, 'compromised device' recovery is mostly imaginary.\"\n\n## Background (V2 Spec §14.3)\nRevocations are mesh objects distributed like any other object and MUST be enforced before use.\n\n## Normative Types\n\n### RevocationObject\n```rust\npub struct RevocationObject {\n    pub header: ObjectHeader,\n    pub revoked: Vec\u003cObjectId\u003e,       // ObjectIds being revoked\n    pub scope: RevocationScope,       // Type of revocation\n    pub reason: String,               // Human-readable reason\n    pub effective_at: u64,            // When revocation becomes effective\n    pub expires_at: Option\u003cu64\u003e,      // None = permanent\n    pub signature: Signature,         // Owner-signed (REQUIRED)\n}\n```\n\n### RevocationScope\n```rust\npub enum RevocationScope {\n    Capability,       // Revoke capability tokens\n    IssuerKey,        // Node can no longer mint tokens\n    NodeAttestation,  // Remove device from mesh entirely\n    ZoneKey,          // Force zone key rotation\n    ConnectorBinary,  // Supply chain response\n}\n```\n\n### RevocationEvent (Chain Node)\n```rust\npub struct RevocationEvent {\n    pub header: ObjectHeader,\n    pub revocation_object_id: ObjectId,\n    pub prev: Option\u003cObjectId\u003e,\n    pub seq: u64,                     // Monotonic for O(1) freshness\n    pub occurred_at: u64,\n    pub signature: Signature,\n}\n```\n\n### RevocationHead (Checkpoint)\n```rust\npub struct RevocationHead {\n    pub header: ObjectHeader,\n    pub zone_id: ZoneId,\n    pub head_event: ObjectId,\n    pub head_seq: u64,                // O(1) freshness comparison\n    pub epoch_id: EpochId,\n    pub quorum_signatures: Vec\u003c(TailscaleNodeId, Signature)\u003e,\n}\n```\n\n### RevocationRegistry\n```rust\npub struct RevocationRegistry {\n    revocations: HashMap\u003cObjectId, RevocationObject\u003e,\n    bloom_filter: BloomFilter,        // Fast negative lookup\n    pub head: Option\u003cObjectId\u003e,       // Latest known head\n}\n\nimpl RevocationRegistry {\n    /// MUST be called before any capability use\n    pub fn is_revoked(\u0026self, object_id: \u0026ObjectId) -\u003e bool {\n        if !self.bloom_filter.might_contain(object_id.as_bytes()) {\n            return false;  // Fast path: definitely not revoked\n        }\n        self.revocations.contains_key(object_id)\n    }\n}\n```\n\n## Required semantics\n- Revocations are owner-signed objects (MUST be owner signature)\n- Freshness is O(1): compare revocation head sequence numbers\n- Verifiers MUST enforce freshness requirements based on risk tier:\n  - **Strict**: require fresh revocation frontier or abort\n  - **Warn**: allow cached revocations if within max_age\n  - **BestEffort**: proceed with stale cache but record degraded state\n- High-priority gossip propagation for revocations\n- Persistent storage with crash recovery\n\n## Subtasks\n- [x] Define RevocationObject and all scope variants\n- [x] Define RevocationEvent chain with monotonic seq\n- [x] Define RevocationHead checkpoint with quorum signatures\n- [x] Implement RevocationRegistry with bloom filter fast negative lookups\n- [ ] Implement enforcement at all capability verification points\n- [ ] Implement high-priority gossip propagation\n- [ ] Implement persistent storage\n\n## Acceptance Criteria\n- [ ] All RevocationScope variants implemented\n- [ ] Owner-only signature validation\n- [ ] RevocationEvent hash-linked chain with monotonic seq\n- [ ] RevocationHead with quorum signatures\n- [ ] RevocationRegistry with bloom filter\n- [ ] is_revoked() check at all enforcement points\n- [ ] Revocation freshness comparison\n- [ ] High-priority gossip propagation\n- [ ] Persistent storage with crash recovery\n- [ ] Unit tests: revoked object is rejected\n- [ ] Unit tests: stale revocation head fails under Strict policy\n- [ ] Benchmarks for revocation checks","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:19:40.06639602-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:47:07.499875279-05:00","labels":["fcp2","mvp","revocation","security"],"dependencies":[{"issue_id":"flywheel_connectors-1n78.9","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:19:40.067955389-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.9","depends_on_id":"flywheel_connectors-1n78.5","type":"blocks","created_at":"2026-01-15T01:21:42.332241849-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.9","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T01:21:42.378860684-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-1n78.9","depends_on_id":"flywheel_connectors-1n78.25","type":"blocks","created_at":"2026-01-15T01:51:14.276595692-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-2145","title":"TEST: Connector Manifest Unit Tests (TOML Parsing, Validation, Supply Chain Metadata)","description":"# TEST: Connector Manifest Unit Tests\n\n## Scope\nComprehensive tests for connector manifest parsing and validation.\n\n## Test Categories\n\n### TOML Parsing\n- [ ] Valid manifest parses correctly\n- [ ] All required fields present\n- [ ] Optional fields handled correctly\n- [ ] Invalid TOML rejected with clear error\n- [ ] Deeply nested structures supported\n\n### Field Validation\n- [ ] connector_id format validation\n- [ ] version semver validation\n- [ ] capability declarations validated\n- [ ] network constraints validated\n- [ ] resource requirements validated\n\n### Supply Chain Metadata\n- [ ] Signature field present and valid\n- [ ] Checksum matches binary\n- [ ] Author attestation verified\n- [ ] Build reproducibility metadata\n- [ ] Transparency log reference (if present)\n\n### Embedding\n- [ ] Manifest embedded in binary\n- [ ] Extraction from binary works\n- [ ] Embedded manifest matches standalone\n\n### Security Checks\n- [ ] Dangerous capabilities flagged\n- [ ] Network constraints reviewed\n- [ ] Secret access reviewed\n- [ ] Policy ceiling respected\n\n## Golden Vectors\nLocation: `tests/vectors/manifest/`\n- `manifest_valid.toml`\n- `manifest_minimal.toml`\n- `manifest_invalid_version.toml`\n- `manifest_dangerous_caps.toml`\n\n## Logging Requirements\n```json\n{\n  \"timestamp\": \"RFC3339\",\n  \"test_name\": \"test_manifest_validation\",\n  \"phase\": \"execute\",\n  \"correlation_id\": \"uuid\",\n  \"connector_id\": \"...\",\n  \"version\": \"1.0.0\",\n  \"capabilities_count\": 5,\n  \"result\": \"pass\"\n}\n```\n\n## Acceptance Criteria\n- All manifest fields validated\n- Supply chain metadata verified\n- Invalid manifests produce clear errors\n\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:26:53.057103613-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:26:53.057103613-05:00","labels":["connectors","fcp2","mvp","testing"],"dependencies":[{"issue_id":"flywheel_connectors-2145","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:27:01.540906147-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-2145","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:27:01.629019978-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-2145","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T07:32:08.432607294-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-2145","depends_on_id":"flywheel_connectors-1n78.19","type":"parent-child","created_at":"2026-01-15T07:36:47.999476116-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-279","title":"fcp.salesforce: Bulk data operations","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:19:22.010738859-05:00","created_by":"ubuntu","updated_at":"2026-01-11T12:09:27.16281923-05:00","closed_at":"2026-01-11T12:09:27.16281923-05:00","close_reason":"CONSOLIDATED: All Salesforce sub-features merged into comprehensive parent connector bead flywheel_connectors-4m0 (fcp.salesforce: Salesforce CRM Platform Connector)"}
{"id":"flywheel_connectors-292","title":"fcp.jira: JQL query execution engine","description":"# fcp.jira: JQL Query Execution Engine\n\n## Goal\nProvide a safe, typed, and ergonomic JQL query layer for search and automation.\n\n## Scope\nOperations (representative):\n- `jira.jql.search`\n- `jira.jql.validate`\n- `jira.jql.autocomplete`\n\n## Key requirements\n- Capability gated (`jira.issues.read`).\n- Query safety:\n  - strict escaping/encoding of user-provided values\n  - prevent injection into raw JQL strings where possible (prefer builder)\n- Pagination:\n  - deterministic iteration over `startAt`/`maxResults`\n  - stable ordering requirements when paginating\n- Performance:\n  - request field subsets; avoid fetching full issue bodies unless required\n\n## Tests\n- Mock-only tests cover:\n  - query builder correctness\n  - pagination edge cases\n  - invalid JQL errors\n  - rate limits\n\n## Acceptance Criteria\n- Agents can run complex searches reliably with predictable pagination.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:14:34.424603101-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:06:32.904273593-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-292","depends_on_id":"flywheel_connectors-x9af","type":"parent-child","created_at":"2026-01-15T02:28:43.073576339-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-292","depends_on_id":"flywheel_connectors-x9af.1","type":"blocks","created_at":"2026-01-15T04:15:36.933628734-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-2cs","title":"Add unit tests for Discord connector","description":"Add comprehensive unit tests for the Discord connector using wiremock for HTTP mocking. Test: REST API methods, WebSocket gateway, error handling, rate limiting.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-11T09:38:24.023947339-05:00","created_by":"ubuntu","updated_at":"2026-01-11T09:51:26.020904764-05:00","closed_at":"2026-01-11T09:51:26.020904764-05:00","close_reason":"Added 12 unit tests for DiscordApiClient covering get_current_user, create_message, get_channel, get_guild, get_gateway, delete_message, rate limiting, and error handling"}
{"id":"flywheel_connectors-2ukh","title":"TEST: Crypto Primitives Unit Tests (Ed25519, X25519, HPKE, AEAD, COSE)","description":"# TEST: Crypto Primitives Unit Tests\n\n## Scope\nComprehensive unit tests for all cryptographic primitives used in FCP2.\n\n## Test Categories\n\n### Ed25519 Signatures\n- [ ] Sign/verify roundtrip\n- [ ] Verify with wrong key fails\n- [ ] Verify with tampered message fails\n- [ ] Signature malleability checks\n- [ ] Test vectors from RFC 8032\n\n### X25519 Key Exchange\n- [ ] ECDH produces same shared secret both ways\n- [ ] Reject low-order points\n- [ ] Test vectors from RFC 7748\n\n### HPKE Sealing (RFC 9180)\n- [ ] Seal/unseal roundtrip\n- [ ] Unseal with wrong key fails\n- [ ] AAD binding is enforced\n- [ ] Multiple recipients (sealed to multiple keys)\n- [ ] Test vectors from RFC 9180\n\n### HKDF-SHA256\n- [ ] Extract/expand produces correct output\n- [ ] Context/info binding changes output\n- [ ] Test vectors from RFC 5869\n\n### ChaCha20-Poly1305 AEAD\n- [ ] Encrypt/decrypt roundtrip\n- [ ] Tampered ciphertext fails authentication\n- [ ] Tampered AAD fails authentication\n- [ ] Nonce reuse detection (if stateful)\n- [ ] Test vectors from RFC 8439\n\n### XChaCha20-Poly1305 (if used)\n- [ ] Extended nonce handling\n- [ ] Same test matrix as ChaCha20-Poly1305\n\n### BLAKE3 Hashing\n- [ ] Hash produces expected output\n- [ ] Keyed MAC mode\n- [ ] Incremental hashing\n- [ ] Test vectors from BLAKE3 spec\n\n### COSE_Sign1 Helpers\n- [ ] Create/verify COSE_Sign1 structure\n- [ ] Protected headers in AAD\n- [ ] KID extraction\n- [ ] Invalid COSE structures rejected\n- [ ] Test vectors from RFC 9052\n\n### KID (Key ID) Generation\n- [ ] KID format is stable\n- [ ] Same key produces same KID\n- [ ] Different keys produce different KIDs\n- [ ] KID truncation is correct (8 bytes)\n\n## Golden Vectors\nEach category MUST have golden vectors:\n- Input bytes (hex)\n- Expected output bytes (hex)\n- Source reference (RFC, test suite, etc.)\n\n## Fuzz Targets\n- COSE structure parsing\n- HPKE unsealing (malformed inputs)\n- Signature verification (malformed signatures)\n\n## Logging Requirements\nAll tests emit structured JSON logs with:\n- `test_name`\n- `primitive` (ed25519, x25519, etc.)\n- `operation` (sign, verify, seal, etc.)\n- `result` (pass/fail)\n- `vector_source` (RFC reference or \"generated\")\n\n## Acceptance Criteria\n- All crypto operations have test coverage\n- Golden vectors exist and match\n- Fuzz targets run without panics\n- No secret material in test logs\n\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T02:53:40.194424796-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:53:40.194424796-05:00","labels":["crypto","fcp2","mvp","testing"],"dependencies":[{"issue_id":"flywheel_connectors-2ukh","depends_on_id":"flywheel_connectors-1n78.5","type":"blocks","created_at":"2026-01-15T02:54:47.298215198-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-2ukh","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:23:55.304949765-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-2up","title":"fcp.zendesk: Analytics and Reporting","description":"# fcp.zendesk: Analytics and Reporting (FCP2)\n\n## Goal\nExpose Zendesk reporting surfaces so agents can:\n- summarize support volume/trends\n- compute response time and backlog metrics\n- track CSAT/quality signals (if available)\n\n## Scope\n- Fetch aggregate metrics over time windows:\n  - ticket volume by category\n  - first response time\n  - resolution time\n  - backlog and queue depth\n- Optional: agent workload metrics (aggregates; avoid raw agent identity exposure unless policy allows).\n\n## Capability model (illustrative)\n- `zendesk.analytics.read`\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- Prefer aggregates; avoid raw ticket bodies.\n\n## Deliverables\n- Operation schemas:\n  - `zendesk.analytics.summary`\n  - `zendesk.analytics.time_series`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - time window handling\n  - unit correctness (ms vs seconds)\n\n## Acceptance criteria\n- Metrics are stable, correctly unit-labeled, and safe for logging.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:21:51.051929534-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:36:45.412228265-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-2up","depends_on_id":"flywheel_connectors-pwff","type":"parent-child","created_at":"2026-01-15T02:34:38.250444672-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-2up","depends_on_id":"flywheel_connectors-pwff.1","type":"blocks","created_at":"2026-01-15T04:36:49.301805352-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-2vvy","title":"[FCP2] InvokeRequest/InvokeResponse: Schema Validation, Holder Proof, Binding Rules","description":"# [FCP2] InvokeRequest/InvokeResponse: Schema Validation, Holder Proof, Binding Rules\n\n## Goal\nImplement the canonical InvokeRequest and InvokeResponse structures that are the primary interface for connector invocation.\n\n## Why This Deserves Its Own Bead\nThe spec defines detailed requirements for InvokeRequest/InvokeResponse that span multiple concerns:\n- capability token embedding and holder_proof generation\n- idempotency_key handling\n- lease binding (when required)\n- evidence attachment rules\n- response envelope structure\n\nThis complexity warrants focused implementation and testing.\n\n## InvokeRequest (NORMATIVE)\nFields:\n- `request_id` (UUID)\n- `connector_id` (ConnectorId)\n- `operation_id` (SchemaId)\n- `zone_id` (ZoneId)\n- `token` (CapabilityToken - COSE_Sign1 bytes)\n- `holder_proof` (Ed25519 signature; REQUIRED when token.holder_node present)\n- `idempotency_key` (Option\u003cString\u003e) - REQUIRED for Risky/Dangerous ops\n- `inputs` (CBOR map - schema-validated)\n- `context` (InvokeContext - trace_id, request_tags, etc.)\n- `lease_seq` (Option\u003cu64\u003e) - REQUIRED for singleton_writer connectors\n\n### holder_proof Binding (NORMATIVE)\nWhen token has `holder_node` set:\n- signable bytes MUST bind: `request_id || operation_id || token.jti`\n- signature by holder node signing key\n- prevents replay by non-holder nodes\n\n### Idempotency Rules\n- For `IdempotencyPolicy::Strict` or Risky/Dangerous: idempotency_key MUST be set\n- Key format: opaque string, max 128 bytes\n\n## InvokeResponse (NORMATIVE)\nFields:\n- `request_id` (matches request)\n- `status` (Ok | Error)\n- `outputs` (Option\u003cCBOR map\u003e - schema-validated)\n- `error` (Option\u003cFcpError\u003e)\n- `receipt_id` (Option\u003cObjectId\u003e - OperationReceipt)\n- `audit_event_id` (Option\u003cObjectId\u003e)\n- `decision_receipt_id` (Option\u003cObjectId\u003e - for denials)\n- `response_metadata` (timing, cache hints, etc.)\n\n## Subtasks\n- Define InvokeRequest and InvokeResponse canonical schemas\n- Implement holder_proof generation and verification\n- Implement idempotency_key validation\n- Implement lease_seq binding checks\n- Define InvokeContext propagation rules\n\n## Acceptance Criteria\n- Golden vectors for InvokeRequest canonical encoding\n- Adversarial tests: missing holder_proof rejected, invalid idempotency_key rejected\n- Property tests: holder_proof binding covers all required fields\n\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T02:52:09.788587774-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:52:09.788587774-05:00","labels":["fcp2","mvp","protocol"],"dependencies":[{"issue_id":"flywheel_connectors-2vvy","depends_on_id":"flywheel_connectors-1n78","type":"blocks","created_at":"2026-01-15T02:54:33.123734605-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-2vvy","depends_on_id":"flywheel_connectors-1n78.7","type":"blocks","created_at":"2026-01-15T02:54:33.193113594-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-2vvy","depends_on_id":"flywheel_connectors-1n78.3","type":"blocks","created_at":"2026-01-15T02:54:33.266375887-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-2vvy","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T02:54:33.340193936-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-2vvy","depends_on_id":"flywheel_connectors-1n78.34","type":"blocks","created_at":"2026-01-15T02:54:33.409515667-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-308","title":"fcp.sentry: Performance monitoring data access","description":"# fcp.sentry: Performance monitoring data access (FCP2)\n\n## Goal\nExpose Sentry performance/trace surfaces so agents can:\n- identify slow transactions and regressions\n- correlate errors with performance degradation\n- fetch trace/transaction summaries for RCA\n\n## Scope\n### Read operations\n- Query transactions by project/environment/time range.\n- Fetch a transaction/trace summary:\n  - duration\n  - spans breakdown\n  - key tags\n  - sample trace ids\n- Fetch performance metrics trends (where available).\n\n## Capability model (illustrative)\n- `sentry.performance.read`\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- Performance data may include URLs, user agents, and other sensitive metadata:\n  - treat as tainted\n  - avoid logging raw payloads\n\n## Deliverables\n- Operation schemas:\n  - `sentry.performance.transactions.query`\n  - `sentry.performance.transaction.get`\n  - `sentry.performance.trace.get_summary`\n- Pagination helpers + time-window query helpers.\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - query construction and pagination\n  - normalization of key metrics\n  - rate limiting + retry/backoff\n  - taint propagation\n\n## Acceptance criteria\n- Agents can retrieve stable, comparable performance summaries for RCA.\n- No secrets/PII leak through logs.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:15:01.940806076-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:29:20.235543405-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-308","depends_on_id":"flywheel_connectors-lszk.3","type":"parent-child","created_at":"2026-01-15T02:30:41.805016769-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-308","depends_on_id":"flywheel_connectors-lszk.3.1","type":"blocks","created_at":"2026-01-15T04:29:24.293031837-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-31c7","title":"[FCP2] Offline Capability: Availability Tracking, OfflineAccess Metrics, Predictive Pre-staging","description":"# [FCP2] Offline Capability Tracking\n\n## Goal\nImplement the offline capability tracking from V2 spec section 21, enabling:\n- Real-time availability tracking per object\n- OfflineCapability/OfflineAccess metrics\n- Predictive pre-staging based on user patterns\n- Quantifiable offline resilience (SLO-ready)\n\n## Normative Requirements (from FCP Specification V2 section 21)\n- Nodes MUST track local symbol availability per object\n- Nodes SHOULD support predictive pre-staging based on access patterns\n- Offline resilience MUST be quantifiable (can_access, coverage ratio)\n\n## Implementation Details\n\n### OfflineCapability Schema\n- accessible: HashMap\u003cObjectId, OfflineAccess\u003e\n\n### OfflineAccess Schema\n- object_id: ObjectId\n- local_symbols: usize (symbols held locally)\n- k: usize (symbols needed for reconstruction)\n- can_access(): bool (local_symbols \u003e= k)\n- coverage(): f64 (local_symbols / k)\n\n### Predictive Pre-staging\n- Track object access patterns per zone\n- Pre-stage symbols for frequently accessed objects before needed\n- Respect device storage constraints (DeviceProfile)\n- Priority queue based on access frequency and recency\n\n## Dependencies\n- Requires Stores (1n78.15) for symbol tracking\n- Requires DeviceProfile (wwq8) for storage constraints\n- Integrates with Background Repair for coverage management\n\n## Tests\n- Unit tests: can_access(), coverage() calculations\n- Integration tests: pre-staging triggers on access patterns\n- E2E tests: offline read with reduced connectivity\n\n## Acceptance Criteria\n- Offline capability is queryable per object (can_access, coverage)\n- Pre-staging improves offline availability for frequently accessed objects\n- CLI reports offline readiness via fcp doctor --zone","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:40:47.286114824-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:41:01.077541383-05:00","labels":["fcp2","mvp","storage","ux"],"dependencies":[{"issue_id":"flywheel_connectors-31c7","depends_on_id":"flywheel_connectors-1n78.15","type":"blocks","created_at":"2026-01-15T03:41:07.990459777-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-31c7","depends_on_id":"flywheel_connectors-wwq8","type":"blocks","created_at":"2026-01-15T03:41:08.131893453-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-36x3","title":"TEST: Revocation Unit/Adversarial Tests (Freshness, Chain Integrity, Scope Enforcement)","description":"# TEST: Revocation Unit/Adversarial Tests\n\n## Goal\nProve that revocations are processed correctly and cannot be bypassed.\n\n## Test Categories\n\n### RevocationObject Parsing\n- [ ] Valid revocation object parses\n- [ ] Malformed CBOR rejected\n- [ ] Missing required fields rejected\n- [ ] Invalid scope rejected\n- [ ] Owner signature verification succeeds/fails correctly\n\n### Revocation Scopes\n- [ ] Capability revocation: referenced capability becomes invalid\n- [ ] IssuerKey revocation: tokens from that issuer become invalid\n- [ ] NodeAttestation revocation: node operations become invalid\n- [ ] ZoneKey revocation: triggers zone key rotation awareness\n- [ ] ConnectorBinary revocation: connector cannot run\n\n### RevocationEvent Chain\n- [ ] Events hash-linked correctly (prev_hash binding)\n- [ ] Monotonic seq enforced\n- [ ] Duplicate seq rejected\n- [ ] Gap in seq detected and flagged\n- [ ] Out-of-order events handled correctly\n\n### RevocationHead\n- [ ] Quorum signatures required (n-f)\n- [ ] Insufficient signatures rejected\n- [ ] Signature from non-member rejected\n- [ ] Signature set canonicalization (sorted by node_id)\n- [ ] Multiple valid heads for same seq → fork detection\n\n### Freshness Policy Enforcement\n- [ ] Strict policy: stale revocation head → operation rejected\n- [ ] Warn policy: stale head → operation allowed with degraded flag\n- [ ] BestEffort policy: very stale head → operation allowed with audit\n- [ ] max_age calculation correct\n- [ ] Freshness check is O(1) (seq comparison, not chain traversal)\n\n### RevocationRegistry\n- [ ] Fast negative lookup (bloom filter or equivalent)\n- [ ] False positives trigger full check\n- [ ] True positive: revoked item correctly identified\n- [ ] True negative: valid item passes quickly\n- [ ] Registry update on new revocation event\n\n### Attack Scenarios (Adversarial)\n- [ ] Revocation withholding: node claims no revocations but others have them\n- [ ] Revocation replay: old revocation re-submitted\n- [ ] Revocation forgery: invalid owner signature rejected\n- [ ] Stale frontier attack: verifier with very old revocation head\n- [ ] Chain fork injection: two revocation heads for same seq detected\n\n## Golden Vectors\n- Valid revocation object bytes\n- Valid revocation chain with multiple events\n- RevocationHead with quorum signatures\n- Bloom filter state after N revocations\n\n## Fuzz Targets\n- RevocationObject parsing\n- RevocationEvent chain verification\n- RevocationHead signature verification\n\n## Logging Requirements\n```json\n{\n  \"test_name\": \"...\",\n  \"revocation_scope\": \"Capability|IssuerKey|...\",\n  \"target_id\": \"...\",\n  \"chain_seq\": 123,\n  \"result\": \"pass|fail\",\n  \"reason_code\": \"...\",\n  \"freshness_policy\": \"Strict|Warn|BestEffort\"\n}\n```\n\n## Acceptance Criteria\n- All revocation scopes tested\n- Chain integrity verified\n- Attack scenarios blocked\n- Freshness policies enforced correctly\n\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:08:44.640609726-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:08:44.640609726-05:00","labels":["fcp2","mvp","revocation","security","testing"],"dependencies":[{"issue_id":"flywheel_connectors-36x3","depends_on_id":"flywheel_connectors-1n78.9","type":"blocks","created_at":"2026-01-15T03:23:14.949469455-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-36x3","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:23:44.814394636-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-38h","title":"fcp.plaid - Banking \u0026 Financial Data Connector","description":"# fcp.plaid - Plaid Banking \u0026 Financial Data Connector (FCP2)\n\n## Goal\nIntegrate Plaid as an FCP2 connector for banking/financial data with **extreme** security posture:\n- single-zone bound\n- default deny for all operations\n- strong audit + receipts for side effects\n- strict sandbox + NetworkConstraints\n\n## Manifest archetypes (closed set)\n- `operational`\n- `streaming` (webhook/event ingestion if supported)\n\n## Threat model\nThis connector handles highly sensitive financial data.\n\nHard requirements:\n- Never log account/routing numbers, access tokens, or raw transaction descriptions by default.\n- Secrets never touch disk.\n- Deny by default for any operation that can reveal regulated data.\n\n## Zone model (mechanical)\n- Exactly one `ZoneId` per connector instance.\n- Do not multiplex multiple institutions/items across zones.\n\n## External surface\n### NetworkConstraints\nDefault-deny; allow only the Plaid environment host selected for the instance:\n- sandbox / development / production hosts (explicit allowlist)\n\n### Credential injection\n- client_id + secret via `CredentialId`.\n- access tokens per Item via `CredentialId`.\n\n## Capability model (illustrative)\n- `plaid.link.create`\n- `plaid.item.manage` (exchange/remove/invalidate)\n- `plaid.accounts.read`\n- `plaid.transactions.read`\n- `plaid.identity.read` (PII)\n- `plaid.auth.read` (routing/account numbers; Dangerous)\n- `plaid.investments.read`\n- `plaid.assets.manage` (Dangerous)\n- `plaid.webhooks.manage` (Dangerous)\n\n## Operations (initial)\n- Link token create\n- public token exchange\n- accounts.get / balances\n- transactions.sync (incremental)\n- item.remove / token.invalidate (Dangerous)\n\n## State model\n- Stateless for simple reads.\n- For `transactions.sync`, persist the cursor per Item in connector state.\n- Use singleton-writer lease around cursor advancement.\n\n## Tests\n- Mock-only unit/integration tests with wiremock.\n- Deterministic webhook event simulation if streaming/webhooks are supported.\n- E2E compliance run validates:\n  - default deny\n  - NetworkConstraints enforcement\n  - receipts/audit for dangerous actions\n\n## Acceptance Criteria\n- Passes connector compliance runner.\n- Deterministic tests; no live Plaid calls in unit tests.\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-11T10:11:24.224621741-05:00","created_by":"ubuntu","updated_at":"2026-01-15T08:37:51.967086875-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-38h","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T12:38:30.448637279-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-38h","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T12:38:30.480998374-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-38h","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:27:06.3419249-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-38h","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:28:45.929839357-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-38h","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:28:46.024238407-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-38h","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T03:28:46.125704929-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-38h","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:28:46.224390534-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-38h","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T03:28:46.332919268-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-38h","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T03:28:46.427749621-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-38h","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T03:28:46.536835935-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-38h.1","title":"fcp.plaid: Manifest + Capability Map (FCP2)","description":"# fcp.plaid: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the Plaid connector manifest contract:\n- archetypes (`operational`, `streaming`)\n- operations + schema IDs\n- capability families + per-operation caps\n- NetworkConstraints allowlist per environment\n- state model for transactions cursor\n\n## Acceptance Criteria\n- Complete manifest spec stored here.\n- Good/bad manifest examples exist for static compliance.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:28:53.473884205-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:28:53.473884205-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-38h.1","depends_on_id":"flywheel_connectors-38h","type":"parent-child","created_at":"2026-01-15T03:28:53.47519314-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-38h.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:29:29.369604488-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-38h.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:29:29.46713188-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-38h.2","title":"fcp.plaid: Provisioning Automation (Link + token exchange)","description":"# fcp.plaid: Provisioning Automation (Link + token exchange)\n\n## Goal\nAutomate onboarding while keeping secrets zone-scoped:\n- request client_id + secret (`CredentialId`)\n- create Link token (user-facing step outside connector)\n- exchange public token → access token\n- store access token as `CredentialId`\n\n## Safety\n- Access tokens are extremely sensitive.\n- Any operation that reveals account/routing numbers is Dangerous and policy-gated.\n\n## Acceptance Criteria\n- Provisioning path is mockable and deterministic.\n- `fcp doctor` can validate credentials and environment selection.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:29:00.165961817-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:52.026133133-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-38h.2","depends_on_id":"flywheel_connectors-38h","type":"parent-child","created_at":"2026-01-15T03:29:00.167182256-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-38h.3","title":"fcp.plaid: Core Account/Transaction Operations","description":"# fcp.plaid: Core Account/Transaction Operations\n\n## Goal\nImplement the initial read surface:\n- accounts.get\n- balances.get\n- transactions.get (optional)\n- transactions.sync (incremental)\n\n## Requirements\n- Capability gated.\n- Strong redaction.\n- Error taxonomy mapping.\n\n## Acceptance Criteria\n- Mock-only tests cover normal + 401/403 + 429 + 5xx.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:29:05.135626093-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:29:05.135626093-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-38h.3","depends_on_id":"flywheel_connectors-38h","type":"parent-child","created_at":"2026-01-15T03:29:05.136862522-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-38h.3","depends_on_id":"flywheel_connectors-38h.1","type":"blocks","created_at":"2026-01-15T03:29:29.578602226-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-38h.4","title":"fcp.plaid: Transactions Sync Cursor + State (singleton-writer)","description":"# fcp.plaid: Transactions Sync Cursor + State (singleton-writer)\n\n## Goal\nImplement the cursor/state model for `transactions.sync`:\n- persist cursor per Plaid Item\n- advance cursor only under a singleton-writer lease\n- provide deterministic replay behavior for downstream consumers\n\n## Acceptance Criteria\n- Restart resumes from cursor without duplication.\n- Lease conflict behavior is correct (only one writer advances).\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:29:11.829836674-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:29:11.829836674-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-38h.4","depends_on_id":"flywheel_connectors-38h","type":"parent-child","created_at":"2026-01-15T03:29:11.830905747-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-38h.4","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T03:29:29.767741999-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-38h.5","title":"TEST: Plaid Connector Unit/Integration Tests (mock-only)","description":"# TEST: Plaid Connector Unit/Integration Tests (mock-only)\n\n## Must cover\n- Manifest determinism + interface_hash.\n- Cursor advancement logic.\n- Error taxonomy mapping.\n- Redaction (no account numbers, no tokens).\n\n## Acceptance Criteria\n- Deterministic.\n- Structured JSON logs.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:29:18.085584556-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:29:18.085584556-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-38h.5","depends_on_id":"flywheel_connectors-38h","type":"parent-child","created_at":"2026-01-15T03:29:18.112180021-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-38h.5","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T03:29:29.864744062-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-38h.6","title":"E2E: Plaid Connector Compliance Run","description":"# E2E: Plaid Connector Compliance Run\n\n## Goal\nAdd Plaid scenarios to the shared connector compliance runner.\n\n## Scenarios\n- Default deny.\n- Allow with valid token.\n- Network guard allow/deny.\n- Cursor/lease behavior for transactions.sync.\n\n## Acceptance Criteria\n- `cargo test --package fcp-e2e --features plaid` passes deterministically.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:29:23.182039895-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:29:23.182039895-05:00","labels":["conformance","connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-38h.6","depends_on_id":"flywheel_connectors-38h","type":"parent-child","created_at":"2026-01-15T03:29:23.183303626-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-38h.6","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T03:29:30.031004901-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-3a9","title":"fcp.jira: Dual Cloud and Server/DC API support","description":"# fcp.jira: Dual Cloud and Server/DC API support (FCP2)\n\n## Goal\nSupport **Jira Cloud** and **Jira Server / Data Center** with a single connector binary, while preserving *mechanical* FCP2 guarantees (single-zone binding, default deny, sandbox + NetworkConstraints).\n\nThis bead exists because Cloud and Server/DC differ on:\n- auth mechanisms\n- REST base paths / API versions (v3 vs v2)\n- response shapes / field availability\n- rate-limit semantics\n\n## Scope\nDeliver an internal abstraction layer that makes higher-level Jira operations (issues, comments, attachments, sprints, workflows, JQL, etc.) **deployment-agnostic**.\n\n### In scope\n- `JiraDeployment = Cloud | ServerDc` configuration (manifest + provisioned config).\n- A canonical `JiraBaseUrl` normalization + validation layer (used for NetworkConstraints pinning).\n- Request construction differences:\n  - Cloud: REST v3 endpoints where required\n  - Server/DC: REST v2 endpoints where required\n- Response parsing normalization:\n  - unify common structs (Issue, Project, User, Comment, Attachment metadata)\n  - feature-detect optional fields instead of assuming presence\n- Auth strategy selection (mechanical, policy-gated):\n  - Cloud: OAuth2 or API token via `CredentialId`\n  - Server/DC: PAT or basic auth via `CredentialId`\n\n### Explicitly out of scope\n- Backwards compatibility with *any* legacy “FCP1” protocol or compatibility shim.\n- Supporting multiple Jira instances from a single connector instance (still single-zone bound).\n\n## FCP2 requirements to enforce\n- **Single-zone binding**: deployment choice does not change ZoneId.\n- **Capability IDs** MUST NOT encode hostnames or ports.\n- **NetworkConstraints**:\n  - allow only the configured Jira base hostname\n  - forbid redirects to different hostnames by default\n- **Secret hygiene**:\n  - credentials are injected via `CredentialId` at invocation time\n  - never log tokens, Authorization headers, cookies\n\n## Deliverables\n- `JiraHttp` facade with:\n  - `send_json\u003cTReq, TRes\u003e(...)` with typed request/response\n  - consistent error mapping to the SDK error taxonomy\n  - explicit timeouts + bounded response size limits\n- `JiraApiSurface` mapping table:\n  - operation → (cloud endpoint, server endpoint) + method + required query params\n- “Capability ↔ endpoint” mapping hooks for the manifest bead to reference.\n\n## Test strategy (MUST)\n### Unit/integration (mock-only)\n- Two mock fixtures:\n  1. Jira Cloud mock server\n  2. Jira Server/DC mock server\n- Golden request tests:\n  - correct URL path + query params per deployment\n  - correct auth header strategy selected\n- Golden parse tests:\n  - normalize issues/projects/users from both variants\n  - handle missing fields gracefully\n\n### Negative/security tests\n- NetworkConstraints refusal when URL host differs (including redirects).\n- Ensure no secrets appear in structured logs (log-scrub tests).\n\n## Acceptance criteria\n- Higher-level Jira feature beads can depend on a stable `JiraDeployment` abstraction.\n- A single test suite can run the same operation tests against both mock variants.\n- No FCP1/backwards-compat behaviors are introduced.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:14:38.817353985-05:00","created_by":"ubuntu","updated_at":"2026-01-15T08:37:52.088096849-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-3a9","depends_on_id":"flywheel_connectors-x9af","type":"parent-child","created_at":"2026-01-15T02:28:43.1452459-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-3a9","depends_on_id":"flywheel_connectors-x9af.1","type":"blocks","created_at":"2026-01-15T04:13:41.950661971-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-3ef","title":"fcp.homeassistant: Service calls for device control","description":"# fcp.homeassistant: Service calls for device control (FCP2)\n\n## Goal\nEnable safe device control via Home Assistant service calls:\n- lights, switches, climate, covers, media\n- (policy-controlled) locks/alarms\n\nService calls are side effects and must be capability + (policy) approval gated.\n\n## Scope\n- List available services by domain.\n- Call a service with a typed payload.\n- Provide a constrained allowlist of domains/services by default.\n\n## Capability model (illustrative)\n- `ha.services.read`\n- `ha.services.call` (dangerous-ish)\n- `ha.security.call` (critical; locks/alarms)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- Approval gating recommended for security-adjacent service calls.\n- Receipts + audit events include:\n  - service domain/name\n  - entity_id targets (hashed)\n  - correlation id\n\n## Deliverables\n- Operation schemas:\n  - `ha.service.list`\n  - `ha.service.call`\n- Safety layer:\n  - deny-by-default for dangerous domains\n  - require explicit policy enablement\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - allowlist enforcement\n  - approval gating\n  - audit/receipt emission\n\n## Acceptance criteria\n- Device control is safe-by-default and auditable.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:16:04.086043643-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:42:53.69587662-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-3ef","depends_on_id":"flywheel_connectors-ortf","type":"parent-child","created_at":"2026-01-15T02:33:22.232591104-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-3ef","depends_on_id":"flywheel_connectors-ortf.1","type":"blocks","created_at":"2026-01-15T04:42:57.777909379-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-3ijc","title":"fcp.redis: Redis Cache and Pub/Sub Connector","description":"# fcp.redis - Redis Cache and Pub/Sub Connector\n\n## Overview\nRedis connector for caching, key-value storage, pub/sub messaging, and data structure operations.\n\n## Manifest archetypes (closed set)\n- `storage`\n- `operational`\n- `bidirectional`\n\n\u003e Interaction patterns (non-archetype): Request/Response + Queue/Pub-Sub\n\n## Key Operations\n\n### String Operations\n- `redis.get` - Get value\n- `redis.set` - Set value (with TTL, NX/XX)\n- `redis.mget/mset` - Multiple get/set\n- `redis.incr/decr` - Atomic increment/decrement\n- `redis.append` - Append to string\n- `redis.getrange/setrange` - Substring operations\n\n### Hash Operations\n- `redis.hget/hset` - Single field get/set\n- `redis.hmget/hmset` - Multiple fields\n- `redis.hgetall` - Get all fields\n- `redis.hdel` - Delete fields\n- `redis.hincrby` - Increment field\n\n### List Operations\n- `redis.lpush/rpush` - Push to list\n- `redis.lpop/rpop` - Pop from list\n- `redis.lrange` - Get range\n- `redis.llen` - List length\n- `redis.lindex` - Get by index\n- `redis.blpop/brpop` - Blocking pop\n\n### Set Operations\n- `redis.sadd/srem` - Add/remove members\n- `redis.smembers` - Get all members\n- `redis.sismember` - Check membership\n- `redis.sinter/sunion/sdiff` - Set operations\n\n### Sorted Set Operations\n- `redis.zadd/zrem` - Add/remove members\n- `redis.zrange/zrevrange` - Get by rank\n- `redis.zscore` - Get score\n- `redis.zrangebyscore` - Get by score range\n- `redis.zincrby` - Increment score\n\n### Pub/Sub Operations\n- `redis.publish` - Publish message\n- `redis.subscribe` - Subscribe to channels\n- `redis.psubscribe` - Pattern subscribe\n- `redis.unsubscribe` - Unsubscribe\n\n### Stream Operations\n- `redis.xadd` - Add to stream\n- `redis.xread` - Read from stream\n- `redis.xrange` - Read range\n- `redis.xgroup` - Consumer groups\n- `redis.xreadgroup` - Group read\n\n### Key Operations\n- `redis.del` - Delete keys\n- `redis.exists` - Check existence\n- `redis.expire/ttl` - TTL management\n- `redis.keys/scan` - Key enumeration\n- `redis.type` - Get key type\n\n### Transaction Operations\n- `redis.multi/exec` - Transactions\n- `redis.watch` - Optimistic locking\n\n## Providers Supported\n- Redis OSS\n- Redis Enterprise\n- AWS ElastiCache\n- Azure Cache for Redis\n- Upstash\n- Redis Cloud\n\n## Connection Management\n- Connection pooling\n- Cluster mode support\n- Sentinel support\n- TLS connections\n\n## Authentication\n- Password authentication\n- ACL users (Redis 6+)\n- TLS client certificates\n\n## Zone Architecture\n\n\u003c!-- fcp2-single-zone-note --\u003e\n**FCP2 single-zone binding note:** A connector instance binds to exactly one `ZoneId` for its entire lifetime.\nThe *\"zones\"* described in this section are a **recommended deployment pattern** (run separate connector instances in separate zones with different capability grants/policies) and/or conceptual risk tiers.\nThe connector MUST NOT multiplex multiple zones internally.\n\n```\nZone 0 (Public):     N/A\nZone 1 (Authorized): Read operations\nZone 2 (Private):    Write operations\nZone 3 (Sensitive):  Admin operations, credentials\n```\n\n## Dependencies\n- fcp-core, fcp-ratelimit, fcp-testkit, fcp-telemetry\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T12:37:08.984070993-05:00","created_by":"ubuntu","updated_at":"2026-01-15T07:39:54.264204599-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-3ijc","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T12:47:59.106220144-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-3ijc","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T12:47:59.143820521-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-3ijc","depends_on_id":"flywheel_connectors-iv7","type":"blocks","created_at":"2026-01-11T12:47:59.179823158-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-3ijc","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:31:44.768921639-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-3mb","title":"fcp.twilio: Programmable Video API","description":"# fcp.twilio: Programmable Video API (FCP2)\n\n## Goal\nProvide a minimal, safe surface over Twilio Programmable Video:\n- create/manage rooms\n- list participants\n- end rooms\n- optionally fetch recordings\n\nVideo is high-cost and high-privacy. Treat most write operations as approval-gated.\n\n## Scope\n### Rooms\n- Create room with constrained options (max participants, timeout).\n- List rooms and get room status.\n- End/complete a room.\n\n### Participants\n- List participants in a room.\n- Optional: disconnect participant (dangerous).\n\n### Recordings (optional; dangerous)\n- List recordings for a room.\n- Fetch recording metadata.\n\n## Capability model (illustrative)\n- `twilio.video.rooms.read`\n- `twilio.video.rooms.write` (dangerous)\n- `twilio.video.participants.read`\n- `twilio.video.participants.write` (dangerous)\n- `twilio.video.recordings.read` (dangerous)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned to Twilio API host(s).\n- For any write:\n  - require approval when policy dictates\n  - emit receipts + audit events with room SID and action\n- Strict privacy hygiene:\n  - never log participant identities or media URLs\n\n## Deliverables\n- Operation schemas:\n  - `twilio.video.room.create`\n  - `twilio.video.room.get`\n  - `twilio.video.room.list`\n  - `twilio.video.room.end`\n  - `twilio.video.room.participants`\n  - Optional: `twilio.video.recording.list`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - room lifecycle\n  - approval gating\n  - error mapping\n  - log redaction\n\n## Acceptance criteria\n- Video operations are safe-by-default and auditable.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:14:50.119721071-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:32:45.073898516-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-3mb","depends_on_id":"flywheel_connectors-otqy","type":"parent-child","created_at":"2026-01-15T02:29:05.327616354-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-3mb","depends_on_id":"flywheel_connectors-otqy.1","type":"blocks","created_at":"2026-01-15T04:32:49.74200054-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-3md","title":"fcp.webhook-receiver: Inbound Event Gateway Connector","description":"Universal webhook receiver for inbound events. HTTP endpoint management, signature verification per-service, payload transformation, event routing to zones, retry/dead-letter handling. Enables real-time event processing from any service that supports webhooks.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:27:30.112124672-05:00","created_by":"ubuntu","updated_at":"2026-01-11T12:08:30.734268476-05:00","closed_at":"2026-01-11T12:08:30.734268476-05:00","close_reason":"DUPLICATE: fcp.webhook-receiver already completed and closed as flywheel_connectors-5vy."}
{"id":"flywheel_connectors-3mn","title":"fcp.datadog: Monitor and alert management","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:16:58.846888324-05:00","created_by":"ubuntu","updated_at":"2026-01-11T12:10:13.076217676-05:00","closed_at":"2026-01-11T12:10:13.076217676-05:00","close_reason":"CONSOLIDATED: All Datadog sub-features merged into comprehensive parent connector bead flywheel_connectors-cu3 (fcp.datadog: Datadog Observability Platform Connector)"}
{"id":"flywheel_connectors-3z2","title":"fcp.spotify: Library Management","description":"# fcp.spotify: Library Management (FCP2)\n\n## Goal\nEnable safe access to the user’s library:\n- list saved tracks/albums/shows\n- save/unsave items\n\nLibrary writes modify user state and must be auditable.\n\n## Scope\n- Get saved tracks/albums/shows/episodes (pagination).\n- Save/unsave items.\n- Check whether items are saved.\n\n## Capability model (illustrative)\n- `spotify.library.read`\n- `spotify.library.write` (dangerous-ish)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- For writes:\n  - receipts + audit events include item ids and action\n  - never log track names or personal context\n\n## Deliverables\n- Operation schemas:\n  - `spotify.library.tracks.list`\n  - `spotify.library.tracks.save`\n  - `spotify.library.tracks.remove`\n  - `spotify.library.albums.list`\n  - `spotify.library.albums.save/remove`\n  - `spotify.library.shows.list/save/remove`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - pagination\n  - save/unsave idempotency\n  - audit/receipt for writes\n\n## Acceptance criteria\n- Library operations are reliable, safe, and auditable.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:21:11.460234679-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:40:47.161653681-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-3z2","depends_on_id":"flywheel_connectors-a4dh","type":"parent-child","created_at":"2026-01-15T02:33:41.563856052-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-3z2","depends_on_id":"flywheel_connectors-a4dh.1","type":"blocks","created_at":"2026-01-15T04:40:52.242099985-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-4d9","title":"fcp.figma: Design token export (colors, typography, spacing)","description":"# fcp.figma: Design token export (colors, typography, spacing) (FCP2)\n\n## Goal\nExtract design tokens from Figma so agents can:\n- sync design system tokens into codebases\n- generate CSS/SCSS/Tailwind/JSON token outputs\n\n## Scope\n### Token sources\n- Styles: colors, text styles, effects.\n- Variables/collections (Dev Mode) when available.\n\n### Output formats (minimum viable)\n- JSON token format (stable schema).\n- CSS variables.\n- Optional: Tailwind config fragment.\n\n### Normalization\n- Deterministic naming rules.\n- Dedup identical values.\n- Handle token hierarchies (collections, modes).\n\n## Capability model (illustrative)\n- `figma.styles.read`\n- `figma.variables.read` (optional)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- Avoid logging raw token values if they could encode sensitive information (rare, but possible).\n\n## Deliverables\n- Operation schemas:\n  - `figma.tokens.export`\n  - `figma.styles.list`\n  - `figma.variables.list` (optional)\n- Stable token schema versioning.\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - token extraction correctness (golden fixtures)\n  - naming normalization\n  - stable output ordering\n\n## Acceptance criteria\n- Token exports are deterministic and suitable for CI-based syncing.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:14:47.776749255-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:34:01.777613731-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-4d9","depends_on_id":"flywheel_connectors-vuwy","type":"parent-child","created_at":"2026-01-15T02:30:18.234381938-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4d9","depends_on_id":"flywheel_connectors-vuwy.1","type":"blocks","created_at":"2026-01-15T04:34:06.292766808-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-4lr","title":"fcp.llm-router: Intelligent Model Selection Connector","description":"## Overview\nMeta-connector for intelligent routing between multiple AI/LLM providers, optimizing for cost, latency, and capability while enforcing budgets and providing usage analytics.\n\n## Core Capabilities\n\n### Cost-Based Routing\n- Real-time pricing data per provider/model\n- Token estimation before routing\n- Cheapest-model selection for simple tasks\n- Cost threshold triggers for model downgrade\n- Batch request optimization for cost savings\n\n### Latency-Based Routing\n- Provider health monitoring\n- Historical latency tracking per model\n- Geographic routing optimization\n- Time-of-day latency patterns\n- Streaming vs batch latency considerations\n\n### Capability-Based Routing\n- Task classification (coding, writing, analysis, etc.)\n- Model capability matrix maintenance\n- Context window requirement matching\n- Vision/multimodal capability detection\n- Tool use capability routing\n- Specialized model selection (code, math, etc.)\n\n### Fallback Chains\n- Primary/secondary/tertiary provider chains\n- Automatic failover on errors\n- Partial failure handling (retry vs fallback)\n- Circuit breaker implementation\n- Graceful degradation strategies\n- Provider outage detection\n\n### Budget Enforcement\n- Per-user budget limits\n- Per-project budget allocation\n- Daily/weekly/monthly caps\n- Real-time spend tracking\n- Budget alert thresholds\n- Hard vs soft limit modes\n\n### Usage Tracking and Analytics\n- Request logging with metadata\n- Cost attribution by user/project/task\n- Model performance comparison\n- Success rate tracking\n- Token usage patterns\n- ROI analysis per model\n\n## Supported Providers (Initial)\n- Anthropic (Claude models)\n- OpenAI (GPT models)\n- Google (Gemini models)\n- AWS Bedrock (multi-model)\n- Azure OpenAI\n- Local models (Ollama, vLLM)\n\n## Implementation Notes\n- Unified request/response format across providers\n- Provider-specific adapters\n- Async request handling\n- Request queuing for rate limits\n- Credential management per provider\n- Caching layer for repeated queries\n\n## Configuration\n- YAML-based routing rules\n- Dynamic rule updates without restart\n- A/B testing support for routing strategies\n- Custom routing logic plugins\n\n## Testing Requirements\n- Mock providers for unit tests\n- Routing decision validation\n- Budget enforcement tests\n- Failover scenario tests\n- Load testing for routing performance\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:21:51.00887812-05:00","created_by":"ubuntu","updated_at":"2026-01-15T05:28:16.040960291-05:00","dependencies":[{"issue_id":"flywheel_connectors-4lr","depends_on_id":"flywheel_connectors-7hb","type":"blocks","created_at":"2026-01-11T10:43:28.00998441-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-4lr","depends_on_id":"flywheel_connectors-e27","type":"blocks","created_at":"2026-01-11T10:43:28.039880213-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-4lr","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T07:07:29.588066681-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4lr","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T07:09:33.781390471-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4lr","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T07:09:34.202943705-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4lr","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T07:09:34.617079054-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4lr","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T07:09:35.038086599-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4lr","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T07:09:35.462574725-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4lr","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T07:09:35.899132274-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4lr","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:09:36.346102412-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-4lr.1","title":"fcp.llm-router: Manifest + Capability Map (FCP2)","description":"## Goal\nProduce the full FCP2 manifest and capability map for this connector.\n\nThis bead is where we translate the connector’s functional surface (operations) into a **mechanically checkable** contract:\n- operation schemas + schema IDs\n- capability families per operation\n- per-operation NetworkConstraints (default deny)\n- sandbox profile requirements\n- declared state model (stateless / singleton_writer / crdt)\n\n## Required content (must be explicit)\n- Operation list is exhaustive and stable for the current phase.\n- Capability IDs DO NOT encode hostnames/ports.\n- NetworkConstraints are minimal and per-operation.\n- Risk tier for each operation (Safe / Dangerous).\n- Explicit bounds: timeouts, max response sizes, pagination limits.\n\n## Tests\n- Add good/bad manifest examples for the compliance runner.\n\n## Acceptance Criteria\n- Passes static checks in `flywheel_connectors-1n78.21.5`.\n- Default-deny is enforced by manifest + capability requirements.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:12.75159946-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:13:12.75159946-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-4lr.1","depends_on_id":"flywheel_connectors-4lr","type":"parent-child","created_at":"2026-01-15T07:13:12.808785665-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-4lr.2","title":"fcp.llm-router: Provisioning Automation","description":"## Goal\nAutomate provisioning and configuration with minimal human steps.\n\nThis bead owns:\n- auth setup (OAuth / API keys / webhook secrets) via `CredentialObject`/`CredentialId` (egress proxy injection preferred)\n- endpoint configuration\n- `fcp doctor` readiness checks\n- deterministic, mockable provisioning flows\n\n## FCP2 requirements\n- Secrets never touch disk.\n- Provisioning is deterministic and testable.\n- Error messages are actionable and do not leak secrets/PII.\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Provisioning emits structured logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:13.532833357-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:52.148477281-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-4lr.2","depends_on_id":"flywheel_connectors-4lr","type":"parent-child","created_at":"2026-01-15T07:13:13.631334026-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4lr.2","depends_on_id":"flywheel_connectors-4lr.1","type":"blocks","created_at":"2026-01-15T07:13:14.361655215-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-4lr.3","title":"TEST: fcp.llm-router Unit/Integration Tests (mock-only)","description":"## Goal\nMock-only unit/integration tests for this connector.\n\n## Required coverage\n- schema validation (inputs + outputs)\n- error taxonomy mapping (retry semantics)\n- pagination and bounds\n- rate limit behavior\n- redaction (no token/secret/PII leakage)\n- idempotency + receipts for Dangerous operations\n\n## Logging\nAll tests emit structured JSON logs per `flywheel_connectors-1n78.35`.\n\n## Acceptance Criteria\n- Deterministic tests; no live external calls.\n- Includes adversarial cases (timeouts, malformed responses, partial failures).\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:15.079247138-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:13:15.079247138-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-4lr.3","depends_on_id":"flywheel_connectors-4lr","type":"parent-child","created_at":"2026-01-15T07:13:15.137798346-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4lr.3","depends_on_id":"flywheel_connectors-4lr.1","type":"blocks","created_at":"2026-01-15T07:13:15.848476745-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4lr.3","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:13:16.550793572-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4lr.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T07:32:09.05051026-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-4lr.4","title":"E2E: fcp.llm-router Connector Compliance Run","description":"## Goal\nRun the shared connector compliance runner and capture an evidence bundle.\n\n## Must validate\n- handshake + introspection correctness\n- default deny (no CapabilityToken → deny + DecisionReceipt)\n- NetworkConstraints enforcement\n- receipts/audit for Dangerous operations\n- structured logs\n\n## Acceptance Criteria\n- E2E run is deterministic and produces a stable artifact bundle.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:17.033968241-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:13:17.033968241-05:00","labels":["connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-4lr.4","depends_on_id":"flywheel_connectors-4lr","type":"parent-child","created_at":"2026-01-15T07:13:17.092357083-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4lr.4","depends_on_id":"flywheel_connectors-4lr.1","type":"blocks","created_at":"2026-01-15T07:13:17.816042944-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4lr.4","depends_on_id":"flywheel_connectors-4lr.2","type":"blocks","created_at":"2026-01-15T07:13:18.527258706-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4lr.4","depends_on_id":"flywheel_connectors-4lr.3","type":"blocks","created_at":"2026-01-15T07:13:19.443664253-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4lr.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T07:13:20.361944394-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-4m0","title":"fcp.salesforce: Salesforce CRM Platform Connector","description":"# fcp.salesforce - Salesforce CRM Platform Connector\n\n## Overview\nEnterprise Salesforce CRM connector supporting full Sales Cloud, Service Cloud, and Platform operations with bidirectional data sync capabilities.\n\n## Manifest archetypes (closed set)\n- `operational`\n- `streaming`\n\n\u003e Interaction patterns (non-archetype): Request/Response + Webhook + Polling\n\n## Key Operations\n- CRM Object CRUD: Contact, Lead, Account, Opportunity, Case, Custom objects\n- Query: SOQL, SOSL, Reports, Dashboards\n- Bulk: Insert/Update/Upsert/Delete/Query for large datasets\n- Workflow: Flow triggers, Approval processes\n- Auth: OAuth 2.0 (Web, JWT Bearer), Enterprise SSO\n\n## API Support\n- REST API (primary), SOAP API (legacy), Bulk API 2.0, Streaming API, Metadata API\n\n## Dependencies\n- fcp-core, fcp-oauth, fcp-ratelimit, fcp-testkit, fcp-telemetry, fcp-webhook\n\n## Sub-Features (consolidated)\nThis connector encompasses: Enterprise SSO, Bulk data ops, REST/SOAP dual support, Workflow integration, SOQL engine, Custom objects, Contact/Lead/Account/Opportunity management\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T12:09:03.669701739-05:00","created_by":"ubuntu","updated_at":"2026-01-15T07:39:54.382759422-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-4m0","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:29:32.244751842-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4m0","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T07:09:47.260737016-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4m0","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T07:09:47.689032671-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4m0","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T07:09:48.112791582-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4m0","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T07:09:48.563102959-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4m0","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T07:09:49.01637649-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4m0","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T07:09:49.433676415-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4m0","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:09:49.86498555-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-4m0.1","title":"fcp.salesforce: Manifest + Capability Map (FCP2)","description":"## Goal\nProduce the full FCP2 manifest and capability map for this connector.\n\nThis bead is where we translate the connector’s functional surface (operations) into a **mechanically checkable** contract:\n- operation schemas + schema IDs\n- capability families per operation\n- per-operation NetworkConstraints (default deny)\n- sandbox profile requirements\n- declared state model (stateless / singleton_writer / crdt)\n\n## Required content (must be explicit)\n- Operation list is exhaustive and stable for the current phase.\n- Capability IDs DO NOT encode hostnames/ports.\n- NetworkConstraints are minimal and per-operation.\n- Risk tier for each operation (Safe / Dangerous).\n- Explicit bounds: timeouts, max response sizes, pagination limits.\n\n## Tests\n- Add good/bad manifest examples for the compliance runner.\n\n## Acceptance Criteria\n- Passes static checks in `flywheel_connectors-1n78.21.5`.\n- Default-deny is enforced by manifest + capability requirements.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:47.527904475-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:13:47.527904475-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-4m0.1","depends_on_id":"flywheel_connectors-4m0","type":"parent-child","created_at":"2026-01-15T07:13:47.586218265-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-4m0.2","title":"fcp.salesforce: Provisioning Automation","description":"## Goal\nAutomate provisioning and configuration with minimal human steps.\n\nThis bead owns:\n- auth setup (OAuth / API keys / webhook secrets) via `CredentialObject`/`CredentialId` (egress proxy injection preferred)\n- endpoint configuration\n- `fcp doctor` readiness checks\n- deterministic, mockable provisioning flows\n\n## FCP2 requirements\n- Secrets never touch disk.\n- Provisioning is deterministic and testable.\n- Error messages are actionable and do not leak secrets/PII.\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Provisioning emits structured logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:48.20712967-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:52.209408482-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-4m0.2","depends_on_id":"flywheel_connectors-4m0","type":"parent-child","created_at":"2026-01-15T07:13:48.269102087-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4m0.2","depends_on_id":"flywheel_connectors-4m0.1","type":"blocks","created_at":"2026-01-15T07:13:48.860814838-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-4m0.3","title":"TEST: fcp.salesforce Unit/Integration Tests (mock-only)","description":"## Goal\nMock-only unit/integration tests for this connector.\n\n## Required coverage\n- schema validation (inputs + outputs)\n- error taxonomy mapping (retry semantics)\n- pagination and bounds\n- rate limit behavior\n- redaction (no token/secret/PII leakage)\n- idempotency + receipts for Dangerous operations\n\n## Logging\nAll tests emit structured JSON logs per `flywheel_connectors-1n78.35`.\n\n## Acceptance Criteria\n- Deterministic tests; no live external calls.\n- Includes adversarial cases (timeouts, malformed responses, partial failures).\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:49.45566351-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:13:49.45566351-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-4m0.3","depends_on_id":"flywheel_connectors-4m0","type":"parent-child","created_at":"2026-01-15T07:13:49.516659938-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4m0.3","depends_on_id":"flywheel_connectors-4m0.1","type":"blocks","created_at":"2026-01-15T07:13:50.114460465-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4m0.3","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:13:50.707448339-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4m0.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T07:32:09.68578763-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-4m0.4","title":"E2E: fcp.salesforce Connector Compliance Run","description":"## Goal\nRun the shared connector compliance runner and capture an evidence bundle.\n\n## Must validate\n- handshake + introspection correctness\n- default deny (no CapabilityToken → deny + DecisionReceipt)\n- NetworkConstraints enforcement\n- receipts/audit for Dangerous operations\n- structured logs\n\n## Acceptance Criteria\n- E2E run is deterministic and produces a stable artifact bundle.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:51.234592097-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:13:51.234592097-05:00","labels":["connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-4m0.4","depends_on_id":"flywheel_connectors-4m0","type":"parent-child","created_at":"2026-01-15T07:13:51.292730017-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4m0.4","depends_on_id":"flywheel_connectors-4m0.1","type":"blocks","created_at":"2026-01-15T07:13:51.890213436-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4m0.4","depends_on_id":"flywheel_connectors-4m0.2","type":"blocks","created_at":"2026-01-15T07:13:52.484552127-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4m0.4","depends_on_id":"flywheel_connectors-4m0.3","type":"blocks","created_at":"2026-01-15T07:13:53.154035357-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4m0.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T07:13:53.826281936-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-4mk","title":"fcp.reddit: Subreddit Browsing and Search","description":"# fcp.reddit: Subreddit Browsing and Search (FCP2)\n\n## Goal\nEnable discovery of relevant communities and threads:\n- browse subreddits\n- search for subreddits\n- search posts across subreddit/all\n\n## Scope\n- Get subreddit metadata (rules, description, NSFW/quarantine flags).\n- List posts by sort (hot/new/top).\n- Search posts with query + filters.\n\n## Capability model (illustrative)\n- `reddit.read`\n- `reddit.search`\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned to Reddit API hosts.\n- Content is untrusted/tainted by default.\n- Respect content restrictions:\n  - NSFW/quarantined handling must be policy-controlled\n\n## Deliverables\n- Operation schemas:\n  - `reddit.subreddit.get`\n  - `reddit.subreddit.search`\n  - `reddit.subreddit.posts.list`\n  - `reddit.search.posts`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - pagination\n  - rate limit headers handling\n  - NSFW/quarantine gating\n\n## Acceptance criteria\n- Browsing/search is reliable and policy-respecting.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:21:20.930097995-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:38:45.864913926-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-4mk","depends_on_id":"flywheel_connectors-xz6e","type":"parent-child","created_at":"2026-01-15T02:33:59.029056742-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4mk","depends_on_id":"flywheel_connectors-xz6e.1","type":"blocks","created_at":"2026-01-15T04:38:51.344036356-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-4n0q","title":"TEST: fcp-streaming Unit Test Suite","description":"# TEST: fcp-streaming Unit Test Suite\n\n## Scope\nComprehensive unit tests for streaming and SSE library.\n\n## Test Categories\n\n### Server-Sent Events (SSE)\n- [ ] Event parsing (data, event, id, retry fields)\n- [ ] Multi-line data handling\n- [ ] Event ID tracking for reconnection\n- [ ] Retry interval handling\n- [ ] Connection keep-alive\n\n### WebSocket Support\n- [ ] Connection establishment\n- [ ] Message framing (text, binary)\n- [ ] Ping/pong handling\n- [ ] Graceful close\n- [ ] Reconnection with backoff\n\n### Stream Processing\n- [ ] Backpressure handling\n- [ ] Buffer management\n- [ ] Stream cancellation\n- [ ] Timeout enforcement\n\n### Error Recovery\n- [ ] Network disconnection\n- [ ] Partial message handling\n- [ ] Reconnection with last-event-id\n- [ ] Maximum reconnection attempts\n\n### Performance\n- [ ] Zero-copy parsing where possible\n- [ ] Memory allocation limits\n- [ ] Large message handling\n\n## Mocking Strategy\n- Mock SSE endpoints returning controlled event streams\n- Mock WebSocket servers with programmable responses\n- Inject network errors at specific points\n\n## Coverage Target: \u003e90%","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-11T12:12:35.391386702-05:00","created_by":"ubuntu","updated_at":"2026-01-15T03:22:44.164262726-05:00","closed_at":"2026-01-15T03:22:44.164262726-05:00","close_reason":"Streaming functionality is now part of FCP2 SDK (1n78.20.1). The SDK Streaming bead already covers EventEnvelope, replay, and acks.","dependencies":[{"issue_id":"flywheel_connectors-4n0q","depends_on_id":"flywheel_connectors-9co","type":"blocks","created_at":"2026-01-11T12:20:56.502736885-05:00","created_by":"ubuntu"}]}
{"id":"flywheel_connectors-4st","title":"fcp.spotify: Playlist CRUD Operations","description":"# fcp.spotify: Playlist CRUD Operations (FCP2)\n\n## Goal\nEnable safe playlist workflows:\n- list playlists\n- create/update playlists\n- add/remove/reorder tracks\n\nPlaylists are user-facing state; writes must be auditable.\n\n## Scope\n- List user playlists (pagination).\n- Create playlist.\n- Update playlist metadata (name/description/public/private).\n- Add/remove/reorder tracks.\n\n## Capability model (illustrative)\n- `spotify.playlists.read`\n- `spotify.playlists.write` (dangerous-ish)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- For writes:\n  - receipts + audit events include playlist id + action + counts\n  - never log track names or user data\n\n## Deliverables\n- Operation schemas:\n  - `spotify.playlist.list`\n  - `spotify.playlist.get`\n  - `spotify.playlist.create`\n  - `spotify.playlist.update`\n  - `spotify.playlist.tracks.add`\n  - `spotify.playlist.tracks.remove`\n  - `spotify.playlist.tracks.reorder`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - pagination\n  - add/remove/reorder correctness\n  - audit/receipt for writes\n\n## Acceptance criteria\n- Playlist changes are reliable, idempotent where possible, and auditable.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:21:11.858850673-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:41:01.650176853-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-4st","depends_on_id":"flywheel_connectors-a4dh","type":"parent-child","created_at":"2026-01-15T02:33:41.647001532-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4st","depends_on_id":"flywheel_connectors-a4dh.1","type":"blocks","created_at":"2026-01-15T04:41:07.507757643-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-4t7t","title":"fcp.bigquery: Google BigQuery data warehouse connector","description":"## Overview\nGoogle BigQuery data warehouse connector for the Flywheel Connector Platform. Provides comprehensive access to BigQuery's analytics and data warehouse capabilities.\n\n## Value Assessment\n- **Value Score**: 49/100 (Tier 4)\n- **Archetype**: Request-Response\n- **Primary Use Cases**: Analytics, data warehousing, business intelligence, large-scale data processing\n\n## Operations\n\n### Query Zone (read-only analytics)\n- **query.execute**: Execute SQL queries with parameterized inputs\n- **query.dry_run**: Validate queries and estimate costs without execution\n- **query.results**: Fetch paginated query results\n- **query.cancel**: Cancel running queries\n\n### Data Modification Zone\n- **streaming.insert**: Real-time streaming inserts to tables\n- **table.create**: Create new tables with schema definition\n- **table.delete**: Delete tables\n- **table.update**: Update table metadata and schema\n- **table.patch**: Partial table updates\n- **table.copy**: Copy tables within/across datasets\n\n### Dataset Management\n- **dataset.list**: List datasets in project\n- **dataset.get**: Get dataset metadata\n- **dataset.create**: Create new datasets\n- **dataset.delete**: Delete datasets\n- **dataset.update**: Update dataset properties\n\n### Schema Management\n- **schema.get**: Retrieve table schema\n- **schema.update**: Modify table schema (add columns, change descriptions)\n- **schema.validate**: Validate schema compatibility\n\n### Job Management\n- **job.list**: List jobs with filtering\n- **job.get**: Get job status and metadata\n- **job.cancel**: Cancel running jobs\n- **job.query**: Submit query jobs\n\n### Admin Zone (restricted)\n- **iam.get**: Get IAM policies\n- **iam.set**: Set IAM policies (requires elevated permissions)\n- **routine.create**: Create stored procedures/functions\n- **routine.delete**: Delete routines\n\n## Zone Architecture\n\n\u003c!-- fcp2-single-zone-note --\u003e\n**FCP2 single-zone binding note:** A connector instance binds to exactly one `ZoneId` for its entire lifetime.\nThe *\"zones\"* described in this section are a **recommended deployment pattern** (run separate connector instances in separate zones with different capability grants/policies) and/or conceptual risk tiers.\nThe connector MUST NOT multiplex multiple zones internally.\n\n\n```\nZone 1 (Query - Read Only):\n  - query.execute, query.dry_run, query.results\n  - dataset.list, dataset.get\n  - table.list, table.get\n  - schema.get\n  - job.list, job.get\n\nZone 2 (Data Modification):\n  - streaming.insert\n  - table.create, table.update, table.delete, table.copy\n  - dataset.create, dataset.update\n  - schema.update\n\nZone 3 (Admin - Restricted):\n  - dataset.delete\n  - iam.get, iam.set\n  - routine.create, routine.delete\n  - job.cancel\n```\n\n## Dependencies\n- **fcp-core**: Base connector traits and types\n- **fcp-oauth**: Google OAuth 2.0 authentication (service account, user credentials)\n- **fcp-ratelimit**: Rate limiting for API quota management\n- **fcp-telemetry**: Metrics, logging, and tracing\n\n## Implementation Approach\n\n### Authentication\n- Service account JSON key files\n- Application Default Credentials (ADC)\n- User OAuth flow for interactive use\n- Workload Identity for GKE deployments\n\n### API Integration\n- BigQuery REST API v2 (primary)\n- Consider gcp-bigquery-client crate for Rust native bindings\n- Support for both sync and async operations\n\n### Rate Limiting\n- Per-project quota management\n- Concurrent query limits\n- Streaming insert rate limits (rows/second, bytes/second)\n\n### Error Handling\n- Query timeout handling\n- Quota exceeded errors with retry logic\n- Job failure recovery\n- Partial insert failure handling for streaming\n\n## Configuration Schema\n\n```toml\n[connector.bigquery]\nproject_id = \"my-gcp-project\"\nlocation = \"US\"  # or specific region\n\n[connector.bigquery.auth]\nmethod = \"service_account\"  # or \"adc\", \"oauth\"\ncredentials_file = \"/path/to/service-account.json\"\n\n[connector.bigquery.defaults]\nquery_timeout_ms = 30000\nmax_results_per_page = 10000\nuse_legacy_sql = false\n\n[connector.bigquery.streaming]\ninsert_batch_size = 500\ninsert_timeout_ms = 5000\n\n[connector.bigquery.rate_limits]\nqueries_per_minute = 100\nstreaming_rows_per_second = 100000\n```\n\n## Testing Strategy\n- Unit tests with mocked BigQuery responses\n- Integration tests against BigQuery sandbox/emulator\n- Cost estimation validation tests\n- Schema compatibility tests\n\n## Documentation Requirements\n- Authentication setup guide (service account, ADC, OAuth)\n- Query best practices (parameterization, cost control)\n- Streaming insert patterns\n- Error handling guide\n- Rate limiting and quota management\n\n## Acceptance Criteria\n- [ ] All query zone operations implemented and tested\n- [ ] Data modification operations with proper error handling\n- [ ] Admin zone with appropriate permission checks\n- [ ] OAuth and service account authentication working\n- [ ] Rate limiting integrated with quota management\n- [ ] Comprehensive test coverage (unit + integration)\n- [ ] Documentation complete with examples","status":"open","priority":3,"issue_type":"feature","estimated_minutes":480,"created_at":"2026-01-11T22:05:32.127549531-05:00","created_by":"ubuntu","updated_at":"2026-01-15T07:23:29.805743003-05:00","labels":["analytics","connector","gcp","tier-4"],"dependencies":[{"issue_id":"flywheel_connectors-4t7t","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T22:08:22.266664379-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-4t7t","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T22:08:22.291883686-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-4t7t","depends_on_id":"flywheel_connectors-lj2","type":"blocks","created_at":"2026-01-11T22:08:32.615242053-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-4t7t","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:37:25.478073512-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4t7t","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T07:07:27.393202156-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4t7t","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T07:09:12.319241883-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4t7t","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T07:09:12.732086198-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4t7t","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T07:09:13.138915385-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4t7t","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T07:09:13.569867757-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4t7t","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T07:09:13.983869084-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4t7t","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:09:14.423985081-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-4t7t.1","title":"fcp.bigquery: Manifest + Capability Map (FCP2)","description":"## Goal\nProduce the full FCP2 manifest and capability map for this connector.\n\nThis bead is where we translate the connector’s functional surface (operations) into a **mechanically checkable** contract:\n- operation schemas + schema IDs\n- capability families per operation\n- per-operation NetworkConstraints (default deny)\n- sandbox profile requirements\n- declared state model (stateless / singleton_writer / crdt)\n\n## Required content (must be explicit)\n- Operation list is exhaustive and stable for the current phase.\n- Capability IDs DO NOT encode hostnames/ports.\n- NetworkConstraints are minimal and per-operation.\n- Risk tier for each operation (Safe / Dangerous).\n- Explicit bounds: timeouts, max response sizes, pagination limits.\n\n## Tests\n- Add good/bad manifest examples for the compliance runner.\n\n## Acceptance Criteria\n- Passes static checks in `flywheel_connectors-1n78.21.5`.\n- Default-deny is enforced by manifest + capability requirements.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:23.235826986-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:12:23.235826986-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-4t7t.1","depends_on_id":"flywheel_connectors-4t7t","type":"parent-child","created_at":"2026-01-15T07:12:23.294517156-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-4t7t.2","title":"fcp.bigquery: Provisioning Automation","description":"## Goal\nAutomate provisioning and configuration with minimal human steps.\n\nThis bead owns:\n- auth setup (OAuth / API keys / webhook secrets) via `CredentialObject`/`CredentialId` (egress proxy injection preferred)\n- endpoint configuration\n- `fcp doctor` readiness checks\n- deterministic, mockable provisioning flows\n\n## FCP2 requirements\n- Secrets never touch disk.\n- Provisioning is deterministic and testable.\n- Error messages are actionable and do not leak secrets/PII.\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Provisioning emits structured logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:23.809603734-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:52.270235586-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-4t7t.2","depends_on_id":"flywheel_connectors-4t7t","type":"parent-child","created_at":"2026-01-15T07:12:23.893416053-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4t7t.2","depends_on_id":"flywheel_connectors-4t7t.1","type":"blocks","created_at":"2026-01-15T07:12:24.42814975-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-4t7t.3","title":"TEST: fcp.bigquery Unit/Integration Tests (mock-only)","description":"## Goal\nMock-only unit/integration tests for this connector.\n\n## Required coverage\n- schema validation (inputs + outputs)\n- error taxonomy mapping (retry semantics)\n- pagination and bounds\n- rate limit behavior\n- redaction (no token/secret/PII leakage)\n- idempotency + receipts for Dangerous operations\n\n## Logging\nAll tests emit structured JSON logs per `flywheel_connectors-1n78.35`.\n\n## Acceptance Criteria\n- Deterministic tests; no live external calls.\n- Includes adversarial cases (timeouts, malformed responses, partial failures).\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:24.94395891-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:12:24.94395891-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-4t7t.3","depends_on_id":"flywheel_connectors-4t7t","type":"parent-child","created_at":"2026-01-15T07:12:25.000319428-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4t7t.3","depends_on_id":"flywheel_connectors-4t7t.1","type":"blocks","created_at":"2026-01-15T07:12:25.517809949-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4t7t.3","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:12:26.025982212-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4t7t.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T07:32:10.301607089-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-4t7t.4","title":"E2E: fcp.bigquery Connector Compliance Run","description":"## Goal\nRun the shared connector compliance runner and capture an evidence bundle.\n\n## Must validate\n- handshake + introspection correctness\n- default deny (no CapabilityToken → deny + DecisionReceipt)\n- NetworkConstraints enforcement\n- receipts/audit for Dangerous operations\n- structured logs\n\n## Acceptance Criteria\n- E2E run is deterministic and produces a stable artifact bundle.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:26.460703279-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:12:26.460703279-05:00","labels":["connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-4t7t.4","depends_on_id":"flywheel_connectors-4t7t","type":"parent-child","created_at":"2026-01-15T07:12:26.520628928-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4t7t.4","depends_on_id":"flywheel_connectors-4t7t.1","type":"blocks","created_at":"2026-01-15T07:12:27.035420921-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4t7t.4","depends_on_id":"flywheel_connectors-4t7t.2","type":"blocks","created_at":"2026-01-15T07:12:27.543361578-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4t7t.4","depends_on_id":"flywheel_connectors-4t7t.3","type":"blocks","created_at":"2026-01-15T07:12:28.129912578-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-4t7t.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T07:12:28.72094175-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-503","title":"fcp.terraform: Drift detection between state and actual resources","description":"# fcp.terraform: Drift detection between state and actual resources (FCP2)\n\n## Goal\nDetect drift safely by comparing:\n- recorded Terraform state\n- actual provider-reported infrastructure\n\nThis may require provider API egress and must respect NetworkConstraints.\n\n## Scope\n- Run a refresh-only plan (no apply) and extract drift summary.\n- Return a canonical `DriftReport`:\n  - resources changed\n  - attributes changed (hashed/summary)\n  - severity estimation\n\n## Capability model (illustrative)\n- `terraform.drift.read` (sensitive)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints default deny unless backend/providers are explicitly allowed.\n- No mutations; drift detection must not apply changes.\n- Audit state/provider access.\n\n## Deliverables\n- Operation schema:\n  - `terraform.drift.detect`\n- Canonical output type:\n  - `DriftReport`\n\n## Test strategy (MUST)\n- Unit tests with a terraform shim for:\n  - refresh-only invocation\n  - parsing drift summaries\n  - error mapping\n\n## Acceptance criteria\n- Drift reports are deterministic and safe-by-default.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:15:00.522190275-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:45:20.844577282-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-503","depends_on_id":"flywheel_connectors-r6ty","type":"parent-child","created_at":"2026-01-15T02:33:01.013186144-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-503","depends_on_id":"flywheel_connectors-r6ty.1","type":"blocks","created_at":"2026-01-15T04:45:25.04301939-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-503","depends_on_id":"flywheel_connectors-xme","type":"blocks","created_at":"2026-01-15T04:45:25.380467568-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-51o","title":"fcp.airtable: Linked record resolution and management","description":"# fcp.airtable: Linked Record Resolution and Management\n\n## Goal\nProvide first-class support for Airtable relational features:\n- linked record fields\n- lookup/rollup-style derived values\n\n## Scope\n- Read/write “link to another record” fields (arrays of record ids).\n- Resolve linked record chains for agent-friendly outputs (bounded joins).\n- Support computed field read semantics (lookup/rollup) without pretending they are writable.\n\n## Key requirements\n- Capability gated (reads vs writes).\n- Bounded traversal:\n  - prevent unbounded graph walks / cycles\n  - explicit depth/record count limits\n- Deterministic output:\n  - stable ordering when expanding linked records\n  - explicit “partial” indicators when traversal is truncated by bounds\n\n## Tests\n- Linked graph traversal (including cycles).\n- Bounded expansion behavior.\n- Error mapping for missing/deleted linked records.\n\n## Acceptance Criteria\n- Linked record expansion is safe and predictable.\n- Computed fields are exposed read-only with clear typing.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:14:36.301383823-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:03:22.094598697-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-51o","depends_on_id":"flywheel_connectors-soft","type":"parent-child","created_at":"2026-01-15T02:29:57.06769404-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-51o","depends_on_id":"flywheel_connectors-soft.1","type":"blocks","created_at":"2026-01-15T04:03:29.901508232-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-556f","title":"TEST: RaptorQ Unit Tests (Encode/Decode, Chunking, DoS Bounds)","description":"# TEST: RaptorQ Unit Tests\n\n## Scope\nComprehensive unit tests for RaptorQ symbol encoding/decoding and chunking.\n\n## Test Categories\n\n### Basic Encoding/Decoding\n- [ ] Encode small object (\u003c symbol size) → decode from K symbols\n- [ ] Encode medium object (multiple symbols) → decode from K symbols\n- [ ] Encode large object → ChunkedObjectManifest path\n- [ ] Decode with exactly K source symbols\n- [ ] Decode with K + repair symbols (erasure recovery)\n- [ ] Decode with subset of repair symbols only\n\n### Symbol Parameters\n- [ ] Default symbol size (1024 bytes) produces expected symbol count\n- [ ] Custom symbol sizes work correctly\n- [ ] K (source symbols) calculation is correct for object sizes\n- [ ] Repair ratio produces expected number of repair symbols\n\n### ChunkedObjectManifest\n- [ ] Objects \u003e threshold produce manifest + raw chunks\n- [ ] Manifest references correct chunk ObjectIds\n- [ ] Chunks reconstruct to original object\n- [ ] Chunk ordering is deterministic\n\n### Decode DoS Mitigation\n- [ ] Reject decode attempts exceeding CPU budget\n- [ ] Reject decode attempts exceeding memory budget\n- [ ] Timeout on pathological decode patterns\n- [ ] Reject impossibly large symbol counts\n- [ ] Reject impossibly large object sizes in manifest\n\n### Symbol Identity\n- [ ] Same object always produces same symbols (deterministic)\n- [ ] ESI (encoding symbol identifier) is unique per symbol\n- [ ] Symbols are self-describing (include ESI, K)\n\n### Partial Availability\n- [ ] DecodeStatus correctly reports received vs needed\n- [ ] SymbolAck correctly acknowledges specific ESIs\n- [ ] Missing symbol requests are targeted (not full retransmit)\n\n## Golden Vectors\n- 1KB object → expected symbols (with specific bytes)\n- 100KB object → expected manifest structure\n- Known erasure pattern → successful decode\n\n## Fuzz Targets\n- Malformed symbol streams\n- Invalid ESI values\n- Oversized object claims\n- Corrupt manifest structures\n\n## Performance Benchmarks\n- Encode 1MB object: target \u003c 10ms\n- Decode 1MB from K symbols: target \u003c 20ms\n- Decode 1MB with 10% erasure: target \u003c 50ms\n\n## Logging Requirements\nAll tests emit:\n```json\n{\n  \"test_name\": \"...\",\n  \"object_size\": 12345,\n  \"symbol_size\": 1024,\n  \"k\": 13,\n  \"repair_symbols\": 3,\n  \"decode_symbols_used\": 13,\n  \"result\": \"pass|fail\",\n  \"duration_us\": 1234\n}\n```\n\n## Acceptance Criteria\n- All encoding/decoding paths tested\n- DoS mitigations verified\n- Performance benchmarks pass\n- Golden vectors match\n\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T02:54:19.409701172-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:54:19.409701172-05:00","labels":["fcp2","mvp","raptorq","testing"],"dependencies":[{"issue_id":"flywheel_connectors-556f","depends_on_id":"flywheel_connectors-1n78.14","type":"blocks","created_at":"2026-01-15T02:54:47.368294787-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-556f","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:23:55.14651777-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-562","title":"fcp.homeassistant: History and statistics retrieval","description":"# fcp.homeassistant: History and statistics retrieval (FCP2)\n\n## Goal\nExpose historical state and long-term statistics so agents can:\n- summarize trends (energy usage, temperature)\n- detect anomalies\n- produce reports\n\nHistory can contain sensitive presence/location data.\n\n## Scope\n- Query history for an entity over a time range (bounded).\n- Retrieve long-term statistics for sensors (where available).\n\n## Capability model (illustrative)\n- `ha.history.read` (sensitive)\n- `ha.statistics.read` (sensitive)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- Privacy hygiene:\n  - avoid logging raw state histories\n  - logs include only entity ids (hashed) + time window\n\n## Deliverables\n- Operation schemas:\n  - `ha.history.get`\n  - `ha.statistics.get`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - time window filtering\n  - bounds enforcement\n\n## Acceptance criteria\n- History/stats queries are reliable, bounded, and privacy-preserving.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:17:10.164111393-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:43:35.174868219-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-562","depends_on_id":"flywheel_connectors-ortf","type":"parent-child","created_at":"2026-01-15T02:33:22.312401806-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-562","depends_on_id":"flywheel_connectors-ortf.1","type":"blocks","created_at":"2026-01-15T04:43:40.15744208-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-57x7","title":"TEST: Exactly-Once Semantics Unit Tests (Intent/Receipt, Idempotency, Fault Injection)","description":"# TEST: Exactly-Once Semantics Unit Tests\n\n## Goal\nComprehensive unit tests verifying exactly-once semantics for OperationIntent + OperationReceipt.\n\n## Test Categories\n\n### 1. OperationIntent/Receipt Schema Tests\n- Verify schema ID and hash correctness\n- Test all required fields are present (idempotency_key, lease_seq, lease_object_id, refs)\n- Validate upstream idempotency handle handling (optional field)\n- Golden vector tests for deterministic CBOR serialization\n\n### 2. Idempotency Key Tests\n- Same key returns same receipt without re-execution (core idempotency property)\n- Different keys produce independent executions\n- Key collision resistance (hash-based keys)\n- Key expiry/TTL semantics (if applicable)\n\n### 3. Lease Fencing Tests\n- OperationIntent MUST bind to lease fencing token (`lease_seq`)\n- Stale lease holder attempts to execute (MUST be rejected)\n- Lease renewal does not break in-flight intents\n- Receipt references correct lease object\n\n### 4. Fault Injection Tests\n- Crash between intent creation and receipt creation\n- Detect and reconcile incomplete intents on recovery\n- Network partition during execution\n- Storage failure during receipt write\n- Timeout during external side effect\n\n### 5. Audit Integration Tests\n- AuditEvent emitted on intent creation\n- AuditEvent emitted on receipt creation\n- Audit chain integrity preserved across retries\n- Decision receipts reference correct operation receipts\n\n### 6. Concurrency Tests\n- Concurrent requests with same idempotency key (only one executes)\n- Concurrent requests with different keys (all execute)\n- Race between intent creation and lease expiry\n\n## Logging Requirements\n- All test cases MUST log structured JSON with:\n  - `test_name`, `test_phase` (setup/execute/verify)\n  - `idempotency_key`, `lease_seq`, `operation_id`\n  - `expected_outcome`, `actual_outcome`\n  - `timing_ms` for each phase\n- Failures MUST include full context for reproduction\n\n## Golden Vectors\n- Provide golden vectors for:\n  - OperationIntent canonical CBOR\n  - OperationReceipt canonical CBOR\n  - Idempotency key derivation\n\n## Acceptance Criteria\n- All tests pass with `cargo test`\n- Fault injection tests use deterministic chaos (seeded RNG)\n- No flaky tests (deterministic outcomes)\n- Coverage of all code paths in exactly-once module","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:49:59.659088463-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:49:59.659088463-05:00","labels":["fcp2","mvp","receipts","testing"],"dependencies":[{"issue_id":"flywheel_connectors-57x7","depends_on_id":"flywheel_connectors-1n78.10","type":"blocks","created_at":"2026-01-15T03:50:28.452119535-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-57x7","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:50:28.61566286-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-581","title":"fcp.hubspot: Meeting scheduling integration","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:16:16.972987926-05:00","created_by":"ubuntu","updated_at":"2026-01-11T12:31:33.741039273-05:00","closed_at":"2026-01-11T12:31:33.741039273-05:00","close_reason":"CONSOLIDATED: All HubSpot sub-features merged into comprehensive parent connector bead flywheel_connectors-hy8v (fcp.hubspot: HubSpot CRM \u0026 Marketing Platform Connector)"}
{"id":"flywheel_connectors-58x","title":"fcp.jira: Sprint and board management","description":"# fcp.jira: Sprint and board management (FCP2)\n\n## Goal\nImplement Jira Agile operations for **boards** and **sprints** so agents can manage sprint workflows safely under FCP2 capability + approval enforcement.\n\nThis bead is specifically about Jira Software (Agile) surfaces (boards, sprints, backlog), not generic issue CRUD.\n\n## Scope\n### Read operations (low risk)\n- List boards visible to the principal.\n- Get board configuration (type, filters, location).\n- List sprints for a board; get sprint metadata.\n- List issues in a sprint/backlog (pagination; stable ordering).\n\n### Write operations (medium/high risk)\n- Create sprint (board-scoped).\n- Start / complete sprint.\n- Move issues into/out of sprint and backlog.\n\n### Constraints\n- Must work in both Jira Cloud and Server/DC (via `flywheel_connectors-3a9`).\n- Must respect project permissions and Jira Software license availability.\n\n## Capability model (illustrative)\nCapability IDs MUST NOT encode hosts/ports.\n- `jira.boards.read`\n- `jira.sprints.read`\n- `jira.sprints.write` (create/start/complete)\n- `jira.sprints.assign_issues` (move issues)\n\nDanger/approval guidance:\n- Starting/completing sprints should be **approval-gated** by policy in many orgs.\n  - Emit DecisionReceipt reason codes that are specific (e.g., `JIRA_SPRINT_START_REQUIRES_APPROVAL`).\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned to the Jira base hostname.\n- For write ops: emit OperationReceipt + AuditEvent with:\n  - board_id / sprint_id / issue_keys (IDs only; no secret data)\n  - request correlation id\n\n## Deliverables\n- Operation schemas:\n  - `jira.board.list`\n  - `jira.board.get`\n  - `jira.sprint.list`\n  - `jira.sprint.get`\n  - `jira.sprint.create`\n  - `jira.sprint.start`\n  - `jira.sprint.complete`\n  - `jira.sprint.issues`\n  - `jira.sprint.move_issues`\n  - `jira.backlog.move_issues`\n- Robust pagination helpers (bounded memory; streaming-friendly).\n- Clear error mapping when Jira Software APIs are unavailable.\n\n## Test strategy (MUST)\n### Unit/integration (mock-only)\n- Mock fixtures for Agile endpoints:\n  - board listing and sprint listing\n  - start/complete sprint happy paths\n  - permission denied\n  - missing Jira Software (feature not enabled)\n  - rate-limit + retry/backoff\n\n### Compliance\n- Ensure capability-gating is enforced for each operation.\n- Ensure write operations produce receipts/audit events.\n\n## Acceptance criteria\n- A mock-only test suite covers both Cloud and Server/DC variants.\n- All write operations are capability + (policy-configurable) approval gated.\n- No assumptions about “global boards”; all operations are explicitly scoped.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:14:35.31184906-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:13:57.289974001-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-58x","depends_on_id":"flywheel_connectors-x9af","type":"parent-child","created_at":"2026-01-15T02:28:43.217730417-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-58x","depends_on_id":"flywheel_connectors-x9af.1","type":"blocks","created_at":"2026-01-15T04:13:59.633933973-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-5szl","title":"TEST: Agent Integration Unit Tests (Introspection, Tool Descriptors, Discovery)","description":"# TEST: Agent Integration Unit Tests\n\n## Goal\nVerify that FCP2 operations are discoverable and safe for AI agents.\n\n## Test Categories\n\n### 1. Introspection Schema Tests\n- Introspection object schema validation (canonical CBOR)\n- All required fields present (operations, schemas, risk levels)\n- Golden vectors for introspection responses\n\n### 2. Operation Discovery Tests\n- Enumerate all connector operations\n- Each operation has input/output schemas\n- Risk tier correctly reported\n- Rate limits correctly reported\n\n### 3. MCP Tool Descriptor Tests\n- Mapping to MCP-compatible tool descriptors\n- Tool name, description, examples present\n- Input/output schema translation\n- Risk tier to MCP safety level mapping\n\n### 4. E2E Discovery Tests\n- Agent can enumerate tools from connector\n- Agent can invoke safe operation end-to-end\n- Agent can read recovery hints on failure\n\n## Logging Requirements\n- Structured JSON with operation_id, schema versions\n- Discovery timing metrics\n- Error details with recovery hints\n\n## Acceptance Criteria\n- Introspection is complete for agent operation\n- No hardcoded connector knowledge required\n- Tool descriptors match MCP conventions","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:50:32.192813258-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:50:32.192813258-05:00","labels":["agent","fcp2","mvp","testing"],"dependencies":[{"issue_id":"flywheel_connectors-5szl","depends_on_id":"flywheel_connectors-1n78.30","type":"blocks","created_at":"2026-01-15T03:50:43.260847974-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-5szl","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:50:43.428471154-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-5un1","title":"TEST: fcp-telemetry Unit Test Suite","description":"# TEST: fcp-telemetry Unit Test Suite\n\n## Scope\nComprehensive unit tests for metrics, logging, and tracing library.\n\n## Test Categories\n\n### Structured Logging\n- [ ] Log level filtering\n- [ ] JSON output format\n- [ ] Field injection (correlation IDs, zone, connector)\n- [ ] Sensitive data redaction\n- [ ] Log rotation handling\n\n### Metrics Collection\n- [ ] Counter increments\n- [ ] Gauge values\n- [ ] Histogram distributions\n- [ ] Timing measurements\n- [ ] Label/tag handling\n\n### Distributed Tracing\n- [ ] Span creation and nesting\n- [ ] Context propagation\n- [ ] Trace ID generation\n- [ ] Span attributes\n- [ ] Sampling decisions\n\n### Export\n- [ ] Prometheus format export\n- [ ] OTLP format export\n- [ ] Custom sink support\n- [ ] Batch flushing\n\n### Performance\n- [ ] Low overhead in hot path\n- [ ] Async export\n- [ ] Buffer management\n\n## Coverage Target: \u003e90%\n\n## Acceptance Criteria\n- Runs deterministically in CI (no flake due to timing/network).\n- Uses mocks only (no real external network).\n- Emits structured JSON logs per `flywheel_connectors-1n78.35` with stable `test_name` identifiers.\n","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-11T12:12:46.949292462-05:00","created_by":"ubuntu","updated_at":"2026-01-15T05:28:11.37927901-05:00","labels":["fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-5un1","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T12:21:14.423642742-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-5un1","depends_on_id":"flywheel_connectors-1n78.28","type":"parent-child","created_at":"2026-01-15T01:57:03.976932073-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-5un1","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:32:27.611187357-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-5vy","title":"fcp.webhook-receiver: Inbound Event Gateway","description":"# Inbound Event Gateway Meta-Connector\n\n**Force Multiplier:** Universal webhook receiver for external service integrations.\n\n## Overview\n\nMany services push events via webhooks (GitHub, Stripe, Discord, Slack, etc.). Instead of building separate webhook handlers for each service, this meta-connector provides a unified HTTP endpoint infrastructure with per-service configuration.\n\n## Core Components\n\n### 1. HTTP Endpoint Management\n- Dynamic endpoint creation/deletion\n- Unique URL per webhook source\n- Support for path-based routing (`/webhooks/{service}/{id}`)\n- Health check endpoints\n- CORS and preflight handling\n- Rate limiting per endpoint\n\n### 2. Signature Verification (Per-Service)\n- Pluggable verification strategies:\n  - HMAC-SHA256 (GitHub, Stripe)\n  - HMAC-SHA1 (legacy services)\n  - Ed25519 (Discord)\n  - API key header\n  - Basic auth\n  - Custom verification functions\n- Timing-safe comparison\n- Signature caching for replay prevention\n- Failed verification alerting\n\n### 3. Payload Transformation\n- JSON schema validation\n- Payload normalization to common event format\n- Field mapping/extraction\n- Nested payload unwrapping\n- Binary payload handling (multipart)\n- Compression support (gzip, deflate)\n\n### 4. Event Routing to Zones\n- Route events to appropriate FCP zones\n- Support multiple destinations per event type\n- Filter events based on payload content\n- Priority-based routing\n- Fan-out to multiple handlers\n\n### 5. Retry/Dead-Letter Handling\n- Configurable retry strategies:\n  - Exponential backoff\n  - Fixed interval\n  - Fibonacci backoff\n- Dead letter queue for failed events\n- Manual retry interface\n- Event replay capability\n- TTL-based expiration\n\n## Configuration Example\n\n```toml\n[[webhooks]]\nname = \"github-repo-events\"\npath = \"/webhooks/github/main-repo\"\nsignature_type = \"hmac-sha256\"\nsignature_header = \"X-Hub-Signature-256\"\nsecret = \"${GITHUB_WEBHOOK_SECRET}\"\nroute_to = \"zone.github-automation\"\nevent_type_header = \"X-GitHub-Event\"\n\n[[webhooks]]\nname = \"stripe-payments\"\npath = \"/webhooks/stripe/payments\"\nsignature_type = \"stripe\"\nsecret = \"${STRIPE_WEBHOOK_SECRET}\"\nroute_to = \"zone.billing\"\nretry_max = 5\nretry_backoff = \"exponential\"\n\n[[webhooks]]\nname = \"discord-interactions\"\npath = \"/webhooks/discord/bot\"\nsignature_type = \"ed25519\"\npublic_key = \"${DISCORD_PUBLIC_KEY}\"\nroute_to = \"zone.discord-bot\"\n```\n\n## Event Format (Normalized)\n\n```json\n{\n  \"id\": \"evt_abc123\",\n  \"source\": \"github\",\n  \"type\": \"push\",\n  \"timestamp\": \"2024-01-15T10:30:00Z\",\n  \"webhook_id\": \"github-repo-events\",\n  \"payload\": { ... },\n  \"metadata\": {\n    \"delivery_id\": \"xyz789\",\n    \"signature_valid\": true,\n    \"received_at\": \"2024-01-15T10:30:00.123Z\"\n  }\n}\n```\n\n## Success Criteria\n\n- [ ] Support 10+ common webhook signature types\n- [ ] Sub-50ms processing latency\n- [ ] 99.9% uptime for webhook endpoints\n- [ ] Complete audit trail for all received webhooks\n- [ ] Zero data loss with dead-letter queue\n- [ ] Hot-reload of webhook configurations\n\n## Dependencies\n\n- HTTP server framework (axum/actix-web)\n- Persistent queue for dead-letter handling\n- Zone routing system\n\n## Security Considerations\n\n- All secrets stored encrypted\n- IP allowlisting per webhook (optional)\n- Request size limits\n- Timeout handling\n- DDoS protection integration","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:23:06.647234418-05:00","created_by":"ubuntu","updated_at":"2026-01-11T10:53:35.455928212-05:00","closed_at":"2026-01-11T10:53:35.455928212-05:00","close_reason":"Duplicate of flywheel_connectors-3md (fcp.webhook-receiver: Inbound Event Gateway Connector)"}
{"id":"flywheel_connectors-5xg","title":"fcp.datadog: Anomaly detection and forecasting","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:18:05.656275703-05:00","created_by":"ubuntu","updated_at":"2026-01-11T12:10:12.799272028-05:00","closed_at":"2026-01-11T12:10:12.799272028-05:00","close_reason":"CONSOLIDATED: All Datadog sub-features merged into comprehensive parent connector bead flywheel_connectors-cu3 (fcp.datadog: Datadog Observability Platform Connector)"}
{"id":"flywheel_connectors-5y7","title":"fcp-config: Configuration Validation and Schema Framework","description":"# fcp-config: Configuration Validation and Schema Framework\n\n## Overview\nType-safe configuration framework with JSON Schema validation, secret handling, and environment variable support for FCP connectors.\n\n## Schema Validation\n- JSON Schema Draft 7 validation\n- Required field enforcement\n- Type validation (string, number, bool, array, object)\n- Format validation (uri, email, uuid, datetime)\n- Custom validators\n- Nested schema support\n\n## Configuration Loading\n- TOML file parsing\n- JSON file parsing\n- Environment variable expansion (${VAR})\n- File path resolution\n- Default value injection\n- Configuration merging\n\n## Secret Handling\n- Secret placeholder syntax: ${secret:name}\n- Environment variable secrets\n- File-based secrets (Docker secrets)\n- Vault integration (future)\n- No secrets in logs/errors\n\n## Validation Errors\n- Human-readable error messages\n- JSON path to invalid field\n- Expected vs actual type\n- Suggested fixes\n- Multiple error aggregation\n\n## Configuration Schema Definition\n- Derive macros for Rust structs\n- Automatic schema generation\n- Documentation extraction\n\n## Features\n- Hot reload support\n- Change detection\n- Validation caching\n- Cross-field validation\n\n## Dependencies\n- serde, serde_json, toml\n- jsonschema, regex\n- fcp-core","status":"closed","priority":0,"issue_type":"feature","created_at":"2026-01-11T10:49:58.772040571-05:00","created_by":"ubuntu","updated_at":"2026-01-15T03:22:33.857911504-05:00","closed_at":"2026-01-15T03:22:33.857911504-05:00","close_reason":"Superseded by FCP2 Connector Manifest (1n78.19). Configuration validation is now part of manifest parsing/verification."}
{"id":"flywheel_connectors-5yw","title":"fcp.figma: Component extraction and inspection","description":"# fcp.figma: Component extraction and inspection (FCP2)\n\n## Goal\nExpose Figma component metadata so agents can:\n- identify reusable components and variants\n- inspect component properties (auto-layout, constraints)\n- support design-to-code workflows\n\n## Scope\n- List components and component sets for a file or library.\n- Fetch component details:\n  - name\n  - key/id\n  - description\n  - variant properties (for sets)\n- Find component instances within a file (where supported).\n\n## Performance constraints\n- Figma files can be very large; component discovery must be:\n  - paginated\n  - bounded memory\n  - avoid downloading full node trees unless explicitly requested\n\n## Capability model (illustrative)\n- `figma.components.read`\n- `figma.files.read` (for node references)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- Treat component names/descriptions as tainted.\n\n## Deliverables\n- Operation schemas:\n  - `figma.component.list`\n  - `figma.component.get`\n  - `figma.component_set.list`\n  - `figma.component.instances`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - listing pagination\n  - large-file behavior (bounded)\n  - error mapping (missing component, permission)\n\n## Acceptance criteria\n- Component discovery is reliable and does not require full-file downloads by default.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:14:46.918978267-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:33:45.461246305-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-5yw","depends_on_id":"flywheel_connectors-vuwy","type":"parent-child","created_at":"2026-01-15T02:30:18.313205455-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-5yw","depends_on_id":"flywheel_connectors-vuwy.1","type":"blocks","created_at":"2026-01-15T04:33:50.660320791-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-63o","title":"fcp.zendesk: Ticket CRUD Operations","description":"# fcp.zendesk: Ticket CRUD Operations (FCP2)\n\n## Goal\nProvide safe, typed ticket CRUD so agents can:\n- create tickets\n- read ticket details and thread metadata\n- update status/priority/assignee/tags\n\nTicket content often contains PII; strict logging hygiene is required.\n\n## Scope\n- Create/get/update ticket.\n- List/search tickets with filters and pagination.\n- Soft-delete/archive (dangerous; optional).\n- Attachments are handled as bounded downloads/uploads (may be separate surface).\n\n## Capability model (illustrative)\n- `zendesk.tickets.read`\n- `zendesk.tickets.write` (dangerous-ish)\n- Optional: `zendesk.tickets.delete` (dangerous)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned to the Zendesk subdomain host.\n- PII hygiene:\n  - do not log raw ticket bodies or requester emails\n  - logs include only ticket ids and field names changed\n- For writes: receipts + audit events required.\n\n## Deliverables\n- Operation schemas:\n  - `zendesk.ticket.create`\n  - `zendesk.ticket.get`\n  - `zendesk.ticket.update`\n  - `zendesk.ticket.search`\n  - Optional: `zendesk.ticket.archive`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - CRUD flows\n  - pagination\n  - permission denied\n  - receipts/audit for mutations\n  - redaction\n\n## Acceptance criteria\n- Ticket mutations are mechanically authorized and auditable.\n- No PII leaks into logs.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:21:47.830425868-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:35:31.15513699-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-63o","depends_on_id":"flywheel_connectors-pwff","type":"parent-child","created_at":"2026-01-15T02:34:38.336592996-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-63o","depends_on_id":"flywheel_connectors-pwff.1","type":"blocks","created_at":"2026-01-15T04:35:37.174570935-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-6cs","title":"fcp.figma: Plugin-like operations via REST API","description":"# fcp.figma: Plugin-like operations via REST API (FCP2)\n\n## Goal\nProvide higher-level **macro operations** that feel like “plugin actions” but are implemented purely via the Figma REST API + connector-side processing.\n\nRationale:\n- Figma’s public API is mostly read + comments/webhooks.\n- Many real workflows want “do the thing” operations (extract, package, compare, annotate) without writing a custom plugin.\n\n## Scope\n### Macro operations (examples)\n- `figma.macro.export_component_bundle`:\n  - input: file_key + node_ids\n  - output: a canonical `ComponentBundle` object containing:\n    - minimal node sub-tree\n    - rendered assets (optional, bounded)\n    - extracted tokens (optional)\n    - metadata (component ids, names)\n- `figma.macro.design_audit`:\n  - detect missing tokens, inconsistent styles, naming issues\n  - output: structured findings (no human text required)\n- `figma.macro.annotate_with_comments` (write):\n  - create a constrained set of comments referencing findings\n\n### Boundaries\n- These macros must be **compositions** of already-defined safe primitives (file access, export, comments).\n- No attempt to emulate full plugin execution or arbitrary code.\n\n## Capability model (illustrative)\n- `figma.files.read`\n- `figma.export.read` (if bundling includes exports)\n- `figma.tokens.read` (if bundling includes tokens)\n- `figma.comments.write` (only for annotate macros)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- Bounded outputs:\n  - explicit max nodes per bundle\n  - explicit max bytes for any embedded assets\n- Structured logs include only IDs and counts (no raw design text).\n\n## Deliverables\n- Canonical types:\n  - `ComponentBundle`\n  - `DesignAuditFinding`\n- Operation schemas:\n  - `figma.macro.export_component_bundle`\n  - `figma.macro.design_audit`\n  - Optional: `figma.macro.annotate_with_comments`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - bundle construction determinism\n  - bounds enforcement\n  - comment annotation gating\n\n## Acceptance criteria\n- Macro ops are deterministic, bounded, and mechanically authorized.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:14:51.058962123-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:35:14.313730756-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-6cs","depends_on_id":"flywheel_connectors-vuwy","type":"parent-child","created_at":"2026-01-15T02:30:18.388244914-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6cs","depends_on_id":"flywheel_connectors-vuwy.1","type":"blocks","created_at":"2026-01-15T04:35:19.514554611-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-6d6","title":"fcp.sentry: Issue listing and advanced search","description":"# fcp.sentry: Issue listing and advanced search (FCP2)\n\n## Goal\nProvide efficient, correct access to Sentry **issue discovery** so agents can:\n- list issues by project/environment\n- search issues with filters (status, assignee, time range, error type)\n- page reliably without missing/duplicating results\n\n## Scope\n### Read operations\n- List issues for a project/org with:\n  - status filters (unresolved/resolved/ignored)\n  - environment filters (prod/staging)\n  - time range filters\n  - sort order (frequency, last seen, priority)\n  - pagination (cursor-based)\n- Optional: saved searches / query templates (connector-local, policy-owned)\n\n### Output shaping\n- Return **metadata** required for downstream workflows:\n  - issue id\n  - short title/message (PII risk: treat as tainted user content)\n  - counts (events/users)\n  - last_seen / first_seen\n  - status/assignee\n  - latest event id pointer (when provided)\n\n## Capability model (illustrative)\n- `sentry.issues.read`\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned to the configured Sentry host.\n- Treat issue titles/messages as **tainted** (they originate from external logs).\n- Structured logs:\n  - include org/project identifiers and query fingerprints\n  - never log raw issue payloads in full\n\n## Deliverables\n- Operation schemas:\n  - `sentry.issue.list`\n  - `sentry.issue.search`\n  - `sentry.issue.get_summary`\n- Cursor-safe pagination helpers (bounded memory; no unbounded accumulation).\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - pagination correctness (no dupes, no gaps)\n  - filter correctness\n  - rate limiting + retry/backoff\n  - taint propagation (issue fields remain tainted)\n\n## Acceptance criteria\n- Search/list results are stable and deterministic across retries.\n- No PII/secrets appear in logs, receipts, or errors.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:14:59.386439926-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:28:52.422005771-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-6d6","depends_on_id":"flywheel_connectors-lszk.3","type":"parent-child","created_at":"2026-01-15T02:30:41.88043443-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6d6","depends_on_id":"flywheel_connectors-lszk.3.1","type":"blocks","created_at":"2026-01-15T04:28:56.516266959-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-6eo","title":"fcp.jira: Tempo/time tracking integration","description":"# fcp.jira: Tempo/time tracking integration (FCP2)\n\n## Goal\nAdd optional integration with **Tempo Timesheets** (and/or Jira-native worklogs where possible) to enable:\n- time logging against issues\n- retrieving timesheets/worklogs for reporting\n- safe, auditable time entry automation\n\nTempo is common in enterprise Jira deployments; this bead isolates that surface because it often involves **additional APIs/hosts** and different auth.\n\n## Scope\n### Read\n- List worklogs for an issue.\n- Aggregate worklogs by user/sprint/project (where API supports).\n- Retrieve Tempo account/category metadata (if used).\n\n### Write\n- Add/edit/delete worklog entries.\n- Optional: “bulk log” flows (dangerous; approval gated).\n\n## Capability model (illustrative)\n- `jira.worklogs.read`\n- `jira.worklogs.write` (dangerous-ish; affects reporting/billing)\n- `jira.tempo.read` (if Tempo API is separate)\n- `jira.tempo.write` (dangerous)\n\nPolicy guidance:\n- In many orgs, time logging is sensitive; treat `*.write` as approval-gated.\n\n## NetworkConstraints \u0026 auth\n- Jira base hostname is pinned by the connector.\n- If Tempo requires a separate host, it MUST be explicitly declared in NetworkConstraints (no implicit egress).\n- Credentials are injected via `CredentialId`. Do not store API keys on disk.\n\n## Deliverables\n- Operation schemas:\n  - `jira.worklog.list`\n  - `jira.worklog.add`\n  - `jira.worklog.update`\n  - `jira.worklog.delete`\n  - Optional Tempo-specific operations (only if installed/enabled):\n    - `jira.tempo.timesheet.get`\n    - `jira.tempo.accounts.list`\n    - `jira.tempo.categories.list`\n- Clear feature-detection behavior:\n  - If Tempo is not available, return a typed “feature unavailable” error, not a generic failure.\n\n## Test strategy (MUST)\n### Unit/integration (mock-only)\n- Mock Jira worklog endpoints.\n- Mock Tempo endpoints (when enabled).\n- Tests for:\n  - correct permission failures\n  - idempotency behavior for repeated “add worklog” attempts (where feasible)\n  - redaction/no-PII logging\n\n### Compliance\n- Any write operation emits receipts + audit events including:\n  - issue key\n  - worklog id\n  - time spent (duration only)\n  - correlation id\n\n## Acceptance criteria\n- Time tracking operations are fully capability-gated and policy-configurable for approval.\n- Connector correctly handles “Tempo not installed / not licensed” cases.\n- No secrets/PII leak via logs, errors, or receipts.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:14:37.704120634-05:00","created_by":"ubuntu","updated_at":"2026-01-15T08:37:52.331685644-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-6eo","depends_on_id":"flywheel_connectors-x9af","type":"parent-child","created_at":"2026-01-15T02:28:43.289513602-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6eo","depends_on_id":"flywheel_connectors-x9af.1","type":"blocks","created_at":"2026-01-15T04:14:18.421426464-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-6hu","title":"fcp.hubspot: Activity logging and timeline","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:16:33.731373171-05:00","created_by":"ubuntu","updated_at":"2026-01-11T12:31:33.73122433-05:00","closed_at":"2026-01-11T12:31:33.73122433-05:00","close_reason":"CONSOLIDATED: All HubSpot sub-features merged into comprehensive parent connector bead flywheel_connectors-hy8v (fcp.hubspot: HubSpot CRM \u0026 Marketing Platform Connector)"}
{"id":"flywheel_connectors-6kb","title":"fcp.hubspot: Deal and opportunity tracking","description":"# fcp.hubspot: Deal and opportunity tracking (FCP2)\n\n## Goal\nEnable safe automation of HubSpot **deal** workflows:\n- create/update deals\n- move deals through pipelines/stages\n- associate deals with contacts/companies\n\nDeals are core revenue operations; treat writes as sensitive and auditable.\n\n## Scope\n- Deal CRUD (create/get/update/archive).\n- Stage transitions:\n  - update deal stage\n  - record stage-change metadata (who/when)\n- Associations:\n  - deal↔contact, deal↔company\n\n## Capability model (illustrative)\n- `hubspot.deals.read`\n- `hubspot.deals.write` (dangerous-ish)\n- `hubspot.associations.write` (dangerous)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- For writes:\n  - receipts + audit events include deal id + pipeline/stage ids\n  - no PII/secrets in logs\n\n## Deliverables\n- Operation schemas:\n  - `hubspot.deal.get`\n  - `hubspot.deal.search`\n  - `hubspot.deal.create`\n  - `hubspot.deal.update`\n  - `hubspot.deal.set_stage`\n  - `hubspot.deal.associate`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - stage transitions\n  - association flows\n  - denial/permission errors\n  - receipts/audit for mutations\n\n## Acceptance criteria\n- Deal stage changes are explicit, auditable, and mechanically authorized.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:15:17.883543631-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:30:57.481952393-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-6kb","depends_on_id":"flywheel_connectors-hy8v","type":"parent-child","created_at":"2026-01-15T02:29:26.4133647-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6kb","depends_on_id":"flywheel_connectors-hy8v.1","type":"blocks","created_at":"2026-01-15T04:31:02.649803722-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-6lz","title":"fcp.reddit: Post and Comment Reading","description":"# fcp.reddit: Post and Comment Reading (FCP2)\n\n## Goal\nProvide safe access to post content and comment threads for research and context gathering.\n\n## Scope\n- Fetch post details by id.\n- Fetch comment tree for a post:\n  - support basic “more comments” expansion within configured limits\n- Fetch user post/comment history (read-only).\n\n## Capability model (illustrative)\n- `reddit.read`\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- All content is tainted.\n- Bounded traversal:\n  - cap number of comments returned\n  - cap recursion depth\n\n## Deliverables\n- Operation schemas:\n  - `reddit.post.get`\n  - `reddit.post.comments.get`\n  - `reddit.user.posts.list`\n  - `reddit.user.comments.list`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - comment tree parsing\n  - bounds enforcement\n  - rate-limit handling\n\n## Acceptance criteria\n- Comment traversal is deterministic and bounded.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:21:21.324901079-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:38:59.923682178-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-6lz","depends_on_id":"flywheel_connectors-xz6e","type":"parent-child","created_at":"2026-01-15T02:33:59.112367283-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6lz","depends_on_id":"flywheel_connectors-xz6e.1","type":"blocks","created_at":"2026-01-15T04:39:05.247687408-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-6o25","title":"[FCP2] Full Profile: Advanced Mesh Hardening","description":"# [FCP2] Full Profile: Advanced Mesh Hardening\n\n## Goal\nImplement the *Full* conformance profile extensions after MVP is stable.\n\nThis epic is intentionally **post-MVP**. It hardens and scales the mesh, improves offline guarantees, and adds stronger post-compromise security options.\n\n## Includes\n- Threshold secrets (Shamir) + SecretAccessToken flows\n- Source diversity enforcement (anti-sybil / anti-single-source symbol dependence)\n- Gossip optimization (XOR filter + IBLT) for scalable dissemination\n- Computation migration primitives and planner hooks\n- Optional PCS zone mode via MLS/TreeKEM\n- Advanced repair controller with SLO evaluation + adaptive placement/pre-staging\n\n## Non-goals\n- Backwards compatibility with any earlier protocol\n- \"Nice to have\" connector features (connectors are a separate epic)\n\n## Definition of Done\n- Full-profile features are implemented behind explicit configuration, with conformance tests and benchmarks.\n- No regressions to MVP latency/memory budgets.\n\n## Success Criteria\n- Full-profile features can be enabled per zone/policy without changing connector binaries.\n- The conformance suite can distinguish MVP-only vs Full claims.\n","status":"open","priority":1,"issue_type":"epic","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:17:56.756675244-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:12:24.60637102-05:00","labels":["core","fcp2","full"],"dependencies":[{"issue_id":"flywheel_connectors-6o25","depends_on_id":"flywheel_connectors-1n78","type":"blocks","created_at":"2026-01-15T01:51:15.187708678-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-6o25.1","title":"[FCP2] Threshold Secrets: Shamir Sharing + SecretAccessToken + Zeroize Discipline","description":"# [FCP2] Threshold Secrets: Shamir Sharing + SecretAccessToken + Zeroize Discipline\n\n## Goal\nImplement k-of-n threshold secrets such that no single device ever holds the whole secret at rest. This is DISTINCT from RaptorQ - secrets use real cryptographic secret sharing because RaptorQ symbols can leak structure.\n\n## Background \u0026 Justification (V2 Spec §17.3)\n\nThe V2 spec explicitly states: \"Secrets use real cryptographic secret sharing (Shamir), not just RaptorQ symbols. RaptorQ symbols are NOT a secret sharing scheme—a single symbol can leak structure.\"\n\nKey differences from RaptorQ:\n- RaptorQ symbols can leak structure (not semantically secure)\n- Single RaptorQ symbol may reveal partial information\n- Shamir shares reveal NOTHING until k shares collected\n- Wrapped shares ensure a node cannot decrypt other nodes' shares\n\n**Design Philosophy:** \"Secrets are never complete anywhere\"\n\n## Normative Types (V2 Spec §17.3)\n\n### SecretObject\n```rust\npub struct SecretObject {\n    pub header: ObjectHeader,\n    pub secret_id: SecretId,        // Unique identifier\n    pub zone_id: ZoneId,            // Zone binding\n    pub k: u8,                      // Threshold (need k shares)\n    pub n: u8,                      // Total shares distributed\n    pub scheme: SecretSharingScheme,\n    pub wrapped_shares: HashMap\u003cTailscaleNodeId, Vec\u003cu8\u003e\u003e,\n    pub rotation: SecretRotationPolicy,\n}\n```\n\n### SecretSharingScheme\n```rust\npub enum SecretSharingScheme {\n    ShamirGf256,  // Shamir's Secret Sharing over GF(2^8)\n}\n```\n\n### SecretRotationPolicy\n```rust\npub struct SecretRotationPolicy {\n    pub rotate_after_secs: u64,    // Auto-rotate interval\n    pub overlap_secs: u64,         // Both old and new valid during rotation\n}\n```\n\n### SecretAccessToken\n```rust\npub struct SecretAccessToken {\n    pub jti: Uuid,                  // Unique token ID\n    pub secret_id: SecretId,        // Which secret\n    pub purpose: String,            // For audit trail\n    pub requested_by: PrincipalId,  // Requester identity\n    pub iat: u64,                   // Issued at\n    pub exp: u64,                   // Expires at (short-lived!)\n    pub signature: Signature,       // Approver signature\n}\n```\n\n### Ephemeral Reconstruction (NORMATIVE)\n```rust\nimpl SecretObject {\n    pub async fn use_secret\u003cF, R\u003e(\u0026self, access_token: \u0026SecretAccessToken, f: F) -\u003e Result\u003cR\u003e\n    where F: FnOnce(\u0026[u8]) -\u003e R\n    {\n        // 1. Verify access token\n        access_token.verify()?;\n        \n        // 2. Create audit event BEFORE reconstruction\n        self.audit_secret_access(access_token).await?;\n        \n        // 3. Collect k wrapped shares from peers\n        let shares = self.collect_k_wrapped_shares(access_token).await?;\n        \n        // 4. Reconstruct using Shamir\n        let secret = reconstruct_shamir_secure(\u0026shares)?;\n        \n        // 5. Execute closure with ephemeral secret\n        let result = f(\u0026secret);\n        \n        // 6. Zeroize IMMEDIATELY after use\n        secure_zero(secret);\n        \n        Ok(result)\n    }\n}\n```\n\n## Requirements\n- Use Shamir secret sharing over GF(2^8) with constant-time operations\n- Shares are sealed to each node's X25519 key (HPKE)\n- Access requires explicit SecretAccessToken (approval) + audit event\n- Reconstruct in memory only; zeroize immediately after use\n- Support configurable k-of-n thresholds\n- Implement SecretRotationPolicy with overlap periods\n\n## Acceptance Criteria\n- [ ] Shamir GF(2^8) implementation with constant-time polynomial evaluation\n- [ ] SecretObject with k-of-n threshold configuration\n- [ ] Per-node share wrapping using HPKE with node's X25519 key\n- [ ] SecretAccessToken creation and validation (short-lived tokens)\n- [ ] Ephemeral reconstruction with immediate zeroization\n- [ ] SecretRotationPolicy with overlap period support\n- [ ] Integration with CredentialObject for secret-backed credentials\n- [ ] Comprehensive audit events for all secret operations\n- [ ] Unit tests for share creation/reconstruction\n- [ ] Negative tests: single share cannot reconstruct\n- [ ] Property tests: k-1 shares reveal nothing","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:20:41.281580324-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:46:41.281068972-05:00","labels":["fcp2","full","secrets","security"],"dependencies":[{"issue_id":"flywheel_connectors-6o25.1","depends_on_id":"flywheel_connectors-6o25","type":"parent-child","created_at":"2026-01-15T01:20:41.282802728-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.1","depends_on_id":"flywheel_connectors-1n78.5","type":"blocks","created_at":"2026-01-15T01:21:44.97587272-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.1","depends_on_id":"flywheel_connectors-1n78.7","type":"blocks","created_at":"2026-01-15T01:21:45.023733335-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.1","depends_on_id":"flywheel_connectors-1n78.9","type":"blocks","created_at":"2026-01-15T01:21:45.07065982-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.1","depends_on_id":"flywheel_connectors-1n78.11","type":"blocks","created_at":"2026-01-15T01:21:45.11895279-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.1","depends_on_id":"flywheel_connectors-1n78.15","type":"blocks","created_at":"2026-01-15T01:21:45.166466111-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-6o25.2","title":"[FCP2] Source Diversity Enforcement (Anti-Single-Source Symbol Dependency)","description":"# [FCP2] Source Diversity Enforcement (Anti-Single-Source Symbol Dependency)\n\n## Goal\nPrevent availability and integrity from collapsing onto a single symbol source.\n\nIn practice: ensure object reconstruction (and ongoing repair) meets **source-diversity targets** so:\n- one compromised/offline node cannot become the de-facto “single point of symbol truth”\n- repair/availability remains robust under churn\n\nThis is a **Full Profile** hardening feature (Spec §17.2 “Source Diversity” + §25.0 Full Profile list).\n\n## Why Users Care\n- Offline resilience is meaningless if “offline recovery” silently depends on exactly one device.\n- Security is weaker if an attacker can dominate reconstructed objects by being the only effective symbol provider.\n- Deterministic enforcement makes the system predictable and explainable.\n\n## Core Concept\nTreat symbol sources as a measurable property of coverage, not just “do we have K symbols?”\n\nFor each object (or chunked object), track:\n- `distinct_sources`: how many unique nodes contributed symbols used for reconstruction\n- `max_concentration_bps`: max share of symbols contributed by any single node (basis points)\n\n## Policy Model\nExtend `ObjectPlacementPolicy` / coverage evaluation with diversity constraints:\n- `min_distinct_sources: u16` (e.g., ≥ 2 or ≥ 3)\n- `max_source_concentration_bps: u16` (e.g., ≤ 7000 bps = 70%)\n\nThese are evaluated alongside coverage ratio targets.\n\n## Implementation Sketch\n### A) Source tracking\nMaintain a bounded per-object histogram:\n- `SourceHistogram { top_k: Vec\u003c(node_id, count)\u003e, other_count: u32 }`\n- Update on each accepted symbol receipt.\n- Bound memory:\n  - cap tracked sources per object\n  - aggregate tail into `other_count`\n\n### B) Enforcement points\n- **Reconstruction**: when selecting symbols to decode, prefer symbol sets that satisfy diversity constraints.\n- **Repair**: if diversity is below target, request symbols from additional nodes (targeted repair) to meet policy.\n- **Explainability**: when failing due to insufficient diversity, emit a stable reason code and evidence:\n  - required min sources / max concentration\n  - observed histogram summary\n\n### C) Interaction with byzantine assumptions\n- Tailscale node IDs are authenticated, but nodes can still be faulty/malicious.\n- Diversity enforcement is not a full Sybil defense, but it is a major reduction in single-source fragility.\n\n### D) Bounds / DoS considerations\n- Never keep unbounded per-object histograms.\n- Prefer streaming aggregation and bounded heaps.\n- Do not allow “symbol spam” to force per-object state growth.\n\n## Dependencies\n- `flywheel_connectors-1n78.15` (stores + placement/coverage evaluation)\n- `flywheel_connectors-1n78.17` (mesh routing/repair plumbing)\n- `flywheel_connectors-6o25` (Full Profile umbrella)\n\n## Tests\n### Unit\n- histogram aggregation is bounded and deterministic\n- concentration calculations are correct\n\n### Simulation\n- 3–5 node scenarios showing:\n  - concentration collapse detected\n  - repair selects additional sources\n  - policy targets reached over time\n\n### Adversarial\n- single node attempts to dominate availability → enforcement triggers repair / denial\n\n## Acceptance Criteria\n- Diversity metrics are computed deterministically in basis points.\n- Placement/repair can enforce `min_distinct_sources` and `max_source_concentration_bps`.\n- Failures are explainable via reason codes and evidence.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:20:41.33066669-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:40:22.386002473-05:00","labels":["fcp2","full","mesh","security"],"dependencies":[{"issue_id":"flywheel_connectors-6o25.2","depends_on_id":"flywheel_connectors-6o25","type":"parent-child","created_at":"2026-01-15T01:20:41.331794906-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.2","depends_on_id":"flywheel_connectors-1n78.15","type":"blocks","created_at":"2026-01-15T01:21:45.21397866-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.2","depends_on_id":"flywheel_connectors-1n78.17","type":"blocks","created_at":"2026-01-15T01:21:45.260176461-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-6o25.2.1","title":"TEST: Source Diversity Enforcement (Unit + Simulation + Adversarial)","description":"# TEST: Source Diversity Enforcement (Unit + Simulation + Adversarial)\n\n## Goal\nProve `flywheel_connectors-6o25.2` is correct, bounded, and effective:\n- diversity metrics are computed correctly\n- enforcement triggers repair/denial deterministically\n- storage/memory overhead stays bounded\n\n## Test Categories\n### Unit\n- SourceHistogram aggregation:\n  - bounded source tracking (cap works)\n  - deterministic top-k selection\n  - basis-points concentration computation\n- Policy evaluation:\n  - `min_distinct_sources` and `max_source_concentration_bps` checks\n\n### Simulation (deterministic)\n- 3-node mesh: one node holds most symbols initially → repair must bring in at least 1 more source\n- 5-node mesh: concentration threshold forces diversification over time\n- churn: one node disappears → policy re-satisfied via repair\n\n### Adversarial\n- malicious/single source attempts to dominate symbol responses\n- ensure enforcement:\n  - does not allocate unbounded per-object state\n  - does not accept garbage to “satisfy” diversity without real distinct sources\n\n## Logging Requirements\nPer `flywheel_connectors-1n78.35`, emit structured JSON including:\n- `object_id`, `zone_id`\n- `distinct_sources_observed`, `max_concentration_bps_observed`\n- `min_distinct_sources_required`, `max_concentration_bps_required`\n- `repair_actions`, `result`\n\n## Acceptance Criteria\n- Deterministic simulations reproduce identical metrics and decisions in CI.\n- Adversarial tests demonstrate bounded behavior and correct refusal/repair.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T05:40:41.563878756-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:40:41.563878756-05:00","labels":["fcp2","full","mesh","testing"],"dependencies":[{"issue_id":"flywheel_connectors-6o25.2.1","depends_on_id":"flywheel_connectors-6o25.2","type":"parent-child","created_at":"2026-01-15T05:40:50.762574899-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.2.1","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T05:40:51.011499174-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.2.1","depends_on_id":"flywheel_connectors-1n78.15","type":"blocks","created_at":"2026-01-15T05:40:51.260022384-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.2.1","depends_on_id":"flywheel_connectors-1n78.17","type":"blocks","created_at":"2026-01-15T05:40:51.500961684-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-6o25.3","title":"[FCP2] Gossip Optimization: XOR Filter + IBLT for Efficient Set Reconciliation","description":"# [FCP2] Gossip Optimization: XOR Filter + IBLT for Efficient Set Reconciliation\n\n## Goal\nScale gossip beyond naïve “announce everything” by using set sketches:\n- **XOR filters** for fast, compact membership tests\n- **IBLTs** (Invertible Bloom Lookup Tables) for efficient set reconciliation when differences are small\n\nThis is a **Full Profile** scalability feature (Spec §25.0 Full Profile list).\n\n## Why Users Care\n- Lower background bandwidth → better battery life + less DERP usage.\n- Faster convergence after partitions.\n- Enables larger meshes without turning gossip into DoS.\n\n## Background\nThe MVP gossip baseline (`flywheel_connectors-1n78.17.5`) can be correct but wasteful.\n\nFull Profile adds *efficient summaries*:\n- “I have these ObjectIds (approximately)…”\n- “Here is a sketch to reconcile our differences…”\n\n## Design / Deliverables\n### A) Summary objects\nDefine canonical, size-bounded summary messages:\n- `AvailabilitySummary`:\n  - zone_id\n  - checkpoint seq hints\n  - XOR filter of known ObjectIds / symbol availability buckets\n  - parameters + salt (domain separated)\n- `ReconciliationSketch`:\n  - IBLT table sized to expected diff\n  - explicit bounds (max cells, max bytes)\n\n### B) Protocol flow (high level)\n1. Periodically exchange `AvailabilitySummary` with peers.\n2. If summary indicates likely differences:\n   - attempt IBLT reconciliation\n   - if IBLT decode succeeds, request missing objects/symbols\n   - if IBLT decode fails (diff too large), fall back to bounded explicit requests\n\n### C) Security / DoS considerations\n- XOR filters have false positives; never treat them as authoritative.\n- IBLT decoding must be bounded:\n  - max cells\n  - max decode time\n  - max retries\n- All inbound summaries are subject to admission control budgets.\n\n### D) Determinism requirements\n- Use deterministic salts derived from zone_id + epoch/checkpoint to make tests reproducible.\n- Ensure encoding/decoding is stable across platforms.\n\n## Dependencies\n- `flywheel_connectors-1n78.17` and `flywheel_connectors-1n78.17.5` (baseline gossip)\n- `flywheel_connectors-1n78.15` (stores/availability model)\n- `flywheel_connectors-6o25` (Full Profile umbrella)\n\n## Tests\n### Unit\n- XOR filter build/query correctness (incl. false positive characterization)\n- IBLT encode/decode for small diffs\n\n### Simulation\n- compare baseline vs optimized gossip bandwidth under:\n  - small diffs\n  - medium diffs\n  - large diffs (forces fallback)\n\n### Adversarial\n- malformed/oversized summaries rejected\n- decode-time bounds enforced\n\n## Acceptance Criteria\n- Convergence is correct (no missed required objects) under fallback paths.\n- Optimized gossip reduces bandwidth measurably vs baseline in simulation.\n- All decoding and memory usage is bounded.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:20:41.380352245-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:41:09.975286492-05:00","labels":["fcp2","full","mesh"],"dependencies":[{"issue_id":"flywheel_connectors-6o25.3","depends_on_id":"flywheel_connectors-6o25","type":"parent-child","created_at":"2026-01-15T01:20:41.381692762-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.3","depends_on_id":"flywheel_connectors-1n78.17","type":"blocks","created_at":"2026-01-15T01:21:45.308306144-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-6o25.3.1","title":"TEST: Gossip Optimization (XOR Filter + IBLT)","description":"# TEST: Gossip Optimization (XOR Filter + IBLT)\n\n## Goal\nValidate the Full Profile gossip optimization (`flywheel_connectors-6o25.3`):\n- correctness of reconciliation\n- bounded decoding\n- measurable bandwidth reduction vs baseline\n\n## Test Categories\n### Unit\n- XOR filter:\n  - membership queries behave as expected\n  - parameters/salts are deterministic\n  - size bounds enforced\n- IBLT:\n  - encode/decode succeeds for small diffs\n  - decode fails cleanly (bounded) when diff too large\n\n### Simulation (deterministic)\n- baseline gossip vs optimized gossip:\n  - same churn pattern\n  - same object availability changes\n  - compare bytes sent and convergence time\n\n### Adversarial\n- oversized summaries rejected (size caps)\n- malformed IBLT tables do not panic\n- decode-time bound triggers and surfaces a stable error code\n\n## Logging Requirements\nPer `flywheel_connectors-1n78.35`, emit structured JSON including:\n- `peer_node_id`, `zone_id`\n- `summary_bytes`, `iblt_cells`, `decode_ms`\n- `fallback_reason`, `result`\n\n## Acceptance Criteria\n- Convergence remains correct under all fallback paths.\n- Optimized path shows a deterministic bandwidth reduction in simulation.\n- No unbounded allocations or panics on adversarial inputs.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T05:41:20.242738467-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:41:20.242738467-05:00","labels":["fcp2","full","mesh","testing"],"dependencies":[{"issue_id":"flywheel_connectors-6o25.3.1","depends_on_id":"flywheel_connectors-6o25.3","type":"parent-child","created_at":"2026-01-15T05:41:26.22967018-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.3.1","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T05:41:26.483601466-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.3.1","depends_on_id":"flywheel_connectors-1n78.17","type":"blocks","created_at":"2026-01-15T05:41:26.727943482-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.3.1","depends_on_id":"flywheel_connectors-1n78.17.5","type":"blocks","created_at":"2026-01-15T05:41:26.975959235-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.3.1","depends_on_id":"flywheel_connectors-1n78.15","type":"blocks","created_at":"2026-01-15T05:41:27.233909278-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-6o25.4","title":"[FCP2] Computation Migration: Checkpoints, Leases, and Safe Handoffs","description":"# [FCP2] Computation Migration: Checkpoints, Leases, and Safe Handoffs\n\n## Goal\nImplement Spec §16 computation migration so computations (including long-running connector work) can move between nodes **without duplicate side effects**.\n\nThis is a **Full Profile** feature: it builds on MVP correctness (leases, state objects, receipts/audit) and adds safe relocation under churn.\n\n## Why This Matters\n- Devices go offline, roam, and lose connectivity.\n- Some computations are expensive (stateful streams, large sync jobs) and should resume rather than restart.\n- Without a real migration protocol, “device-aware execution” becomes best-effort and can violate exactly-once semantics.\n\n## Normative Alignment (Spec §16)\n- Migration checkpoints MUST be **content-addressed mesh objects** distributed via the symbol layer.\n- Execution leases MUST be transferred (fencing token changes) **before** resumption to prevent double execution.\n- Migration state machine is explicit and auditable (Running → Suspended → Transferring → Running).\n\n## Design / Deliverables\n### A) MigratableComputation schema\nDefine a canonical schema that is sufficient for safe resume:\n- `computation_id: ObjectId`\n- `zone_id: ZoneId`\n- `current_holder: TailscaleNodeId`\n- `state: Running | Suspended | Completed | Failed`\n- `checkpoint_object_id: Option\u003cObjectId\u003e`\n- `execution_lease_id: LeaseId`\n- `lease_fencing_token: u64`\n- `capability_context: { capability_token_jti, chk_id/chk_seq, aud_binary }` (minimal binding to authority)\n\n### B) Checkpoint creation\n- checkpoint bytes MUST be canonical (deterministic CBOR)\n- checkpoints MUST be bounded and chunked when large (ChunkedObjectManifest)\n- include integrity protection (ObjectHeader + signature where appropriate)\n\n### C) Migration protocol\n1. **Suspend**: holder transitions computation to Suspended and writes a checkpoint.\n2. **Distribute**: ensure checkpoint is symbol-available to the target (may require targeted repair).\n3. **Request**: holder sends a migration request to target (control plane).\n4. **Lease handoff**: perform lease transfer so the target becomes the only valid executor.\n5. **Resume**: target reconstructs checkpoint and resumes; emits audit/receipt events.\n\n### D) Failure/partition handling\n- network partition during migration MUST fail closed:\n  - target cannot resume without the lease fencing token proving ownership\n  - holder cannot resume once it has relinquished the lease\n- concurrent migration attempts are resolved by lease/quorum rules\n\n## Tests\n### Unit\n- checkpoint creation/restoration (roundtrip)\n- migration state transitions (Running→Suspended→Running)\n- lease fencing token monotonicity during transfer\n\n### Integration\n- full migration cycle between 2 nodes in the deterministic harness\n- migration with partial symbol availability (requires repair)\n\n### Adversarial\n- partition during migration (split-brain prevention)\n- corrupted checkpoint detection\n- lease expiry mid-migration\n\n## Acceptance Criteria\n- Migration between devices is possible without duplicate execution.\n- Resumption is impossible without lease ownership (fencing token).\n- Migration emits audit events and (when side effects exist) OperationIntent/OperationReceipt evidence.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:20:41.431620333-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:21:01.677568653-05:00","labels":["fcp2","full","mesh"],"dependencies":[{"issue_id":"flywheel_connectors-6o25.4","depends_on_id":"flywheel_connectors-6o25","type":"parent-child","created_at":"2026-01-15T01:20:41.433006687-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.4","depends_on_id":"flywheel_connectors-1n78.17","type":"blocks","created_at":"2026-01-15T01:21:45.358513342-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.4","depends_on_id":"flywheel_connectors-1n78.15","type":"blocks","created_at":"2026-01-15T01:21:45.405287309-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.4","depends_on_id":"flywheel_connectors-1n78.34","type":"blocks","created_at":"2026-01-15T05:21:05.820742457-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-6o25.5","title":"[FCP2] PCS Zones: Optional MLS/TreeKEM for Post-Compromise Security","description":"# [FCP2] PCS Zones: Optional MLS/TreeKEM for Post-Compromise Security\n\n## Goal\nProvide an optional **Post-Compromise Security (PCS)** mode for sensitive zones (e.g., `z:owner`, `z:private`) using MLS/TreeKEM-style group key agreement.\n\nIn PCS mode, *after a compromise is detected and recovered*, the system can regain forward security properties through group ratcheting.\n\nThis is a **Full Profile** hardening feature (Spec §25.0 Full Profile list).\n\n## Why Users Care\n- A single compromised device shouldn’t permanently poison a high-trust zone.\n- Membership changes should trigger key updates with stronger security guarantees than “rewrap the same scheme.”\n\n## Non-goals\n- PCS is not required for MVP conformance.\n- We are not designing a new group protocol; we adopt MLS/TreeKEM.\n\n## Design Options (choose one; document the decision)\n### Option A: MLS-derived ZoneKeyManifest keys\n- MLS group state produces an epoch-sequenced shared secret.\n- Derive `zone_key` material from MLS secret + epoch via HKDF.\n- ZoneKeyManifest carries:\n  - PCS mode flag\n  - MLS commit references / group state object ids\n  - deterministic epoch derivation parameters\n\n### Option B: MLS used only for rekey distribution\n- Keep the existing ZoneKeyManifest structure, but:\n  - MLS group messages distribute/authorize new zone keys\n  - ZoneKeyManifest points to the MLS commit that authorized the key\n\n## Required Integration Points\n- `flywheel_connectors-1n78.6` (ZoneKeyManifest + rotation): PCS mode must plug into the same key-selection/rotation plumbing.\n- `flywheel_connectors-1n78.32` (enrollment/removal): membership changes drive MLS updates.\n- `flywheel_connectors-1n78.25` (trust/quorum semantics): define which signatures/commit proofs are required.\n- Observability: log and audit PCS rekeys without leaking secrets.\n\n## Library Choice / Constraints\n- Prefer a mature, audited Rust MLS implementation (e.g., `openmls`) if it meets:\n  - no-unsafe project constraints (or clearly isolated/audited if unavoidable)\n  - deterministic encoding for on-wire objects where needed\n  - acceptable performance for small groups (personal mesh)\n\n## Tests\n### Unit\n- deterministic derivation of epoch keys given MLS state + epoch\n- membership-change triggers correct rekey\n\n### Simulation\n- compromise + recovery scenario:\n  - before recovery: compromised node can decrypt\n  - after PCS rekey: compromised node cannot decrypt future traffic\n\n### Benchmarks\n- key update latency for typical mesh sizes (n=3..10)\n- memory impact of maintaining MLS state\n\n## Acceptance Criteria\n- PCS mode is opt-in per zone and coexists with non-PCS zones.\n- Membership changes trigger PCS rekey with explicit audit evidence.\n- Benchmarks and tests demonstrate feasibility for personal meshes.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:20:41.482799274-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:41:46.837725974-05:00","labels":["fcp2","full","security"],"dependencies":[{"issue_id":"flywheel_connectors-6o25.5","depends_on_id":"flywheel_connectors-6o25","type":"parent-child","created_at":"2026-01-15T01:20:41.483876294-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.5","depends_on_id":"flywheel_connectors-1n78.5","type":"blocks","created_at":"2026-01-15T01:21:45.477423022-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.5","depends_on_id":"flywheel_connectors-1n78.6","type":"blocks","created_at":"2026-01-15T01:21:45.529883178-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-6o25.5.1","title":"TEST: PCS Zones (MLS/TreeKEM) Simulation + Benchmarks","description":"# TEST: PCS Zones (MLS/TreeKEM) Simulation + Benchmarks\n\n## Goal\nValidate the PCS zone mode (`flywheel_connectors-6o25.5`) is:\n- correct (key updates work)\n- secure (post-compromise properties improve)\n- operationally feasible (performance and memory are acceptable for personal meshes)\n\n## Test Categories\n### Unit\n- deterministic key derivation from MLS state + epoch\n- membership change triggers rekey\n- removed node cannot derive new keys\n\n### Simulation\n- scenario: compromise → removal → PCS rekey\n  - confirm compromised/removed node cannot decrypt future epochs\n- scenario: transient offline member rejoins\n  - state reconciliation and commit application\n\n### Benchmarks\n- key update latency for n=3..10\n- memory footprint of MLS state objects\n\n## Logging Requirements\nPer `flywheel_connectors-1n78.35`, emit structured JSON including:\n- `zone_id`, `member_count`\n- `rekey_ms`, `memory_bytes`\n- `result` + `fcp_error_code` on failure\n\n## Acceptance Criteria\n- Tests are deterministic and pass in CI.\n- Bench outputs are machine-readable and regressions are detectable.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T05:41:56.990762092-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:41:56.990762092-05:00","labels":["crypto","fcp2","full","security","testing"],"dependencies":[{"issue_id":"flywheel_connectors-6o25.5.1","depends_on_id":"flywheel_connectors-6o25.5","type":"parent-child","created_at":"2026-01-15T05:42:05.070091709-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.5.1","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T05:42:05.317952048-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.5.1","depends_on_id":"flywheel_connectors-1n78.6","type":"blocks","created_at":"2026-01-15T05:42:05.56392539-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.5.1","depends_on_id":"flywheel_connectors-1n78.32","type":"blocks","created_at":"2026-01-15T05:42:05.862449063-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.5.1","depends_on_id":"flywheel_connectors-1n78.25","type":"blocks","created_at":"2026-01-15T05:42:06.138511797-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.5.1","depends_on_id":"flywheel_connectors-1n78.5","type":"blocks","created_at":"2026-01-15T05:42:06.383505282-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-6o25.6","title":"[FCP2] Threshold Owner Signing: FROST Ed25519 (Recommended)","description":"# [FCP2] Threshold Owner Signing: FROST Ed25519 (Recommended)\n\n## Goal\nImplement threshold signing for the **owner root key** so no single leaked device key compromises the entire system.\n\nThe spec RECOMMENDS threshold owner signing; this is a core hardening step for z:owner / high-trust zones.\n\n## Requirements\n- Use a modern threshold Ed25519 scheme (e.g., FROST).\n- Support:\n  - distributed key generation (DKG) or secure key splitting\n  - signing sessions with a threshold (t-of-n)\n  - deterministic transcript binding (domain separation)\n- Integrate with policy:\n  - zones can require threshold owner signatures for specific object classes (ZoneKeyManifest, RevocationHead, AuditHead, ZoneCheckpoint)\n\n## Deliverables\n- Owner key material never exists as a single plaintext key on one device.\n- A threshold-signature verifier that produces the same public verification key as the owner anchor.\n- Operational ergonomics:\n  - clear “needs quorum” UX\n  - timeouts and retry semantics\n\n## Tests\n- Golden vectors for signature verification.\n- Simulation tests for partial participant availability.\n\n## Acceptance Criteria\n- High-trust zones can be configured to require threshold signatures for critical objects.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T02:24:37.866610363-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:24:37.866610363-05:00","labels":["crypto","fcp2","security"],"dependencies":[{"issue_id":"flywheel_connectors-6o25.6","depends_on_id":"flywheel_connectors-6o25","type":"parent-child","created_at":"2026-01-15T02:24:37.912599233-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.6","depends_on_id":"flywheel_connectors-1n78.5","type":"blocks","created_at":"2026-01-15T02:24:45.393138527-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.6","depends_on_id":"flywheel_connectors-1n78.25","type":"blocks","created_at":"2026-01-15T02:24:45.444529551-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.6","depends_on_id":"flywheel_connectors-1n78.11","type":"blocks","created_at":"2026-01-15T02:24:45.495350744-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.6","depends_on_id":"flywheel_connectors-1n78.29","type":"blocks","created_at":"2026-01-15T02:24:45.546411807-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-6o25.6.1","title":"TEST: Threshold Owner Signing (FROST) Vectors + Availability Simulation","description":"# TEST: Threshold Owner Signing (FROST) Vectors + Availability Simulation\n\n## Goal\nValidate `flywheel_connectors-6o25.6` with:\n- golden vectors for verification\n- deterministic simulations of partial signer availability\n- failure-mode coverage (timeouts, missing shares, wrong participants)\n\n## Test Categories\n### Golden vectors\n- signature verification vectors (threshold-produced signature verifies under owner public key)\n- transcript binding / domain separation vectors\n\n### Simulation\n- n=3..10 participants, t-of-n signing\n- missing participant scenarios (still succeed if ≥t available)\n- reject if \u003ct participants\n\n### Adversarial\n- wrong participant keys\n- replayed transcript\n- malformed signature shares\n\n## Logging Requirements\nPer `flywheel_connectors-1n78.35`, emit structured JSON including:\n- `threshold_t`, `threshold_n`, `participants_present`\n- `result`, `duration_ms`, `fcp_error_code` on failure\n\n## Acceptance Criteria\n- Vectors pass deterministically across platforms.\n- Simulations demonstrate availability behavior.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T05:42:17.610839201-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:42:17.610839201-05:00","labels":["crypto","fcp2","full","security","testing"],"dependencies":[{"issue_id":"flywheel_connectors-6o25.6.1","depends_on_id":"flywheel_connectors-6o25.6","type":"parent-child","created_at":"2026-01-15T05:42:23.361623729-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.6.1","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T05:42:23.618586571-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.6.1","depends_on_id":"flywheel_connectors-1n78.5","type":"blocks","created_at":"2026-01-15T05:42:23.867288107-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.6.1","depends_on_id":"flywheel_connectors-1n78.25","type":"blocks","created_at":"2026-01-15T05:42:24.110888625-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-6o25.7","title":"[FCP2] Advanced Repair Controller: SLO Evaluation + Adaptive Placement/Pre-staging","description":"# [FCP2] Advanced Repair Controller: SLO Evaluation + Adaptive Placement/Pre-staging\n\n## Goal\nUpgrade MVP repair/placement into an **SLO-driven, adaptive repair controller**:\n- continuously evaluates offline/availability SLOs\n- chooses repair actions that maximize resilience per unit cost\n- integrates predictive pre-staging signals\n\nThis is a **Full Profile** refinement (Spec §25.0 Full Profile list: “advanced repair controller with SLO evaluation”).\n\n## Why Users Care\n- Battery and bandwidth are limited; repair must be smart, not brute-force.\n- Users want predictable offline availability for important objects.\n- The system should explain *why it repaired X instead of Y*.\n\n## Inputs\n- `ObjectPlacementPolicy` targets (coverage bps, concentration bps, min distinct nodes)\n- Offline capability metrics (`flywheel_connectors-31c7`)\n- Device profiles (storage/network constraints)\n- Current symbol availability state from stores\n\n## Controller Responsibilities\n### A) SLO evaluation\nCompute per-zone and per-policy metrics:\n- `coverage_bps` distribution (p50/p90/p99 over tracked objects)\n- `can_access` ratio for “hot” objects\n- source diversity metrics (when enabled)\n\n### B) Repair planning\n- Prioritize repairs based on:\n  - user importance (hotness / pinned objects)\n  - SLO deficit (how far below target)\n  - repair cost estimate (symbols to fetch, expected DERP penalty, expected decode CPU)\n- Generate a bounded “repair plan” per cycle:\n  - max repairs per cycle\n  - max bytes per cycle\n  - max decode budget per cycle\n\n### C) Adaptive behavior\n- Increase repair aggressiveness when:\n  - SLO is below threshold\n  - device is on mains power and has bandwidth\n- Decrease repair when:\n  - on battery / metered\n  - DERP-only connectivity for high-cost repairs\n\n### D) Explainability\n- Emit a stable reason code for repair decisions:\n  - `repair.policy_slo_deficit`\n  - `repair.diversity_deficit`\n  - `repair.hot_object_pre_stage`\n  - `repair.deferred_power_budget`\n\n## Dependencies\n- `flywheel_connectors-1n78.15` (stores/placement/repair baseline)\n- `flywheel_connectors-31c7` (offline capability + pre-staging signals)\n- `flywheel_connectors-wwq8` (device profiles)\n- `flywheel_connectors-1n78.28` (metrics/logging)\n\n## Tests\n### Unit\n- deterministic repair prioritization for fixed inputs\n- cost estimation sanity checks\n\n### Simulation\n- demonstrate SLO improvement over time under churn\n- demonstrate adaptive behavior under battery/metered constraints\n\n### Benchmarks\n- planning overhead remains low (bounded time)\n\n## Acceptance Criteria\n- Repair planning is deterministic and bounded.\n- Simulations show measurable SLO improvement vs MVP baseline.\n- Logs/metrics make repair behavior explainable.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T05:42:50.907054436-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:42:50.907054436-05:00","labels":["fcp2","full","repair","storage","ux"],"dependencies":[{"issue_id":"flywheel_connectors-6o25.7","depends_on_id":"flywheel_connectors-6o25","type":"parent-child","created_at":"2026-01-15T05:54:14.979752947-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.7","depends_on_id":"flywheel_connectors-1n78.15","type":"blocks","created_at":"2026-01-15T05:54:28.134235156-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.7","depends_on_id":"flywheel_connectors-31c7","type":"blocks","created_at":"2026-01-15T05:54:28.383145646-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.7","depends_on_id":"flywheel_connectors-wwq8","type":"blocks","created_at":"2026-01-15T05:54:28.630468002-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.7","depends_on_id":"flywheel_connectors-1n78.28","type":"blocks","created_at":"2026-01-15T05:54:28.878990961-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-6o25.7.1","title":"TEST: Advanced Repair Controller (Unit + Simulation + Bench)","description":"# TEST: Advanced Repair Controller (Unit + Simulation + Bench)\n\n## Goal\nProve `flywheel_connectors-6o25.7` is correct, deterministic, and *actually improves* offline/availability SLOs without blowing budgets.\n\nThis test suite focuses on the **planning loop** (compute SLO → choose repairs → explain why) rather than low-level symbol plumbing.\n\n## Test Categories\n\n### Unit (deterministic)\n- **SLO metrics:** given a fixed object set + symbol coverage state, compute:\n  - coverage basis-points (bps) per object\n  - p50/p90/p99 coverage over tracked sets\n  - hot-object access ratio\n- **Cost estimation sanity:** symbols-to-fetch, expected bytes, decode budget estimates are bounded and monotonic.\n- **Planner determinism:** identical inputs produce identical repair plans (including tie-breaking).\n- **Budget enforcement:** per-cycle limits are enforced:\n  - max repairs\n  - max bytes\n  - max decode budget\n- **Reason codes:** each planned repair includes a stable reason code:\n  - `repair.policy_slo_deficit`\n  - `repair.diversity_deficit`\n  - `repair.hot_object_pre_stage`\n  - `repair.deferred_power_budget`\n\n### Simulation (deterministic)\n- **Churn scenario:** nodes come/go; controller restores coverage toward policy targets.\n- **Battery / metered scenario:** controller defers non-critical repairs and logs `repair.deferred_power_budget`.\n- **DERP-only scenario:** controller prefers lower-cost repairs when DERP penalty is high.\n- **Baseline comparison:** demonstrate measurable SLO improvement vs the MVP repair loop (same seed + topology).\n\n### Benchmarks\n- Planning overhead stays bounded under increasing object counts (e.g., 1k/10k/100k tracked objects).\n- Verify stable runtime upper bounds per cycle (no unbounded scans).\n\n## Logging Requirements\nPer `flywheel_connectors-1n78.35`, emit structured JSON logs including:\n- `zone_id`, `cycle_id`\n- `policy_id`, `policy_targets` (coverage/diversity)\n- `object_count_tracked`, `object_count_below_target`\n- `budgets` and `budgets_used`\n- per-action: `object_id`, `reason_code`, `estimated_bytes`, `estimated_decode_ms`, `selected_path` (if applicable)\n\n## Acceptance Criteria\n- Deterministic simulations reproduce identical plans/metrics in CI.\n- Planner is explainable: logs make it obvious *why* a plan was chosen.\n- Benchmarks confirm planning time is bounded and does not scale pathologically.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T05:55:13.472735082-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:55:13.472735082-05:00","labels":["fcp2","full","repair","testing"],"dependencies":[{"issue_id":"flywheel_connectors-6o25.7.1","depends_on_id":"flywheel_connectors-6o25.7","type":"parent-child","created_at":"2026-01-15T05:55:13.474273954-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.7.1","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T05:55:21.045248881-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.7.1","depends_on_id":"flywheel_connectors-1n78.15","type":"blocks","created_at":"2026-01-15T05:55:21.294332007-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.7.1","depends_on_id":"flywheel_connectors-31c7","type":"blocks","created_at":"2026-01-15T05:55:21.542922434-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6o25.7.1","depends_on_id":"flywheel_connectors-wwq8","type":"blocks","created_at":"2026-01-15T05:55:21.797955659-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-6p7","title":"fcp.salesforce: REST and SOAP API dual support","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:18:57.001141524-05:00","created_by":"ubuntu","updated_at":"2026-01-11T12:09:27.178123329-05:00","closed_at":"2026-01-11T12:09:27.178123329-05:00","close_reason":"CONSOLIDATED: All Salesforce sub-features merged into comprehensive parent connector bead flywheel_connectors-4m0 (fcp.salesforce: Salesforce CRM Platform Connector)"}
{"id":"flywheel_connectors-6pe","title":"fcp.docusign: Create Envelopes/Documents","description":"# fcp.docusign: Create Envelopes/Documents (FCP2)\n\n## Goal\nCreate DocuSign envelopes in draft state with documents attached, as the foundation for signing workflows.\n\n## Scope\n- Create draft envelope.\n- Attach documents (PDF/DOCX) to envelope.\n- Retrieve envelope metadata needed for downstream steps.\n\n## Capability model (illustrative)\n- `docusign.envelopes.write` (dangerous-ish)\n- `docusign.documents.write` (dangerous)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned to the configured DocuSign environment host(s).\n- Document IO must be streamed and bounded:\n  - max upload size\n  - content-type allowlist\n  - hash computation for evidence\n- No document contents in logs.\n\n## Deliverables\n- Operation schemas:\n  - `docusign.envelope.create_draft`\n  - `docusign.envelope.add_document`\n  - `docusign.envelope.get`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - envelope create\n  - document upload bounds\n  - log redaction\n\n## Acceptance criteria\n- Draft envelopes can be created deterministically and safely.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:21:32.648301339-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:37:20.697601272-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-6pe","depends_on_id":"flywheel_connectors-bijm","type":"parent-child","created_at":"2026-01-15T02:34:17.255490168-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6pe","depends_on_id":"flywheel_connectors-bijm.1","type":"blocks","created_at":"2026-01-15T04:37:24.419335848-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-6r8","title":"fcp.arxiv: Reference extraction from paper content","description":"# fcp.arxiv: Reference extraction from paper content (FCP2)\n\n## Goal\nExtract structured references from paper PDFs/LaTeX to support:\n- citation linking\n- bibliography reconstruction\n- cross-referencing with external indices\n\n## Scope\n- Parse references section from extracted text.\n- Produce a normalized `ReferenceList`:\n  - title (best-effort)\n  - authors (best-effort)\n  - venue/year (best-effort)\n  - external identifiers when detectable (DOI/arXiv id)\n\n## Capability model (illustrative)\n- `arxiv.references.extract`\n\n## FCP2 requirements\n- Single-zone binding.\n- No network beyond pinned PDF hosts.\n- Bounded processing:\n  - cap pages/bytes parsed\n  - cap number of extracted references\n\n## Deliverables\n- Operation schemas:\n  - `arxiv.paper.references.extract`\n- Canonical output type:\n  - `ReferenceList`\n\n## Test strategy (MUST)\n- Fixture-based tests with known-paper PDFs.\n- Golden extraction vectors for known reference formats.\n\n## Acceptance criteria\n- Reference extraction is deterministic and bounded.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:14:35.376842709-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:49:31.256266831-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-6r8","depends_on_id":"flywheel_connectors-8yxg","type":"parent-child","created_at":"2026-01-15T02:32:23.00332335-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6r8","depends_on_id":"flywheel_connectors-8yxg.1","type":"blocks","created_at":"2026-01-15T04:49:37.410057213-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-6r8","depends_on_id":"flywheel_connectors-ehu","type":"blocks","created_at":"2026-01-15T04:49:37.771571678-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-70p","title":"fcp.figma: Version history access and comparison","description":"# fcp.figma: Version history access and comparison (FCP2)\n\n## Goal\nAllow agents to access Figma version history so they can:\n- inspect change timelines\n- correlate design changes with code changes\n- retrieve a specific historical version for export/comparison\n\n## Scope\n- List versions for a file.\n- Get metadata for a specific version.\n- Optional: retrieve the file at a specific version (keyed request).\n- Optional: compute a lightweight diff summary (node counts/changed nodes) when feasible.\n\n## Capability model (illustrative)\n- `figma.versions.read`\n- `figma.files.read`\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- Treat version labels/descriptions as tainted.\n\n## Deliverables\n- Operation schemas:\n  - `figma.version.list`\n  - `figma.version.get`\n  - Optional: `figma.file.get_at_version`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - pagination\n  - error mapping (version not found)\n\n## Acceptance criteria\n- Agents can reliably fetch and reference historical versions.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:14:49.378859276-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:34:31.256827522-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-70p","depends_on_id":"flywheel_connectors-vuwy","type":"parent-child","created_at":"2026-01-15T02:30:18.461899154-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-70p","depends_on_id":"flywheel_connectors-vuwy.1","type":"blocks","created_at":"2026-01-15T04:34:35.493346581-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-70pq","title":"TEST: Connector State Unit Tests (State Chain, Failover, Fork Detection, Adversarial)","description":"# TEST: Connector State Unit Tests\n\n## Goal\nComprehensive tests verifying connector state persistence, failover, and fork detection.\n\n## Test Categories\n\n### 1. State Schema Tests\n- ConnectorStateRoot schema validation\n- ConnectorStateObject schema validation (incl. lease_seq, lease_object_id)\n- ConnectorStateSnapshot schema validation\n- Golden vectors for all state object types\n- State schema versioning validation\n\n### 2. State Chain Tests\n- Append new state object to chain\n- Verify chain integrity (hash linking)\n- State lookup by cursor/position\n- Chain traversal and iteration\n- Compaction preserves chain integrity\n\n### 3. Singleton-Writer Fencing Tests (NORMATIVE)\n- State writes MUST include lease_seq and lease_object_id\n- Stale lease holder write attempt (MUST be rejected deterministically)\n- Valid lease holder can write\n- Lease renewal during active writes\n- ObjectHeader.refs MUST reference the Lease object\n\n### 4. Failover Tests\n- Failover resumes from last committed state\n- No duplicate processing after failover\n- State cursor preserved across restarts\n- Graceful vs crash failover scenarios\n\n### 5. Fork Detection Tests (CRITICAL)\n- Two competing state objects with same prev = SAFETY INCIDENT\n- Fork detection triggers pause + audit\n- Fork audit event contains correct evidence\n- Recovery path after fork detection\n\n### 6. Snapshot Tests\n- Snapshot creation at configured cadence\n- Snapshot compaction rules\n- Replay from snapshot + delta\n- Snapshot integrity verification\n\n### 7. Migration / Upgrade Tests (V2-only; NO backwards compatibility)\nWe do **not** support legacy/older state schema reads.\n\n- State schema version migration hints exist and are **informational only** (NOT auto-executed).\n- Fail-closed behavior for unknown/older state schema versions:\n  - deterministic error code\n  - AuditEvent emitted with evidence\n- If/when a migration tool exists:\n  - migrations must be explicit, deterministic, and produce new content-addressed objects\n  - golden vectors cover upgrade paths\n\n## Logging Requirements\n- Structured JSON logs with:\n  - `test_name`, `state_object_id`, `chain_height`\n  - `lease_seq`, `writer_identity`\n  - `expected_outcome`, `actual_outcome`\n  - Fork detection events with full evidence\n\n## Adversarial Tests\n- Byzantine writer attempts (wrong lease, forged lease_seq)\n- Replay attacks on state objects\n- State object with invalid prev reference\n- Concurrent fork attempts\n\n## Acceptance Criteria\n- All tests deterministic (no flaky behavior)\n- Fork detection tests are thorough and documented\n- Lease fencing is mechanically enforced\n- Logging sufficient for post-mortem analysis\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:50:00.380046857-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:56:49.482264294-05:00","labels":["fcp2","mvp","state","testing"],"dependencies":[{"issue_id":"flywheel_connectors-70pq","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T03:50:29.945691826-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-70pq","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:50:30.109856051-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-7ca","title":"fcp.sentry: Release tracking and deployment correlation","description":"# fcp.sentry: Release tracking and deployment correlation (FCP2)\n\n## Goal\nEnable agents to correlate production changes with incidents by accessing:\n- releases\n- deployments\n- release health\n\n## Scope\n### Read operations\n- List releases for a project/org with filters.\n- Get release details:\n  - version\n  - commits (when available)\n  - associated issues\n  - deployment environment timeline\n- Optional: fetch release health summaries (sessions, crash-free users).\n\n### Write operations (optional; dangerous)\n- Create a release marker or deployment marker.\n  - Typically CI-owned; allow only if policy explicitly enables.\n\n## Capability model (illustrative)\n- `sentry.releases.read`\n- `sentry.releases.write` (dangerous; optional)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- Avoid leaking commit metadata or PII via logs.\n\n## Deliverables\n- Operation schemas:\n  - `sentry.release.list`\n  - `sentry.release.get`\n  - `sentry.release.health_summary`\n  - Optional: `sentry.release.create`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - list/get pagination\n  - association parsing\n  - rate limiting + retry/backoff\n  - capability gating for any write ops\n\n## Acceptance criteria\n- Agents can reliably answer: “what changed before this incident?”\n- All writes (if enabled) are approval/capability gated and audited.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:15:01.085629953-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:29:34.766979914-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-7ca","depends_on_id":"flywheel_connectors-lszk.3","type":"parent-child","created_at":"2026-01-15T02:30:41.956906177-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7ca","depends_on_id":"flywheel_connectors-lszk.3.1","type":"blocks","created_at":"2026-01-15T04:29:38.840176098-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-7hb","title":"fcp.openai - OpenAI Provider Connector","description":"# fcp.openai - OpenAI Provider Connector (FCP2)\n\n## Goal\nExpose OpenAI’s API suite to FCP2 as a **single-zone**, capability-gated provider connector with strong sandboxing, correct receipts/audit, and mechanical compliance.\n\n## Non-goals / guardrails\n- No FCP1/backwards-compat mode.\n- No hard-coded pricing tables in the connector (pricing changes; track usage metrics instead).\n- No real API calls in unit tests.\n- No secrets on disk; never log API keys.\n\n## Manifest archetypes (closed set)\n- `operational` (request/response actions)\n- `streaming` (SSE / streaming responses)\n\n## Zone model (mechanical)\n- Exactly one `ZoneId` per connector instance.\n- Zone policies decide where model outputs may flow; the connector must provide the provenance/taint metadata to enable that enforcement.\n\n## External surface\n### NetworkConstraints\nDefault-deny; allow only the explicit OpenAI API hosts required by the chosen deployment profile (base profile should be minimal).\n\n### Credential injection\n- API key via `CredentialObject`/`CredentialId` (egress proxy injection preferred).\n- Optional: support multiple keys (per-zone) for quota separation, but still single-zone per instance.\n\n## Capability model (illustrative)\n**NORMATIVE constraint:** capability IDs must not encode hosts/ports.\n\nProposed capability families:\n- `openai.text.generate` (includes streaming)\n- `openai.embeddings.generate`\n- `openai.audio.transcribe`\n- `openai.audio.tts`\n- `openai.images.generate`\n- `openai.files.read`\n- `openai.files.write`\n- `openai.finetune.manage` (High/Dangerous depending on policy)\n\n## Operation surface (keep broad but structured)\nOperations are grouped so we can ship incrementally while preserving a coherent interface.\n\n### Text generation\n- `openai.chat.create` (non-stream)\n- `openai.chat.stream` (streaming)\n- tool/function calling support\n- JSON output mode where supported\n\n### Assistants / agentic runs (optional second phase)\n- thread management\n- run execution (streaming and non-streaming)\n\n### Embeddings\n- `openai.embeddings.create`\n\n### Audio\n- `openai.audio.transcribe`\n- `openai.audio.translate` (if supported)\n- `openai.audio.tts`\n\n### Images\n- `openai.images.generate`\n- `openai.images.edit` (if supported)\n\n### Fine-tuning (policy-gated)\n- `openai.finetune.create`\n- `openai.finetune.get`\n- `openai.finetune.list`\n- `openai.finetune.cancel`\n\n### Usage / telemetry\n- Emit usage metrics (tokens, seconds, images) in structured logs/metrics.\n- Currency cost computation is out-of-connector (policy/ops layer).\n\n## Data handling \u0026 taint\n- Model outputs are not “trusted”; label outputs as derived/model-generated with provenance linking:\n  - input object ids\n  - model identifier\n  - connector id + zone id\n- Never echo full prompts/responses into logs by default.\n\n## Retry and safety\n- All calls are timeout-bounded.\n- Rate limits are enforced mechanically (Retry-After respected).\n- For side-effecting operations (file writes, fine-tunes), use OperationIntent/Receipt and fail closed on uncertain outcomes.\n\n## Tests\n### Unit\n- wiremock OpenAI HTTP API.\n- streaming SSE simulation for chunked responses.\n- property tests for request validation and redaction.\n\n### Integration\n- deterministic in-process mock service for multi-step flows (assistants/runs).\n\n### E2E compliance\n- Run through Mechanical Connector Compliance Runner:\n  - `--manifest` correctness (archetypes, NetworkConstraints, capabilities)\n  - default deny\n  - sandbox network enforcement\n  - structured JSON logs\n\n## Acceptance Criteria\n- Passes connector compliance runner (static + dynamic).\n- Mock-only unit/integration suites cover streaming + rate limits + error taxonomy mapping.\n- Usage metrics are emitted and never leak secrets.\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-11T10:12:25.148947482-05:00","created_by":"ubuntu","updated_at":"2026-01-15T08:37:52.395188112-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-7hb","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T10:43:18.724392566-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-7hb","depends_on_id":"flywheel_connectors-iv7","type":"blocks","created_at":"2026-01-11T10:43:18.767049755-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-7hb","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T10:43:18.80173408-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-7hb","depends_on_id":"flywheel_connectors-9co","type":"blocks","created_at":"2026-01-11T10:43:18.839437005-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-7hb","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:26:56.003903664-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7hb","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:23:09.277493042-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7hb","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:23:09.357490186-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7hb","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T03:23:09.444734352-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7hb","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:23:09.528689493-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7hb","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T03:23:09.620895276-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7hb","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T03:23:09.698054915-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7hb","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:09:58.225842286-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-7hb.1","title":"fcp.openai: Manifest + Capability Map (FCP2)","description":"# fcp.openai: Manifest + Capability Map (FCP2)\n\n## Goal\nSpecify the OpenAI connector manifest contract:\n- archetypes (`operational`, `streaming`)\n- operation list + schema IDs\n- capability families + per-operation required caps\n- NetworkConstraints (default-deny; explicit allowlist)\n- state model (likely stateless for most ops; stateful only where required)\n\n## Key design choices to lock down\n- How we represent “model identifier” in schemas and provenance.\n- How we represent streaming responses (chunk schema, final summary schema).\n- Which operations are considered side-effecting and require OperationIntent/Receipt.\n- Which operations are Dangerous (fine-tuning, file writes) and require ApprovalToken `Execution` scope.\n\n## Outputs\n- Complete manifest section stored in this bead.\n- Good/bad manifest examples for static compliance.\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","acceptance_criteria":"- Manifest includes full operation list + schema IDs\\n- Capability families map to operations; NetworkConstraints are default-deny\\n- Includes at least 2 good and 2 bad manifest examples that the static compliance runner accepts/rejects deterministically","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:23:20.344573167-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:28:13.427261057-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-7hb.1","depends_on_id":"flywheel_connectors-7hb","type":"parent-child","created_at":"2026-01-15T03:23:20.346011808-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7hb.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:24:10.559851894-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7hb.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:24:10.64577966-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-7hb.10","title":"fcp.openai: Provisioning Automation (API Key + Deployment Profile)","description":"## Goal\nAutomate provisioning and configuration with minimal human steps.\n\nThis bead owns:\n- auth setup (OAuth / API keys / webhook secrets) via `CredentialObject`/`CredentialId` (egress proxy injection preferred)\n- endpoint configuration\n- `fcp doctor` readiness checks\n- deterministic, mockable provisioning flows\n\n## FCP2 requirements\n- Secrets never touch disk.\n- Provisioning is deterministic and testable.\n- Error messages are actionable and do not leak secrets/PII.\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Provisioning emits structured logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:14:42.480896854-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:52.455336386-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-7hb.10","depends_on_id":"flywheel_connectors-7hb","type":"parent-child","created_at":"2026-01-15T07:14:42.54012067-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7hb.10","depends_on_id":"flywheel_connectors-7hb.1","type":"blocks","created_at":"2026-01-15T07:14:43.147819597-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-7hb.2","title":"fcp.openai: Text Generation (streaming + tools)","description":"# fcp.openai: Text Generation (streaming + tools)\n\n## Goal\nImplement the primary text generation surface with:\n- non-stream and streaming modes\n- tool/function calling\n- JSON output mode where supported\n\n## Requirements\n- Capability gated (`openai.text.generate`).\n- Timeouts + retry policy is explicit and safe.\n- Streaming is incremental and backpressured.\n- Outputs include provenance/taint metadata (model id, input object ids).\n\n## Acceptance Criteria\n- Deterministic unit tests simulate streaming SSE.\n- E2E harness validates default-deny + allow paths.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:23:27.320744071-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:23:27.320744071-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-7hb.2","depends_on_id":"flywheel_connectors-7hb","type":"parent-child","created_at":"2026-01-15T03:23:27.322078976-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7hb.2","depends_on_id":"flywheel_connectors-7hb.1","type":"blocks","created_at":"2026-01-15T03:24:10.742165719-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-7hb.3","title":"fcp.openai: Embeddings","description":"# fcp.openai: Embeddings\n\n## Goal\nExpose embeddings generation as a low-risk, request/response operation.\n\n## Requirements\n- Capability gated (`openai.embeddings.generate`).\n- Input size bounds are enforced.\n- Output schema is stable and versioned.\n\n## Acceptance Criteria\n- Mock-only unit tests cover normal + rate limit + invalid input.\n","status":"open","priority":2,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:23:31.796740757-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:23:31.796740757-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-7hb.3","depends_on_id":"flywheel_connectors-7hb","type":"parent-child","created_at":"2026-01-15T03:23:31.798153579-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7hb.3","depends_on_id":"flywheel_connectors-7hb.1","type":"blocks","created_at":"2026-01-15T03:24:10.921814523-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-7hb.4","title":"fcp.openai: Audio (STT + TTS)","description":"# fcp.openai: Audio (STT + TTS)\n\n## Goal\nExpose speech-to-text and text-to-speech operations.\n\n## Requirements\n- Capability gated (`openai.audio.transcribe`, `openai.audio.tts`).\n- Inputs are ObjectId references (audio blobs), not file paths.\n- Outputs are ObjectId references (text transcript objects / audio blobs).\n- Timeouts and payload size limits are enforced.\n\n## Acceptance Criteria\n- Mock-only tests cover multipart upload handling and error mapping.\n","status":"open","priority":2,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:23:36.996441165-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:23:36.996441165-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-7hb.4","depends_on_id":"flywheel_connectors-7hb","type":"parent-child","created_at":"2026-01-15T03:23:36.997616189-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7hb.4","depends_on_id":"flywheel_connectors-7hb.1","type":"blocks","created_at":"2026-01-15T03:24:11.094817177-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-7hb.5","title":"fcp.openai: Images","description":"# fcp.openai: Images\n\n## Goal\nExpose image generation/edit operations.\n\n## Requirements\n- Capability gated (`openai.images.generate`).\n- Inputs/outputs are ObjectId references (images as blobs).\n- Output artifacts are stored as objects; never written to local disk.\n\n## Acceptance Criteria\n- Mock-only tests cover request validation + output object creation.\n","status":"open","priority":2,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:23:41.394685506-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:23:41.394685506-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-7hb.5","depends_on_id":"flywheel_connectors-7hb","type":"parent-child","created_at":"2026-01-15T03:23:41.395900745-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7hb.5","depends_on_id":"flywheel_connectors-7hb.1","type":"blocks","created_at":"2026-01-15T03:24:11.26981481-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-7hb.6","title":"fcp.openai: Assistants / Runs (optional phase)","description":"# fcp.openai: Assistants / Runs (optional phase)\n\n## Goal\nSupport multi-step assistant workflows (threads/runs) if still desired after the core platform is stable.\n\n## Risk / complexity\n- More stateful, more moving parts.\n- Must integrate cleanly with FCP2 receipts and state model.\n\n## Acceptance Criteria\n- Fully mockable integration tests cover thread/run lifecycle.\n","status":"open","priority":3,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:23:46.872308964-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:23:46.872308964-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-7hb.6","depends_on_id":"flywheel_connectors-7hb","type":"parent-child","created_at":"2026-01-15T03:23:46.873651093-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-7hb.7","title":"fcp.openai: Fine-tuning (policy-gated)","description":"# fcp.openai: Fine-tuning (policy-gated)\n\n## Goal\nSupport fine-tuning job lifecycle operations behind strict policy.\n\n## Requirements\n- Capability gated (`openai.finetune.manage`).\n- Dangerous actions require ApprovalToken `Execution` scope.\n- Inputs/outputs use ObjectId references; no local disk.\n- AuditEvents for create/cancel.\n\n## Acceptance Criteria\n- Mock-only tests cover job lifecycle and failure modes.\n","status":"open","priority":3,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:23:52.450135893-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:23:52.450135893-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-7hb.7","depends_on_id":"flywheel_connectors-7hb","type":"parent-child","created_at":"2026-01-15T03:23:52.451369206-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7hb.7","depends_on_id":"flywheel_connectors-7hb.1","type":"blocks","created_at":"2026-01-15T03:24:11.450122045-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-7hb.8","title":"TEST: OpenAI Connector Unit/Integration Tests (mock-only)","description":"# TEST: OpenAI Connector Unit/Integration Tests (mock-only)\n\n## Must cover\n- Streaming SSE parsing (chunk boundaries, cancellation).\n- Rate limit + Retry-After.\n- Error taxonomy mapping.\n- Redaction (no API keys, no raw prompts/responses by default).\n- Usage metric extraction (tokens/seconds/images).\n\n## Acceptance Criteria\n- Deterministic in CI.\n- Structured JSON logs.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:23:57.123707604-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:23:57.123707604-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-7hb.8","depends_on_id":"flywheel_connectors-7hb","type":"parent-child","created_at":"2026-01-15T03:23:57.124994549-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7hb.8","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T03:24:11.62266362-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-7hb.9","title":"E2E: OpenAI Connector Compliance Run","description":"# E2E: OpenAI Connector Compliance Run\n\n## Goal\nAdd OpenAI provider scenarios to the shared connector compliance runner.\n\n## Scenarios\n- Default deny.\n- Allow with valid token.\n- Network guard allow/deny (block any non-OpenAI host).\n- Streaming response behavior + backpressure.\n\n## Acceptance Criteria\n- `cargo test --package fcp-e2e --features openai` passes deterministically.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:24:03.092182752-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:24:03.092182752-05:00","labels":["conformance","connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-7hb.9","depends_on_id":"flywheel_connectors-7hb","type":"parent-child","created_at":"2026-01-15T03:24:03.093398422-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7hb.9","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T03:24:11.769975116-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-7isb","title":"[FCP2] Checkpoint/Frontier Management: Advancement Protocol, Fork Detection, Convergence","description":"# [FCP2] Checkpoint/Frontier Management: Advancement Protocol, Fork Detection, Convergence\n\n## Goal\nDefine the protocol for checkpoint advancement, frontier management, and fork detection/resolution.\n\n## Why This Matters\nZoneCheckpoints are the \"heartbeat\" of mesh security. Stale checkpoints mean stale revocation/audit enforcement. Without clear advancement rules, checkpoints become inconsistent.\n\n## ZoneCheckpoint Structure (recap)\n```\nZoneCheckpoint {\n  zone_id: ZoneId,\n  checkpoint_id: ObjectId,\n  seq: u64,\n  \n  // Bound heads\n  audit_head_id: ObjectId,\n  audit_head_seq: u64,\n  revocation_head_id: ObjectId,\n  revocation_head_seq: u64,\n  policy_head_id: ObjectId,\n  config_head_id: ObjectId,\n  \n  // Quorum\n  signatures: Vec\u003c(NodeId, Ed25519Signature)\u003e,\n  timestamp: u64,\n}\n```\n\n## Advancement Protocol (NORMATIVE)\n\n### Trigger Conditions\nNew checkpoint SHOULD be issued when:\n- Time since last checkpoint \u003e checkpoint_interval (default: 60s)\n- Audit chain has \u003e N new events (default: 100)\n- Revocation chain has any new events\n- Policy or config changed\n\n### Advancement Steps\n1. **Coordinator Selection**: HRW hash over (zone_id, \"checkpoint\", epoch)\n2. **Proposal**: Coordinator broadcasts CheckpointProposal\n3. **Signature Collection**: Nodes sign if:\n   - All referenced heads are known and valid\n   - seq = prev_seq + 1\n   - timestamp is within skew tolerance\n4. **Finalization**: Once n-f signatures collected, checkpoint is published\n5. **Propagation**: All nodes update their frontier\n\n### Freshness Rules\n- Token verification: `token.chk_seq \u003c= local_checkpoint_seq` OR degraded mode\n- Revocation verification: `local_revocation_head_seq \u003e= policy_min_revocation_seq`\n\n## Fork Detection (CRITICAL)\n\n### Fork Condition\nA fork exists when two checkpoints have:\n- Same zone_id\n- Same seq\n- Different checkpoint_id\n\n### Fork Response\n1. **Immediate**: Halt checkpoint advancement\n2. **Audit**: Emit ForkDetected audit event with both checkpoint IDs\n3. **Alert**: Push alert to operator (cannot be auto-resolved)\n4. **Safe Mode**: Operations requiring fresh checkpoint MUST fail\n\n### Fork Prevention\n- Coordinator election is deterministic\n- Only coordinator can propose for given seq\n- Nodes reject proposals from non-coordinator\n\n## Convergence Protocol\nAfter partition heals, nodes must converge:\n1. Exchange frontier summaries\n2. Identify highest common checkpoint\n3. Replay missed checkpoints from peers\n4. Resume normal advancement\n\n## Tests\n- Unit tests: checkpoint advancement with quorum\n- Integration tests: partition → divergent checkpoints → heal → convergence\n- Adversarial tests: fork injection detected and halts advancement\n- Property tests: seq is always monotonic\n\n## Acceptance Criteria\n- Checkpoints advance reliably under normal conditions\n- Forks are detected and halt advancement\n- Convergence after partition works correctly\n\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T02:55:24.266866945-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:55:24.266866945-05:00","labels":["checkpoint","fcp2","mvp","security"],"dependencies":[{"issue_id":"flywheel_connectors-7isb","depends_on_id":"flywheel_connectors-1n78","type":"blocks","created_at":"2026-01-15T02:55:32.01491695-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7isb","depends_on_id":"flywheel_connectors-1n78.11","type":"blocks","created_at":"2026-01-15T02:55:32.086515159-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7isb","depends_on_id":"flywheel_connectors-1n78.9","type":"blocks","created_at":"2026-01-15T02:55:32.156245049-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7isb","depends_on_id":"flywheel_connectors-1n78.25","type":"blocks","created_at":"2026-01-15T02:55:32.227511392-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-7ju","title":"fcp.mcp-bridge: MCP Gateway Meta-Connector","description":"# fcp.mcp-bridge - MCP Gateway Meta-Connector (FCP2) [DEFERRED DESIGN]\n\n## Goal\nInvestigate whether an MCP bridge can be made **mechanically safe** under FCP2’s requirements:\n- deterministic manifest + interface_hash\n- explicit capabilities (no “invoke anything” escape hatch)\n- strict sandbox + NetworkConstraints\n- single-zone binding\n- no interpreted-runtime dependency in the connector distribution\n\n## Why this is hard\nMCP servers are often dynamic:\n- tool sets can change at runtime\n- schemas may be discovered dynamically\n\nFCP2 requires a stable, verifiable contract:\n- operations + schemas are part of the signed manifest\n- conformance runner must be able to validate behavior mechanically\n\n## Design constraints (non-negotiable)\n- Single connector instance binds to exactly one `ZoneId`.\n- The connector targets exactly one MCP server endpoint per instance.\n- The manifest MUST enumerate the exposed tools/operations and schemas.\n  - Dynamic “discover and expose new tools” is NOT allowed for production compliance.\n\n## Allowed deployment modes (candidate)\n- Remote MCP server over HTTP/SSE/WebSocket with explicit NetworkConstraints.\n- Local stdio only if the MCP server is a policy-approved native executable (no Node/Python dependency implied by this connector).\n\n## Proposed scope (if feasible)\n- Provide a bridge for a *known* MCP server with a pinned tool schema set.\n- Translate tool schemas to FCP operations at build time or install time and bind them into the manifest (signed).\n\n## Outputs of this bead\n- A clear “Go/No-Go” recommendation.\n- If “Go”: a concrete design for manifest pinning + tool schema hashing + conformance strategy.\n- If “No-Go”: document the exact spec conflicts and what would need to change.\n\n## Acceptance Criteria\n- The result is conclusive and actionable.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:22:53.515206173-05:00","created_by":"ubuntu","updated_at":"2026-01-15T03:46:36.400092765-05:00","labels":["connectors","fcp2","meta"],"dependencies":[{"issue_id":"flywheel_connectors-7ju","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T12:38:16.710957765-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-7ju","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T12:38:16.775242441-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-7ju","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:31:28.786584393-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7ju","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T07:09:39.278868523-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7ju","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T07:09:39.692035006-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7ju","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T07:09:40.104302845-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7ju","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T07:09:40.523165837-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7ju","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T07:09:40.953057529-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7ju","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T07:09:41.376050958-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7ju","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:09:41.804208912-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-7ju.1","title":"fcp.mcp-bridge: Manifest + Capability Map (FCP2)","description":"## Goal\nProduce the full FCP2 manifest and capability map for this connector.\n\nThis bead is where we translate the connector’s functional surface (operations) into a **mechanically checkable** contract:\n- operation schemas + schema IDs\n- capability families per operation\n- per-operation NetworkConstraints (default deny)\n- sandbox profile requirements\n- declared state model (stateless / singleton_writer / crdt)\n\n## Required content (must be explicit)\n- Operation list is exhaustive and stable for the current phase.\n- Capability IDs DO NOT encode hostnames/ports.\n- NetworkConstraints are minimal and per-operation.\n- Risk tier for each operation (Safe / Dangerous).\n- Explicit bounds: timeouts, max response sizes, pagination limits.\n\n## Tests\n- Add good/bad manifest examples for the compliance runner.\n\n## Acceptance Criteria\n- Passes static checks in `flywheel_connectors-1n78.21.5`.\n- Default-deny is enforced by manifest + capability requirements.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:27.496518175-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:13:27.496518175-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-7ju.1","depends_on_id":"flywheel_connectors-7ju","type":"parent-child","created_at":"2026-01-15T07:13:27.55456884-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-7ju.2","title":"fcp.mcp-bridge: Provisioning Automation","description":"## Goal\nAutomate provisioning and configuration with minimal human steps.\n\nThis bead owns:\n- auth setup (OAuth / API keys / webhook secrets) via `CredentialObject`/`CredentialId` (egress proxy injection preferred)\n- endpoint configuration\n- `fcp doctor` readiness checks\n- deterministic, mockable provisioning flows\n\n## FCP2 requirements\n- Secrets never touch disk.\n- Provisioning is deterministic and testable.\n- Error messages are actionable and do not leak secrets/PII.\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Provisioning emits structured logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:28.124162482-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:52.516599773-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-7ju.2","depends_on_id":"flywheel_connectors-7ju","type":"parent-child","created_at":"2026-01-15T07:13:28.182649039-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7ju.2","depends_on_id":"flywheel_connectors-7ju.1","type":"blocks","created_at":"2026-01-15T07:13:28.745649813-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-7ju.3","title":"TEST: fcp.mcp-bridge Unit/Integration Tests (mock-only)","description":"## Goal\nMock-only unit/integration tests for this connector.\n\n## Required coverage\n- schema validation (inputs + outputs)\n- error taxonomy mapping (retry semantics)\n- pagination and bounds\n- rate limit behavior\n- redaction (no token/secret/PII leakage)\n- idempotency + receipts for Dangerous operations\n\n## Logging\nAll tests emit structured JSON logs per `flywheel_connectors-1n78.35`.\n\n## Acceptance Criteria\n- Deterministic tests; no live external calls.\n- Includes adversarial cases (timeouts, malformed responses, partial failures).\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:29.316470529-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:13:29.316470529-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-7ju.3","depends_on_id":"flywheel_connectors-7ju","type":"parent-child","created_at":"2026-01-15T07:13:29.376219966-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7ju.3","depends_on_id":"flywheel_connectors-7ju.1","type":"blocks","created_at":"2026-01-15T07:13:29.944163347-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7ju.3","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:13:30.532944682-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7ju.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T07:32:10.917050027-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-7ju.4","title":"E2E: fcp.mcp-bridge Connector Compliance Run","description":"## Goal\nRun the shared connector compliance runner and capture an evidence bundle.\n\n## Must validate\n- handshake + introspection correctness\n- default deny (no CapabilityToken → deny + DecisionReceipt)\n- NetworkConstraints enforcement\n- receipts/audit for Dangerous operations\n- structured logs\n\n## Acceptance Criteria\n- E2E run is deterministic and produces a stable artifact bundle.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:31.040199215-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:13:31.040199215-05:00","labels":["connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-7ju.4","depends_on_id":"flywheel_connectors-7ju","type":"parent-child","created_at":"2026-01-15T07:13:31.099786747-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7ju.4","depends_on_id":"flywheel_connectors-7ju.1","type":"blocks","created_at":"2026-01-15T07:13:31.672517263-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7ju.4","depends_on_id":"flywheel_connectors-7ju.2","type":"blocks","created_at":"2026-01-15T07:13:32.238253314-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7ju.4","depends_on_id":"flywheel_connectors-7ju.3","type":"blocks","created_at":"2026-01-15T07:13:32.881102905-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7ju.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T07:13:33.54002744-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-7sv","title":"fcp.spotify: Playback Control","description":"# fcp.spotify: Playback Control (FCP2)\n\n## Goal\nEnable safe playback control for user devices:\n- play/pause\n- skip\n- seek\n- set volume/shuffle/repeat\n- transfer playback between devices\n\nPlayback control is a real-world side effect and may require Spotify Premium.\n\n## Scope\n- Get current playback state and device list.\n- Control playback on a specific device.\n\n## Capability model (illustrative)\n- `spotify.playback.read`\n- `spotify.playback.control` (dangerous-ish)\n\nPolicy guidance:\n- Some orgs may require approval for playback control in certain zones.\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- For control operations:\n  - receipts + audit events include device id + action (no track names)\n  - handle “Premium required” as a typed denial (not a generic error)\n\n## Deliverables\n- Operation schemas:\n  - `spotify.playback.get_state`\n  - `spotify.playback.devices.list`\n  - `spotify.playback.play`\n  - `spotify.playback.pause`\n  - `spotify.playback.next/previous`\n  - `spotify.playback.seek`\n  - `spotify.playback.set_volume`\n  - `spotify.playback.transfer`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - control request formation\n  - premium-required error mapping\n  - audit/receipt emission\n\n## Acceptance criteria\n- Playback actions are safe, auditable, and do not leak listening content in logs.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:21:11.036584468-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:41:19.124327514-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-7sv","depends_on_id":"flywheel_connectors-a4dh","type":"parent-child","created_at":"2026-01-15T02:33:41.731385775-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7sv","depends_on_id":"flywheel_connectors-a4dh.1","type":"blocks","created_at":"2026-01-15T04:41:24.248069803-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-7xm","title":"fcp.kubernetes: Rollout status monitoring and history","description":"# fcp.kubernetes: Rollout status monitoring and history (FCP2)\n\n## Goal\nProvide deployment rollout visibility so agents can:\n- monitor rollout progress\n- detect stalled/failed rollouts\n- inspect rollout history\n- optionally trigger rollback (dangerous)\n\n## Scope\n### Read\n- Get rollout status for a deployment.\n- List rollout history/revisions.\n\n### Write (dangerous; optional)\n- Trigger rollback/undo to a previous revision.\n\n## Capability model (illustrative)\n- `k8s.rollout.read`\n- `k8s.rollout.rollback` (dangerous)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- For rollback:\n  - require ApprovalToken when policy dictates (recommended default)\n  - emit receipts + audit events with deployment id + revision\n\n## Deliverables\n- Operation schemas:\n  - `k8s.rollout.status`\n  - `k8s.rollout.history`\n  - Optional: `k8s.rollout.rollback`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - status parsing\n  - watch-based progress updates (bounded)\n  - approval gating for rollback\n\n## Acceptance criteria\n- Rollout monitoring is reliable and safe-by-default.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:14:48.514695981-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:48:08.531338107-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-7xm","depends_on_id":"flywheel_connectors-gxx2","type":"parent-child","created_at":"2026-01-15T02:32:42.604092341-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-7xm","depends_on_id":"flywheel_connectors-gxx2.1","type":"blocks","created_at":"2026-01-15T04:48:14.044283403-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-8bfb","title":"TEST: Bootstrap/Genesis Unit Tests (First-Run, Owner Key Ceremony, Initial Enrollment)","description":"# TEST: Bootstrap/Genesis Unit Tests\n\n## Scope\nComprehensive tests for first-run mesh initialization and owner key ceremony.\n\n## Test Categories\n\n### Owner Key Generation\n- [ ] Ed25519 keypair generation succeeds\n- [ ] Key material never written unencrypted\n- [ ] Public key fingerprint is stable\n- [ ] Key import from external source\n- [ ] Threshold key generation (FROST shares)\n\n### Genesis Object Creation\n- [ ] Genesis AuditEvent is self-referential (prev=self)\n- [ ] Genesis RevocationHead has seq=0\n- [ ] Genesis ZoneCheckpoint binds all heads\n- [ ] All genesis objects are owner-signed\n- [ ] Genesis objects are canonical CBOR\n\n### First Device Enrollment\n- [ ] Node keys generated correctly\n- [ ] NodeKeyAttestation is owner-signed\n- [ ] Node added to z:owner membership\n- [ ] ZoneKeyManifest sealed to new node\n\n### Zone Creation\n- [ ] z:owner created as genesis zone\n- [ ] Additional zones (private/work/community/public) created\n- [ ] Zone policies correctly applied\n- [ ] Cross-zone isolation verified\n\n### Offline Bootstrap\n- [ ] Genesis objects can be created air-gapped\n- [ ] Import via file succeeds\n- [ ] Chain integrity verified on import\n\n## Golden Vectors\nLocation: `tests/vectors/bootstrap/`\n- `genesis_audit_event.cbor`\n- `genesis_revocation_head.cbor`\n- `genesis_zone_checkpoint.cbor`\n- `node_key_attestation.cbor`\n\n## Logging Requirements\n```json\n{\n  \"timestamp\": \"RFC3339\",\n  \"test_name\": \"test_genesis_creation\",\n  \"phase\": \"execute\",\n  \"correlation_id\": \"uuid\",\n  \"genesis_objects\": [\"audit\", \"revocation\", \"checkpoint\"],\n  \"owner_pubkey_fingerprint\": \"...\",\n  \"result\": \"pass\"\n}\n```\n\n## Acceptance Criteria\n- Single-node mesh can be initialized from scratch\n- Second node can be enrolled\n- All genesis objects pass verification\n\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:25:31.779434544-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:25:31.779434544-05:00","labels":["bootstrap","fcp2","mvp","testing","ux"],"dependencies":[{"issue_id":"flywheel_connectors-8bfb","depends_on_id":"flywheel_connectors-atmv","type":"blocks","created_at":"2026-01-15T03:25:37.139198652-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8bfb","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:25:37.224533669-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-8bv","title":"fcp.hubspot: Contact and company management","description":"# fcp.hubspot: Contact and company management (FCP2)\n\n## Goal\nProvide safe, typed access to HubSpot CRM **contacts** and **companies** so agents can:\n- look up existing records\n- create/update records with auditability\n- search with filters without leaking PII\n\n## Scope\n### Contacts\n- Create/get/update/archive contacts.\n- Search by email/name and filter by properties.\n\n### Companies\n- Create/get/update/archive companies.\n- Search by domain/name and filter by properties.\n\n### Associations (minimum)\n- Retrieve basic associations contact↔company.\n\n## Capability model (illustrative)\n- `hubspot.contacts.read`\n- `hubspot.contacts.write` (dangerous-ish: modifies CRM)\n- `hubspot.companies.read`\n- `hubspot.companies.write`\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned to HubSpot API host(s).\n- PII hygiene:\n  - email/phone/address fields are sensitive\n  - avoid logging raw property values\n  - structured logs should include only object ids and property names changed\n- For writes: receipts + audit events required.\n\n## Deliverables\n- Operation schemas:\n  - `hubspot.contact.get`\n  - `hubspot.contact.search`\n  - `hubspot.contact.create`\n  - `hubspot.contact.update`\n  - `hubspot.company.get`\n  - `hubspot.company.search`\n  - `hubspot.company.create`\n  - `hubspot.company.update`\n  - `hubspot.association.get`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - CRUD happy paths\n  - search pagination\n  - property update redaction in logs\n  - capability gating + receipts/audit for writes\n\n## Acceptance criteria\n- Agents can safely manage contacts/companies without leaking PII.\n- All mutations are explicitly capability gated and audited.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:15:02.983165415-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:30:42.837416886-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-8bv","depends_on_id":"flywheel_connectors-hy8v","type":"parent-child","created_at":"2026-01-15T02:29:26.486644975-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8bv","depends_on_id":"flywheel_connectors-hy8v.1","type":"blocks","created_at":"2026-01-15T04:30:46.544096922-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-8egw","title":"fcp.1password - 1Password Credential Management Connector","description":"# fcp.1password - 1Password Credential Management Connector\n\n## Overview\n\nThe `fcp.1password` connector provides secure, centralized credential management for the Flywheel Connector Platform. It enables agents to retrieve, generate, and manage secrets through 1Password's infrastructure, replacing scattered `.env` files with auditable, vault-scoped access.\n\n**Value Score**: 74/100 (Tier 3 - Specialized)\n**Priority**: P2\n\n## Manifest archetypes (closed set)\n- `storage`\n- `operational`\n\n\u003e Interaction patterns (non-archetype): Request/Response (1Password Connect API and/or CLI)\n\n---\n\n## Zone model (FCP2 single-zone)\n- **Single-zone bound**: one connector instance ↔ exactly one `ZoneId` for its lifetime.\n- To separate environments (dev/prod/ops), run **separate connector instances** in **separate zones** with distinct capability grants/policies.\n- Vault isolation is expressed via **ResourceObjects + capability constraints** (vault IDs), not by switching `ZoneId` inside the connector.\n\n## Why This Matters\n\n### The Problem\n- Credentials scattered across `.env` files, config files, and hardcoded values\n- No audit trail for credential access\n- Manual credential rotation is error-prone and inconsistent\n- Agents need secrets to authenticate with other services\n- No centralized revocation capability\n\n### The Solution\n1Password connector provides:\n- **Centralized secret management** - Single source of truth for all credentials\n- **Audit trail** - Every credential access is logged and traceable\n- **Vault isolation** - Credentials scoped by environment, team, or purpose\n- **Credential rotation** - Programmatic rotation with CAAM integration\n- **Secure provisioning** - Agents receive credentials without human intervention\n\n---\n\n## Connector Architecture\n\n### Interaction patterns (non-archetype): Request/Response\n\n```\n┌─────────────────────────────────────────────────────────────────┐\n│                     fcp.1password Connector                      │\n├─────────────────────────────────────────────────────────────────┤\n│                                                                  │\n│  ┌──────────────┐    ┌──────────────┐    ┌──────────────┐       │\n│  │  Item Lookup │    │   Password   │    │    Entry     │       │\n│  │  (Read-Only) │    │  Generation  │    │   Creation   │       │\n│  └──────┬───────┘    └──────┬───────┘    └──────┬───────┘       │\n│         │                   │                   │                │\n│         └───────────────────┼───────────────────┘                │\n│                             ▼                                    │\n│              ┌──────────────────────────────┐                    │\n│              │     Vault Resource Router        │                    │\n│              │  (vault-scoped capability enforcement)       │                    │\n│              └──────────────┬───────────────┘                    │\n│                             │                                    │\n│         ┌───────────────────┼───────────────────┐                │\n│         ▼                   ▼                   ▼                │\n│  ┌────────────┐      ┌────────────┐      ┌────────────┐         │\n│  │ Vault: Dev │      │ Vault: Prod│      │ Vault: Ops │         │\n│  │  (Vault A)  │      │  (Vault B)  │      │  (Vault C)  │         │\n│  └────────────┘      └────────────┘      └────────────┘         │\n│                                                                  │\n└─────────────────────────────────────────────────────────────────┘\n                             │\n                             ▼\n              ┌──────────────────────────────┐\n              │   1Password Connect API      │\n              │        or CLI                │\n              └──────────────────────────────┘\n```\n\n\n\n## Secret handling (FCP2 intent)\n- Prefer **secretless** flows: return `SecretId`/`CredentialId` handles and let the MeshNode egress proxy inject credentials at the network boundary.\n- Avoid returning raw secret bytes to agents. If plaintext export is ever supported, it MUST be explicit, audited, approval-gated, and redacted from logs by default.\n---\n\n## Operations\n\n### 1. Item Lookup (Default: Read-Only)\n\nRetrieve credentials from specified vaults.\n\n```rust\n/// Retrieve a secret item from a vault\npub async fn get_item(\n    \u0026self,\n    vault: \u0026VaultId,\n    item: \u0026ItemRef,\n    fields: Option\u003c\u0026[FieldSelector]\u003e,\n) -\u003e Result\u003cSecretItem, OpError\u003e;\n\n/// Retrieve specific field (e.g., password, username, TOTP)\npub async fn get_field(\n    \u0026self,\n    vault: \u0026VaultId,\n    item: \u0026ItemRef,\n    field: \u0026str,\n) -\u003e Result\u003cSecretValue, OpError\u003e;\n\n/// List items in vault (metadata only, no secrets)\npub async fn list_items(\n    \u0026self,\n    vault: \u0026VaultId,\n    filter: Option\u003cItemFilter\u003e,\n) -\u003e Result\u003cVec\u003cItemMetadata\u003e, OpError\u003e;\n```\n\n### 2. Password Generation\n\nGenerate cryptographically secure passwords.\n\n```rust\n/// Generate a password with specified policy\npub async fn generate_password(\n    \u0026self,\n    policy: \u0026PasswordPolicy,\n) -\u003e Result\u003cGeneratedPassword, OpError\u003e;\n\n/// Password policy configuration\npub struct PasswordPolicy {\n    pub length: u8,           // 8-128 characters\n    pub uppercase: bool,\n    pub lowercase: bool,\n    pub digits: bool,\n    pub symbols: bool,\n    pub exclude_similar: bool, // Exclude 0/O, 1/l/I\n    pub exclude_ambiguous: bool,\n}\n```\n\n### 3. Entry Creation (Write Permission Required)\n\nCreate new credential entries.\n\n```rust\n/// Create a new login item\npub async fn create_login(\n    \u0026self,\n    vault: \u0026VaultId,\n    item: LoginItem,\n) -\u003e Result\u003cItemId, OpError\u003e;\n\n/// Create a secure note\npub async fn create_secure_note(\n    \u0026self,\n    vault: \u0026VaultId,\n    note: SecureNote,\n) -\u003e Result\u003cItemId, OpError\u003e;\n\n/// Create an API credential\npub async fn create_api_credential(\n    \u0026self,\n    vault: \u0026VaultId,\n    credential: ApiCredential,\n) -\u003e Result\u003cItemId, OpError\u003e;\n```\n\n### 4. Vault Organization\n\nManage vault structure and item organization.\n\n```rust\n/// List accessible vaults\npub async fn list_vaults(\u0026self) -\u003e Result\u003cVec\u003cVaultMetadata\u003e, OpError\u003e;\n\n/// Get vault details\npub async fn get_vault(\u0026self, vault: \u0026VaultId) -\u003e Result\u003cVaultInfo, OpError\u003e;\n\n/// Move item between vaults (requires write on both)\npub async fn move_item(\n    \u0026self,\n    item: \u0026ItemId,\n    from_vault: \u0026VaultId,\n    to_vault: \u0026VaultId,\n) -\u003e Result\u003c(), OpError\u003e;\n```\n\n### 5. Secure Note Access\n\nAccess and manage secure notes for configuration data.\n\n```rust\n/// Retrieve secure note content\npub async fn get_secure_note(\n    \u0026self,\n    vault: \u0026VaultId,\n    item: \u0026ItemRef,\n) -\u003e Result\u003cSecureNoteContent, OpError\u003e;\n\n/// Parse secure note as structured config\npub async fn get_note_as_config\u003cT: DeserializeOwned\u003e(\n    \u0026self,\n    vault: \u0026VaultId,\n    item: \u0026ItemRef,\n) -\u003e Result\u003cT, OpError\u003e;\n```\n\n---\n\n## Security Design\n\n### Principle 1: Read-Only by Default\n\n```rust\npub enum VaultPermission {\n    /// Can read items (default)\n    Read,\n    /// Can read and create items\n    ReadWrite,\n    /// Can read, create, and delete items\n    Full,\n}\n\nimpl Default for VaultPermission {\n    fn default() -\u003e Self {\n        VaultPermission::Read\n    }\n}\n```\n\n### Principle 2: Never Expose in Logs\n\n```rust\n/// Secret value wrapper - prevents accidental logging\n#[derive(Clone, Zeroize, ZeroizeOnDrop)]\npub struct SecretValue(String);\n\nimpl std::fmt::Debug for SecretValue {\n    fn fmt(\u0026self, f: \u0026mut std::fmt::Formatter\u003c'_\u003e) -\u003e std::fmt::Result {\n        write!(f, \"SecretValue([REDACTED])\")\n    }\n}\n\nimpl std::fmt::Display for SecretValue {\n    fn fmt(\u0026self, f: \u0026mut std::fmt::Formatter\u003c'_\u003e) -\u003e std::fmt::Result {\n        write!(f, \"[REDACTED]\")\n    }\n}\n\n// Telemetry integration - secrets never appear in spans\nimpl SecretValue {\n    pub fn as_bytes(\u0026self) -\u003e \u0026[u8] {\n        self.0.as_bytes()\n    }\n    \n    /// Expose for actual use - call site is audited\n    pub fn expose_secret(\u0026self) -\u003e \u0026str {\n        \u0026self.0\n    }\n}\n```\n\n### Principle 3: Zone Isolation Per Vault\n\nEach vault operates in its own security zone:\n\n```rust\npub struct VaultZone {\n    pub vault_id: VaultId,\n    pub zone_id: ZoneId,\n    pub permissions: VaultPermission,\n    pub allowed_items: Option\u003cVec\u003cItemPattern\u003e\u003e, // Optional allowlist\n    pub denied_items: Option\u003cVec\u003cItemPattern\u003e\u003e,  // Optional denylist\n}\n\nimpl OnePasswordConnector {\n    /// Access is scoped to zones configured for this connector instance\n    pub fn with_zones(zones: Vec\u003cVaultZone\u003e) -\u003e Self;\n    \n    /// Validate access before any operation\n    fn validate_zone_access(\n        \u0026self,\n        vault: \u0026VaultId,\n        item: Option\u003c\u0026ItemRef\u003e,\n        required_permission: VaultPermission,\n    ) -\u003e Result\u003c(), ZoneViolation\u003e;\n}\n```\n\n### Principle 4: Time-Limited Credential Leases\n\n```rust\n/// Credential with automatic expiration\npub struct CredentialLease {\n    pub value: SecretValue,\n    pub expires_at: DateTime\u003cUtc\u003e,\n    pub lease_id: LeaseId,\n}\n\nimpl CredentialLease {\n    /// Check if lease is still valid\n    pub fn is_valid(\u0026self) -\u003e bool {\n        Utc::now() \u003c self.expires_at\n    }\n    \n    /// Get value only if lease is valid\n    pub fn get(\u0026self) -\u003e Option\u003c\u0026SecretValue\u003e {\n        if self.is_valid() {\n            Some(\u0026self.value)\n        } else {\n            None\n        }\n    }\n}\n\n/// Request a time-limited credential\npub async fn get_leased_credential(\n    \u0026self,\n    vault: \u0026VaultId,\n    item: \u0026ItemRef,\n    ttl: Duration,\n) -\u003e Result\u003cCredentialLease, OpError\u003e;\n```\n\n---\n\n## Flywheel Synergy\n\n### CAAM Integration (Credential Rotation)\n\n```rust\n/// CAAM uses 1Password as credential source for rotation\nimpl CredentialSource for OnePasswordConnector {\n    async fn get_current_credential(\n        \u0026self,\n        service: \u0026ServiceId,\n    ) -\u003e Result\u003cCredential, CredentialError\u003e;\n    \n    async fn store_rotated_credential(\n        \u0026self,\n        service: \u0026ServiceId,\n        credential: \u0026Credential,\n    ) -\u003e Result\u003c(), CredentialError\u003e;\n    \n    async fn get_rotation_history(\n        \u0026self,\n        service: \u0026ServiceId,\n        limit: usize,\n    ) -\u003e Result\u003cVec\u003cRotationRecord\u003e, CredentialError\u003e;\n}\n```\n\n### Connector Provisioning\n\nAll connectors can use 1Password for secure credential provisioning:\n\n```rust\n/// Example: GitHub connector getting its token from 1Password\nimpl GitHubConnector {\n    pub async fn from_1password(\n        op: \u0026OnePasswordConnector,\n        vault: \u0026VaultId,\n        item: \u0026str,\n    ) -\u003e Result\u003cSelf, ConnectorError\u003e {\n        let token = op.get_field(vault, \u0026item.into(), \"credential\").await?;\n        Ok(Self::new(token))\n    }\n}\n\n/// Generic provisioning for any connector\npub trait SecretProvisioned: Sized {\n    async fn provision_from_1password(\n        op: \u0026OnePasswordConnector,\n        vault: \u0026VaultId,\n        config_item: \u0026str,\n    ) -\u003e Result\u003cSelf, ProvisionError\u003e;\n}\n```\n\n---\n\n## Zone Architecture\n\n\u003c!-- fcp2-single-zone-note --\u003e\n**FCP2 single-zone binding note:** A connector instance binds to exactly one `ZoneId` for its entire lifetime.\nThe *\"zones\"* described in this section are a **recommended deployment pattern** (run separate connector instances in separate zones with different capability grants/policies) and/or conceptual risk tiers.\nThe connector MUST NOT multiplex multiple zones internally.\n\n\n### Per-Vault Isolation\n\n```\n┌─────────────────────────────────────────────────────────────┐\n│                    Zone Configuration                        │\n├─────────────────────────────────────────────────────────────┤\n│                                                              │\n│  Zone: development                                           │\n│  ├── Vault: dev-credentials (read-write)                    │\n│  ├── Vault: dev-api-keys (read-only)                        │\n│  └── Vault: shared-tools (read-only)                        │\n│                                                              │\n│  Zone: production                                            │\n│  ├── Vault: prod-credentials (read-only)                    │\n│  ├── Vault: prod-secrets (read-only, item allowlist)        │\n│  └── Vault: emergency-access (read-only, audit-required)    │\n│                                                              │\n│  Zone: operations                                            │\n│  ├── Vault: rotation-staging (read-write)                   │\n│  └── Vault: service-accounts (read-only)                    │\n│                                                              │\n└─────────────────────────────────────────────────────────────┘\n```\n\n### Permission Matrix\n\n| Zone | Vault | Read | Write | Delete | Audit |\n|------|-------|------|-------|--------|-------|\n| development | dev-credentials | Y | Y | N | N |\n| development | dev-api-keys | Y | N | N | N |\n| production | prod-credentials | Y | N | N | Y |\n| production | prod-secrets | Y* | N | N | Y |\n| operations | rotation-staging | Y | Y | Y | Y |\n\n*Allowlist restricted\n\n---\n\n## Dependencies\n\n### Required Crates\n\n```toml\n[dependencies]\nfcp-core = { path = \"../fcp-core\" }\nfcp-telemetry = { path = \"../fcp-telemetry\" }\n\n# 1Password integration\n# Option A: Connect API\nreqwest = { version = \"0.11\", features = [\"json\", \"rustls-tls\"] }\n\n# Option B: CLI wrapper\ntokio = { version = \"1\", features = [\"process\"] }\n\n# Security\nzeroize = { version = \"1.7\", features = [\"derive\"] }\nsecrecy = \"0.8\"\n\n# Serialization\nserde = { version = \"1\", features = [\"derive\"] }\nserde_json = \"1\"\n```\n\n### Dependency Graph\n\n```\nfcp.1password\n├── fcp-core (connector traits, error types)\n├── fcp-telemetry (audit logging, tracing)\n├── zeroize (secret memory cleanup)\n└── secrecy (secret value handling)\n```\n\n---\n\n## Implementation Notes\n\n### Integration Options\n\n#### Option A: 1Password Connect API (Recommended for Production)\n\n```rust\npub struct ConnectApiClient {\n    base_url: Url,\n    token: SecretValue,\n    client: reqwest::Client,\n}\n\nimpl ConnectApiClient {\n    /// Connect API is a self-hosted server\n    pub fn new(connect_url: \u0026str, token: SecretValue) -\u003e Self;\n    \n    /// All operations go through REST API\n    pub async fn request\u003cT: DeserializeOwned\u003e(\n        \u0026self,\n        method: Method,\n        path: \u0026str,\n        body: Option\u003c\u0026impl Serialize\u003e,\n    ) -\u003e Result\u003cT, ApiError\u003e;\n}\n```\n\n**Pros**: Self-hosted, no CLI dependency, better for containers\n**Cons**: Requires Connect server deployment\n\n#### Option B: 1Password CLI Integration\n\n```rust\npub struct CliClient {\n    op_path: PathBuf,\n    service_account_token: SecretValue,\n}\n\nimpl CliClient {\n    /// Use service account for authentication\n    pub fn with_service_account(token: SecretValue) -\u003e Self;\n    \n    /// Execute op command\n    async fn exec(\u0026self, args: \u0026[\u0026str]) -\u003e Result\u003cString, CliError\u003e;\n}\n```\n\n**Pros**: Simpler setup, no server needed\n**Cons**: CLI must be installed, process overhead\n\n### Service Account Configuration\n\n```rust\n/// Service account provides non-interactive authentication\npub struct ServiceAccountConfig {\n    /// Token from 1Password (OP_SERVICE_ACCOUNT_TOKEN)\n    pub token: SecretValue,\n    \n    /// Vaults this service account can access\n    pub allowed_vaults: Vec\u003cVaultId\u003e,\n    \n    /// Permission level\n    pub permission: ServiceAccountPermission,\n}\n\npub enum ServiceAccountPermission {\n    /// Can only read items\n    Read,\n    /// Can read and create/update items\n    ReadWrite,\n}\n```\n\n### Vault Scoping\n\n```rust\n/// Scope connector to specific vaults\npub struct VaultScope {\n    /// Vault identifier (name or UUID)\n    pub vault: VaultId,\n    \n    /// Optional: restrict to specific categories\n    pub categories: Option\u003cVec\u003cItemCategory\u003e\u003e,\n    \n    /// Optional: restrict to items matching pattern\n    pub item_pattern: Option\u003cRegex\u003e,\n}\n\nimpl OnePasswordConnector {\n    /// Create connector with vault restrictions\n    pub fn scoped(scopes: Vec\u003cVaultScope\u003e) -\u003e Self;\n}\n```\n\n---\n\n## Configuration\n\n### Environment Variables\n\n```bash\n# Required: Service account token\nOP_SERVICE_ACCOUNT_TOKEN=ops_xxx...\n\n# For Connect API\nOP_CONNECT_HOST=https://connect.example.com:8443\nOP_CONNECT_TOKEN=eyJhbGc...\n\n# Optional: CLI path (if not in PATH)\nOP_CLI_PATH=/usr/local/bin/op\n```\n\n### Connector Configuration\n\n```toml\n[connector.1password]\n# Integration method\nmethod = \"connect_api\"  # or \"cli\"\n\n# Connect API settings\nconnect_host = \"https://connect.internal:8443\"\n\n# Vault configuration\n[connector.1password.vaults.development]\nid = \"dev-vault-uuid\"\npermission = \"read_write\"\n\n[connector.1password.vaults.production]\nid = \"prod-vault-uuid\"\npermission = \"read\"\nallowed_items = [\"api-*\", \"service-*\"]\n\n# Lease defaults\n[connector.1password.leases]\ndefault_ttl = \"1h\"\nmax_ttl = \"24h\"\n```\n\n---\n\n## Error Handling\n\n```rust\n#[derive(Debug, thiserror::Error)]\npub enum OpError {\n    #[error(\"vault not found: {0}\")]\n    VaultNotFound(VaultId),\n    \n    #[error(\"item not found: {0} in vault {1}\")]\n    ItemNotFound(ItemRef, VaultId),\n    \n    #[error(\"field not found: {0}\")]\n    FieldNotFound(String),\n    \n    #[error(\"permission denied: {required:?} access to {vault}\")]\n    PermissionDenied {\n        vault: VaultId,\n        required: VaultPermission,\n    },\n    \n    #[error(\"zone violation: {0}\")]\n    ZoneViolation(ZoneViolation),\n    \n    #[error(\"lease expired: {0}\")]\n    LeaseExpired(LeaseId),\n    \n    #[error(\"authentication failed\")]\n    AuthenticationFailed,\n    \n    #[error(\"rate limited, retry after {retry_after:?}\")]\n    RateLimited { retry_after: Duration },\n    \n    #[error(\"1password api error: {0}\")]\n    ApiError(#[from] ApiError),\n}\n```\n\n---\n\n## Telemetry Integration\n\n```rust\n/// All operations emit structured telemetry\n#[instrument(\n    skip(self),\n    fields(\n        vault = %vault,\n        item = %item,\n        // Never log the actual secret value\n        otel.kind = \"client\"\n    )\n)]\npub async fn get_item(\n    \u0026self,\n    vault: \u0026VaultId,\n    item: \u0026ItemRef,\n) -\u003e Result\u003cSecretItem, OpError\u003e {\n    // Emit audit event\n    self.telemetry.audit_event(AuditEvent::CredentialAccess {\n        vault: vault.clone(),\n        item: item.clone(),\n        accessor: self.identity.clone(),\n        timestamp: Utc::now(),\n    });\n    \n    // ... implementation\n}\n```\n\n---\n\n## Testing Strategy\n\n```rust\n#[cfg(test)]\nmod tests {\n    use super::*;\n    use fcp_core::testing::MockVault;\n    \n    #[tokio::test]\n    async fn test_get_item_read_only() {\n        let mock = MockVault::new()\n            .with_item(\"api-key\", \"secret-value\")\n            .with_permission(VaultPermission::Read);\n        \n        let connector = OnePasswordConnector::with_mock(mock);\n        let item = connector.get_item(\u0026\"test-vault\".into(), \u0026\"api-key\".into()).await;\n        \n        assert!(item.is_ok());\n    }\n    \n    #[tokio::test]\n    async fn test_write_denied_on_readonly() {\n        let mock = MockVault::new()\n            .with_permission(VaultPermission::Read);\n        \n        let connector = OnePasswordConnector::with_mock(mock);\n        let result = connector.create_login(\u0026\"test-vault\".into(), login).await;\n        \n        assert!(matches!(result, Err(OpError::PermissionDenied { .. })));\n    }\n    \n    #[tokio::test]\n    async fn test_secret_not_in_debug() {\n        let secret = SecretValue::new(\"super-secret\");\n        let debug = format!(\"{:?}\", secret);\n        \n        assert!(!debug.contains(\"super-secret\"));\n        assert!(debug.contains(\"REDACTED\"));\n    }\n}\n```\n\n---\n\n## Implementation Phases\n\n### Phase 1: Core Read Operations\n- [ ] 1Password CLI integration\n- [ ] Item lookup by vault/item reference\n- [ ] Field extraction\n- [ ] SecretValue wrapper with zeroize\n\n### Phase 2: Security Hardening\n- [ ] Vault zone isolation\n- [ ] Permission validation\n- [ ] Telemetry/audit integration\n- [ ] Credential leases\n\n### Phase 3: Write Operations\n- [ ] Password generation\n- [ ] Entry creation\n- [ ] Secure note management\n\n### Phase 4: Flywheel Integration\n- [ ] CAAM credential source trait\n- [ ] Connector provisioning helpers\n- [ ] Connect API support (production)\n\n---\n\n## Related Beads\n\n- `fcp-core` - Base connector traits and error types\n- `fcp-telemetry` - Audit logging and tracing\n- `fcp.caam` - Credential rotation integration\n- `fcp.vault` - Alternative: HashiCorp Vault connector\n\n---\n\n*This bead defines the 1Password connector for centralized credential management in the Flywheel ecosystem.*\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T22:00:19.779265302-05:00","created_by":"ubuntu","updated_at":"2026-01-15T07:41:50.217363568-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-8egw","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T22:08:21.616862655-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-8egw","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:35:00.262651238-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8egw","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T07:09:04.375039115-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8egw","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T07:09:04.791899271-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8egw","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T07:09:05.203992691-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8egw","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T07:09:05.62286464-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8egw","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T07:09:06.047486578-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8egw","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T07:09:06.45431338-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8egw","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:09:06.875044083-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-8egw.1","title":"fcp.1password: Manifest + Capability Map (FCP2)","description":"## Goal\nProduce the full FCP2 manifest and capability map for this connector.\n\nThis bead is where we translate the connector’s functional surface (operations) into a **mechanically checkable** contract:\n- operation schemas + schema IDs\n- capability families per operation\n- per-operation NetworkConstraints (default deny)\n- sandbox profile requirements\n- declared state model (stateless / singleton_writer / crdt)\n\n## Required content (must be explicit)\n- Operation list is exhaustive and stable for the current phase.\n- Capability IDs DO NOT encode hostnames/ports.\n- NetworkConstraints are minimal and per-operation.\n- Risk tier for each operation (Safe / Dangerous).\n- Explicit bounds: timeouts, max response sizes, pagination limits.\n\n## Tests\n- Add good/bad manifest examples for the compliance runner.\n\n## Acceptance Criteria\n- Passes static checks in `flywheel_connectors-1n78.21.5`.\n- Default-deny is enforced by manifest + capability requirements.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:05.818097055-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:12:05.818097055-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-8egw.1","depends_on_id":"flywheel_connectors-8egw","type":"parent-child","created_at":"2026-01-15T07:12:05.874566469-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-8egw.2","title":"fcp.1password: Provisioning Automation","description":"## Goal\nAutomate provisioning and configuration with minimal human steps.\n\nThis bead owns:\n- auth setup (OAuth / API keys / webhook secrets) via `CredentialObject`/`CredentialId` (egress proxy injection preferred)\n- endpoint configuration\n- `fcp doctor` readiness checks\n- deterministic, mockable provisioning flows\n\n## FCP2 requirements\n- Secrets never touch disk.\n- Provisioning is deterministic and testable.\n- Error messages are actionable and do not leak secrets/PII.\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Provisioning emits structured logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:06.3811829-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:52.579007106-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-8egw.2","depends_on_id":"flywheel_connectors-8egw","type":"parent-child","created_at":"2026-01-15T07:12:06.439437478-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8egw.2","depends_on_id":"flywheel_connectors-8egw.1","type":"blocks","created_at":"2026-01-15T07:12:06.953453248-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-8egw.3","title":"TEST: fcp.1password Unit/Integration Tests (mock-only)","description":"## Goal\nMock-only unit/integration tests for this connector.\n\n## Required coverage\n- schema validation (inputs + outputs)\n- error taxonomy mapping (retry semantics)\n- pagination and bounds\n- rate limit behavior\n- redaction (no token/secret/PII leakage)\n- idempotency + receipts for Dangerous operations\n\n## Logging\nAll tests emit structured JSON logs per `flywheel_connectors-1n78.35`.\n\n## Acceptance Criteria\n- Deterministic tests; no live external calls.\n- Includes adversarial cases (timeouts, malformed responses, partial failures).\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:07.465903266-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:12:07.465903266-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-8egw.3","depends_on_id":"flywheel_connectors-8egw","type":"parent-child","created_at":"2026-01-15T07:12:07.524444766-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8egw.3","depends_on_id":"flywheel_connectors-8egw.1","type":"blocks","created_at":"2026-01-15T07:12:08.021612705-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8egw.3","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:12:08.519556747-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8egw.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T07:32:11.536447751-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-8egw.4","title":"E2E: fcp.1password Connector Compliance Run","description":"## Goal\nRun the shared connector compliance runner and capture an evidence bundle.\n\n## Must validate\n- handshake + introspection correctness\n- default deny (no CapabilityToken → deny + DecisionReceipt)\n- NetworkConstraints enforcement\n- receipts/audit for Dangerous operations\n- structured logs\n\n## Acceptance Criteria\n- E2E run is deterministic and produces a stable artifact bundle.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:08.936663738-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:12:08.936663738-05:00","labels":["connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-8egw.4","depends_on_id":"flywheel_connectors-8egw","type":"parent-child","created_at":"2026-01-15T07:12:08.993420033-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8egw.4","depends_on_id":"flywheel_connectors-8egw.1","type":"blocks","created_at":"2026-01-15T07:12:09.48224312-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8egw.4","depends_on_id":"flywheel_connectors-8egw.2","type":"blocks","created_at":"2026-01-15T07:12:09.970611982-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8egw.4","depends_on_id":"flywheel_connectors-8egw.3","type":"blocks","created_at":"2026-01-15T07:12:10.552399001-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8egw.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T07:12:11.124432032-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-8oe","title":"fcp.hubspot: Email tracking and sequences","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:15:53.625788349-05:00","created_by":"ubuntu","updated_at":"2026-01-11T12:31:33.752203399-05:00","closed_at":"2026-01-11T12:31:33.752203399-05:00","close_reason":"CONSOLIDATED: All HubSpot sub-features merged into comprehensive parent connector bead flywheel_connectors-hy8v (fcp.hubspot: HubSpot CRM \u0026 Marketing Platform Connector)"}
{"id":"flywheel_connectors-8qx","title":"fcp.reddit: Moderation Actions","description":"# fcp.reddit: Moderation Actions (FCP2)\n\n## Goal\nExpose a tightly-controlled moderation surface for moderators:\n- approve/remove content\n- manage mod queue\n- ban/mute users (optional)\n\nThese actions are high-blast-radius and must be policy + approval gated.\n\n## Scope\n- List modqueue/reports.\n- Approve/remove a post/comment.\n- Optional: ban user (requires strict policy).\n\n## Capability model (illustrative)\n- `reddit.mod.read`\n- `reddit.mod.write` (dangerous)\n- Optional: `reddit.mod.ban` (critical)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- For any moderation write:\n  - require ApprovalToken when policy dictates (recommended default)\n  - receipts + audit events include thing_id + action + reason (sanitized)\n- Avoid logging raw user content.\n\n## Deliverables\n- Operation schemas:\n  - `reddit.mod.queue.list`\n  - `reddit.mod.approve`\n  - `reddit.mod.remove`\n  - Optional: `reddit.mod.ban_user`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - approval gating\n  - audit/receipt emission\n  - forbidden/permission errors\n\n## Acceptance criteria\n- Moderation actions are mechanically authorized and auditable.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:21:22.049835032-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:39:57.651131315-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-8qx","depends_on_id":"flywheel_connectors-xz6e","type":"parent-child","created_at":"2026-01-15T02:33:59.198335087-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8qx","depends_on_id":"flywheel_connectors-xz6e.1","type":"blocks","created_at":"2026-01-15T04:40:01.880109976-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-8ss","title":"Add unit tests for Telegram connector","description":"Add comprehensive unit tests for the Telegram connector using wiremock for HTTP mocking. Test: send_message, get_file, get_updates, error handling, rate limiting.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-11T09:37:28.344032667-05:00","created_by":"ubuntu","updated_at":"2026-01-11T09:43:49.71391649-05:00","closed_at":"2026-01-11T09:43:49.71391649-05:00","close_reason":"Added 12 unit tests for TelegramClient covering get_me, send_message, get_updates, get_file, and error handling"}
{"id":"flywheel_connectors-8tv","title":"fcp.kubernetes: Zone architecture for prod safety (dev/staging/prod isolation)","description":"# fcp.kubernetes: Zone architecture for prod safety (dev/staging/prod isolation) (FCP2)\n\n## Goal\nDefine a safe-by-default zone strategy for Kubernetes operations, especially production.\n\nImportant: the connector instance is **single-zone bound**. “Dev/staging/prod isolation” is achieved by deploying separate connector instances bound to separate zones and pinned to separate cluster API hosts.\n\n## Scope\n- Recommended zone naming patterns (policy-owned):\n  - `z:work:k8s:dev:\u003ccluster\u003e`\n  - `z:work:k8s:staging:\u003ccluster\u003e`\n  - `z:work:k8s:prod:\u003ccluster\u003e`\n- Capability tiering guidance:\n  - readonly vs deploy vs exec\n  - forbid deletes in prod by default\n- Approval guidance:\n  - prod deploy and exec should require ApprovalToken\n\n## Deliverables\n- Documented default policy expectations (reason codes + deny-by-default rules) referenced by connector operations.\n- Clear mapping between zone policy and Kubernetes RBAC contexts.\n\n## Test strategy (MUST)\n- Policy-oriented tests (mock-only) verifying:\n  - prod zone denies mutations by default\n  - approval gating required for exec/deploy\n\n## Acceptance criteria\n- A user can set up three connector instances and be mechanically confident prod is protected.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:14:50.257115217-05:00","created_by":"ubuntu","updated_at":"2026-01-15T07:23:29.864125464-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-8tv","depends_on_id":"flywheel_connectors-gxx2","type":"parent-child","created_at":"2026-01-15T02:32:42.682236919-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8tv","depends_on_id":"flywheel_connectors-gxx2.1","type":"blocks","created_at":"2026-01-15T04:46:17.370160166-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-8v34","title":"TEST: Enrollment Unit Tests (DeviceEnrollment, NodeKeyAttestation, Removal Workflow)","description":"# TEST: Enrollment Unit Tests\n\n## Goal\nProve that device enrollment and removal work correctly and securely.\n\n## Test Categories\n\n### DeviceEnrollment Object\n- [ ] Valid enrollment parses correctly\n- [ ] Owner signature verifies\n- [ ] Tailscale node_id binding correct\n- [ ] Authorized tags match\n- [ ] Expiry (if present) enforced\n- [ ] Malformed enrollment rejected\n\n### NodeKeyAttestation\n- [ ] Attestation binds node_id to pubkeys\n- [ ] signing_pubkey correctly attested\n- [ ] encryption_pubkey correctly attested\n- [ ] issuance_pubkey correctly attested\n- [ ] KID mappings correct\n- [ ] Owner signature verifies\n- [ ] Attestation expiry enforced\n\n### Enrollment Flow\n- [ ] New node can enroll with valid enrollment object\n- [ ] Enrolled node receives zone keys (ZoneKeyManifest)\n- [ ] Enrolled node can participate in sessions\n- [ ] Enrolled node appears in peer discovery\n\n### Key Rotation\n- [ ] Node can rotate its keys\n- [ ] New attestation replaces old\n- [ ] Old KIDs become invalid\n- [ ] Sessions using old keys gracefully terminated\n\n### Device Removal\n- [ ] Removal revokes enrollment object\n- [ ] Removal revokes attestation\n- [ ] Removal revokes issuer keys\n- [ ] Tokens from removed node rejected\n- [ ] Zone keys rotated after removal\n- [ ] Removed node cannot participate\n\n### Attack Scenarios (Adversarial)\n- [ ] Replay old enrollment: rejected (revoked or expired)\n- [ ] Forge enrollment: invalid owner signature rejected\n- [ ] Use removed node keys: rejected after revocation propagates\n- [ ] Impersonate node_id: attestation signature check fails\n\n## Golden Vectors\n- Valid DeviceEnrollment bytes\n- Valid NodeKeyAttestation bytes\n- Removal workflow sequence\n\n## Integration Tests\n- [ ] Full enrollment → operation → removal cycle\n- [ ] Multi-node enrollment\n- [ ] Concurrent enrollment attempts\n\n## Logging Requirements\n```json\n{\n  \"test_name\": \"...\",\n  \"node_id\": \"...\",\n  \"operation\": \"enroll|attest|rotate|remove\",\n  \"result\": \"pass|fail\",\n  \"reason_code\": \"...\"\n}\n```\n\n## Acceptance Criteria\n- Enrollment flow works end-to-end\n- Removal flow invalidates all node authority\n- No stale credentials accepted after removal\n\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:09:45.172277422-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:09:45.172277422-05:00","labels":["enrollment","fcp2","mvp","security","testing"],"dependencies":[{"issue_id":"flywheel_connectors-8v34","depends_on_id":"flywheel_connectors-1n78.32","type":"blocks","created_at":"2026-01-15T03:23:26.947531498-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8v34","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:23:46.596425567-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-8w4","title":"fcp.kubernetes: Exec into pods for debugging and maintenance","description":"# fcp.kubernetes: Exec into pods for debugging and maintenance (FCP2)\n\n## Goal\nProvide a controlled exec surface for debugging:\n- run a constrained command in a container\n\nExec is **high risk** (arbitrary code execution in prod). Must be approval gated and heavily audited.\n\n## Scope\n- Start an exec session with:\n  - explicit namespace/pod/container\n  - explicit command allowlist (policy-owned)\n  - explicit timeout\n- Capture session transcript metadata (not raw output by default).\n\n## Capability model (illustrative)\n- `k8s.exec` (critical)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- Approval gating recommended default for exec.\n- Audit:\n  - emit OperationReceipt + AuditEvent including command hash + targets\n  - never log secrets/output by default\n\n## Deliverables\n- Operation schemas:\n  - `k8s.exec.start`\n  - `k8s.exec.status`\n  - `k8s.exec.cancel`\n- Safety layer:\n  - deny interactive shells by default\n  - deny dangerous commands unless explicitly allowed\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - allowlist enforcement\n  - approval gating\n  - audit/receipt emission\n\n## Acceptance criteria\n- Exec cannot run without explicit authorization and is fully auditable.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:14:46.977742557-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:47:02.256019734-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-8w4","depends_on_id":"flywheel_connectors-gxx2","type":"parent-child","created_at":"2026-01-15T02:32:42.760344427-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8w4","depends_on_id":"flywheel_connectors-gxx2.1","type":"blocks","created_at":"2026-01-15T04:47:07.835904402-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-8yxg","title":"fcp.arxiv: Research Literature and Paper Access Connector","description":"# fcp.arxiv - Research Literature and Paper Access Connector\n\n## Overview\n\nComprehensive arXiv connector enabling AI agents to search, retrieve, and analyze research papers from the world's largest open-access preprint repository. Provides semantic and keyword search, citation graph traversal, full-text extraction, and new paper monitoring for research automation workflows.\n\n## Strategic Importance\n\n**Value Score: 83/100** (Tier 3 - Specialized vertical connector)\n\n### Why This Matters\n- **Knowledge acquisition** - Access to 2M+ papers across physics, math, CS, biology\n- **Literature review automation** - Systematic paper discovery and summarization\n- **Citation network analysis** - Understand research influence and trends\n- **Real-time monitoring** - Track new papers in specific research areas\n- **Academic workflow integration** - Bridge between AI agents and research literature\n\n### Flywheel Ecosystem Synergy\n- **CASS**: Index papers as searchable knowledge chunks with embeddings\n- **CM (Concept Mesh)**: Extract and map research concepts, methodologies, findings\n- **fcp.pdf**: Deep full-text extraction from PDF papers\n- **fcp.semantic_scholar**: Cross-reference with broader citation data\n- **Research agents**: Automated literature reviews, paper summarization\n\n## Manifest archetypes (closed set)\n\n- `knowledge`\n- `operational`\n- `streaming`\n\n\u003e Interaction patterns (non-archetype): Request/Response + Polling (monitoring -\u003e Streaming events)\n\n| Pattern | Use Case |\n|---------|----------|\n| Request-Response | Paper search, metadata fetch, citation lookup |\n| Polling | Monitor new submissions by category/keyword |\n\n## Key Operations\n\n### Search Operations\n- `arxiv.search.keyword` - Keyword/title/author search with filters\n- `arxiv.search.semantic` - Semantic similarity search (requires embedding)\n- `arxiv.search.advanced` - Boolean query with field operators\n- `arxiv.search.by_author` - Papers by specific author(s)\n- `arxiv.search.by_category` - Papers in arXiv category (cs.AI, math.CO, etc.)\n- `arxiv.search.by_date` - Papers submitted in date range\n- `arxiv.search.citations_of` - Papers citing a given paper\n\n### Paper Retrieval\n- `arxiv.paper.get` - Get paper metadata by arXiv ID\n- `arxiv.paper.abstract` - Get abstract text only\n- `arxiv.paper.pdf_url` - Get PDF download URL\n- `arxiv.paper.source_url` - Get LaTeX source URL\n- `arxiv.paper.versions` - List paper versions/revisions\n- `arxiv.paper.comments` - Get author comments field\n\n### Full-Text Operations\n- `arxiv.paper.pdf.download` - Download PDF to temp storage\n- `arxiv.paper.pdf.extract_text` - Extract plain text from PDF\n- `arxiv.paper.pdf.extract_sections` - Parse into sections (abstract, intro, etc.)\n- `arxiv.paper.latex.download` - Download LaTeX source\n- `arxiv.paper.latex.parse` - Parse LaTeX structure\n- `arxiv.paper.equations` - Extract mathematical equations\n- `arxiv.paper.figures` - Extract figure captions and references\n\n### Citation Operations\n- `arxiv.citations.get` - Get papers citing this paper\n- `arxiv.references.get` - Get papers this paper references\n- `arxiv.citations.graph` - Build citation subgraph\n- `arxiv.citations.count` - Get citation count (via external API)\n- `arxiv.author.h_index` - Compute author h-index\n\n### Author Operations\n- `arxiv.author.papers` - All papers by author name/ID\n- `arxiv.author.coauthors` - Find frequent collaborators\n- `arxiv.author.topics` - Infer author research topics\n- `arxiv.author.affiliations` - Extract author affiliations\n\n### Category/Topic Operations\n- `arxiv.categories.list` - List all arXiv categories\n- `arxiv.category.recent` - Recent papers in category\n- `arxiv.category.trending` - High-engagement papers in category\n- `arxiv.topics.extract` - Extract topics/keywords from paper\n- `arxiv.topics.classify` - Classify paper into topics\n\n### Monitoring Operations\n- `arxiv.monitor.create` - Create new paper alert\n- `arxiv.monitor.list` - List active monitors\n- `arxiv.monitor.delete` - Remove monitor\n- `arxiv.monitor.check` - Check for new matching papers\n- `arxiv.feed.daily` - Daily digest of new papers by query\n\n## Paper Data Model\n\n```rust\npub struct ArxivPaper {\n    pub id: ArxivId,              // \"2301.12345\" or \"hep-th/9901001\"\n    pub title: String,\n    pub authors: Vec\u003cAuthor\u003e,\n    pub abstract_text: String,\n    pub categories: Vec\u003cCategory\u003e,  // Primary + secondary categories\n    pub primary_category: Category,\n    pub published: DateTime\u003cUtc\u003e,\n    pub updated: DateTime\u003cUtc\u003e,\n    pub doi: Option\u003cString\u003e,\n    pub journal_ref: Option\u003cString\u003e,\n    pub comment: Option\u003cString\u003e,     // Author comments (page count, etc.)\n    pub pdf_url: Url,\n    pub abs_url: Url,\n}\n\npub struct Author {\n    pub name: String,\n    pub affiliation: Option\u003cString\u003e,\n    pub orcid: Option\u003cString\u003e,\n}\n\npub struct Category {\n    pub code: String,     // \"cs.AI\", \"math.CO\", \"hep-th\"\n    pub name: String,     // \"Artificial Intelligence\"\n    pub archive: String,  // \"cs\", \"math\", \"hep-th\"\n}\n\npub struct Citation {\n    pub citing_paper: ArxivId,\n    pub cited_paper: ArxivId,\n    pub context: Option\u003cString\u003e,  // Citation context text\n}\n```\n\n## Search Query Syntax\n\n### Field Operators\n```\nti:\"neural network\"     # Title contains phrase\nau:hinton               # Author name\nabs:transformer         # Abstract contains\ncat:cs.AI               # Category\nall:attention           # Any field\n```\n\n### Boolean Operators\n```\nau:lecun AND ti:deep          # Both conditions\ncat:cs.CV OR cat:cs.LG        # Either category\nau:bengio NOT ti:survey       # Exclusion\n(ti:GAN OR ti:generative) AND cat:cs.CV\n```\n\n### Date Filters\n```\nsubmittedDate:[2024-01-01 TO 2024-12-31]\nlastUpdatedDate:[2024-06-01 TO *]\n```\n\n## Zone Architecture\n\n\u003c!-- fcp2-single-zone-note --\u003e\n**FCP2 single-zone binding note:** A connector instance binds to exactly one `ZoneId` for its entire lifetime.\nThe *\"zones\"* described in this section are a **recommended deployment pattern** (run separate connector instances in separate zones with different capability grants/policies) and/or conceptual risk tiers.\nThe connector MUST NOT multiplex multiple zones internally.\n\n\n```\nZone 0 (Public):     All arXiv papers (open access)\nZone 1 (Authorized): User-specific monitors and alerts\nZone 2 (Private):    Downloaded PDFs, extracted text cache\nZone 3 (Sensitive):  N/A (arXiv is fully open access)\n```\n\n### Capability Mapping\n| Capability | Zone | Risk Level | Description |\n|------------|------|------------|-------------|\n| `arxiv.search` | 0 | Low | Search papers |\n| `arxiv.paper.read` | 0 | Low | Read paper metadata |\n| `arxiv.paper.download` | 0 | Low | Download PDF/source |\n| `arxiv.paper.extract` | 2 | Low | Extract text from PDF |\n| `arxiv.monitor` | 1 | Low | Manage paper alerts |\n| `arxiv.citation.traverse` | 0 | Low | Citation graph ops |\n\n## Dependencies\n\n### Required FCP Crates\n- `fcp-core`: Base connector traits, zone management, provenance\n- `fcp-ratelimit`: Rate limit enforcement (critical for arXiv)\n- `fcp-telemetry`: Metrics, logging, tracing\n\n### External Crates\n- `reqwest`: HTTP client for API calls\n- `roxmltree`: Atom/XML response parsing\n- `pdf-extract` or `pdfium`: PDF text extraction\n- `tex-parser`: LaTeX parsing (optional)\n- `chrono`: DateTime handling\n\n### Integration Dependencies\n- `fcp.pdf`: Advanced PDF processing (delegate heavy extraction)\n- External: Semantic Scholar API for citation counts\n\n## Implementation Notes\n\n### arXiv API Specifics\n- **Base URL**: `http://export.arxiv.org/api/query`\n- **Format**: Atom XML responses\n- **Rate Limit**: **3 requests/second** (strictly enforced, aggressive)\n- **Batch Size**: Max 2000 results per query\n- **Pagination**: `start` and `max_results` parameters\n- **Sort Options**: `relevance`, `lastUpdatedDate`, `submittedDate`\n\n### Rate Limiting Strategy\n```rust\npub struct ArxivRateLimiter {\n    requests_per_second: f64,  // 3.0\n    min_interval_ms: u64,      // 334ms between requests\n    burst_allowance: u32,      // Allow 1-2 burst requests\n}\n```\n\n**Critical**: arXiv will temporarily ban IPs that exceed rate limits. Implement:\n- Token bucket with 3 tokens/sec refill\n- Exponential backoff on 429 responses\n- Request queue with priority (interactive \u003e batch)\n- Connection pooling to reduce overhead\n\n### PDF Extraction Pipeline\n```\nDownload PDF → Parse structure → Extract text → Segment sections → Clean/normalize\n      |              |               |                |                  |\n      +--cache------+--pdfium-------+--heuristics---+--headers---------+\n      +--streaming--+--fallback-----+--OCR(rare)----+--refs-extraction-+\n```\n\n### LaTeX Parsing\n```\nDownload .tar.gz → Extract .tex files → Parse structure → Extract content\n       |                 |                    |                 |\n       +--decompress----+--identify-main-----+--sections-------+\n       +--handle-multi--+--resolve-inputs----+--equations------+\n```\n\n### Citation Graph Challenges\n- arXiv API doesn't provide citation data directly\n- Options:\n  1. Parse references from PDF/LaTeX (unreliable)\n  2. Use Semantic Scholar API for citations (recommended)\n  3. Build internal citation index from parsed papers\n\n### Error Handling\n| Code | Meaning | Recovery |\n|------|---------|----------|\n| 400 | Bad Query | Validate query syntax |\n| 403 | Rate Limited | Back off significantly |\n| 404 | Paper Not Found | Paper withdrawn or ID invalid |\n| 500 | Server Error | Retry with backoff |\n| 503 | Overloaded | Wait and retry later |\n\n## Use Case Examples\n\n### 1. Literature Search\n```\nAgent: \"Find papers on X published this year\"\n\n→ arxiv.search.advanced({\n    query: \"all:transformer attention mechanism\",\n    date_from: \"2024-01-01\",\n    categories: [\"cs.CL\", \"cs.AI\"],\n    max_results: 50,\n    sort_by: \"relevance\"\n  })\n```\n\n### 2. Paper Summarization\n```\nAgent: \"Summarize this paper\"\n\n→ arxiv.paper.get({ id: \"2301.12345\" })\n→ arxiv.paper.pdf.extract_sections({ id: \"2301.12345\" })\n→ [Pass sections to LLM for summarization]\n```\n\n### 3. Citation Analysis\n```\nAgent: \"What papers cite this one?\"\n\n→ arxiv.citations.get({ paper_id: \"1706.03762\" })  // Attention paper\n→ Returns: List of citing papers with metadata\n```\n\n### 4. Literature Review\n```\nAgent: \"Build literature review on topic X\"\n\n→ arxiv.search.semantic({ query: \"topic description\", limit: 100 })\n→ arxiv.paper.pdf.extract_sections({ ids: [paper_ids] })\n→ arxiv.citations.graph({ seed_papers: [key_papers] })\n→ [Synthesize into review document]\n```\n\n### 5. New Paper Monitoring\n```\nAgent: \"Monitor arXiv for relevant papers\"\n\n→ arxiv.monitor.create({\n    name: \"LLM Reasoning Papers\",\n    query: \"ti:reasoning AND (ti:LLM OR ti:language model)\",\n    categories: [\"cs.AI\", \"cs.CL\"],\n    frequency: \"daily\"\n  })\n\n[Daily polling checks for new matches]\n```\n\n## Integration Patterns\n\n### CASS Knowledge Indexing\n1. Search/monitor returns new papers\n2. Extract paper sections via `arxiv.paper.pdf.extract_sections`\n3. Generate embeddings for abstract + sections\n4. Store in CASS with paper metadata as provenance\n5. Enable semantic search across indexed research\n\n### Concept Mesh Extraction\n1. Extract key concepts from paper text\n2. Identify methodology, findings, limitations\n3. Map concepts to existing Concept Mesh\n4. Create new concept nodes for novel contributions\n5. Link papers to concepts bidirectionally\n\n### Research Agent Workflow\n```\nQuery → Search arXiv → Filter/rank results → Extract key papers\n                            ↓\n                  Build citation graph\n                            ↓\n           Extract and summarize each paper\n                            ↓\n              Synthesize literature review\n                            ↓\n            Identify gaps and future work\n```\n\n## Testing Strategy\n\n### Unit Tests\n- Query parsing and validation\n- Atom XML response parsing\n- Rate limiter behavior\n- Date range handling\n- arXiv ID format validation\n\n### Integration Tests\n- Mock arXiv API with recorded responses\n- PDF download and extraction\n- Search result pagination\n- Monitor poll scheduling\n\n### E2E Tests (with real API, sandboxed)\n- Search returns valid papers\n- PDF extraction produces text\n- Rate limiting is respected\n- Error handling works correctly\n\n## Performance Considerations\n\n- **Caching**: Cache paper metadata aggressively (papers rarely change)\n- **PDF Caching**: Cache downloaded PDFs with TTL\n- **Batch Operations**: Combine multiple paper lookups when possible\n- **Lazy Loading**: Don't download PDF until text extraction requested\n- **Streaming**: Stream large PDF downloads, don't buffer in memory\n\n## Success Criteria\n- The epic includes (or references) the standard base beads `.1`..`.4` per `flywheel_connectors-lszk.5`.\n- The connector passes `flywheel_connectors-1n78.21.5` (static + dynamic) and has an E2E compliance run wired through `flywheel_connectors-e3i9`.\n- Unit/integration tests are mock-only (no real external calls) and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-11T21:43:33.702665785-05:00","created_by":"ubuntu","updated_at":"2026-01-15T07:39:54.501292564-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-8yxg","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T21:45:07.391173293-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-8yxg","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T21:45:08.069346355-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-8yxg","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:32:11.826603599-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8yxg","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T04:28:08.924137437-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8yxg","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T04:28:09.158181552-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8yxg","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T04:28:09.386257342-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8yxg","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T04:28:09.618139464-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8yxg","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T04:28:09.858973831-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8yxg","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T04:28:10.088592939-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-8yxg.1","title":"fcp.arxiv: Manifest + Capability Map (FCP2)","description":"# fcp.arxiv: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the arXiv connector’s **mechanical manifest contract** under FCP2.\n\n## Required contents\n- Manifest archetypes (closed set):\n  - `knowledge` (search/retrieve papers)\n  - `operational` (monitors/alerts configuration)\n  - `streaming` (polling-backed event stream for new papers)\n- Operation list + schema IDs.\n- Capability families + per-operation required caps.\n- NetworkConstraints:\n  - pin arXiv API hosts\n  - pin PDF download hosts\n  - enforce strict rate limits to avoid bans\n- State model declaration:\n  - monitor cursors/checkpoints for polling\n  - cached metadata rules (must be bounded)\n\n## Acceptance criteria\n- Another engineer can implement `--manifest` from this bead alone.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:27:22.326948489-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:27:22.326948489-05:00","dependencies":[{"issue_id":"flywheel_connectors-8yxg.1","depends_on_id":"flywheel_connectors-8yxg","type":"parent-child","created_at":"2026-01-15T04:27:22.328440099-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8yxg.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T04:27:26.119957329-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8yxg.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T04:27:26.345029481-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-8yxg.2","title":"fcp.arxiv: Provisioning Automation (rate limits, monitors, optional enrichments)","description":"# fcp.arxiv: Provisioning Automation (rate limits, monitors, optional enrichments)\n\n## Goal\nAutomate arXiv connector onboarding with minimal human steps.\n\narXiv is mostly open-access, but provisioning still matters for:\n- rate limiting configuration (avoid IP bans)\n- monitor/alert setup\n- optional enrichments (CASS indexing, semantic search)\n\n## Requirements\n- Configure and validate:\n  - base API host(s)\n  - strict rate limits (token bucket; 3 req/sec baseline)\n- Monitor setup automation:\n  - create/list/delete monitors\n  - store polling checkpoints in connector state (if enabled)\n- Optional enrichment hooks (policy-owned):\n  - CASS indexing configuration\n  - embedding provider selection for semantic search\n\n## Acceptance criteria\n- `fcp doctor` verifies readiness (host reachability + rate limiter sanity) without secrets.\n- Mockable in CI.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:27:35.411196467-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:27:35.411196467-05:00","dependencies":[{"issue_id":"flywheel_connectors-8yxg.2","depends_on_id":"flywheel_connectors-8yxg","type":"parent-child","created_at":"2026-01-15T04:27:35.41275322-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8yxg.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T04:27:39.818521805-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-8yxg.3","title":"TEST: arXiv Connector Unit/Integration Tests (mock-only)","description":"# TEST: arXiv Connector Unit/Integration Tests (mock-only)\n\n## Goal\nMock-only tests for fcp.arxiv covering search, retrieval, PDF/text extraction, and monitor polling logic.\n\n## Requirements\n- No real arXiv calls in CI.\n- Mock endpoints for:\n  - Atom feed search responses\n  - paper metadata fetch\n  - PDF download (streamed)\n- Tests for:\n  - query parsing/validation\n  - pagination correctness\n  - strict rate limiting behavior\n  - PDF extraction pipeline (with fixture PDFs)\n  - monitor checkpoint persistence and replay safety\n\n## Acceptance criteria\n- Deterministic CI suite.\n- Structured JSON logs with correlation_id + reason codes.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:27:47.803013238-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:27:47.803013238-05:00","dependencies":[{"issue_id":"flywheel_connectors-8yxg.3","depends_on_id":"flywheel_connectors-8yxg","type":"parent-child","created_at":"2026-01-15T04:27:47.804236513-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8yxg.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T04:27:51.892109105-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-8yxg.4","title":"E2E: arXiv Connector Compliance Run","description":"# E2E: arXiv Connector Compliance Run\n\n## Goal\nRun the shared Mechanical Connector Compliance Runner against fcp.arxiv.\n\n## Must verify\n- Default deny via CapabilityTokens.\n- NetworkConstraints enforcement (API + PDF hosts only).\n- State checkpointing for monitors does not violate single-zone binding.\n- Structured JSON logs with correlation_id + reason codes.\n\n## Acceptance criteria\n- Runner output bundle is green for fcp.arxiv.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:27:58.025049971-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:27:58.025049971-05:00","dependencies":[{"issue_id":"flywheel_connectors-8yxg.4","depends_on_id":"flywheel_connectors-8yxg","type":"parent-child","created_at":"2026-01-15T04:27:58.026297942-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8yxg.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T04:28:01.752813156-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-8zp","title":"fcp.terraform: State inspection and resource listing","description":"# fcp.terraform: State inspection and resource listing (FCP2)\n\n## Goal\nProvide safe state inspection so agents can:\n- list resources\n- show a resource\n- read outputs\n\nState contains sensitive infrastructure details; all access must be audited.\n\n## Scope\n- List resources in state.\n- Show a specific resource.\n- Read outputs.\n- Optional: pull remote state for inspection (read-only).\n\n## Capability model (illustrative)\n- `terraform.state.read` (sensitive)\n\n## FCP2 requirements\n- Single-zone binding.\n- Sandbox profile must prevent arbitrary filesystem access.\n- Audit:\n  - every state read emits an audit event\n- NetworkConstraints default deny unless backend requires explicit egress.\n\n## Deliverables\n- Operation schemas:\n  - `terraform.state.list`\n  - `terraform.state.show`\n  - `terraform.output.read`\n  - Optional: `terraform.state.pull`\n\n## Test strategy (MUST)\n- Unit tests with a terraform shim for:\n  - correct arg formation\n  - audit event emission\n  - error mapping\n\n## Acceptance criteria\n- State access is safe, auditable, and bounded.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:14:58.436334927-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:45:01.081015144-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-8zp","depends_on_id":"flywheel_connectors-r6ty","type":"parent-child","created_at":"2026-01-15T02:33:01.094073833-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-8zp","depends_on_id":"flywheel_connectors-r6ty.1","type":"blocks","created_at":"2026-01-15T04:45:10.273400642-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-90y","title":"fcp.semanticscholar: Research Literature Connector","description":"## Overview\nAcademic research connector for Semantic Scholar API, providing semantic paper search, citation analysis, and author profiling to complement the arxiv connector.\n\n## Core Capabilities\n\n### Paper Search with Semantic Understanding\n- Natural language query support\n- Semantic similarity matching (not just keywords)\n- Field-of-study filtering\n- Publication date range filtering\n- Venue and journal filtering\n- Open access filter option\n\n### Citation Graph and References\n- Retrieve citing papers (who cited this)\n- Retrieve referenced papers (bibliography)\n- Citation context extraction\n- Multi-hop citation traversal\n- Co-citation analysis\n- Bibliographic coupling detection\n\n### Author Profiles and Metrics\n- Author search by name and affiliation\n- H-index and citation count retrieval\n- Publication history timeline\n- Co-author network mapping\n- Author disambiguation\n- ORCID linking where available\n\n### Topic Classification\n- Automatic topic/field assignment\n- Hierarchical topic taxonomy\n- Cross-disciplinary paper detection\n- Emerging topic identification\n- Topic trend analysis over time\n\n### Open Access Paper Retrieval\n- Identify open access versions\n- Direct PDF URL when available\n- Preprint linking (arxiv, bioRxiv, etc.)\n- License information extraction\n- Full text availability status\n\n## Integration with Arxiv Connector\n- Cross-reference arxiv IDs with S2 paper IDs\n- Enrich arxiv results with citation data\n- Use S2 for citation metrics, arxiv for full text\n- Unified paper identifier mapping\n\n## Implementation Notes\n- Use Semantic Scholar Academic Graph API\n- Respect rate limits (100 req/5min for unauthenticated)\n- API key support for higher limits\n- Batch request support for efficiency\n- Handle partial data gracefully\n\n## Testing Requirements\n- Mock API responses for unit tests\n- Rate limit handling tests\n- Citation graph traversal tests\n- Search relevance validation","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:21:50.282684625-05:00","created_by":"ubuntu","updated_at":"2026-01-15T03:47:46.730657198-05:00","closed_at":"2026-01-15T03:47:46.730657198-05:00","close_reason":"Duplicate of fcp.semanticscholar connector bead (flywheel_connectors-ixwa)","dependencies":[{"issue_id":"flywheel_connectors-90y","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:36:46.16829094-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-98w","title":"Add message length validation","description":"Add validation for message content length before sending to APIs. Discord limit: 2000 chars, Telegram limit: 4096 chars. Return clear FCP error if exceeded.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-11T09:38:31.560402709-05:00","created_by":"ubuntu","updated_at":"2026-01-11T10:03:10.668752876-05:00","closed_at":"2026-01-11T10:03:10.668752876-05:00","close_reason":"Added message length validation for both connectors: Discord (2000 chars content, embed limits) and Telegram (4096 chars). Validation now happens before config check for better error messages. Added 8 unit tests."}
{"id":"flywheel_connectors-9c0","title":"fcp.figma: File and project listing API","description":"# fcp.figma: File and project listing API (FCP2)\n\n## Goal\nEnable discovery of accessible Figma resources so agents can:\n- enumerate teams/projects\n- list files within projects\n- resolve file keys and metadata for downstream operations\n\n## Scope\n- List teams for the authenticated principal.\n- List projects within a team.\n- List files within a project.\n- Fetch minimal file metadata:\n  - file key\n  - name\n  - last modified\n  - thumbnail URL (if used; host pinned)\n\n## Capability model (illustrative)\n- `figma.projects.read`\n- `figma.files.read`\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned to Figma API host(s) and any thumbnail CDN hosts if accessed.\n- Treat file names as tainted external content.\n- Logs include only IDs and counts, not full payloads.\n\n## Deliverables\n- Operation schemas:\n  - `figma.team.list`\n  - `figma.team.projects.list`\n  - `figma.project.files.list`\n  - `figma.file.meta.get`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - pagination\n  - permission denied\n  - host pinning for thumbnail URLs\n  - rate limiting + retry/backoff\n\n## Acceptance criteria\n- Resource discovery is reliable, paginated, and safe.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:14:46.100340955-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:33:31.403645922-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-9c0","depends_on_id":"flywheel_connectors-vuwy","type":"parent-child","created_at":"2026-01-15T02:30:18.536104683-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-9c0","depends_on_id":"flywheel_connectors-vuwy.1","type":"blocks","created_at":"2026-01-15T04:33:34.849723711-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-9cg","title":"fcp.twilio: WhatsApp Business API integration","description":"# fcp.twilio: WhatsApp Business API integration (FCP2)\n\n## Goal\nEnable WhatsApp messaging via Twilio’s WhatsApp Business integration:\n- send messages (freeform + template)\n- send media\n- receive inbound messages via webhook (ingest handled in `flywheel_connectors-ugp`)\n\n## Scope\n### Outbound\n- Send freeform WhatsApp messages (when allowed).\n- Send template messages (required for many business-initiated conversations).\n- Send media messages (images/docs) with bounded download/upload.\n\n### Status / history\n- Fetch message status and delivery receipts.\n\n## Capability model (illustrative)\n- `twilio.whatsapp.send` (dangerous-ish)\n- `twilio.whatsapp.templates.send`\n- `twilio.whatsapp.read`\n- `twilio.whatsapp.media.read`\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned to Twilio API + explicit media hosts.\n- PII and compliance:\n  - phone numbers and message contents are sensitive\n  - never log message bodies\n- Idempotency:\n  - prevent duplicate sends on retries\n\n## Deliverables\n- Operation schemas:\n  - `twilio.whatsapp.send`\n  - `twilio.whatsapp.send_template`\n  - `twilio.whatsapp.get`\n  - `twilio.whatsapp.media.download`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - template send\n  - media bounds\n  - idempotency\n  - redaction\n\n## Acceptance criteria\n- WhatsApp sends are safe, auditable, and do not leak PII.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:14:49.306233445-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:32:25.325614133-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-9cg","depends_on_id":"flywheel_connectors-otqy","type":"parent-child","created_at":"2026-01-15T02:29:05.40104514-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-9cg","depends_on_id":"flywheel_connectors-otqy.1","type":"blocks","created_at":"2026-01-15T04:32:31.453766328-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-9cg","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T04:32:31.775300074-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-9co","title":"fcp-streaming: Shared Streaming and SSE Library","description":"# fcp-streaming: Shared Streaming and SSE Library\n\n## Overview\nUnified streaming library for SSE, WebSocket, and long-polling patterns used by connectors requiring real-time data.\n\n## Server-Sent Events (SSE)\n- RFC 6455 compliant parsing\n- Event types (data, event, id, retry)\n- Multi-line data handling\n- Last-Event-ID for reconnection\n- Automatic reconnection with backoff\n\n## WebSocket Support\n- Full WebSocket protocol\n- Text and binary message support\n- Ping/pong heartbeat\n- Graceful close handling\n- Automatic reconnection\n\n## Long Polling\n- Configurable poll interval\n- Response streaming\n- Timeout handling\n- Cursor/offset tracking\n\n## Stream Processing\n- Async stream primitives\n- Backpressure handling\n- Buffer management\n- Stream cancellation\n- Event batching\n\n## Error Recovery\n- Automatic reconnection\n- Configurable retry policies\n- Event replay from last ID\n- Partial message handling\n\n## Performance\n- Zero-copy parsing where possible\n- Memory limits per stream\n- Connection pooling\n\n## Dependencies\n- tokio, tokio-tungstenite, reqwest\n- futures-util, pin-project\n- fcp-core","status":"closed","priority":0,"issue_type":"feature","created_at":"2026-01-11T10:39:27.418127178-05:00","created_by":"ubuntu","updated_at":"2026-01-11T13:47:21.86084509-05:00","closed_at":"2026-01-11T13:47:21.86084509-05:00","close_reason":"Implemented fcp-streaming crate with SSE parsing, WebSocket support, stream utilities, and auto-reconnection. All 24 tests passing."}
{"id":"flywheel_connectors-9hh","title":"fcp.arxiv: CASS integration for paper indexing and retrieval","description":"# fcp.arxiv: CASS integration for paper indexing and retrieval (FCP2)\n\n## Goal\nIntegrate arXiv content with CASS (Conversation Archive \u0026 Semantic Search) so agents can:\n- index papers as searchable chunks with provenance\n- retrieve indexed content efficiently for later queries\n\n## Scope\n- Convert paper content (abstract + sections) into chunk objects:\n  - stable chunking rules\n  - stable chunk IDs\n- Attach provenance metadata:\n  - arXiv id/version\n  - extraction method\n  - timestamps\n- Write chunks into CASS (policy-controlled capability).\n- Query CASS for indexed papers (semantic or keyword, depending on CASS capabilities).\n\n## Capability model (illustrative)\n- `arxiv.paper.read`\n- `arxiv.pdf.extract`\n- `cass.write` (dangerous-ish; persistence)\n- `cass.search` (read)\n\n## FCP2 requirements\n- Single-zone binding.\n- No hidden network egress beyond pinned arXiv hosts.\n- CASS writes must be capability gated and auditable.\n\n## Deliverables\n- Operation schemas:\n  - `arxiv.cass.index_paper`\n  - `arxiv.cass.get_index_status`\n  - Optional: `arxiv.cass.search`\n- Canonical types:\n  - `CassIndexStatus`\n  - `CassChunkDescriptor`\n\n## Test strategy (MUST)\n- Fixture-based tests for deterministic chunking.\n- Mock-only tests for:\n  - CASS write/search calls (no real external calls in CI)\n  - audit/receipt emission on writes\n\n## Acceptance criteria\n- Indexing is deterministic, bounded, and provenance-rich.\n- CASS writes are mechanically authorized and auditable.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:14:37.008885532-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:50:26.630287638-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-9hh","depends_on_id":"flywheel_connectors-8yxg","type":"parent-child","created_at":"2026-01-15T02:32:23.079351201-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-9hh","depends_on_id":"flywheel_connectors-8yxg.1","type":"blocks","created_at":"2026-01-15T04:50:32.77421497-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-9hh","depends_on_id":"flywheel_connectors-ehu","type":"blocks","created_at":"2026-01-15T04:50:33.123456525-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-9sg2","title":"TEST: Threshold Secrets Unit/Integration Tests","description":"## Overview\n\nComprehensive test suite for Threshold Secrets (Shamir Secret Sharing) feature (heeq).\n\n## Test Categories\n\n### 1. Shamir Mathematics Tests\n- **GF(2^8) arithmetic**: Addition, multiplication, division correctness\n- **Polynomial evaluation**: Constant-time polynomial evaluation\n- **Share generation**: Generate n shares, any k can reconstruct\n- **Reconstruction**: Verify original = reconstruct(any_k_shares)\n- **Insufficient shares**: k-1 shares reveal nothing about secret\n- **Edge cases**: k=1 (degenerate), k=n (all required), n=255 (max)\n\n### 2. SecretObject Tests\n- **Creation**: Valid k/n thresholds, zone binding\n- **Share wrapping**: Each node's share encrypted with its key\n- **Share isolation**: Node cannot decrypt other nodes' shares\n- **Serialization**: CBOR round-trip preserves all fields\n\n### 3. SecretAccessToken Tests\n- **Creation**: Valid signature from authorized approver\n- **Validation**: Verify signature, expiry, purpose\n- **Expiry**: Reject expired tokens\n- **Wrong secret**: Token for secret A cannot access secret B\n- **Replay prevention**: Token JTI tracking\n\n### 4. Ephemeral Reconstruction Tests\n- **use_secret() flow**: Token → audit → collect → reconstruct → closure → zeroize\n- **Zeroization verification**: Memory cleared after use\n- **Audit event creation**: Event logged before reconstruction\n- **Peer collection**: Collect k shares from mesh peers\n- **Partial failure**: Handle unavailable peers gracefully\n\n### 5. Secret Rotation Tests\n- **Auto-rotation**: Trigger rotation after rotate_after_secs\n- **Overlap period**: Both old and new valid during overlap\n- **Rotation coordination**: All peers receive new shares\n- **Rotation audit**: Audit event for rotation\n\n### 6. Integration with CredentialObject Tests\n- **Secret-backed credentials**: CredentialObject.secret_ref resolution\n- **Credential injection**: Secret used for auth without exposure\n- **Combined flow**: Credential → SecretAccessToken → reconstruction → injection\n\n## Logging Requirements\n\nAll tests MUST emit structured JSON logs:\n```json\n{\n  \"test\": \"test_shamir_k_of_n_reconstruction\",\n  \"phase\": \"reconstruct\",\n  \"k\": 3,\n  \"n\": 5,\n  \"shares_used\": [1, 3, 4],\n  \"secret_len\": 32,\n  \"result\": \"success\",\n  \"timing_us\": 145\n}\n```\n\n## Property-Based Testing\n\nUse proptest for:\n- Any k shares from n can reconstruct (k \u003c= n)\n- k-1 shares reveal nothing (information-theoretic security)\n- Wrapped shares decrypt only with correct node key\n\n## Acceptance Criteria\n\n- [ ] 100% coverage of Shamir GF(2^8) math\n- [ ] All SecretObject lifecycle states tested\n- [ ] SecretAccessToken validation comprehensive\n- [ ] Ephemeral reconstruction verified with zeroization checks\n- [ ] Rotation with overlap tested\n- [ ] CredentialObject integration tested\n- [ ] Structured JSON logging in all tests\n- [ ] Property-based tests for cryptographic properties","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:42:38.50587702-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:42:38.50587702-05:00","dependencies":[{"issue_id":"flywheel_connectors-9sg2","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T04:42:45.644850381-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-9sg2","depends_on_id":"flywheel_connectors-6o25.1","type":"blocks","created_at":"2026-01-15T04:47:29.80378836-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-9smo","title":"TEST: Zone Crypto Unit Tests (ZoneKeyManifest, HPKE Sealing, Key Rotation)","description":"# TEST: Zone Crypto Unit Tests\n\n## Goal\nProve that zone key distribution is secure and rotation works correctly.\n\n## Test Categories\n\n### ZoneKeyManifest Structure\n- [ ] Valid manifest parses correctly\n- [ ] zone_id matches expected\n- [ ] zone_key_id is unique per rotation\n- [ ] Sealed keys present for each authorized node\n- [ ] Owner signature verifies correctly\n- [ ] Malformed manifest rejected\n\n### HPKE Sealed Box Operations\n- [ ] Seal to single recipient works\n- [ ] Seal to multiple recipients works\n- [ ] Unseal with correct key succeeds\n- [ ] Unseal with wrong key fails\n- [ ] Unseal by unauthorized node fails\n- [ ] AAD binding enforced (zone_id, zone_key_id)\n\n### Zone Key Derivation\n- [ ] Zone symmetric key is random (not derived from owner secret)\n- [ ] Same zone_key_id → same symmetric key (for same node)\n- [ ] Different zone_key_id → different symmetric key\n\n### ObjectIdKey Distribution\n- [ ] ObjectIdKey distributed alongside zone key\n- [ ] ObjectIdKey enables keyed ObjectId derivation\n- [ ] Non-member cannot derive keyed ObjectIds\n\n### Key Rotation\n- [ ] Rotation produces new zone_key_id\n- [ ] Rotation produces new symmetric key\n- [ ] Old zone_key_id no longer usable after grace period\n- [ ] New symbols encrypt under new key\n- [ ] Rotation triggers re-sealing to current membership\n- [ ] Removed nodes not in new manifest\n\n### Membership Changes\n- [ ] Add node: new manifest includes node\n- [ ] Remove node: new manifest excludes node\n- [ ] Removed node cannot unseal new keys\n\n### Attack Scenarios (Adversarial)\n- [ ] Manifest replay: old manifest with revoked membership rejected\n- [ ] Seal to removed node: fails after rotation\n- [ ] Forge manifest: invalid owner signature rejected\n- [ ] Key extraction: no path to extract raw zone key from manifest\n\n## Golden Vectors\n- Valid ZoneKeyManifest bytes\n- HPKE sealed box format\n- Key derivation from sealed box\n\n## Property Tests\n- Zone key randomness (entropy check)\n- Membership changes correctly reflected\n\n## Fuzz Targets\n- ZoneKeyManifest parsing\n- HPKE unseal with malformed inputs\n\n## Logging Requirements\n```json\n{\n  \"test_name\": \"...\",\n  \"zone_id\": \"...\",\n  \"zone_key_id\": \"...\",\n  \"operation\": \"seal|unseal|rotate\",\n  \"result\": \"pass|fail\",\n  \"reason_code\": \"...\"\n}\n```\n\n## Acceptance Criteria\n- Zone keys properly distributed\n- Rotation works without data loss\n- Removed nodes excluded\n\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:09:17.491213973-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:09:17.491213973-05:00","labels":["crypto","fcp2","mvp","testing","zone"],"dependencies":[{"issue_id":"flywheel_connectors-9smo","depends_on_id":"flywheel_connectors-1n78.6","type":"blocks","created_at":"2026-01-15T03:23:25.570006523-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-9smo","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:23:46.401208403-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-9ut","title":"fcp.arxiv: Citation graph traversal (cited-by and references)","description":"# fcp.arxiv: Citation graph traversal (cited-by and references) (FCP2)\n\n## Goal\nProvide citation graph access to support literature review workflows:\n- references (outgoing)\n- cited-by (incoming)\n- small bounded subgraph traversal\n\n## Data source constraints\narXiv’s API does **not** provide complete citation data. This bead supports two strategies:\n1. **Preferred**: query an external citation index (e.g., Semantic Scholar) when policy enables it.\n2. **Fallback**: parse references from PDF/LaTeX (best-effort, lower accuracy).\n\n## Scope\n- Get references for a paper.\n- Get cited-by for a paper (preferred via external index).\n- Build bounded citation subgraph:\n  - max depth\n  - max nodes\n\n## Capability model (illustrative)\n- `arxiv.citations.read`\n- `semanticscholar.citations.read` (optional dependency)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned to whichever source is enabled.\n- Output is bounded and deterministic.\n\n## Deliverables\n- Operation schemas:\n  - `arxiv.citations.references`\n  - `arxiv.citations.cited_by`\n  - `arxiv.citations.subgraph`\n- Canonical output type:\n  - `CitationGraph`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - graph bounds enforcement\n  - deterministic traversal ordering\n  - error mapping when citation source unavailable\n\n## Acceptance criteria\n- Citation graph traversal is useful, bounded, and policy-controlled.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:14:33.678529733-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:49:02.222999058-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-9ut","depends_on_id":"flywheel_connectors-8yxg","type":"parent-child","created_at":"2026-01-15T02:32:23.157019312-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-9ut","depends_on_id":"flywheel_connectors-8yxg.1","type":"blocks","created_at":"2026-01-15T04:49:07.886036997-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-9y2","title":"fcp.homeassistant: Scene activation and management","description":"# fcp.homeassistant: Scene activation and management (FCP2)\n\n## Goal\nSupport scene discovery and activation for common automation workflows.\n\n## Scope\n- List scenes.\n- Activate a scene.\n- Optional: create/update/delete scenes (dangerous; defer unless needed).\n\n## Capability model (illustrative)\n- `ha.scenes.read`\n- `ha.scenes.activate` (dangerous-ish)\n- Optional: `ha.scenes.write` (dangerous)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- Scene activation is a side effect:\n  - receipts + audit events include scene id + action\n\n## Deliverables\n- Operation schemas:\n  - `ha.scene.list`\n  - `ha.scene.activate`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - activate flow\n  - audit/receipt emission\n\n## Acceptance criteria\n- Scenes can be activated safely and auditable.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:16:46.454681406-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:43:19.852334358-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-9y2","depends_on_id":"flywheel_connectors-ortf","type":"parent-child","created_at":"2026-01-15T02:33:22.390841616-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-9y2","depends_on_id":"flywheel_connectors-ortf.1","type":"blocks","created_at":"2026-01-15T04:43:26.467296612-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-a0x","title":"fcp.homeassistant: Entity state read and write operations","description":"# fcp.homeassistant: Entity state read and write operations (FCP2)\n\n## Goal\nProvide core entity state access:\n- read current state/attributes\n- perform controlled state writes where supported\n\n## Scope\n### Read\n- Get entity state by entity_id.\n- Bulk list states (bounded).\n\n### Write (domain-limited)\n- For entities that support direct state writes (e.g., input_* helpers), allow setting state.\n- For device control (lights/switches/etc), prefer service calls (`flywheel_connectors-3ef`).\n\n## Capability model (illustrative)\n- `ha.entities.read`\n- `ha.entities.write` (dangerous-ish)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- Sensitive attributes (location, camera URLs, etc.) must be redacted from logs.\n- Writes emit receipts + audit events.\n\n## Deliverables\n- Operation schemas:\n  - `ha.entity.get`\n  - `ha.entity.list`\n  - `ha.entity.set_state` (domain-limited)\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - state parsing\n  - redaction rules\n  - write gating\n  - receipts/audit for writes\n\n## Acceptance criteria\n- Entity access is reliable, bounded, and privacy-preserving.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:15:42.151367736-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:42:38.631332038-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-a0x","depends_on_id":"flywheel_connectors-ortf","type":"parent-child","created_at":"2026-01-15T02:33:22.470930952-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a0x","depends_on_id":"flywheel_connectors-ortf.1","type":"blocks","created_at":"2026-01-15T04:42:42.767842061-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-a1j","title":"Implement Discord gateway session resumption","description":"Implement session resumption for the Discord gateway. When disconnected, the connector should attempt to resume using session_id and sequence number rather than starting a fresh session.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T09:38:27.440747757-05:00","created_by":"ubuntu","updated_at":"2026-01-11T10:20:58.252868388-05:00","closed_at":"2026-01-11T10:20:58.252868388-05:00","close_reason":"Implemented Discord gateway session resumption: GatewayResume type, conditional Resume/Identify sending, RESUMED event handling, session state management methods (update_session, update_sequence, clear_session, can_resume), resume_url usage for reconnection"}
{"id":"flywheel_connectors-a4dh","title":"fcp.spotify - Spotify Connector (Music \u0026 Podcast Platform)","description":"# fcp.spotify - Spotify Music \u0026 Podcast Connector\n\n## Overview\n\nFlywheel Connector Protocol implementation for Spotify, enabling Claude to interact with the world's largest music streaming platform. Provides playback control, library management, playlist operations, search, recommendations, and podcast access.\n\n**Value Score:** 78/100 (Tier 3 - Specialized)\n**Interaction patterns:** Request/Response (+ optional WebSocket for player state)\n**Platform:** Spotify Web API\n\n## Manifest archetypes (closed set)\n- `operational`\n- `streaming` (optional: player state/events)\n- `knowledge` (search/recommendations)\n\n\u003e Note: “request/response” and “websocket” are interaction patterns, not manifest archetype values.\n\n---\n\n## Core Operations\n\n### Playback Control\n| Operation | Method | Endpoint | Zone |\n|-----------|--------|----------|------|\n| `play` | PUT | `/me/player/play` | playback |\n| `pause` | PUT | `/me/player/pause` | playback |\n| `skip_next` | POST | `/me/player/next` | playback |\n| `skip_previous` | POST | `/me/player/previous` | playback |\n| `seek` | PUT | `/me/player/seek` | playback |\n| `set_volume` | PUT | `/me/player/volume` | playback |\n| `set_shuffle` | PUT | `/me/player/shuffle` | playback |\n| `set_repeat` | PUT | `/me/player/repeat` | playback |\n| `get_playback_state` | GET | `/me/player` | playback |\n| `get_devices` | GET | `/me/player/devices` | playback |\n| `transfer_playback` | PUT | `/me/player` | playback |\n\n### Library Management\n| Operation | Method | Endpoint | Zone |\n|-----------|--------|----------|------|\n| `get_saved_tracks` | GET | `/me/tracks` | library |\n| `save_tracks` | PUT | `/me/tracks` | library |\n| `remove_saved_tracks` | DELETE | `/me/tracks` | library |\n| `check_saved_tracks` | GET | `/me/tracks/contains` | library |\n| `get_saved_albums` | GET | `/me/albums` | library |\n| `save_albums` | PUT | `/me/albums` | library |\n| `get_saved_shows` | GET | `/me/shows` | library |\n| `save_shows` | PUT | `/me/shows` | library |\n| `get_followed_artists` | GET | `/me/following` | library |\n| `follow_artists` | PUT | `/me/following` | library |\n\n### Playlist Operations\n| Operation | Method | Endpoint | Zone |\n|-----------|--------|----------|------|\n| `get_playlists` | GET | `/me/playlists` | library |\n| `get_playlist` | GET | `/playlists/{id}` | library |\n| `create_playlist` | POST | `/users/{user_id}/playlists` | library |\n| `update_playlist` | PUT | `/playlists/{id}` | library |\n| `add_tracks_to_playlist` | POST | `/playlists/{id}/tracks` | library |\n| `remove_tracks_from_playlist` | DELETE | `/playlists/{id}/tracks` | library |\n| `reorder_playlist_tracks` | PUT | `/playlists/{id}/tracks` | library |\n| `get_playlist_cover` | GET | `/playlists/{id}/images` | library |\n| `upload_playlist_cover` | PUT | `/playlists/{id}/images` | library |\n\n### Search\n| Operation | Method | Endpoint | Zone |\n|-----------|--------|----------|------|\n| `search` | GET | `/search` | discovery |\n| `search_tracks` | GET | `/search?type=track` | discovery |\n| `search_albums` | GET | `/search?type=album` | discovery |\n| `search_artists` | GET | `/search?type=artist` | discovery |\n| `search_playlists` | GET | `/search?type=playlist` | discovery |\n| `search_shows` | GET | `/search?type=show` | discovery |\n| `search_episodes` | GET | `/search?type=episode` | discovery |\n\n### Recommendations \u0026 Discovery\n| Operation | Method | Endpoint | Zone |\n|-----------|--------|----------|------|\n| `get_recommendations` | GET | `/recommendations` | discovery |\n| `get_available_genres` | GET | `/recommendations/available-genre-seeds` | discovery |\n| `get_new_releases` | GET | `/browse/new-releases` | discovery |\n| `get_featured_playlists` | GET | `/browse/featured-playlists` | discovery |\n| `get_categories` | GET | `/browse/categories` | discovery |\n| `get_category_playlists` | GET | `/browse/categories/{id}/playlists` | discovery |\n\n### Track \u0026 Album Data\n| Operation | Method | Endpoint | Zone |\n|-----------|--------|----------|------|\n| `get_track` | GET | `/tracks/{id}` | discovery |\n| `get_tracks` | GET | `/tracks` | discovery |\n| `get_audio_features` | GET | `/audio-features/{id}` | discovery |\n| `get_audio_analysis` | GET | `/audio-analysis/{id}` | discovery |\n| `get_album` | GET | `/albums/{id}` | discovery |\n| `get_album_tracks` | GET | `/albums/{id}/tracks` | discovery |\n| `get_artist` | GET | `/artists/{id}` | discovery |\n| `get_artist_albums` | GET | `/artists/{id}/albums` | discovery |\n| `get_artist_top_tracks` | GET | `/artists/{id}/top-tracks` | discovery |\n| `get_related_artists` | GET | `/artists/{id}/related-artists` | discovery |\n\n### Podcast Operations\n| Operation | Method | Endpoint | Zone |\n|-----------|--------|----------|------|\n| `get_show` | GET | `/shows/{id}` | discovery |\n| `get_show_episodes` | GET | `/shows/{id}/episodes` | discovery |\n| `get_episode` | GET | `/episodes/{id}` | discovery |\n| `get_saved_episodes` | GET | `/me/episodes` | library |\n| `save_episodes` | PUT | `/me/episodes` | library |\n\n### Listening History\n| Operation | Method | Endpoint | Zone |\n|-----------|--------|----------|------|\n| `get_recently_played` | GET | `/me/player/recently-played` | history |\n| `get_top_tracks` | GET | `/me/top/tracks` | history |\n| `get_top_artists` | GET | `/me/top/artists` | history |\n\n### User Profile\n| Operation | Method | Endpoint | Zone |\n|-----------|--------|----------|------|\n| `get_current_user` | GET | `/me` | profile |\n| `get_user` | GET | `/users/{user_id}` | profile |\n\n---\n\n## Zone Architecture\n\n\u003c!-- fcp2-single-zone-note --\u003e\n**FCP2 single-zone binding note:** A connector instance binds to exactly one `ZoneId` for its entire lifetime.\nThe *\"zones\"* described in this section are a **recommended deployment pattern** (run separate connector instances in separate zones with different capability grants/policies) and/or conceptual risk tiers.\nThe connector MUST NOT multiplex multiple zones internally.\n\n\n```\n┌─────────────────────────────────────────────────────────────────┐\n│                     fcp.spotify Zones                           │\n├─────────────────────────────────────────────────────────────────┤\n│                                                                 │\n│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │\n│  │  playback   │  │   library   │  │  discovery  │             │\n│  │             │  │             │  │             │             │\n│  │ • play      │  │ • saved     │  │ • search    │             │\n│  │ • pause     │  │   tracks    │  │ • browse    │             │\n│  │ • skip      │  │ • playlists │  │ • recommend │             │\n│  │ • volume    │  │ • albums    │  │ • audio     │             │\n│  │ • devices   │  │ • podcasts  │  │   features  │             │\n│  │             │  │ • following │  │             │             │\n│  └─────────────┘  └─────────────┘  └─────────────┘             │\n│                                                                 │\n│  ┌─────────────┐  ┌─────────────┐                              │\n│  │   history   │  │   profile   │                              │\n│  │  (private)  │  │             │                              │\n│  │             │  │ • user info │                              │\n│  │ • recently  │  │ • public    │                              │\n│  │   played    │  │   profiles  │                              │\n│  │ • top items │  │             │                              │\n│  │             │  │             │                              │\n│  └─────────────┘  └─────────────┘                              │\n│                                                                 │\n└─────────────────────────────────────────────────────────────────┘\n```\n\n### Zone Privacy Levels\n- **playback**: Active control - requires explicit user intent\n- **library**: Personal collection - user's curated content\n- **discovery**: Public catalog - no privacy concerns\n- **history**: Sensitive - reveals listening patterns and preferences\n- **profile**: Basic identity - minimal privacy impact\n\n---\n\n## Natural Language Use Cases\n\n### Playback Control\n```\nUser: \"Play some focus music\"\n→ get_recommendations(seed_genres=[\"focus\", \"study\", \"ambient\"])\n→ play(uris=[recommended_tracks])\n\nUser: \"Skip this song\"\n→ skip_next()\n\nUser: \"Play this on my speaker\"\n→ get_devices()\n→ transfer_playback(device_id=\"speaker_id\")\n```\n\n### Library Management\n```\nUser: \"Add to my liked songs\"\n→ get_playback_state() // get current track\n→ save_tracks(ids=[current_track_id])\n\nUser: \"Save this album\"\n→ get_playback_state()\n→ save_albums(ids=[current_album_id])\n```\n\n### Playlist Operations\n```\nUser: \"Create playlist for road trip\"\n→ create_playlist(name=\"Road Trip\", description=\"Created by Claude\")\n→ get_recommendations(seed_genres=[\"road-trip\", \"rock\", \"pop\"])\n→ add_tracks_to_playlist(playlist_id, uris=[recommended_tracks])\n\nUser: \"Add this to my workout playlist\"\n→ get_playlists()\n→ add_tracks_to_playlist(workout_playlist_id, uris=[current_track])\n```\n\n### Discovery \u0026 Search\n```\nUser: \"What was that song from earlier?\"\n→ get_recently_played(limit=20)\n→ Present tracks with timestamps\n\nUser: \"Find podcasts about machine learning\"\n→ search(q=\"machine learning\", type=\"show\", limit=10)\n\nUser: \"Show me songs similar to this\"\n→ get_recommendations(seed_tracks=[current_track_id])\n```\n\n### Analytics \u0026 Insights\n```\nUser: \"What are my top artists this month?\"\n→ get_top_artists(time_range=\"short_term\")\n\nUser: \"Analyze this song's vibe\"\n→ get_audio_features(id=track_id)\n→ Interpret: danceability, energy, valence, tempo, etc.\n```\n\n---\n\n## Extended Capabilities\n\n### Cross-Connector Integrations\n\n#### fcp.whisper Integration (Podcast Transcription)\n```\nUser: \"Transcribe this podcast episode\"\n→ fcp.spotify.get_episode(id) // Get episode metadata\n→ Extract audio URL (if available via API)\n→ fcp.whisper.transcribe(audio_url)\n→ Return searchable transcript\n```\n\n#### Audio Feature Analysis\n```rust\n// Spotify's audio features provide rich data:\nAudioFeatures {\n    danceability: f32,    // 0.0 - 1.0\n    energy: f32,          // 0.0 - 1.0\n    key: i32,             // Pitch class notation\n    loudness: f32,        // dB\n    mode: i32,            // Major/minor\n    speechiness: f32,     // Spoken word detection\n    acousticness: f32,    // Acoustic confidence\n    instrumentalness: f32,// Vocal presence\n    liveness: f32,        // Live performance\n    valence: f32,         // Musical positivity\n    tempo: f32,           // BPM\n    time_signature: i32,  // Beats per bar\n}\n```\n\n#### Mood-Based Recommendations\n```\n// Map user intent to audio features\n\"relaxing\" → { energy: \u003c0.4, valence: 0.3-0.7, tempo: \u003c100 }\n\"workout\"  → { energy: \u003e0.7, tempo: \u003e120 }\n\"focus\"    → { instrumentalness: \u003e0.5, speechiness: \u003c0.3 }\n\"party\"    → { danceability: \u003e0.7, energy: \u003e0.6 }\n```\n\n---\n\n## Authentication\n\n### OAuth 2.0 with PKCE\n```rust\n// Required scopes by zone\nconst PLAYBACK_SCOPES: \u0026[\u0026str] = \u0026[\n    \"user-modify-playback-state\",\n    \"user-read-playback-state\",\n    \"user-read-currently-playing\",\n];\n\nconst LIBRARY_SCOPES: \u0026[\u0026str] = \u0026[\n    \"user-library-read\",\n    \"user-library-modify\",\n    \"playlist-read-private\",\n    \"playlist-modify-public\",\n    \"playlist-modify-private\",\n    \"user-follow-read\",\n    \"user-follow-modify\",\n];\n\nconst HISTORY_SCOPES: \u0026[\u0026str] = \u0026[\n    \"user-read-recently-played\",\n    \"user-top-read\",\n];\n\nconst PROFILE_SCOPES: \u0026[\u0026str] = \u0026[\n    \"user-read-private\",\n    \"user-read-email\",\n];\n```\n\n### Token Management\n- Access tokens expire in 1 hour\n- Refresh tokens for long-lived sessions\n- Scope-based permission model\n- PKCE flow for enhanced security\n\n---\n\n## Rate Limiting\n\n### Spotify API Limits\n```rust\n// Rate limit configuration\nRateLimitConfig {\n    // Spotify uses sliding window\n    requests_per_30_seconds: 100,  // Approximate\n    \n    // Endpoint-specific limits\n    search_rpm: 30,\n    playback_rpm: 60,\n    library_rpm: 100,\n    \n    // Retry behavior\n    retry_after_header: true,\n    exponential_backoff: true,\n    max_retries: 3,\n}\n```\n\n### Rate Limit Headers\n```\nX-RateLimit-Limit: 100\nX-RateLimit-Remaining: 95\nRetry-After: 30  // When rate limited\n```\n\n---\n\n## Implementation Architecture\n\n### Dependencies\n```toml\n[dependencies]\nfcp-core = { path = \"../fcp-core\" }\nfcp-oauth = { path = \"../fcp-oauth\" }\nfcp-ratelimit = { path = \"../fcp-ratelimit\" }\nfcp-telemetry = { path = \"../fcp-telemetry\" }\n\n# HTTP client\nreqwest = { version = \"0.11\", features = [\"json\"] }\n\n# WebSocket for player state\ntokio-tungstenite = \"0.20\"\n\n# Serialization\nserde = { version = \"1.0\", features = [\"derive\"] }\nserde_json = \"1.0\"\n```\n\n### Core Structures\n```rust\npub struct SpotifyConnector {\n    client: reqwest::Client,\n    oauth: OAuthManager,\n    rate_limiter: RateLimiter,\n    telemetry: TelemetryClient,\n}\n\npub struct PlayerState {\n    device: Device,\n    repeat_state: RepeatState,\n    shuffle_state: bool,\n    context: Option\u003cPlaybackContext\u003e,\n    timestamp: u64,\n    progress_ms: Option\u003cu32\u003e,\n    is_playing: bool,\n    item: Option\u003cPlayableItem\u003e,\n}\n\npub enum PlayableItem {\n    Track(Track),\n    Episode(Episode),\n}\n```\n\n### WebSocket Player State\n```rust\n// Real-time player state updates\nimpl SpotifyConnector {\n    pub async fn subscribe_player_state(\u0026self) -\u003e PlayerStateStream {\n        // Note: Spotify doesn't have native WebSocket\n        // Implement polling-based stream or use Spotify Connect\n        PlayerStateStream::new(self.clone(), Duration::from_secs(5))\n    }\n}\n```\n\n---\n\n## Error Handling\n\n### Spotify API Errors\n```rust\npub enum SpotifyError {\n    // Auth errors\n    InvalidToken,\n    ExpiredToken,\n    InsufficientScope(Vec\u003cString\u003e),\n    \n    // Rate limiting\n    RateLimited { retry_after: Duration },\n    \n    // Resource errors\n    NotFound { resource_type: String, id: String },\n    \n    // Playback errors\n    NoActiveDevice,\n    DeviceNotFound,\n    PremiumRequired,\n    \n    // API errors\n    BadRequest(String),\n    ServerError,\n}\n```\n\n### Premium vs Free Limitations\n```rust\n// Free tier limitations\n- No playback control via API (Premium only)\n- Limited skips\n- Shuffle-only on mobile\n- No explicit content control\n\n// Connector behavior\nif !user.is_premium \u0026\u0026 operation.requires_premium() {\n    return Err(SpotifyError::PremiumRequired);\n}\n```\n\n---\n\n## Testing Strategy\n\n### Mock Server\n```rust\n#[cfg(test)]\nmod tests {\n    use wiremock::{MockServer, Mock, ResponseTemplate};\n    \n    #[tokio::test]\n    async fn test_search_tracks() {\n        let mock_server = MockServer::start().await;\n        \n        Mock::given(method(\"GET\"))\n            .and(path(\"/v1/search\"))\n            .and(query_param(\"type\", \"track\"))\n            .respond_with(ResponseTemplate::new(200)\n                .set_body_json(mock_search_response()))\n            .mount(\u0026mock_server)\n            .await;\n        \n        let connector = SpotifyConnector::new_with_base_url(\n            mock_server.uri()\n        );\n        \n        let results = connector.search_tracks(\"test\").await.unwrap();\n        assert!(!results.is_empty());\n    }\n}\n```\n\n### Integration Test Markers\n```rust\n#[test]\n#[ignore = \"requires Spotify Premium account\"]\nasync fn test_playback_control() { ... }\n\n#[test]\n#[ignore = \"requires real API credentials\"]\nasync fn test_real_search() { ... }\n```\n\n---\n\n## Configuration\n\n### Environment Variables\n```bash\nSPOTIFY_CLIENT_ID=your_client_id\nSPOTIFY_CLIENT_SECRET=your_client_secret\nSPOTIFY_REDIRECT_URI=http://localhost:8888/callback\n\n# Optional\nSPOTIFY_MARKET=US  # Default market for content\nSPOTIFY_LOCALE=en_US  # Localization\n```\n\n### Default Settings\n```rust\nimpl Default for SpotifyConfig {\n    fn default() -\u003e Self {\n        Self {\n            base_url: \"https://api.spotify.com/v1\".into(),\n            market: Some(\"US\".into()),\n            locale: Some(\"en_US\".into()),\n            auto_refresh_token: true,\n            player_poll_interval: Duration::from_secs(5),\n        }\n    }\n}\n```\n\n---\n\n## References\n\n- [Spotify Web API Documentation](https://developer.spotify.com/documentation/web-api)\n- [Spotify Authorization Guide](https://developer.spotify.com/documentation/general/guides/authorization)\n- [Spotify API Reference](https://developer.spotify.com/documentation/web-api/reference)\n- [Audio Features Guide](https://developer.spotify.com/documentation/web-api/reference/get-audio-features)\n- [Rate Limiting](https://developer.spotify.com/documentation/web-api/guides/rate-limits)\n\n---\n\n## Status\n\n- [ ] Core connector structure\n- [ ] OAuth 2.0 + PKCE implementation\n- [ ] Playback control operations\n- [ ] Library management operations\n- [ ] Playlist CRUD operations\n- [ ] Search operations\n- [ ] Recommendations engine\n- [ ] Podcast operations\n- [ ] Audio features analysis\n- [ ] Rate limiting integration\n- [ ] Telemetry integration\n- [ ] Unit tests\n- [ ] Integration tests\n- [ ] Documentation\n\n## Success Criteria\n- The epic includes (or references) the standard base beads `.1`..`.4` per `flywheel_connectors-lszk.5`.\n- The connector passes `flywheel_connectors-1n78.21.5` (static + dynamic) and has an E2E compliance run wired through `flywheel_connectors-e3i9`.\n- Unit/integration tests are mock-only (no real external calls) and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-11T21:49:01.14669434-05:00","created_by":"ubuntu","updated_at":"2026-01-15T07:40:35.119723542-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-a4dh","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T22:08:10.807412804-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-a4dh","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T22:08:10.834339466-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-a4dh","depends_on_id":"flywheel_connectors-lj2","type":"blocks","created_at":"2026-01-11T22:08:10.969151553-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-a4dh","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:33:30.066265913-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a4dh","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T04:24:29.314650612-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a4dh","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T04:24:29.538308019-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a4dh","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T04:24:29.746228863-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a4dh","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T04:24:29.957332612-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a4dh","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T04:24:30.175686699-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a4dh","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T04:24:30.380460825-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-a4dh.1","title":"fcp.spotify: Manifest + Capability Map (FCP2)","description":"# fcp.spotify: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the Spotify connector’s **mechanical manifest contract** under FCP2.\n\n## Required contents\n- Manifest archetypes (closed set):\n  - `knowledge` (search/browse metadata)\n  - `operational` (library mgmt, playback control)\n  - `streaming` (player state as an event stream; polling-backed)\n- Operation list + schema IDs.\n- Capability families + per-operation required caps.\n- NetworkConstraints:\n  - pin Spotify Web API host(s)\n  - explicitly pin any image/media download hosts if used\n- State model declaration:\n  - OAuth refresh state (stored by platform, not connector)\n  - player polling cursor/state (if persisted)\n\n## Acceptance criteria\n- Another engineer can implement `--manifest` from this bead alone.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:23:47.794187309-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:23:47.794187309-05:00","dependencies":[{"issue_id":"flywheel_connectors-a4dh.1","depends_on_id":"flywheel_connectors-a4dh","type":"parent-child","created_at":"2026-01-15T04:23:47.795550247-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a4dh.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T04:23:51.377986244-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a4dh.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T04:23:51.585923729-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-a4dh.2","title":"fcp.spotify: Provisioning Automation (OAuth, scopes, devices)","description":"# fcp.spotify: Provisioning Automation (OAuth, scopes, devices)\n\n## Goal\nAutomate Spotify onboarding with minimal human steps while keeping secrets zone-scoped.\n\n## Requirements\n- OAuth2 Authorization Code + PKCE via provisioning recipes.\n- Scope selection:\n  - read-only scopes for search/history\n  - separate scopes/capabilities for playback control and library writes\n- Device readiness checks:\n  - verify the account has at least one available playback device (when required)\n  - handle “Premium required” cases explicitly\n- Validate NetworkConstraints pinning.\n\n## Acceptance criteria\n- `fcp doctor` verifies readiness without leaking secrets.\n- Mockable in CI.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:24:01.516270267-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:24:01.516270267-05:00","dependencies":[{"issue_id":"flywheel_connectors-a4dh.2","depends_on_id":"flywheel_connectors-a4dh","type":"parent-child","created_at":"2026-01-15T04:24:01.51757742-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a4dh.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T04:24:05.201364383-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-a4dh.3","title":"TEST: Spotify Connector Unit/Integration Tests (mock-only)","description":"# TEST: Spotify Connector Unit/Integration Tests (mock-only)\n\n## Goal\nMock-only tests for fcp.spotify across search, library, playlists, history, and playback control.\n\n## Requirements\n- No real Spotify calls in CI.\n- Mock endpoints for:\n  - search\n  - saved tracks/albums/shows\n  - playlist CRUD\n  - recently played / top items\n  - playback control endpoints\n- Tests for:\n  - rate limiting + retry/backoff\n  - premium-required error cases\n  - capability gating for playback and write operations\n  - polling-backed player state stream behavior (bounded)\n\n## Acceptance criteria\n- Deterministic CI suite.\n- Structured JSON logs with correlation_id + reason codes.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:24:11.838760853-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:24:11.838760853-05:00","dependencies":[{"issue_id":"flywheel_connectors-a4dh.3","depends_on_id":"flywheel_connectors-a4dh","type":"parent-child","created_at":"2026-01-15T04:24:11.839962878-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a4dh.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T04:24:15.329164798-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-a4dh.4","title":"E2E: Spotify Connector Compliance Run","description":"# E2E: Spotify Connector Compliance Run\n\n## Goal\nRun the shared Mechanical Connector Compliance Runner against fcp.spotify.\n\n## Must verify\n- Default deny via CapabilityTokens.\n- NetworkConstraints enforcement.\n- Receipts/audit for write ops (playlist/library changes, playback control).\n- Structured JSON logs with correlation_id + reason codes.\n\n## Acceptance criteria\n- Runner output bundle is green for fcp.spotify.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:24:20.559701427-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:24:20.559701427-05:00","dependencies":[{"issue_id":"flywheel_connectors-a4dh.4","depends_on_id":"flywheel_connectors-a4dh","type":"parent-child","created_at":"2026-01-15T04:24:20.561010002-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a4dh.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T04:24:23.794038394-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-a7vd","title":"fcp.mongodb - MongoDB document database connector","description":"## Summary\n\nMongoDB connector for the Flywheel Connector Platform (FCP). This document database connector enables Rust applications to interact with MongoDB clusters and Atlas deployments through type-safe operations, aggregation pipelines, and comprehensive database management capabilities.\n\n## Context\n\nMongoDB is the leading document-oriented NoSQL database, widely used for flexible schema designs, horizontal scaling, and real-time analytics. This connector provides:\n\n- **Document-Oriented Model**: Native BSON document support with flexible schemas\n- **Aggregation Framework**: Powerful data processing pipelines\n- **Atlas Integration**: Cloud-native MongoDB Atlas Data API support\n- **Change Streams**: Real-time data change notifications\n- **Sharding Support**: Distributed data across multiple shards\n\nValue Score: 51/100 (Tier 4) - Moderate adoption in Rust ecosystem, strong use case for applications requiring flexible data models.\n\n## Archetype\n\n**Request-Response** - Standard synchronous operations for CRUD, aggregation, and administrative commands.\n\n## Operations\n\n### Read Zone\n- `find` - Query documents with filters and projections\n- `find_one` - Retrieve single document by query\n- `aggregate` - Execute aggregation pipelines\n- `count_documents` - Count matching documents\n- `distinct` - Get distinct values for a field\n- `list_collections` - List all collections in database\n- `list_databases` - List all databases on server\n- `list_indexes` - List indexes on a collection\n- `watch` - Open change stream cursor (streaming context)\n\n### Write Zone\n- `insert_one` - Insert single document\n- `insert_many` - Bulk insert documents\n- `update_one` - Update single document\n- `update_many` - Update multiple documents\n- `replace_one` - Replace entire document\n- `delete_one` - Delete single document\n- `delete_many` - Delete multiple documents\n- `find_one_and_update` - Atomically find and update\n- `find_one_and_replace` - Atomically find and replace\n- `find_one_and_delete` - Atomically find and delete\n- `bulk_write` - Execute bulk operations\n\n### Admin Zone\n- `create_collection` - Create new collection with options\n- `drop_collection` - Drop a collection\n- `create_index` - Create index on collection\n- `drop_index` - Remove index from collection\n- `run_command` - Execute raw database command\n- `create_database` - Implicitly create database\n- `drop_database` - Drop entire database\n\n## Design Notes\n\n### Architecture\n\n```\nfcp-mongodb/\n├── src/\n│   ├── lib.rs              # Public API exports\n│   ├── client.rs           # MongoClient wrapper\n│   ├── config.rs           # Configuration types\n│   ├── connection.rs       # Connection pool management\n│   ├── operations/\n│   │   ├── mod.rs\n│   │   ├── read.rs         # Find, aggregate operations\n│   │   ├── write.rs        # Insert, update, delete ops\n│   │   └── admin.rs        # Index, collection management\n│   ├── atlas/\n│   │   ├── mod.rs\n│   │   └── data_api.rs     # Atlas Data API client\n│   ├── pipeline/\n│   │   ├── mod.rs\n│   │   └── builder.rs      # Aggregation pipeline DSL\n│   ├── types/\n│   │   ├── mod.rs\n│   │   ├── document.rs     # BSON document helpers\n│   │   ├── filter.rs       # Query filter builders\n│   │   └── options.rs      # Operation options\n│   └── error.rs            # Error types\n├── Cargo.toml\n└── README.md\n```\n\n### Connection Configuration\n\n```rust\nuse fcp_mongodb::{MongoConfig, MongoClient};\n\nlet config = MongoConfig::builder()\n    .uri(\"mongodb+srv://user:pass@cluster.mongodb.net/\")\n    .database(\"myapp\")\n    .app_name(\"flywheel-connector\")\n    .min_pool_size(5)\n    .max_pool_size(100)\n    .connect_timeout(Duration::from_secs(10))\n    .server_selection_timeout(Duration::from_secs(30))\n    .retry_writes(true)\n    .retry_reads(true)\n    .build()?;\n\nlet client = MongoClient::connect(config).await?;\n```\n\n### Document Operations\n\n```rust\nuse fcp_mongodb::{doc, Document};\nuse serde::{Deserialize, Serialize};\n\n#[derive(Debug, Serialize, Deserialize)]\nstruct User {\n    #[serde(rename = \"_id\")]\n    id: ObjectId,\n    name: String,\n    email: String,\n    profile: UserProfile,\n    tags: Vec\u003cString\u003e,\n    created_at: DateTime,\n}\n\n// Type-safe operations\nlet users = client.collection::\u003cUser\u003e(\"users\");\n\n// Insert\nlet user = User { /* ... */ };\nlet result = users.insert_one(\u0026user).await?;\n\n// Query with filter\nlet filter = doc! { \"email\": \"user@example.com\" };\nlet user = users.find_one(filter).await?;\n\n// Update with operators\nlet update = doc! {\n    \"$set\": { \"name\": \"New Name\" },\n    \"$push\": { \"tags\": \"verified\" }\n};\nusers.update_one(filter, update).await?;\n```\n\n### Aggregation Pipeline\n\n```rust\nuse fcp_mongodb::pipeline::{Pipeline, stage};\n\nlet pipeline = Pipeline::new()\n    .match_stage(doc! { \"status\": \"active\" })\n    .lookup(stage::Lookup {\n        from: \"orders\",\n        local_field: \"user_id\",\n        foreign_field: \"customer_id\",\n        as_field: \"orders\",\n    })\n    .unwind(\"$orders\")\n    .group(stage::Group {\n        id: \"$user_id\",\n        fields: vec![\n            (\"total_orders\", stage::Accumulator::Sum(1)),\n            (\"total_spent\", stage::Accumulator::Sum(\"$orders.amount\")),\n        ],\n    })\n    .sort(doc! { \"total_spent\": -1 })\n    .limit(10)\n    .build();\n\nlet results = users.aggregate::\u003cUserStats\u003e(pipeline).await?;\n```\n\n### Index Management\n\n```rust\nuse fcp_mongodb::index::{IndexModel, IndexOptions};\n\n// Create single field index\nlet index = IndexModel::new(doc! { \"email\": 1 })\n    .options(IndexOptions::builder()\n        .unique(true)\n        .name(\"email_unique\")\n        .build());\nusers.create_index(index).await?;\n\n// Create compound index\nlet compound = IndexModel::new(doc! { \n    \"status\": 1, \n    \"created_at\": -1 \n});\nusers.create_index(compound).await?;\n\n// Create text index for search\nlet text_index = IndexModel::new(doc! { \n    \"name\": \"text\", \n    \"description\": \"text\" \n});\nusers.create_index(text_index).await?;\n\n// Create TTL index\nlet ttl_index = IndexModel::new(doc! { \"expires_at\": 1 })\n    .options(IndexOptions::builder()\n        .expire_after(Duration::from_secs(0))\n        .build());\nsessions.create_index(ttl_index).await?;\n```\n\n### Atlas Data API Support\n\n```rust\nuse fcp_mongodb::atlas::{AtlasClient, AtlasConfig};\n\nlet config = AtlasConfig::builder()\n    .base_url(\"https://data.mongodb-api.com/app/data-xxxxx/endpoint/data/v1\")\n    .api_key(\"your-atlas-api-key\")\n    .data_source(\"Cluster0\")\n    .database(\"myapp\")\n    .build()?;\n\nlet atlas = AtlasClient::new(config);\n\n// Operations work the same way\nlet users = atlas.collection::\u003cUser\u003e(\"users\");\nlet result = users.find(filter).await?;\n```\n\n### Change Streams\n\n```rust\nuse fcp_mongodb::change_stream::{ChangeStream, ChangeEvent};\n\nlet mut stream = users.watch()\n    .full_document(FullDocument::UpdateLookup)\n    .pipeline(vec![\n        doc! { \"$match\": { \"operationType\": \"insert\" } }\n    ])\n    .start().await?;\n\nwhile let Some(event) = stream.next().await {\n    match event?.operation_type {\n        OperationType::Insert =\u003e {\n            let doc = event.full_document.unwrap();\n            println!(\"New user: {:?}\", doc);\n        }\n        OperationType::Update =\u003e { /* ... */ }\n        _ =\u003e {}\n    }\n}\n```\n\n### Transaction Support\n\n```rust\nlet mut session = client.start_session().await?;\n\nsession.start_transaction().await?;\n\n// Operations within transaction\nlet users = client.collection::\u003cUser\u003e(\"users\");\nusers.insert_one(\u0026user).with_session(\u0026mut session).await?;\n\nlet orders = client.collection::\u003cOrder\u003e(\"orders\");\norders.insert_one(\u0026order).with_session(\u0026mut session).await?;\n\nsession.commit_transaction().await?;\n```\n\n### Rate Limiting Integration\n\n```rust\nuse fcp_ratelimit::{RateLimiter, TokenBucket};\n\nlet limiter = RateLimiter::new(TokenBucket::new(\n    100,  // requests per second\n    Duration::from_secs(1),\n));\n\nlet client = MongoClient::builder()\n    .config(config)\n    .rate_limiter(limiter)\n    .build().await?;\n```\n\n### Telemetry Integration\n\n```rust\nuse fcp_telemetry::{Telemetry, SpanKind};\n\nlet client = MongoClient::builder()\n    .config(config)\n    .telemetry(Telemetry::new(\"fcp-mongodb\"))\n    .build().await?;\n\n// Operations automatically traced\n// Span: mongodb.find { db.name: \"myapp\", db.collection: \"users\", ... }\n```\n\n## Dependencies\n\n- `fcp-core` - Core FCP traits and types\n- `fcp-ratelimit` - Rate limiting for connection management\n- `fcp-telemetry` - Observability and tracing\n- `mongodb` - Official MongoDB Rust driver (v2.8+)\n- `bson` - BSON serialization\n- `serde` - Serialization framework\n- `tokio` - Async runtime\n\n## Implementation Notes\n\n1. **Driver Choice**: Use the official `mongodb` crate as the foundation, wrapping it with FCP patterns\n2. **Connection Pooling**: Leverage the driver's built-in connection pool with configurable sizes\n3. **Atlas Data API**: Provide alternative HTTP-based access for serverless/edge deployments\n4. **Schema Validation**: Optional JSON Schema validation on collections\n5. **Retryable Operations**: Enable retryable reads/writes by default for resilience\n6. **Compression**: Support zstd/snappy/zlib compression for network efficiency\n\n## Acceptance Criteria\n\n- [ ] Connect to standalone, replica set, and sharded clusters\n- [ ] All CRUD operations implemented with type-safe wrappers\n- [ ] Aggregation pipeline builder with compile-time validation\n- [ ] Index management (create, drop, list)\n- [ ] Change streams for real-time updates\n- [ ] Transaction support for multi-document ACID\n- [ ] Atlas Data API client for serverless scenarios\n- [ ] Connection pool metrics exposed via telemetry\n- [ ] Rate limiting integration for throttling\n- [ ] Comprehensive error types mapping driver errors\n- [ ] Integration tests against MongoDB test containers\n- [ ] Documentation with examples for all operations\n\n## References\n\n- [MongoDB Rust Driver](https://docs.rs/mongodb/latest/mongodb/)\n- [MongoDB Atlas Data API](https://www.mongodb.com/docs/atlas/api/data-api/)\n- [BSON Specification](https://bsonspec.org/)\n- [MongoDB Aggregation](https://www.mongodb.com/docs/manual/aggregation/)\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T22:04:42.251997245-05:00","created_by":"ubuntu","updated_at":"2026-01-11T22:04:42.251997245-05:00","labels":["connector","database","mongodb","nosql","tier-4"],"dependencies":[{"issue_id":"flywheel_connectors-a7vd","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T22:08:22.214146179-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-a7vd","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T22:08:22.240737289-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-a7vd","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:37:25.344447434-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a7vd","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T07:07:30.918045372-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a7vd","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T07:09:44.739906379-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a7vd","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T07:09:45.159093692-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a7vd","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T07:09:45.572000445-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a7vd","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T07:09:46.002378265-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a7vd","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T07:09:46.418100225-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a7vd","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:09:46.846101344-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-a7vd.1","title":"fcp.mongodb: Manifest + Capability Map (FCP2)","description":"## Goal\nProduce the full FCP2 manifest and capability map for this connector.\n\nThis bead is where we translate the connector’s functional surface (operations) into a **mechanically checkable** contract:\n- operation schemas + schema IDs\n- capability families per operation\n- per-operation NetworkConstraints (default deny)\n- sandbox profile requirements\n- declared state model (stateless / singleton_writer / crdt)\n\n## Required content (must be explicit)\n- Operation list is exhaustive and stable for the current phase.\n- Capability IDs DO NOT encode hostnames/ports.\n- NetworkConstraints are minimal and per-operation.\n- Risk tier for each operation (Safe / Dangerous).\n- Explicit bounds: timeouts, max response sizes, pagination limits.\n\n## Tests\n- Add good/bad manifest examples for the compliance runner.\n\n## Acceptance Criteria\n- Passes static checks in `flywheel_connectors-1n78.21.5`.\n- Default-deny is enforced by manifest + capability requirements.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:40.790449233-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:13:40.790449233-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-a7vd.1","depends_on_id":"flywheel_connectors-a7vd","type":"parent-child","created_at":"2026-01-15T07:13:40.847190159-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-a7vd.2","title":"fcp.mongodb: Provisioning Automation","description":"## Goal\nAutomate provisioning and configuration with minimal human steps.\n\nThis bead owns:\n- auth setup (OAuth / API keys / webhook secrets) via `CredentialObject`/`CredentialId` (egress proxy injection preferred)\n- endpoint configuration\n- `fcp doctor` readiness checks\n- deterministic, mockable provisioning flows\n\n## FCP2 requirements\n- Secrets never touch disk.\n- Provisioning is deterministic and testable.\n- Error messages are actionable and do not leak secrets/PII.\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Provisioning emits structured logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:41.430772963-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:52.641877853-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-a7vd.2","depends_on_id":"flywheel_connectors-a7vd","type":"parent-child","created_at":"2026-01-15T07:13:41.489331816-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a7vd.2","depends_on_id":"flywheel_connectors-a7vd.1","type":"blocks","created_at":"2026-01-15T07:13:42.064915681-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-a7vd.3","title":"TEST: fcp.mongodb Unit/Integration Tests (mock-only)","description":"## Goal\nMock-only unit/integration tests for this connector.\n\n## Required coverage\n- schema validation (inputs + outputs)\n- error taxonomy mapping (retry semantics)\n- pagination and bounds\n- rate limit behavior\n- redaction (no token/secret/PII leakage)\n- idempotency + receipts for Dangerous operations\n\n## Logging\nAll tests emit structured JSON logs per `flywheel_connectors-1n78.35`.\n\n## Acceptance Criteria\n- Deterministic tests; no live external calls.\n- Includes adversarial cases (timeouts, malformed responses, partial failures).\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:42.64994398-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:13:42.64994398-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-a7vd.3","depends_on_id":"flywheel_connectors-a7vd","type":"parent-child","created_at":"2026-01-15T07:13:42.709136928-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a7vd.3","depends_on_id":"flywheel_connectors-a7vd.1","type":"blocks","created_at":"2026-01-15T07:13:43.294114402-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a7vd.3","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:13:43.87856378-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a7vd.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T07:32:12.146917125-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-a7vd.4","title":"E2E: fcp.mongodb Connector Compliance Run","description":"## Goal\nRun the shared connector compliance runner and capture an evidence bundle.\n\n## Must validate\n- handshake + introspection correctness\n- default deny (no CapabilityToken → deny + DecisionReceipt)\n- NetworkConstraints enforcement\n- receipts/audit for Dangerous operations\n- structured logs\n\n## Acceptance Criteria\n- E2E run is deterministic and produces a stable artifact bundle.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:44.402252665-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:13:44.402252665-05:00","labels":["connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-a7vd.4","depends_on_id":"flywheel_connectors-a7vd","type":"parent-child","created_at":"2026-01-15T07:13:44.461925257-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a7vd.4","depends_on_id":"flywheel_connectors-a7vd.1","type":"blocks","created_at":"2026-01-15T07:13:45.048533895-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a7vd.4","depends_on_id":"flywheel_connectors-a7vd.2","type":"blocks","created_at":"2026-01-15T07:13:45.639840911-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a7vd.4","depends_on_id":"flywheel_connectors-a7vd.3","type":"blocks","created_at":"2026-01-15T07:13:46.304664397-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a7vd.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T07:13:46.972819152-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-a81","title":"fcp.stripe - Stripe Payment Platform Connector","description":"# fcp.stripe - Stripe Payment Platform Connector (FCP2)\n\n## Goal\nProvide an FCP2-compliant Stripe connector for payments/billing with strict zone isolation, mechanical authorization, and financial-grade auditing.\n\n## Manifest archetypes (closed set)\n- `operational`\n- `streaming` (webhook/event ingestion)\n\n## Threat model\nFinancial operations are high risk.\n\nHard requirements:\n- Default deny for all operations.\n- Strong audit + receipts for side effects.\n- Never log secrets or sensitive payment data.\n\n## Zone model (mechanical)\n- Single-zone bound: one connector instance ↔ one `ZoneId`.\n- Recommended: one instance per Stripe account per zone.\n\n## External surface\n### NetworkConstraints\nDefault-deny; allow only:\n- `api.stripe.com:443`\n\n### Credential injection\n- Stripe API key via `CredentialId`.\n- Webhook signing secret via `CredentialId` (only if webhook ingestion supported).\n\n## Capability model (illustrative)\n- `stripe.payments.write` (create/confirm/capture/refund)\n- `stripe.payments.read`\n- `stripe.customers.read` / `stripe.customers.write`\n- `stripe.subscriptions.read` / `stripe.subscriptions.write`\n- `stripe.invoices.read` / `stripe.invoices.write`\n- `stripe.webhooks.manage` (Dangerous)\n\n## Operations (representative; implement by phases)\n- payment intents: create/confirm/capture/cancel/refund\n- subscriptions: create/update/cancel\n- customers: create/update/get/list\n- invoices: list/get/create/finalize/pay/void\n- products/prices: list/create/update\n\n## Idempotency (MUST)\nStripe supports idempotency keys.\n\nHard requirement:\n- For side-effecting requests, set `Idempotency-Key` derived from OperationIntent/operation_id.\n- Bind Stripe response ids to OperationReceipts.\n\n## Events (streaming)\nIf webhook ingestion is supported:\n- connector must not expose inbound ports\n- `fcp-host` receives webhooks and forwards verified payloads\n\n## Tests\n- Mock-only unit/integration tests with wiremock.\n- Webhook payload verification simulation.\n- E2E compliance run validates default deny + NetworkConstraints + idempotency behavior.\n\n## Acceptance Criteria\n- Passes connector compliance runner.\n- Deterministic tests; no live Stripe calls in unit tests.\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-11T10:12:16.890693054-05:00","created_by":"ubuntu","updated_at":"2026-01-15T08:37:52.702622121-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-a81","depends_on_id":"flywheel_connectors-vi7","type":"blocks","created_at":"2026-01-11T10:42:43.782641618-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-a81","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T10:42:44.380959342-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-a81","depends_on_id":"flywheel_connectors-iv7","type":"blocks","created_at":"2026-01-11T10:42:44.906230399-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-a81","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T10:42:45.507208273-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-a81","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T01:23:43.640469485-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a81","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:34:53.142772407-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a81","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:34:53.291828311-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a81","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T03:34:53.434577835-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a81","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:34:53.55541358-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a81","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T03:34:53.689986802-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a81","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T03:34:53.803749482-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a81","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T03:34:53.929465439-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-a81.1","title":"fcp.stripe: Manifest + Capability Map (FCP2)","description":"# fcp.stripe: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the Stripe connector manifest contract:\n- archetypes (`operational`, `streaming`)\n- operations + schema IDs\n- capability families + per-operation caps\n- NetworkConstraints allowlist\n- idempotency key rules for side effects\n\n## Acceptance Criteria\n- Complete manifest spec stored here.\n- Good/bad manifest examples exist for static compliance.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:34:59.908712151-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:34:59.908712151-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-a81.1","depends_on_id":"flywheel_connectors-a81","type":"parent-child","created_at":"2026-01-15T03:34:59.909962216-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a81.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:35:41.652319509-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a81.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:35:41.770994062-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-a81.2","title":"fcp.stripe: Provisioning Automation (API key + webhook secret)","description":"# fcp.stripe: Provisioning Automation (API key + webhook secret)\n\n## Goal\nAutomate onboarding:\n- request API key via `CredentialId`\n- optional webhook signing secret via `CredentialId`\n- validate credentials with safe calls\n- validate NetworkConstraints\n\n## Acceptance Criteria\n- `fcp doctor` can validate readiness.\n- Mockable.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:35:05.794747365-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:52.762116132-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-a81.2","depends_on_id":"flywheel_connectors-a81","type":"parent-child","created_at":"2026-01-15T03:35:05.795942616-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-a81.3","title":"fcp.stripe: Payments Core (PaymentIntents + refunds)","description":"# fcp.stripe: Payments Core (PaymentIntents + refunds)\n\n## Goal\nImplement the payments surface:\n- payment intents: create/confirm/capture/cancel\n- refunds\n\n## Requirements\n- Capability gated.\n- Use Stripe Idempotency-Key derived from OperationIntent/operation_id.\n- Emits receipts/audit for side effects.\n\n## Acceptance Criteria\n- Mock-only tests cover idempotency behavior.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:35:11.330533478-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:35:11.330533478-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-a81.3","depends_on_id":"flywheel_connectors-a81","type":"parent-child","created_at":"2026-01-15T03:35:11.331793531-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a81.3","depends_on_id":"flywheel_connectors-a81.1","type":"blocks","created_at":"2026-01-15T03:35:41.90097839-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-a81.4","title":"fcp.stripe: Customers/Subscriptions/Invoices","description":"# fcp.stripe: Customers/Subscriptions/Invoices\n\n## Goal\nImplement the billing surface:\n- customers CRUD\n- subscriptions lifecycle\n- invoices lifecycle\n\n## Requirements\n- Capability gated.\n- Idempotency keys for side effects.\n- AuditEvents for dangerous actions.\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:35:15.891395027-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:28:14.649282026-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-a81.4","depends_on_id":"flywheel_connectors-a81","type":"parent-child","created_at":"2026-01-15T03:35:15.892594156-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-a81.5","title":"fcp.stripe: Webhook Event Ingestion (optional)","description":"# fcp.stripe: Webhook Event Ingestion (optional)\n\n## Goal\nIf enabled, ingest Stripe webhooks as an FCP2 streaming source.\n\n## Requirements\n- Connector does not expose inbound ports.\n- `fcp-host` owns ingress and forwards verified payloads.\n- Verify signature and replay protection.\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:35:21.208662666-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:28:14.545340649-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-a81.5","depends_on_id":"flywheel_connectors-a81","type":"parent-child","created_at":"2026-01-15T03:35:21.209794167-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-a81.6","title":"TEST: Stripe Connector Unit/Integration Tests (mock-only)","description":"# TEST: Stripe Connector Unit/Integration Tests (mock-only)\n\n## Must cover\n- Manifest determinism + interface_hash.\n- Idempotency-key behavior for side effects.\n- Error taxonomy mapping.\n- Redaction.\n\n## Acceptance Criteria\n- Deterministic.\n- Structured JSON logs.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:35:25.985182281-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:35:25.985182281-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-a81.6","depends_on_id":"flywheel_connectors-a81","type":"parent-child","created_at":"2026-01-15T03:35:25.98659906-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a81.6","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T03:35:42.114873865-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-a81.7","title":"E2E: Stripe Connector Compliance Run","description":"# E2E: Stripe Connector Compliance Run\n\n## Goal\nAdd Stripe scenarios to the shared compliance harness.\n\n## Scenarios\n- Default deny.\n- Allow with valid token.\n- Network guard allow/deny.\n- Idempotency behavior for payment side effects.\n\n## Acceptance Criteria\n- `cargo test --package fcp-e2e --features stripe` passes deterministically.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:35:33.43591355-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:35:33.43591355-05:00","labels":["conformance","connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-a81.7","depends_on_id":"flywheel_connectors-a81","type":"parent-child","created_at":"2026-01-15T03:35:33.437120824-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a81.7","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T03:35:42.305694704-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-a8xp","title":"TEST: Checkpoint/Frontier Unit Tests (Advancement, Fork Detection, Convergence)","description":"# TEST: Checkpoint/Frontier Unit Tests\n\n## Scope\nComprehensive tests for checkpoint management and fork detection.\n\n## Test Categories\n\n### Checkpoint Advancement\n- [ ] Normal advancement with quorum signatures\n- [ ] Advancement blocked without quorum\n- [ ] Checkpoint sequence monotonically increases\n- [ ] Checkpoint binds AuditHead + RevocationHead\n- [ ] Checkpoint signature verification\n\n### Fork Detection\n- [ ] Conflicting checkpoints detected\n- [ ] Fork evidence is preserved\n- [ ] Fork triggers alert/pause\n- [ ] Fork resolution protocol\n- [ ] No silent fork acceptance\n\n### Convergence\n- [ ] Nodes converge on same checkpoint\n- [ ] Late-joining node catches up\n- [ ] Partition recovery reaches consistency\n- [ ] Checkpoint gossip propagation\n- [ ] Convergence metrics tracking\n\n### Frontier Management\n- [ ] Frontier tracks latest valid checkpoint per zone\n- [ ] Stale frontier detection\n- [ ] Frontier update atomic with heads\n\n## Golden Vectors\nLocation: `tests/vectors/checkpoint/`\n- `checkpoint_valid.cbor`\n- `checkpoint_fork_evidence.cbor`\n- `convergence_scenario.json`\n\n## Logging Requirements\n```json\n{\n  \"timestamp\": \"RFC3339\",\n  \"test_name\": \"test_fork_detection\",\n  \"phase\": \"execute\",\n  \"correlation_id\": \"uuid\",\n  \"zone_id\": \"z:work\",\n  \"checkpoint_seq\": 42,\n  \"fork_detected\": true,\n  \"result\": \"pass\"\n}\n```\n\n## Acceptance Criteria\n- Fork detection is reliable\n- Convergence is achieved after partition heal\n- All checkpoint operations are audit-logged\n\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:25:49.843174963-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:25:49.843174963-05:00","labels":["checkpoint","fcp2","mvp","security","testing"],"dependencies":[{"issue_id":"flywheel_connectors-a8xp","depends_on_id":"flywheel_connectors-7isb","type":"blocks","created_at":"2026-01-15T03:25:56.101191278-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-a8xp","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:25:56.188844672-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-abwt","title":"TEST: Canonical Serialization Unit Tests (Deterministic CBOR, Schema Hash, CDDL Validation)","description":"# TEST: Canonical Serialization Unit Tests\n\n## Goal\nProve that serialization is deterministic and schema-bound.\n\n## Test Categories\n\n### Deterministic CBOR Encoding\n- [ ] Same logical object → same bytes (always)\n- [ ] Map key ordering is canonical (sorted)\n- [ ] Integer encoding is minimal\n- [ ] Float encoding is canonical\n- [ ] No duplicate map keys\n- [ ] Definite length encoding used\n\n### Schema Hash Binding\n- [ ] SchemaId (namespace, name, version) hashes correctly\n- [ ] SchemaHash is 32 bytes (BLAKE3)\n- [ ] Payload format: schema_hash || canonical_cbor_bytes\n- [ ] Schema hash mismatch detected on decode\n\n### Schema Validation\n- [ ] Valid object passes schema check\n- [ ] Missing required field rejected\n- [ ] Wrong field type rejected\n- [ ] Extra fields handled per policy (reject or ignore)\n- [ ] Nested object validation works\n\n### CDDL Compliance\n- [ ] All FCP2 objects have CDDL definitions\n- [ ] Generated bytes match CDDL constraints\n- [ ] CDDL can be used for cross-language validation\n\n### Roundtrip Tests\n- [ ] Encode → decode → encode produces identical bytes\n- [ ] All core object types roundtrip correctly\n- [ ] Large objects roundtrip correctly\n- [ ] Nested objects roundtrip correctly\n\n### Bounds and Limits\n- [ ] Oversized objects rejected at encode time\n- [ ] Deeply nested objects bounded\n- [ ] String length limits enforced\n- [ ] Array length limits enforced\n\n### Decode Safety\n- [ ] Malformed CBOR rejected without panic\n- [ ] Truncated input rejected\n- [ ] Oversized length prefix rejected (DoS prevention)\n- [ ] Recursive structure depth bounded\n\n## Golden Vectors\n- Each core object type with canonical bytes\n- Schema hash computation examples\n- Malformed inputs that must be rejected\n\n## Property Tests\n- Determinism: same input → same output\n- Commutativity with schema: schema_hash(decode(encode(x))) == schema_hash(x)\n\n## Fuzz Targets\n- CBOR decode with arbitrary bytes\n- Schema validation with malformed objects\n\n## Logging Requirements\n```json\n{\n  \"test_name\": \"...\",\n  \"object_type\": \"...\",\n  \"schema_id\": \"...\",\n  \"operation\": \"encode|decode|validate\",\n  \"result\": \"pass|fail\",\n  \"reason_code\": \"...\"\n}\n```\n\n## Acceptance Criteria\n- All core types have golden vectors\n- Determinism verified by property tests\n- Fuzz targets find no panics\n\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:09:44.438803281-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:09:44.438803281-05:00","labels":["fcp2","mvp","serialization","testing"],"dependencies":[{"issue_id":"flywheel_connectors-abwt","depends_on_id":"flywheel_connectors-1n78.3","type":"blocks","created_at":"2026-01-15T03:23:26.349477373-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-abwt","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:23:46.480905632-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-agh5","title":"TEST: fcp-ratelimit Unit Test Suite","description":"# TEST: fcp-ratelimit Unit Test Suite\n\n## Scope\nComprehensive unit tests for the rate limiting library.\n\n## Test Categories\n\n### Token Bucket Algorithm\n- [ ] Basic request allowance/denial\n- [ ] Bucket refill timing\n- [ ] Burst handling\n- [ ] Multiple buckets per endpoint\n\n### Sliding Window\n- [ ] Window rollover behavior\n- [ ] Request counting accuracy\n- [ ] Boundary conditions\n\n### Rate Limit Header Parsing\n- [ ] X-RateLimit-Limit parsing\n- [ ] X-RateLimit-Remaining parsing\n- [ ] X-RateLimit-Reset parsing\n- [ ] Retry-After header handling\n- [ ] Various header formats (GitHub, Twitter, Stripe, etc.)\n\n### Backoff Strategies\n- [ ] Exponential backoff\n- [ ] Jitter calculation\n- [ ] Maximum retry limits\n- [ ] Backoff reset conditions\n\n### Concurrency\n- [ ] Thread-safe bucket access\n- [ ] Atomic counter operations\n- [ ] Race condition prevention\n\n### Quota Management\n- [ ] Daily/hourly quota tracking\n- [ ] Quota reset timing\n- [ ] Multiple quota types (read vs write)\n\n## Coverage Target: \u003e95%","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-11T12:12:34.626963313-05:00","created_by":"ubuntu","updated_at":"2026-01-15T03:22:45.962849406-05:00","closed_at":"2026-01-15T03:22:45.962849406-05:00","close_reason":"Rate limiting is now part of FCP2 Rate Limiting (gqvh). Platform rate limiting tests will be in that bead's test coverage.","dependencies":[{"issue_id":"flywheel_connectors-agh5","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T12:20:56.318875728-05:00","created_by":"ubuntu"}]}
{"id":"flywheel_connectors-aho","title":"fcp.s3: AWS S3 Compatible Object Storage Connector","description":"# fcp.s3 - S3-Compatible Object Storage Connector (FCP2)\n\n## Goal\nProvide an FCP2-compliant S3 connector for object storage (AWS S3, MinIO, R2, etc.) under strict zone isolation.\n\n## Manifest archetypes (closed set)\n- `storage`\n- `operational`\n\n## Zone model\n- Single-zone bound: one connector instance ↔ one `ZoneId`.\n- Recommended: one instance per bucket boundary / account boundary per zone (policy-owned).\n\n## External surface\n### NetworkConstraints\nDefault-deny; allow only the explicitly configured S3 endpoint hostname(s) and port(s).\n\n### Credential injection\n- AWS SigV4 credentials via `CredentialId`.\n- Prefer explicit credentials; avoid implicit instance-metadata flows unless policy explicitly allows the metadata endpoint.\n\n## Capability model (illustrative)\n- `s3.objects.read`\n- `s3.objects.write`\n- `s3.objects.delete` (Dangerous)\n- `s3.buckets.manage` (Dangerous)\n- `s3.presign.create` (Dangerous; creates bearer URLs)\n\n## Operations (representative)\n- object: put/get/head/delete/copy/list\n- multipart upload\n- bucket: create/delete/list\n- presign URL generation\n\n## Tests\n- Mock-only unit/integration tests with wiremock.\n- Signature V4 golden vectors.\n- E2E compliance run validates default deny + NetworkConstraints + dangerous gating.\n\n## Acceptance Criteria\n- Passes connector compliance runner.\n- Deterministic tests; no live S3 calls in unit tests.\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-11T10:48:10.705196543-05:00","created_by":"ubuntu","updated_at":"2026-01-15T08:37:52.821772569-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-aho","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T10:53:16.000657925-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-aho","depends_on_id":"flywheel_connectors-iv7","type":"blocks","created_at":"2026-01-11T10:53:16.029665486-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-aho","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T10:53:16.058032141-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-aho","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:31:34.626361009-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-aho","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:43:16.672282635-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-aho","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:43:16.831476426-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-aho","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T03:43:16.983579909-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-aho","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:43:17.138139771-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-aho","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T03:43:17.298864786-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-aho","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T03:43:17.445753115-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-aho.1","title":"fcp.s3: Manifest + Capability Map (FCP2)","description":"# fcp.s3: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the S3 connector manifest contract:\n- archetypes (`storage`, `operational`)\n- operations + schema IDs\n- capability families + per-operation caps\n- NetworkConstraints bound to configured endpoint\n- signature-v4 requirements\n\n## Acceptance Criteria\n- Complete manifest spec stored here.\n- Good/bad manifest examples exist for static compliance.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:43:26.569054559-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:43:26.569054559-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-aho.1","depends_on_id":"flywheel_connectors-aho","type":"parent-child","created_at":"2026-01-15T03:43:26.570618295-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-aho.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:44:04.143251957-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-aho.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:44:04.295844322-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-aho.2","title":"fcp.s3: Provisioning Automation (credentials + endpoint)","description":"# fcp.s3: Provisioning Automation (credentials + endpoint)\n\n## Goal\nAutomate onboarding:\n- endpoint hostname + region\n- credentials via `CredentialId`\n- validate auth/signature with safe calls\n\n## Acceptance Criteria\n- `fcp doctor` validates readiness.\n- Mockable.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:43:31.711353249-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:52.886160626-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-aho.2","depends_on_id":"flywheel_connectors-aho","type":"parent-child","created_at":"2026-01-15T03:43:31.712746744-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-aho.3","title":"fcp.s3: Core Object Ops (put/get/list)","description":"# fcp.s3: Core Object Ops (put/get/list)\n\n## Goal\nImplement core object operations:\n- put/get/head/list\n- multipart upload (as needed)\n\n## Requirements\n- Capability gated.\n- Writes emit receipts/audit.\n- Never write secrets to disk.\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:43:37.009351105-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:28:12.310957203-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-aho.3","depends_on_id":"flywheel_connectors-aho","type":"parent-child","created_at":"2026-01-15T03:43:37.010712771-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-aho.3","depends_on_id":"flywheel_connectors-aho.1","type":"blocks","created_at":"2026-01-15T03:44:04.460421094-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-aho.4","title":"fcp.s3: Dangerous Ops (delete/bucket/presign)","description":"# fcp.s3: Dangerous Ops (delete/bucket/presign)\n\n## Goal\nImplement high-risk operations behind strict policy:\n- delete objects\n- create/delete buckets\n- presigned URL generation\n\n## Requirements\n- ApprovalToken `Execution` scope for dangerous operations.\n- AuditEvents for every dangerous action.\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:43:44.288865979-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:28:14.036719029-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-aho.4","depends_on_id":"flywheel_connectors-aho","type":"parent-child","created_at":"2026-01-15T03:43:44.290056542-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-aho.5","title":"TEST: S3 Connector Unit/Integration Tests (mock-only)","description":"# TEST: S3 Connector Unit/Integration Tests (mock-only)\n\n## Must cover\n- Manifest determinism + interface_hash.\n- SigV4 signing golden vectors.\n- Error taxonomy mapping.\n- Redaction.\n\n## Acceptance Criteria\n- Deterministic.\n- Structured JSON logs.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:43:50.406787719-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:43:50.406787719-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-aho.5","depends_on_id":"flywheel_connectors-aho","type":"parent-child","created_at":"2026-01-15T03:43:50.408516185-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-aho.5","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T03:44:04.706033556-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-aho.6","title":"E2E: S3 Connector Compliance Run","description":"# E2E: S3 Connector Compliance Run\n\n## Goal\nAdd S3 scenarios to the shared compliance harness.\n\n## Scenarios\n- Default deny.\n- Network guard allow/deny.\n- Dangerous op gating (delete/presign).\n\n## Acceptance Criteria\n- `cargo test --package fcp-e2e --features s3` passes deterministically.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:43:58.094787627-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:43:58.094787627-05:00","labels":["conformance","connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-aho.6","depends_on_id":"flywheel_connectors-aho","type":"parent-child","created_at":"2026-01-15T03:43:58.096013516-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-aho.6","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T03:44:04.929413346-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-asf","title":"fcp.spotify: Recommendations Engine","description":"# fcp.spotify: Recommendations Engine (FCP2)\n\n## Goal\nExpose Spotify recommendation surfaces to support:\n- playlist generation\n- discovery workflows\n\n## Scope\n- Get recommendations from seeds (tracks/artists/genres).\n- List available genre seeds.\n\n## Capability model (illustrative)\n- `spotify.recommendations.read`\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- Avoid logging raw seed lists if they could reveal user taste (privacy).\n\n## Deliverables\n- Operation schemas:\n  - `spotify.recommendations.get`\n  - `spotify.recommendations.genres.list`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - query parameter formation\n  - error mapping\n\n## Acceptance criteria\n- Recommendation queries are reliable and correctly typed.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:21:12.679334962-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:41:50.930333093-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-asf","depends_on_id":"flywheel_connectors-a4dh","type":"parent-child","created_at":"2026-01-15T02:33:41.811983218-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-asf","depends_on_id":"flywheel_connectors-a4dh.1","type":"blocks","created_at":"2026-01-15T04:41:54.976710654-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-atmv","title":"[FCP2] Bootstrap/Genesis: First-Run Workflow, Owner Key Ceremony, Initial Enrollment","description":"# [FCP2] Bootstrap/Genesis: First-Run Workflow, Owner Key Ceremony, Initial Enrollment\n\n## Goal\nDefine and implement the workflow for initializing a brand new FCP2 mesh from scratch.\n\n## Why This Matters\nWithout a clear bootstrap path, operators will make ad-hoc choices that compromise security. The first-run experience sets the security posture for the entire mesh lifetime.\n\n## Bootstrap Sequence (NORMATIVE)\n\n### Phase 1: Owner Key Generation\n- Generate Ed25519 owner signing keypair\n- For threshold setup (Full Profile): generate t-of-n FROST shares\n- Store owner public key as trust anchor\n- **KEY CEREMONY**: owner private key MUST never touch disk unencrypted; recommend hardware token or threshold distribution from genesis\n\n### Phase 2: Genesis Zone Creation\n- Create `z:owner` zone with owner as sole initial member\n- Generate initial ZoneKeyManifest (owner self-signs, seals to self)\n- Create genesis AuditEvent (hash-linked to itself as prev)\n- Create genesis RevocationHead (seq=0, empty)\n- Create genesis ZoneCheckpoint binding these heads\n\n### Phase 3: First Device Enrollment\n- Generate node keys (signing, encryption, issuance)\n- Create NodeKeyAttestation (owner-signed)\n- Add node to z:owner membership\n- Re-seal ZoneKeyManifest including new node\n\n### Phase 4: Additional Zones\n- Create z:private, z:work, z:community, z:public with appropriate policies\n- Generate zone keys and distribute via sealed manifests\n\n## First-Run CLI Flow\n```\nfcp init --owner-key \u003cgenerate|import|threshold\u003e\n  → generates keys, creates genesis objects\n  → outputs owner public key fingerprint\n  → creates local node enrollment\n\nfcp enroll --invite \u003cenrollment_token\u003e\n  → for subsequent devices joining existing mesh\n```\n\n## Offline Bootstrap (Air-Gapped)\n- Support for creating genesis objects offline\n- Import via QR codes or USB transfer\n- Verify chain integrity on import\n\n## Tests\n- Unit tests: genesis object creation and self-verification\n- Integration tests: bootstrap → enroll second node → verify zone membership\n- Golden vectors: genesis AuditEvent, RevocationHead, ZoneCheckpoint formats\n\n## Acceptance Criteria\n- `fcp init` produces a working single-node mesh\n- `fcp enroll` can add devices to existing mesh\n- Bootstrap from air-gapped genesis is supported\n\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T02:52:29.006384747-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:52:29.006384747-05:00","labels":["bootstrap","fcp2","mvp","ux"],"dependencies":[{"issue_id":"flywheel_connectors-atmv","depends_on_id":"flywheel_connectors-1n78","type":"blocks","created_at":"2026-01-15T02:54:34.3583398-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-atmv","depends_on_id":"flywheel_connectors-1n78.5","type":"blocks","created_at":"2026-01-15T02:54:34.431620517-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-atmv","depends_on_id":"flywheel_connectors-1n78.6","type":"blocks","created_at":"2026-01-15T02:54:34.503834686-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-atmv","depends_on_id":"flywheel_connectors-1n78.11","type":"blocks","created_at":"2026-01-15T02:54:34.574418484-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-atmv","depends_on_id":"flywheel_connectors-1n78.9","type":"blocks","created_at":"2026-01-15T02:54:34.642707179-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-atmv","depends_on_id":"flywheel_connectors-1n78.32","type":"blocks","created_at":"2026-01-15T02:54:34.7147791-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ayc","title":"fcp.hubspot: Reporting and dashboards","description":"# fcp.hubspot - HubSpot CRM \u0026 Marketing Platform Connector\n\n## Overview\nFull HubSpot CRM and Marketing Hub connector for contact management, marketing automation, sales pipeline, and reporting.\n\n## Archetype\n**Hybrid: Request-Response + Webhook + Polling**\n\n## Key Operations\n\n### CRM Objects\n- Contact, Company, Deal, Ticket CRUD\n- Associations between objects\n- Custom properties and objects\n- Timeline activities\n\n### Marketing Hub\n- Email campaigns (create, send, analytics)\n- Forms (submissions, analytics)\n- Landing pages\n- Marketing emails\n- Workflows and automation\n\n### Sales Hub  \n- Pipeline management\n- Sequences and templates\n- Meetings scheduling\n- Quotes and proposals\n\n### Reporting \u0026 Analytics\n- Dashboard access\n- Custom reports\n- Attribution reporting\n- Revenue analytics\n- Funnel metrics\n\n### Integrations\n- Webhook subscriptions\n- App marketplace integration\n- Custom integrations\n\n## Dependencies\n- fcp-core, fcp-oauth, fcp-ratelimit, fcp-testkit, fcp-telemetry","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:16:54.337905151-05:00","created_by":"ubuntu","updated_at":"2026-01-11T12:31:33.721994639-05:00","closed_at":"2026-01-11T12:31:33.721994639-05:00","close_reason":"CONSOLIDATED: All HubSpot sub-features merged into comprehensive parent connector bead flywheel_connectors-hy8v (fcp.hubspot: HubSpot CRM \u0026 Marketing Platform Connector)"}
{"id":"flywheel_connectors-bijm","title":"fcp.docusign","description":"# DocuSign Connector - Electronic Signature Platform\n\n## Overview\nEnterprise-grade connector for DocuSign eSignature API enabling complete document signing workflow automation. Provides full envelope lifecycle management from creation through completion, with real-time webhook notifications for status updates.\n\n## Classification\n- **Value Score**: 76/100 (Tier 3 - Specialized vertical)\n- **Category**: Legal/Contract Automation\n- **Priority**: P2\n- **Interaction patterns**: Request/Response + Webhook (envelope lifecycle events)\n\n## Manifest archetypes (closed set)\n- `operational`\n- `streaming`\n\n\u003e Note: “webhook” and “request/response” are interaction patterns, not manifest archetype values.\n\n\n## Core Operations\n\n### Document Management\n- `create_envelope` - Create new signing envelope with documents\n- `add_document` - Add PDF/DOCX to existing envelope\n- `get_document` - Retrieve document from envelope\n- `download_signed_document` - Get completed signed document\n- `delete_envelope` - Remove draft envelope\n\n### Recipient Management\n- `add_recipient` - Add signer/CC/witness to envelope\n- `update_recipient` - Modify recipient details\n- `remove_recipient` - Remove recipient from envelope\n- `get_recipient_status` - Check individual signer status\n- `resend_notification` - Resend signing invitation email\n\n### Signature Fields \u0026 Tabs\n- `add_signature_tab` - Place signature field on document\n- `add_initial_tab` - Place initials field\n- `add_date_tab` - Place date signed field\n- `add_text_tab` - Place fillable text field\n- `add_checkbox_tab` - Place checkbox field\n- `configure_anchor_tags` - Auto-place fields using text anchors\n\n### Envelope Operations\n- `send_envelope` - Send envelope for signing\n- `void_envelope` - Void/cancel active envelope\n- `correct_envelope` - Modify sent envelope\n- `get_envelope_status` - Check envelope completion status\n- `list_envelopes` - List envelopes with filters\n- `get_envelope_audit` - Get envelope audit trail/history\n\n### Template Management\n- `list_templates` - Get available templates\n- `get_template` - Retrieve template details\n- `create_from_template` - Create envelope from template\n- `update_template` - Modify template configuration\n- `get_template_recipients` - Get template recipient roles\n\n### Embedded Signing\n- `create_recipient_view` - Generate embedded signing URL\n- `create_sender_view` - Generate embedded sending URL\n- `create_edit_view` - Generate envelope edit URL\n\n### Webhook Events (via fcp-webhook)\n- `envelope.sent` - Envelope sent for signature\n- `envelope.delivered` - Envelope delivered to recipient\n- `envelope.completed` - All signatures collected\n- `envelope.declined` - Recipient declined to sign\n- `envelope.voided` - Envelope voided\n- `recipient.signed` - Individual recipient signed\n- `recipient.declined` - Individual recipient declined\n\n## Business Automation Scenarios\n\n### Contract Workflows\n- \"Send contract for signature\" - Upload and route for signing\n- \"Check if NDA signed\" - Query envelope completion status\n- \"Generate offer letter from template\" - Template-based generation\n- \"Archive signed docs to Drive\" - Post-completion document routing\n\n### Sales Operations\n- \"Send proposal after quote approval\"\n- \"Trigger Stripe subscription on contract execution\"\n- \"Update CRM deal stage when signed\"\n- \"Notify Slack channel on completion\"\n\n### HR Automation\n- \"Send offer letter to candidate\"\n- \"Route employee handbook for acknowledgment\"\n- \"Collect W-4/I-9 forms from new hires\"\n- \"Process contractor agreements\"\n\n### Legal/Compliance\n- \"Batch send annual compliance attestations\"\n- \"Track outstanding signatures by department\"\n- \"Generate signing completion reports\"\n- \"Maintain audit trail archive\"\n\n## Flywheel Synergy\n\n### Input Triggers (Connectors that activate DocuSign)\n- **Salesforce/HubSpot CRM**: Deal stage change triggers contract send\n- **Stripe**: Quote approval triggers agreement send\n- **Jira/Asana**: Task completion triggers document routing\n- **Gmail**: Verbal approval detected triggers formal document\n\n### Output Actions (DocuSign events trigger other connectors)\n- **Gmail**: Send confirmation email on completion\n- **Stripe**: Create subscription on contract execution\n- **Salesforce/CRM**: Update opportunity stage, attach signed doc\n- **Google Drive/S3**: Archive signed documents\n- **Slack**: Notify team of signing events\n- **Notion/Confluence**: Update contract database\n\n### Bidirectional Flows\n- **Calendar**: Schedule follow-ups for unsigned envelopes\n- **Sheets**: Track signing metrics and completion rates\n\n## Zone Architecture\n\n\u003c!-- fcp2-single-zone-note --\u003e\n**FCP2 single-zone binding note:** A connector instance binds to exactly one `ZoneId` for its entire lifetime.\nThe *\"zones\"* described in this section are a **recommended deployment pattern** (run separate connector instances in separate zones with different capability grants/policies) and/or conceptual risk tiers.\nThe connector MUST NOT multiplex multiple zones internally.\n\n\n### Zone 1: Read Operations (Low Risk)\n- `get_envelope_status`\n- `get_document`\n- `get_recipient_status`\n- `list_envelopes`\n- `list_templates`\n- `get_template`\n- `get_envelope_audit`\n\n### Zone 2: Create/Modify Draft (Medium Risk)\n- `create_envelope` (draft mode)\n- `add_document`\n- `add_recipient`\n- `add_signature_tab` / `add_*_tab`\n- `update_recipient`\n- `create_from_template`\n\n### Zone 3: Send/Active Operations (High Risk)\n- `send_envelope`\n- `resend_notification`\n- `correct_envelope`\n- `create_recipient_view`\n\n### Zone 4: Administrative (Critical)\n- `void_envelope`\n- `delete_envelope`\n- `update_template`\n\n## Technical Implementation\n\n### API Details\n- **Base URL**: https://[server].docusign.net/restapi/v2.1\n- **Servers**: demo (sandbox), na1-na4, eu, au (production)\n- **Protocol**: REST/JSON\n- **Auth**: OAuth 2.0 (Authorization Code + JWT)\n- **Rate Limits**: 1000 requests/hour (standard), higher for enterprise\n\n### Authentication Flow\n```\n1. OAuth 2.0 Authorization Code flow for user consent\n2. JWT Grant flow for server-to-server (service integration)\n3. Access token refresh with 8-hour expiry\n4. Account ID required for all API calls\n```\n\n### Envelope Lifecycle States\n```\ncreated -\u003e sent -\u003e delivered -\u003e signed -\u003e completed\n                -\u003e declined\n                -\u003e voided\n```\n\n### Key Implementation Considerations\n- **Account Selection**: Users may have multiple accounts, need account_id resolution\n- **Base URI Discovery**: Must call /oauth/userinfo to get base_uri for API calls\n- **Composite Templates**: Complex documents may use template + inline recipients\n- **Tab Positioning**: Support both coordinate-based and anchor-tag positioning\n- **Document Formats**: PDF preferred, also supports DOCX, HTML\n- **Envelope Transaction**: Each envelope consumes one \"envelope\" from account quota\n\n### Webhook Configuration\n- Connect webhook for real-time envelope events\n- HMAC signature verification for security\n- Event filtering by envelope status and recipient events\n- Aggregate notifications to reduce webhook volume\n\n## Dependencies\n- `fcp-core` - Base connector traits and types\n- `fcp-oauth` - OAuth 2.0 authorization code and JWT flows\n- `fcp-webhook` - DocuSign Connect webhook handling\n- `fcp-telemetry` - Metrics and tracing for envelope operations\n\n## Data Models\n\n### Envelope\n```rust\nstruct Envelope {\n    envelope_id: String,\n    status: EnvelopeStatus,\n    email_subject: String,\n    documents: Vec\u003cDocument\u003e,\n    recipients: Recipients,\n    created_datetime: DateTime,\n    sent_datetime: Option\u003cDateTime\u003e,\n    completed_datetime: Option\u003cDateTime\u003e,\n}\n```\n\n### Recipient\n```rust\nstruct Recipient {\n    recipient_id: String,\n    recipient_type: RecipientType, // Signer, CC, CertifiedDelivery, etc.\n    email: String,\n    name: String,\n    routing_order: u32,\n    status: RecipientStatus,\n    tabs: Option\u003cTabs\u003e,\n}\n```\n\n### Document\n```rust\nstruct Document {\n    document_id: String,\n    name: String,\n    file_extension: String,\n    document_base64: Option\u003cString\u003e,\n    uri: Option\u003cString\u003e,\n}\n```\n\n## Error Handling\n- **ENVELOPE_NOT_FOUND**: Invalid envelope_id\n- **RECIPIENT_NOT_FOUND**: Invalid recipient_id\n- **ENVELOPE_IS_NOT_EDITABLE**: Cannot modify sent envelope\n- **USER_LACKS_PERMISSIONS**: Insufficient account permissions\n- **HOURLY_APIINVOCATION_LIMIT_EXCEEDED**: Rate limit hit\n\n## Testing Strategy\n- DocuSign developer sandbox for integration tests\n- Mock envelope lifecycle for unit tests\n- Webhook event simulation for event handling tests\n\n## References\n- DocuSign eSignature REST API: https://developers.docusign.com/docs/esign-rest-api/\n- OAuth Guide: https://developers.docusign.com/platform/auth/\n- Connect Webhooks: https://developers.docusign.com/platform/webhooks/connect/\n- Envelope Lifecycle: https://developers.docusign.com/docs/esign-rest-api/esign101/concepts/envelopes/\n\n## Success Criteria\n- The epic includes (or references) the standard base beads `.1`..`.4` per `flywheel_connectors-lszk.5`.\n- The connector passes `flywheel_connectors-1n78.21.5` (static + dynamic) and has an E2E compliance run wired through `flywheel_connectors-e3i9`.\n- Unit/integration tests are mock-only (no real external calls) and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-11T21:57:45.978741197-05:00","created_by":"ubuntu","updated_at":"2026-01-15T08:35:10.960689814-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-bijm","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T22:08:21.562036399-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-bijm","depends_on_id":"flywheel_connectors-lj2","type":"blocks","created_at":"2026-01-11T22:08:21.643217671-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-bijm","depends_on_id":"flywheel_connectors-vi7","type":"blocks","created_at":"2026-01-11T22:08:21.667666527-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-bijm","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:34:05.159263266-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-bijm","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T04:22:47.848556539-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-bijm","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T04:22:48.048361765-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-bijm","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T04:22:48.245813968-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-bijm","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T04:22:48.44935922-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-bijm","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T04:22:48.659809548-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-bijm","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T04:22:48.853948881-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-bijm.1","title":"fcp.docusign: Manifest + Capability Map (FCP2)","description":"# fcp.docusign: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the DocuSign connector’s **mechanical manifest contract** under FCP2.\n\n## Required contents\n- Manifest archetypes (closed set):\n  - `operational` (envelope CRUD, send/void)\n  - `streaming` (Connect webhooks/events)\n- Operation list + schema IDs.\n- Capability families + per-operation required caps.\n- NetworkConstraints:\n  - pin DocuSign API host(s) (demo vs prod are distinct)\n  - pin document download hosts\n  - HTTPS-only; deny redirects by default\n- State model declaration:\n  - webhook idempotency and envelope status tracking state (if persisted)\n\n## Acceptance criteria\n- Another engineer can implement `--manifest` from this bead alone.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:22:07.715308924-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:22:07.715308924-05:00","dependencies":[{"issue_id":"flywheel_connectors-bijm.1","depends_on_id":"flywheel_connectors-bijm","type":"parent-child","created_at":"2026-01-15T04:22:07.71693639-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-bijm.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T04:22:12.031928954-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-bijm.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T04:22:12.22179077-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-bijm.2","title":"fcp.docusign: Provisioning Automation (OAuth/JWT, base-uri discovery, webhooks)","description":"# fcp.docusign: Provisioning Automation (OAuth/JWT, base-uri discovery, webhooks)\n\n## Goal\nAutomate DocuSign onboarding with minimal human steps while keeping secrets zone-scoped.\n\n## Requirements\n- Support auth via `CredentialId`:\n  - OAuth2 Authorization Code (user consent)\n  - JWT Grant (service integration) if policy allows\n- Base URI discovery (per-account) as required by DocuSign.\n- Connect webhook setup automation:\n  - register events for envelope lifecycle\n  - validate webhook secret/signature configuration\n- Validate NetworkConstraints pinning.\n\n## Acceptance criteria\n- `fcp doctor` verifies readiness without leaking secrets.\n- Fully mockable for unit tests.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:22:20.711627079-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:52.947568475-05:00","dependencies":[{"issue_id":"flywheel_connectors-bijm.2","depends_on_id":"flywheel_connectors-bijm","type":"parent-child","created_at":"2026-01-15T04:22:20.712921417-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-bijm.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T04:22:25.252231151-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-bijm.3","title":"TEST: DocuSign Connector Unit/Integration Tests (mock-only)","description":"# TEST: DocuSign Connector Unit/Integration Tests (mock-only)\n\n## Goal\nMock-only tests for fcp.docusign envelope workflows and webhook ingestion.\n\n## Requirements\n- No real DocuSign calls in CI.\n- Mock endpoints for:\n  - envelope create/update/send/void\n  - recipient + tab management\n  - template operations\n  - document download\n  - Connect webhook ingestion\n- Tests for:\n  - document IO streaming + size limits\n  - capability gating for send/void/delete\n  - approval gating for dangerous ops\n  - rate limiting + retry/backoff\n\n## Acceptance criteria\n- Deterministic CI suite.\n- Structured JSON logs with correlation_id + reason codes.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:22:31.585292481-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:22:31.585292481-05:00","dependencies":[{"issue_id":"flywheel_connectors-bijm.3","depends_on_id":"flywheel_connectors-bijm","type":"parent-child","created_at":"2026-01-15T04:22:31.586650689-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-bijm.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T04:22:34.74923742-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-bijm.4","title":"E2E: DocuSign Connector Compliance Run","description":"# E2E: DocuSign Connector Compliance Run\n\n## Goal\nRun the shared Mechanical Connector Compliance Runner against fcp.docusign.\n\n## Must verify\n- Default deny via CapabilityTokens.\n- NetworkConstraints enforcement.\n- Receipts/audit for envelope send/void and other dangerous ops.\n- Structured JSON logs with correlation_id + reason codes.\n\n## Acceptance criteria\n- Runner output bundle is green for fcp.docusign.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:22:39.65147168-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:22:39.65147168-05:00","dependencies":[{"issue_id":"flywheel_connectors-bijm.4","depends_on_id":"flywheel_connectors-bijm","type":"parent-child","created_at":"2026-01-15T04:22:39.652777811-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-bijm.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T04:22:42.617162656-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-bngd","title":"TEST: Discord Connector Integration Tests","description":"# TEST: Discord Connector Integration Tests (Deterministic)\n\n## Purpose\nIntegration tests for `fcp.discord` using:\n- a deterministic mock Discord REST API (wiremock or in-process)\n- a deterministic mock Discord Gateway (WebSocket server)\n\nNo real Discord calls are allowed.\n\n## What this suite must prove\n### 1) Gateway correctness\n- IDENTIFY / RESUME handling\n- heartbeat timing + ack handling\n- sequence number tracking and persistence\n- reconnect/backoff behavior is bounded\n\n### 2) REST correctness\n- request formation for send_message / reactions / channel list\n- error mapping (401/403/429/5xx → FCP error taxonomy)\n- Retry-After compliance\n\n### 3) Singleton-writer state\n- only the lease-holder maintains the gateway connection\n- restart resumes safely (or fails closed if resume is unsafe)\n\n### 4) FCP2 connector contract\n- standard method surface end-to-end\n- capability gating (deny without token, allow with token)\n- events emitted as EventEnvelopes with correct topics\n- inbound events tainted as external input\n\n## Required adversity cases\n- global rate limit\n- bucketed rate limit\n- malformed gateway frames\n- mid-stream disconnect during event emission\n\n## Logging requirements\n- Structured JSON logs with correlation IDs.\n- Never log bot tokens or raw message bodies by default.\n\n## Acceptance Criteria\n- Deterministic in CI.\n- Failures are actionable (DecisionReceipt reason_code + evidence surfaced).\n","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-11T12:31:50.840987336-05:00","created_by":"ubuntu","updated_at":"2026-01-15T03:20:58.274723936-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-bngd","depends_on_id":"flywheel_connectors-iv7","type":"blocks","created_at":"2026-01-11T12:47:48.836517357-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-bngd","depends_on_id":"flywheel_connectors-lszk.2","type":"parent-child","created_at":"2026-01-15T01:24:16.60582775-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-bngd","depends_on_id":"flywheel_connectors-lszk.2","type":"blocks","created_at":"2026-01-15T01:24:16.658791206-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-bngd","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T03:21:01.419605307-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-bvs","title":"Study: Clawdbot Connector Patterns - Synthesis \u0026 Recommendations","description":"# Study: Clawdbot Connector Patterns - Synthesis \u0026 Recommendations\n\n## Objective\n\nSynthesize findings from Discord and Telegram connector studies into actionable patterns and recommendations for FCP connector development.\n\n## Synthesis Areas\n\n### 1. Common Patterns Identified\n- [ ] Shared architectural patterns\n- [ ] Common abstractions\n- [ ] Reusable utility functions\n- [ ] Configuration patterns\n- [ ] Error handling approaches\n\n### 2. Platform-Specific Adaptations\n- [ ] How patterns adapt to different APIs\n- [ ] Platform-specific optimizations\n- [ ] Unique challenges per platform\n- [ ] Platform capability differences\n\n### 3. Reusable Components Catalog\n\n#### Core Infrastructure\n- Connection management\n- Retry/backoff utilities\n- Rate limiter\n- Event dispatcher\n- Configuration loader\n\n#### Message Processing\n- Command parser\n- Response builder\n- Attachment handler\n- Formatter utilities\n\n#### State Management\n- Session manager\n- Cache layer\n- Persistence adapter\n\n### 4. Anti-Patterns to Avoid\n- [ ] Identified code smells\n- [ ] Scalability issues\n- [ ] Security concerns\n- [ ] Maintainability problems\n- [ ] Testing difficulties\n\n### 5. FCP Connector Design Recommendations\n\n#### Architecture\n- Recommended module structure\n- Interface definitions\n- Dependency injection patterns\n- Plugin system design\n\n#### Implementation Guidelines\n- Coding standards\n- Error handling strategy\n- Logging requirements\n- Testing requirements\n\n#### Documentation Standards\n- API documentation\n- Configuration documentation\n- Troubleshooting guides\n\n## Deliverables\n\n1. **FCP Connector Template** - Skeleton project with best practices\n2. **Pattern Library** - Reusable patterns with examples\n3. **Style Guide** - Coding and architecture standards\n4. **Checklist** - Connector review checklist\n5. **Migration Guide** - How to port existing connectors to FCP\n\n## Success Criteria\n\n- Clear, actionable recommendations\n- Reusable code templates\n- Documented patterns with rationale\n- Identified gaps requiring new solutions\n- Roadmap for connector development\n\n## Dependencies\n\n- Completion of Discord connector study\n- Completion of Telegram connector study\n\n## Time Estimate\n\n- Synthesis: 3-4 hours\n- Template creation: 2-3 hours\n- Documentation: 2-3 hours\n- Total: 7-10 hours\n\n## Acceptance Criteria\n- Runs deterministically in CI (no flake due to timing/network).\n- Uses mocks only (no real external network).\n- Emits structured JSON logs per `flywheel_connectors-1n78.35` with stable `test_name` identifiers.\n","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-11T10:24:02.200654302-05:00","created_by":"ubuntu","updated_at":"2026-01-15T05:28:11.588086937-05:00","dependencies":[{"issue_id":"flywheel_connectors-bvs","depends_on_id":"flywheel_connectors-v6w","type":"blocks","created_at":"2026-01-11T12:47:47.489076149-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-bvs","depends_on_id":"flywheel_connectors-w1g","type":"blocks","created_at":"2026-01-11T12:47:47.514390346-05:00","created_by":"ubuntu"}]}
{"id":"flywheel_connectors-c96","title":"fcp.docusign: Send for Signature","description":"# fcp.docusign: Send for Signature (FCP2)\n\n## Goal\nTransition envelopes from draft → sent, initiating the real-world signature workflow.\n\nThis is a high-impact side effect and must be approval-gated by policy.\n\n## Scope\n- Send envelope for signature.\n- Resend notifications (optional; dangerous-ish).\n- Void/cancel envelope (dangerous).\n\n## Capability model (illustrative)\n- `docusign.envelopes.send` (dangerous)\n- `docusign.envelopes.resend` (dangerous)\n- `docusign.envelopes.void` (dangerous)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- PII hygiene:\n  - recipient emails/names must never appear in logs\n- For send/void:\n  - require ApprovalToken when policy dictates (recommended default)\n  - emit OperationReceipt + AuditEvent with envelope_id + action\n\n## Deliverables\n- Operation schemas:\n  - `docusign.envelope.send`\n  - `docusign.envelope.resend`\n  - `docusign.envelope.void`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - send happy path\n  - approval gating\n  - audit/receipt emission\n\n## Acceptance criteria\n- Envelope send/void operations are mechanically authorized, explainable, and auditable.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:21:33.456195883-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:37:48.289622104-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-c96","depends_on_id":"flywheel_connectors-bijm","type":"parent-child","created_at":"2026-01-15T02:34:17.339808948-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-c96","depends_on_id":"flywheel_connectors-bijm.1","type":"blocks","created_at":"2026-01-15T04:37:52.795830215-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-c9lz","title":"fcp.monday: Monday.com Work OS Connector","description":"## Overview\nFlywheel Connector for Monday.com Work OS platform.\n\n## Connector Profile\n- **Value Score**: 66/100 (Tier 4)\n- **Archetype**: Request-Response + Webhook\n- **Platform**: Work OS\n- **API Type**: GraphQL\n\n## Operations\n- Board CRUD (create, read, update, delete)\n- Items management\n- Columns configuration\n- Groups organization\n- Updates/comments\n- Files attachments\n- Docs integration\n- Workspaces management\n\n## Zone Architecture\n\n\u003c!-- fcp2-single-zone-note --\u003e\n**FCP2 single-zone binding note:** A connector instance binds to exactly one `ZoneId` for its entire lifetime.\nThe *\"zones\"* described in this section are a **recommended deployment pattern** (run separate connector instances in separate zones with different capability grants/policies) and/or conceptual risk tiers.\nThe connector MUST NOT multiplex multiple zones internally.\n\n- **board read**: Read-only access to boards, items, columns, groups\n- **board write**: Create/update/delete items, columns, groups, updates\n- **workspace admin**: Workspace-level administration, user management\n\n## Dependencies\n- fcp-core: Core connector infrastructure\n- fcp-oauth: OAuth2 authentication flow\n- fcp-graphql: GraphQL client and query building\n- fcp-webhook: Webhook event handling\n- fcp-telemetry: Metrics and observability\n\n## Implementation Notes\n- Monday.com uses GraphQL API exclusively\n- Requires OAuth2 app registration in Monday.com marketplace\n- Webhook subscriptions for real-time board/item updates\n- Rate limiting: 10,000 complexity points per minute\n- Pagination via cursor-based approach\n\n## Technical Considerations\n- GraphQL query complexity management\n- Batch operations for bulk item updates\n- File upload via separate REST endpoint\n- Webhook signature verification\n- Column type mappings (status, people, date, etc.)\n\n## Acceptance Criteria\n- [ ] OAuth2 flow with Monday.com marketplace app\n- [ ] Board CRUD operations via GraphQL\n- [ ] Item lifecycle management\n- [ ] Column and group operations\n- [ ] Update/comment threading\n- [ ] File attachment handling\n- [ ] Workspace administration\n- [ ] Webhook event subscriptions\n- [ ] Rate limit compliance\n- [ ] Comprehensive test coverage","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T22:03:11.052136693-05:00","created_by":"ubuntu","updated_at":"2026-01-15T07:23:29.92217736-05:00","labels":["connector","graphql","tier-4","webhook","work-os"],"dependencies":[{"issue_id":"flywheel_connectors-c9lz","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T22:08:22.008247319-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-c9lz","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T22:08:22.033668045-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-c9lz","depends_on_id":"flywheel_connectors-lj2","type":"blocks","created_at":"2026-01-11T22:08:32.506984609-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-c9lz","depends_on_id":"flywheel_connectors-vi7","type":"blocks","created_at":"2026-01-11T22:08:32.751965419-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-c9lz","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:37:14.819141407-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-c9lz","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T07:07:30.478336778-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-c9lz","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T07:09:42.222614953-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-c9lz","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T07:09:42.643345074-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-c9lz","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T07:09:43.063867394-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-c9lz","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T07:09:43.488773949-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-c9lz","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T07:09:43.898898899-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-c9lz","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:09:44.32651399-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-c9lz.1","title":"fcp.monday: Manifest + Capability Map (FCP2)","description":"## Goal\nProduce the full FCP2 manifest and capability map for this connector.\n\nThis bead is where we translate the connector’s functional surface (operations) into a **mechanically checkable** contract:\n- operation schemas + schema IDs\n- capability families per operation\n- per-operation NetworkConstraints (default deny)\n- sandbox profile requirements\n- declared state model (stateless / singleton_writer / crdt)\n\n## Required content (must be explicit)\n- Operation list is exhaustive and stable for the current phase.\n- Capability IDs DO NOT encode hostnames/ports.\n- NetworkConstraints are minimal and per-operation.\n- Risk tier for each operation (Safe / Dangerous).\n- Explicit bounds: timeouts, max response sizes, pagination limits.\n\n## Tests\n- Add good/bad manifest examples for the compliance runner.\n\n## Acceptance Criteria\n- Passes static checks in `flywheel_connectors-1n78.21.5`.\n- Default-deny is enforced by manifest + capability requirements.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:34.080745678-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:13:34.080745678-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-c9lz.1","depends_on_id":"flywheel_connectors-c9lz","type":"parent-child","created_at":"2026-01-15T07:13:34.139805856-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-c9lz.2","title":"fcp.monday: Provisioning Automation","description":"## Goal\nAutomate provisioning and configuration with minimal human steps.\n\nThis bead owns:\n- auth setup (OAuth / API keys / webhook secrets) via `CredentialObject`/`CredentialId` (egress proxy injection preferred)\n- endpoint configuration\n- `fcp doctor` readiness checks\n- deterministic, mockable provisioning flows\n\n## FCP2 requirements\n- Secrets never touch disk.\n- Provisioning is deterministic and testable.\n- Error messages are actionable and do not leak secrets/PII.\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Provisioning emits structured logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:34.734275293-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:53.007767645-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-c9lz.2","depends_on_id":"flywheel_connectors-c9lz","type":"parent-child","created_at":"2026-01-15T07:13:34.794075206-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-c9lz.2","depends_on_id":"flywheel_connectors-c9lz.1","type":"blocks","created_at":"2026-01-15T07:13:35.364864923-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-c9lz.3","title":"TEST: fcp.monday Unit/Integration Tests (mock-only)","description":"## Goal\nMock-only unit/integration tests for this connector.\n\n## Required coverage\n- schema validation (inputs + outputs)\n- error taxonomy mapping (retry semantics)\n- pagination and bounds\n- rate limit behavior\n- redaction (no token/secret/PII leakage)\n- idempotency + receipts for Dangerous operations\n\n## Logging\nAll tests emit structured JSON logs per `flywheel_connectors-1n78.35`.\n\n## Acceptance Criteria\n- Deterministic tests; no live external calls.\n- Includes adversarial cases (timeouts, malformed responses, partial failures).\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:35.942755647-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:13:35.942755647-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-c9lz.3","depends_on_id":"flywheel_connectors-c9lz","type":"parent-child","created_at":"2026-01-15T07:13:36.002806252-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-c9lz.3","depends_on_id":"flywheel_connectors-c9lz.1","type":"blocks","created_at":"2026-01-15T07:13:36.603067808-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-c9lz.3","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:13:37.20265324-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-c9lz.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T07:32:12.758065277-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-c9lz.4","title":"E2E: fcp.monday Connector Compliance Run","description":"## Goal\nRun the shared connector compliance runner and capture an evidence bundle.\n\n## Must validate\n- handshake + introspection correctness\n- default deny (no CapabilityToken → deny + DecisionReceipt)\n- NetworkConstraints enforcement\n- receipts/audit for Dangerous operations\n- structured logs\n\n## Acceptance Criteria\n- E2E run is deterministic and produces a stable artifact bundle.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:37.713091285-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:13:37.713091285-05:00","labels":["connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-c9lz.4","depends_on_id":"flywheel_connectors-c9lz","type":"parent-child","created_at":"2026-01-15T07:13:37.772847485-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-c9lz.4","depends_on_id":"flywheel_connectors-c9lz.1","type":"blocks","created_at":"2026-01-15T07:13:38.353273809-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-c9lz.4","depends_on_id":"flywheel_connectors-c9lz.2","type":"blocks","created_at":"2026-01-15T07:13:38.932096299-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-c9lz.4","depends_on_id":"flywheel_connectors-c9lz.3","type":"blocks","created_at":"2026-01-15T07:13:39.588591404-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-c9lz.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T07:13:40.245606711-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-cdj","title":"fcp.1password: Credential Management Connector","description":"## Overview\nSecure credential management connector for 1Password integration, enabling AI agents to safely access and manage secrets without exposing sensitive data.\n\n## Core Capabilities\n\n### Item Lookup (Read-Only by Default)\n- Search vault items by name, tags, or categories\n- Retrieve specific fields (username, URL, notes) without exposing passwords\n- Read-only access as the default permission level\n- Explicit elevation required for password retrieval\n\n### Password Generation\n- Generate strong passwords with configurable requirements\n- Support for length, character sets, and complexity rules\n- Memorable password generation (word-based)\n- PIN generation for numeric-only contexts\n\n### Entry Creation\n- Create new login entries with generated passwords\n- Support for secure notes, credit cards, identities\n- Custom field support for application-specific data\n- Automatic categorization and tagging\n\n### Vault Organization\n- List and navigate vault structure\n- Move items between vaults\n- Bulk tagging operations\n- Archive and restore items\n\n### Secure Note Access\n- Read secure notes for configuration data\n- Structured note parsing (YAML, JSON embedded)\n- Document attachment retrieval\n- Version history access\n\n## Security Requirements\n\n### Credential Protection\n- **CRITICAL**: Never expose credentials in logs or output\n- Mask all sensitive fields in debug output\n- Use secure memory handling\n- Clear credentials from memory after use\n\n### Time-Limited Credential Leases\n- Short-lived access tokens (5-minute default)\n- Automatic credential rotation\n- Lease renewal with re-authentication\n- Audit trail for all credential access\n\n## Implementation Notes\n- Use 1Password CLI (op) or Connect API\n- Support both personal and team accounts\n- Service account integration for automation\n- MFA handling for interactive sessions\n\n## Testing Requirements\n- Mock vault for unit tests\n- Integration tests with test vault\n- Security audit for credential handling\n- Penetration testing for leak prevention","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:21:48.804778945-05:00","created_by":"ubuntu","updated_at":"2026-01-15T02:34:56.145167808-05:00","closed_at":"2026-01-15T02:34:56.145167808-05:00","close_reason":"Duplicate of flywheel_connectors-8egw"}
{"id":"flywheel_connectors-cga","title":"fcp.spotify: Podcast Episode Data Access","description":"# fcp.spotify: Podcast Episode Data Access (FCP2)\n\n## Goal\nProvide access to podcast metadata for discovery and summarization workflows.\n\n## Scope\n- Get show metadata.\n- List show episodes (pagination).\n- Get episode metadata.\n- Optional: saved episodes list (ties to library mgmt).\n\n## Capability model (illustrative)\n- `spotify.podcasts.read`\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- Treat titles/descriptions as tainted external content.\n\n## Deliverables\n- Operation schemas:\n  - `spotify.show.get`\n  - `spotify.show.episodes.list`\n  - `spotify.episode.get`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - pagination\n  - market handling\n\n## Acceptance criteria\n- Podcast metadata access is reliable and correctly typed.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:21:13.095708643-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:42:03.945803431-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-cga","depends_on_id":"flywheel_connectors-a4dh","type":"parent-child","created_at":"2026-01-15T02:33:41.894514542-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-cga","depends_on_id":"flywheel_connectors-a4dh.1","type":"blocks","created_at":"2026-01-15T04:42:08.893646668-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-cu3","title":"fcp.datadog: Datadog Observability Platform Connector","description":"# fcp.datadog - Datadog Observability Platform Connector\n\n## Overview\nFull-featured Datadog observability connector for monitoring, alerting, APM tracing, log analysis, and incident management automation.\n\n## Manifest archetypes (closed set)\n- `operational`\n- `streaming`\n\n\u003e Interaction patterns (non-archetype): Request/Response + Webhook + Polling\n\n## Key Operations\n\n### Metrics \u0026 Dashboards\n- `datadog.metrics.query` - Query metric timeseries\n- `datadog.metrics.submit` - Submit custom metrics\n- `datadog.dashboard.get/list` - Access dashboards\n- `datadog.dashboard.widget.render` - Get widget data/images\n\n### Monitoring \u0026 Alerts\n- `datadog.monitor.create/get/update/delete` - Manage monitors\n- `datadog.monitor.mute/unmute` - Silence alerts\n- `datadog.alert.list` - Get triggered alerts\n- `datadog.downtime.schedule` - Schedule maintenance\n\n### Logs\n- `datadog.logs.search` - Query log data\n- `datadog.logs.submit` - Send log entries\n- `datadog.logs.pipelines` - Manage processing pipelines\n- `datadog.logs.archives` - Configure log archiving\n\n### APM \u0026 Tracing\n- `datadog.trace.search` - Search distributed traces\n- `datadog.trace.get` - Get trace details\n- `datadog.service.list` - List monitored services\n- `datadog.service.dependencies` - Service map data\n\n### Anomaly Detection \u0026 Forecasting\n- `datadog.anomaly.query` - Get anomaly detection results\n- `datadog.forecast.query` - Get metric forecasts\n- `datadog.watchdog.alerts` - AI-detected anomalies\n\n### Incident Management\n- `datadog.incident.create/get/update` - Manage incidents\n- `datadog.incident.timeline` - Incident timeline events\n- `datadog.incident.notify` - Send notifications\n- `datadog.oncall.schedule` - On-call schedules\n\n### Infrastructure\n- `datadog.hosts.list` - List monitored hosts\n- `datadog.containers.list` - Container inventory\n- `datadog.processes.list` - Process data\n\n## Authentication\n- API Key + Application Key authentication\n- Scoped API keys for least privilege\n\n## Dependencies\n- fcp-core, fcp-ratelimit, fcp-testkit, fcp-telemetry\n\n## Sub-Features (consolidated)\nThis connector encompasses: Monitor/alert management, Log search/analysis, APM trace inspection, Anomaly detection/forecasting, Incident response workflows, Dashboard access/widgets\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T12:09:44.802418506-05:00","created_by":"ubuntu","updated_at":"2026-01-15T07:39:54.62026814-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-cu3","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:30:49.546402179-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-cu3","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T07:09:17.370243707-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-cu3","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T07:09:17.77821729-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-cu3","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T07:09:18.202996666-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-cu3","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T07:09:18.619849257-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-cu3","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T07:09:19.054656637-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-cu3","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T07:09:19.466880603-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-cu3","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:09:19.893876878-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-cu3.1","title":"fcp.datadog: Manifest + Capability Map (FCP2)","description":"## Goal\nProduce the full FCP2 manifest and capability map for this connector.\n\nThis bead is where we translate the connector’s functional surface (operations) into a **mechanically checkable** contract:\n- operation schemas + schema IDs\n- capability families per operation\n- per-operation NetworkConstraints (default deny)\n- sandbox profile requirements\n- declared state model (stateless / singleton_writer / crdt)\n\n## Required content (must be explicit)\n- Operation list is exhaustive and stable for the current phase.\n- Capability IDs DO NOT encode hostnames/ports.\n- NetworkConstraints are minimal and per-operation.\n- Risk tier for each operation (Safe / Dangerous).\n- Explicit bounds: timeouts, max response sizes, pagination limits.\n\n## Tests\n- Add good/bad manifest examples for the compliance runner.\n\n## Acceptance Criteria\n- Passes static checks in `flywheel_connectors-1n78.21.5`.\n- Default-deny is enforced by manifest + capability requirements.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:35.227968257-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:12:35.227968257-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-cu3.1","depends_on_id":"flywheel_connectors-cu3","type":"parent-child","created_at":"2026-01-15T07:12:35.286393879-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-cu3.2","title":"fcp.datadog: Provisioning Automation","description":"## Goal\nAutomate provisioning and configuration with minimal human steps.\n\nThis bead owns:\n- auth setup (OAuth / API keys / webhook secrets) via `CredentialObject`/`CredentialId` (egress proxy injection preferred)\n- endpoint configuration\n- `fcp doctor` readiness checks\n- deterministic, mockable provisioning flows\n\n## FCP2 requirements\n- Secrets never touch disk.\n- Provisioning is deterministic and testable.\n- Error messages are actionable and do not leak secrets/PII.\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Provisioning emits structured logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:35.80988976-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:53.068417015-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-cu3.2","depends_on_id":"flywheel_connectors-cu3","type":"parent-child","created_at":"2026-01-15T07:12:35.869200801-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-cu3.2","depends_on_id":"flywheel_connectors-cu3.1","type":"blocks","created_at":"2026-01-15T07:12:36.392182342-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-cu3.3","title":"TEST: fcp.datadog Unit/Integration Tests (mock-only)","description":"## Goal\nMock-only unit/integration tests for this connector.\n\n## Required coverage\n- schema validation (inputs + outputs)\n- error taxonomy mapping (retry semantics)\n- pagination and bounds\n- rate limit behavior\n- redaction (no token/secret/PII leakage)\n- idempotency + receipts for Dangerous operations\n\n## Logging\nAll tests emit structured JSON logs per `flywheel_connectors-1n78.35`.\n\n## Acceptance Criteria\n- Deterministic tests; no live external calls.\n- Includes adversarial cases (timeouts, malformed responses, partial failures).\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:36.914405664-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:12:36.914405664-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-cu3.3","depends_on_id":"flywheel_connectors-cu3","type":"parent-child","created_at":"2026-01-15T07:12:36.972682906-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-cu3.3","depends_on_id":"flywheel_connectors-cu3.1","type":"blocks","created_at":"2026-01-15T07:12:37.507795206-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-cu3.3","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:12:38.037518637-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-cu3.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T07:32:13.370331277-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-cu3.4","title":"E2E: fcp.datadog Connector Compliance Run","description":"## Goal\nRun the shared connector compliance runner and capture an evidence bundle.\n\n## Must validate\n- handshake + introspection correctness\n- default deny (no CapabilityToken → deny + DecisionReceipt)\n- NetworkConstraints enforcement\n- receipts/audit for Dangerous operations\n- structured logs\n\n## Acceptance Criteria\n- E2E run is deterministic and produces a stable artifact bundle.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:38.498519145-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:12:38.498519145-05:00","labels":["connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-cu3.4","depends_on_id":"flywheel_connectors-cu3","type":"parent-child","created_at":"2026-01-15T07:12:38.556263482-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-cu3.4","depends_on_id":"flywheel_connectors-cu3.1","type":"blocks","created_at":"2026-01-15T07:12:39.081123495-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-cu3.4","depends_on_id":"flywheel_connectors-cu3.2","type":"blocks","created_at":"2026-01-15T07:12:39.605164363-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-cu3.4","depends_on_id":"flywheel_connectors-cu3.3","type":"blocks","created_at":"2026-01-15T07:12:40.208320085-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-cu3.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T07:12:40.813005281-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-d1b","title":"fcp.microsoft365: Microsoft 365 Suite Integration Connector","description":"# FCP Microsoft 365 Suite Integration Connector\n\n## Overview\nComprehensive enterprise connector for Microsoft 365 suite, providing unified access through Microsoft Graph API. Critical for enterprise adoption with support for Outlook, OneDrive, Excel, Word, OneNote, SharePoint, and MS Planner.\n\n## Sub-Connectors Architecture\n\n### 1. Outlook (Email \u0026 Calendar)\n\n#### Email Operations\n- **Read Messages**: Inbox, folders, search\n- **Send Messages**: Compose, reply, forward\n- **Manage Messages**: Move, delete, archive\n- **Attachments**: Upload, download, inline\n- **Mail Folders**: Create, organize, rules\n\n#### Calendar Operations\n- **Events**: Create, update, delete, RSVP\n- **Calendars**: Multiple calendar support\n- **Availability**: Free/busy lookup\n- **Scheduling**: Find meeting times\n- **Recurring Events**: Complex patterns\n\n#### Contacts\n- **Contact Management**: CRUD operations\n- **Contact Folders**: Organization\n- **Contact Groups**: Distribution lists\n\n### 2. OneDrive (File Storage)\n\n#### File Operations\n- **Upload**: Simple and resumable\n- **Download**: Direct and streaming\n- **Copy/Move**: Within and across drives\n- **Delete**: Soft delete and restore\n- **Sharing**: Links, permissions\n\n#### Folder Management\n- **Create/Delete Folders**\n- **List Contents**: Pagination support\n- **Search**: Full-text search\n- **Delta Sync**: Track changes\n\n#### Special Folders\n- Documents, Pictures, Desktop\n- App-specific folders\n- Shared folders\n\n### 3. Excel Online\n\n#### Workbook Operations\n- **Open/Create Workbooks**\n- **List Worksheets**\n- **Workbook Sessions**: Persistent editing\n\n#### Data Operations\n```python\n# Read range\nGET /workbook/worksheets/{id}/range(address='A1:D10')\n\n# Update range\nPATCH /workbook/worksheets/{id}/range(address='A1:D10')\n{\n    \"values\": [[\"A\", \"B\"], [\"C\", \"D\"]]\n}\n```\n\n#### Table Operations\n- **Create Tables**: From ranges\n- **Add Rows**: Append data\n- **Sort/Filter**: Data manipulation\n- **Calculated Columns**: Formulas\n\n#### Charts \u0026 Pivots\n- Create charts from data\n- Pivot table operations\n\n### 4. Word Online\n\n#### Document Operations\n- **Create Documents**: From templates\n- **Read Content**: Full text extraction\n- **Update Content**: Append, replace\n- **Export**: PDF, other formats\n\n#### Content Controls\n- Find and replace\n- Bookmark management\n- Comment operations\n\n### 5. OneNote\n\n#### Notebook Operations\n- **List Notebooks**: Personal and shared\n- **Create Notebooks**\n- **Sections**: Create, organize\n- **Section Groups**: Nested organization\n\n#### Page Operations\n```python\n# Create page with HTML content\nPOST /sections/{id}/pages\nContent-Type: text/html\n\n\u003chtml\u003e\n  \u003chead\u003e\u003ctitle\u003ePage Title\u003c/title\u003e\u003c/head\u003e\n  \u003cbody\u003e\n    \u003ch1\u003eHeading\u003c/h1\u003e\n    \u003cp\u003eContent here\u003c/p\u003e\n  \u003c/body\u003e\n\u003c/html\u003e\n```\n\n#### Content\n- Rich text with HTML\n- Images and attachments\n- Ink and handwriting\n- Tags and to-do items\n\n### 6. SharePoint\n\n#### Site Operations\n- **List Sites**: All accessible sites\n- **Site Details**: Properties, permissions\n- **Subsites**: Create, manage\n\n#### Lists \u0026 Libraries\n- **Document Libraries**: File storage\n- **Custom Lists**: Structured data\n- **List Items**: CRUD operations\n- **Views**: Custom views\n\n#### Pages \u0026 News\n- **Site Pages**: Create, update\n- **News Posts**: Publishing\n- **Web Parts**: Content blocks\n\n### 7. MS Planner\n\n#### Plan Operations\n- **Create Plans**: Within Groups\n- **List Plans**: User's plans\n- **Plan Details**: Buckets, tasks\n\n#### Task Operations\n```python\n{\n    \"planId\": \"...\",\n    \"bucketId\": \"...\",\n    \"title\": \"Task title\",\n    \"assignments\": {\n        \"user-id\": {\n            \"@odata.type\": \"#microsoft.graph.plannerAssignment\",\n            \"orderHint\": \" !\"\n        }\n    },\n    \"dueDateTime\": \"2024-12-31T00:00:00Z\"\n}\n```\n\n#### Bucket Management\n- Create/organize buckets\n- Move tasks between buckets\n- Bucket ordering\n\n## Microsoft Graph API (Unified Endpoint)\n\n### Base Configuration\n```yaml\ngraph_api:\n  base_url: \"https://graph.microsoft.com/v1.0\"\n  beta_url: \"https://graph.microsoft.com/beta\"\n  scopes:\n    - \"User.Read\"\n    - \"Mail.ReadWrite\"\n    - \"Files.ReadWrite.All\"\n    - \"Calendars.ReadWrite\"\n    - \"Sites.ReadWrite.All\"\n    - \"Tasks.ReadWrite\"\n```\n\n### Batch Requests\n```python\nPOST /$batch\n{\n    \"requests\": [\n        {\"id\": \"1\", \"method\": \"GET\", \"url\": \"/me/messages\"},\n        {\"id\": \"2\", \"method\": \"GET\", \"url\": \"/me/events\"},\n        {\"id\": \"3\", \"method\": \"GET\", \"url\": \"/me/drive/root/children\"}\n    ]\n}\n```\n\n## OAuth 2.0 with Refresh Tokens\n\n### Authorization Flow\n```\n1. GET /authorize?client_id=...\u0026scope=...\u0026redirect_uri=...\n2. User consents\n3. POST /token (authorization_code grant)\n4. Store refresh_token securely\n5. POST /token (refresh_token grant) when access_token expires\n```\n\n### Token Management\n```yaml\nauth:\n  type: \"oauth2\"\n  client_id: \"${AZURE_CLIENT_ID}\"\n  client_secret: \"${AZURE_CLIENT_SECRET}\"\n  tenant_id: \"${AZURE_TENANT_ID}\"\n  redirect_uri: \"http://localhost:8080/callback\"\n  \n  token_storage:\n    type: \"encrypted_file\"\n    path: \"/secure/tokens.enc\"\n    \n  auto_refresh: true\n  refresh_buffer_seconds: 300\n```\n\n### Scopes by Sub-connector\n| Sub-connector | Required Scopes |\n|---------------|-----------------|\n| Outlook Mail | Mail.Read, Mail.ReadWrite, Mail.Send |\n| Outlook Calendar | Calendars.Read, Calendars.ReadWrite |\n| OneDrive | Files.Read, Files.ReadWrite, Files.ReadWrite.All |\n| Excel | Files.ReadWrite |\n| Word | Files.ReadWrite |\n| OneNote | Notes.Read, Notes.ReadWrite |\n| SharePoint | Sites.Read.All, Sites.ReadWrite.All |\n| Planner | Tasks.Read, Tasks.ReadWrite, Group.ReadWrite.All |\n\n## Webhook Subscriptions (Real-time Events)\n\n### Subscription Management\n```python\n# Create subscription\nPOST /subscriptions\n{\n    \"changeType\": \"created,updated,deleted\",\n    \"notificationUrl\": \"https://webhook.example.com/m365\",\n    \"resource\": \"/me/messages\",\n    \"expirationDateTime\": \"2024-12-31T00:00:00Z\",\n    \"clientState\": \"secret-validation-token\"\n}\n```\n\n### Supported Resources\n- `/me/messages`: Email changes\n- `/me/events`: Calendar changes\n- `/me/contacts`: Contact changes\n- `/drives/{id}/root`: OneDrive changes\n- `/sites/{id}/lists/{id}/items`: SharePoint changes\n- `/groups/{id}/planner/tasks`: Planner changes\n\n### Webhook Handler\n```python\nasync def handle_webhook(request):\n    # Validation challenge\n    if 'validationToken' in request.query:\n        return PlainTextResponse(request.query['validationToken'])\n    \n    # Process notifications\n    for notification in request.json()['value']:\n        resource = notification['resource']\n        change_type = notification['changeType']\n        # Process change...\n```\n\n### Subscription Renewal\n- Max lifetime: 3 days (most resources)\n- Auto-renewal before expiration\n- Webhook validation handling\n\n## Configuration Schema\n```yaml\nfcp.microsoft365:\n  tenant_id: \"${AZURE_TENANT_ID}\"\n  client_id: \"${AZURE_CLIENT_ID}\"\n  client_secret: \"${AZURE_CLIENT_SECRET}\"\n  \n  auth:\n    type: \"oauth2\"\n    redirect_uri: \"http://localhost:8080/callback\"\n    token_cache: \"/secure/token_cache.json\"\n    \n  sub_connectors:\n    outlook:\n      enabled: true\n      mail_folders: [\"Inbox\", \"Sent Items\"]\n      calendar_sync: true\n      \n    onedrive:\n      enabled: true\n      root_path: \"/Documents\"\n      \n    excel:\n      enabled: true\n      \n    word:\n      enabled: true\n      \n    onenote:\n      enabled: true\n      \n    sharepoint:\n      enabled: true\n      sites: [\"https://tenant.sharepoint.com/sites/team\"]\n      \n    planner:\n      enabled: true\n      \n  webhooks:\n    enabled: true\n    endpoint_url: \"https://webhook.example.com/m365\"\n    resources:\n      - \"/me/messages\"\n      - \"/me/events\"\n      \n  rate_limits:\n    requests_per_second: 10\n    concurrent_connections: 5\n```\n\n## MCP Tool Definitions\n\n### Outlook Tools\n- `outlook_list_messages`: List emails\n- `outlook_send_message`: Send email\n- `outlook_create_event`: Create calendar event\n- `outlook_get_availability`: Check free/busy\n\n### OneDrive Tools\n- `onedrive_list_files`: List directory contents\n- `onedrive_upload_file`: Upload file\n- `onedrive_download_file`: Download file\n- `onedrive_share_file`: Create sharing link\n\n### Excel Tools\n- `excel_read_range`: Read cell range\n- `excel_write_range`: Write to cells\n- `excel_create_table`: Create data table\n- `excel_run_function`: Execute formula\n\n### SharePoint Tools\n- `sharepoint_list_sites`: List sites\n- `sharepoint_get_list_items`: Read list data\n- `sharepoint_create_list_item`: Add list item\n\n### Planner Tools\n- `planner_list_tasks`: List user tasks\n- `planner_create_task`: Create new task\n- `planner_update_task`: Update task status\n\n### Webhook Tools\n- `m365_create_subscription`: Create webhook\n- `m365_list_subscriptions`: List active webhooks\n- `m365_delete_subscription`: Remove webhook\n\n## Enterprise Features\n\n### Multi-tenant Support\n- Per-tenant configuration\n- Tenant isolation\n- Cross-tenant operations (with consent)\n\n### Compliance \u0026 Governance\n- Audit logging\n- Data residency awareness\n- eDiscovery integration\n\n### Delegated vs Application Permissions\n- User context operations\n- Background service operations\n- Admin consent flows\n\n## Error Handling\n- Token refresh failures\n- Rate limit (429) handling\n- Throttling with Retry-After\n- Permission denied errors\n- Resource not found\n\n## Implementation Phases\n\n### Phase 1: Core Auth (Week 1-2)\n- [ ] OAuth 2.0 flow implementation\n- [ ] Token storage and refresh\n- [ ] Multi-tenant support\n- [ ] Permission management\n\n### Phase 2: Outlook (Week 3-4)\n- [ ] Mail operations\n- [ ] Calendar operations\n- [ ] Contact operations\n\n### Phase 3: OneDrive \u0026 Files (Week 5-6)\n- [ ] File operations\n- [ ] Excel integration\n- [ ] Word integration\n\n### Phase 4: Collaboration (Week 7-8)\n- [ ] SharePoint integration\n- [ ] OneNote integration\n- [ ] Planner integration\n\n### Phase 5: Real-time (Week 9-10)\n- [ ] Webhook subscriptions\n- [ ] Change notifications\n- [ ] Delta sync\n\n### Phase 6: Enterprise (Week 11-12)\n- [ ] Compliance features\n- [ ] Monitoring\n- [ ] Documentation\n\n## Dependencies\n- msal (Microsoft Authentication Library)\n- httpx (async HTTP client)\n- cryptography (token encryption)\n- pydantic (data validation)\n\n## Success Metrics\n- OAuth flow success rate \u003e 99%\n- API call latency \u003c 500ms\n- Webhook delivery success \u003e 99.9%\n- Support all listed sub-connectors\n- Enterprise security compliance","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:12:32.282999005-05:00","created_by":"ubuntu","updated_at":"2026-01-15T02:27:59.269142268-05:00","closed_at":"2026-01-15T02:27:59.269142268-05:00","close_reason":"Duplicate of flywheel_connectors-m6u7"}
{"id":"flywheel_connectors-d3z","title":"fcp.reddit: Authentic User Opinions Research","description":"# fcp.reddit: Authentic User Opinions Research (FCP2)\n\n## Goal\nProvide a research-focused macro surface that helps agents extract **authentic user opinions** from Reddit in a structured, bounded way.\n\nThis is not “LLM analysis inside the connector”; it is data acquisition + packaging so agents can do downstream reasoning safely.\n\n## Scope\n### Research macros (compositions)\n- `reddit.research.search_threads`:\n  - input: query + subreddit scope + time window\n  - output: ranked thread summaries (ids, titles, scores, timestamps)\n- `reddit.research.collect_evidence`:\n  - input: thread ids\n  - output: bounded comment excerpts with provenance pointers (post/comment ids)\n\n### Safety/bounds\n- Explicit caps:\n  - max threads\n  - max comments per thread\n  - max total bytes returned\n- NSFW/quarantine policy must be explicit.\n\n## Capability model (illustrative)\n- `reddit.read`\n- `reddit.search`\n- `reddit.research` (macro operations)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- All content is tainted.\n- Structured logs include only ids + counts.\n\n## Deliverables\n- Canonical output types:\n  - `ResearchThreadSummary`\n  - `ResearchEvidenceBundle`\n- Operation schemas:\n  - `reddit.research.search_threads`\n  - `reddit.research.collect_evidence`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - ranking determinism\n  - bounds enforcement\n  - NSFW/quarantine gating\n\n## Acceptance criteria\n- Research macros are deterministic, bounded, and mechanically authorized.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:21:23.349836558-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:40:18.437269536-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-d3z","depends_on_id":"flywheel_connectors-xz6e","type":"parent-child","created_at":"2026-01-15T02:33:59.283817347-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-d3z","depends_on_id":"flywheel_connectors-xz6e.1","type":"blocks","created_at":"2026-01-15T04:40:24.110842104-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-d5h","title":"fcp.datadog: Dashboard access and widget rendering","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:16:37.975697485-05:00","created_by":"ubuntu","updated_at":"2026-01-11T12:10:13.135733516-05:00","closed_at":"2026-01-11T12:10:13.135733516-05:00","close_reason":"CONSOLIDATED: All Datadog sub-features merged into comprehensive parent connector bead flywheel_connectors-cu3 (fcp.datadog: Datadog Observability Platform Connector)"}
{"id":"flywheel_connectors-d6d","title":"fcp.sentry: Event details and stack trace inspection","description":"# fcp.sentry: Event details and stack trace inspection (FCP2)\n\n## Goal\nEnable deep triage by fetching **event-level details** for an issue, including stack traces and relevant context, while maintaining strict secret/PII hygiene.\n\n## Scope\n### Read operations\n- Fetch latest event for an issue (or a specific event id).\n- Retrieve:\n  - stack trace frames (module/function/line)\n  - breadcrumbs\n  - tags\n  - environment + release\n  - request/user context (PII: must be handled carefully)\n- Optional: retrieve attachments/artifacts metadata (download is separate + bounded).\n\n### Output shaping\n- Return a **sanitized, structured** view that is useful for debugging:\n  - include stable identifiers\n  - include stack traces (code locations are ok)\n  - redact known secret-like fields\n\n## Capability model (illustrative)\n- `sentry.events.read`\n- `sentry.artifacts.read` (if attachments are exposed)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- Event payloads are untrusted and may contain secrets/PII.\n  - Do not log raw payloads.\n  - Apply redaction before returning “rendered” textual summaries.\n\n## Deliverables\n- Operation schemas:\n  - `sentry.event.get`\n  - `sentry.event.latest_for_issue`\n  - `sentry.event.stacktrace`\n- Redaction strategy:\n  - allowlist safe fields\n  - redact common secret patterns\n  - cap maximum returned payload size\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - stack trace parsing and normalization\n  - redaction correctness (golden vectors)\n  - size limits + early abort\n  - rate limiting + retry/backoff\n\n## Acceptance criteria\n- Returns are useful for debugging without leaking secrets/PII.\n- Logs remain metadata-only with correlation IDs.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:15:00.207617841-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:29:07.882908067-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-d6d","depends_on_id":"flywheel_connectors-lszk.3","type":"parent-child","created_at":"2026-01-15T02:30:42.03278078-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-d6d","depends_on_id":"flywheel_connectors-lszk.3.1","type":"blocks","created_at":"2026-01-15T04:29:11.973816499-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-dcgw","title":"fcp.grafana: Open Source Observability Platform Connector","description":"# fcp.grafana - Open Source Observability Platform Connector\n\n## Overview\n\nComprehensive Grafana connector for querying metrics, accessing dashboards, managing alerts, and enabling autonomous SRE workflows. Complements `fcp.datadog` for organizations using open-source observability stacks (Prometheus, Loki, Tempo).\n\n## Strategic Importance\n\n**Value Score: 84/100** (from prioritized connector analysis)\n\n### Why This Matters\n- **Open source observability** - No vendor lock-in\n- **Prometheus/Loki/Tempo integration** - Industry standard stack\n- **Autonomous SRE** - Alert → Investigate → Diagnose → Fix → Verify\n- **Complements Datadog** - Some orgs use both\n\n### Flywheel Ecosystem Synergy\n- **Beads**: Auto-create from alerts\n- **fcp.sentry**: Correlate errors with metrics\n- **fcp.kubernetes**: Infrastructure correlation\n- **ApprovalTokens**: Human approval for remediation actions (out-of-band issuance of ApprovalToken objects)\n- **Agent workflows**: Incident response automation\n\n## Manifest archetypes (closed set)\n\n- `operational`\n- `streaming`\n\n\u003e Interaction patterns (non-archetype): Request/Response + Streaming + Webhook\n\n| Pattern | Use Case |\n|---------|----------|\n| Request-Response | Dashboard queries, alert management |\n| Streaming | Live metric streaming |\n| Webhook | Alert notifications |\n\n## Key Operations\n\n### Query Operations\n- `grafana.query.instant` - Instant query (single point in time)\n- `grafana.query.range` - Range query (time series)\n- `grafana.query.raw` - Raw datasource query\n- `grafana.query.loki` - LogQL query\n- `grafana.query.tempo` - Trace search\n\n### Dashboard Operations\n- `grafana.dashboards.list` - List dashboards\n- `grafana.dashboard.get` - Get dashboard JSON\n- `grafana.dashboard.create` - Create dashboard\n- `grafana.dashboard.update` - Update dashboard\n- `grafana.dashboard.delete` - Delete dashboard\n- `grafana.dashboard.export` - Export as JSON/PNG\n- `grafana.dashboard.panels` - Get panel details\n- `grafana.dashboard.annotations` - Manage annotations\n\n### Folder Operations\n- `grafana.folders.list` - List folders\n- `grafana.folder.create` - Create folder\n- `grafana.folder.permissions` - Manage permissions\n\n### Alert Operations\n- `grafana.alerts.list` - List alert rules\n- `grafana.alert.get` - Get alert details\n- `grafana.alert.create` - Create alert rule\n- `grafana.alert.update` - Update alert\n- `grafana.alert.pause` - Pause/resume alert\n- `grafana.alert.delete` - Delete alert\n- `grafana.alert.history` - Alert state history\n- `grafana.alert.silence` - Create silence\n\n### Alert Manager Operations\n- `grafana.alertmanager.alerts` - List active alerts\n- `grafana.alertmanager.silences` - Manage silences\n- `grafana.alertmanager.config` - Get/update config\n\n### Datasource Operations\n- `grafana.datasources.list` - List datasources\n- `grafana.datasource.get` - Get datasource config\n- `grafana.datasource.query` - Query specific datasource\n- `grafana.datasource.health` - Check datasource health\n- `grafana.datasource.create` - Add datasource\n- `grafana.datasource.test` - Test connection\n\n### Annotation Operations\n- `grafana.annotations.list` - List annotations\n- `grafana.annotations.create` - Create annotation\n- `grafana.annotations.update` - Update annotation\n- `grafana.annotations.delete` - Delete annotation\n\n### User \u0026 Org Operations\n- `grafana.user.current` - Get current user\n- `grafana.org.current` - Get current org\n- `grafana.org.users` - List org users\n- `grafana.teams.list` - List teams\n\n### Reporting Operations\n- `grafana.report.create` - Generate report\n- `grafana.report.schedule` - Schedule report\n- `grafana.snapshot.create` - Create dashboard snapshot\n\n### Webhook Handlers\n- `grafana.webhook.alert` - Handle alert webhook\n\n## Query Languages\n\n### PromQL (Prometheus)\n```promql\n# CPU usage by instance\n100 - (avg by(instance) (rate(node_cpu_seconds_total{mode=\"idle\"}[5m])) * 100)\n\n# Memory usage percentage\n(1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes)) * 100\n\n# HTTP error rate\nsum(rate(http_requests_total{status=~\"5..\"}[5m])) / sum(rate(http_requests_total[5m]))\n```\n\n### LogQL (Loki)\n```logql\n# Error logs in last hour\n{app=\"myapp\"} |= \"error\"\n\n# Parse JSON logs and filter\n{app=\"myapp\"} | json | level=\"error\" | duration \u003e 1s\n\n# Log volume by level\nsum by(level) (rate({app=\"myapp\"} [5m]))\n```\n\n### TraceQL (Tempo)\n```traceql\n# Find slow traces\n{ duration \u003e 2s }\n\n# Find traces with errors\n{ status = error }\n\n# Find specific service\n{ .service.name = \"api-gateway\" }\n```\n\n## Zone Architecture\n\n\u003c!-- fcp2-single-zone-note --\u003e\n**FCP2 single-zone binding note:** A connector instance binds to exactly one `ZoneId` for its entire lifetime.\nThe *\"zones\"* described in this section are a **recommended deployment pattern** (run separate connector instances in separate zones with different capability grants/policies) and/or conceptual risk tiers.\nThe connector MUST NOT multiplex multiple zones internally.\n\n\n```\nZone 0 (Public):     Public dashboards, metrics\nZone 1 (Authorized): Team dashboards, alerts\nZone 2 (Private):    Alert configs, datasource credentials\nZone 3 (Sensitive):  API keys, admin operations\n```\n\n### Capability Mapping\n| Capability | Zone | Risk Level | Description |\n|------------|------|------------|-------------|\n| `grafana.query` | 0 | Low | Execute queries |\n| `grafana.dashboard.read` | 0 | Low | View dashboards |\n| `grafana.dashboard.write` | 1 | Medium | Modify dashboards |\n| `grafana.alert.read` | 1 | Low | View alerts |\n| `grafana.alert.write` | 1 | High | Modify alerts |\n| `grafana.admin` | 3 | Critical | Admin operations |\n\n## Dependencies\n\n### Required FCP Crates\n- `fcp-core`: Base connector traits\n- `fcp-webhook`: Alert webhook handling\n- `fcp-streaming`: Live metric streaming\n- `fcp-ratelimit`: Rate limiting\n- `fcp-telemetry`: Metrics and tracing\n\n## Implementation Notes\n\n### Authentication\n- **API Key**: `Authorization: Bearer \u003ckey\u003e`\n- **Basic Auth**: For legacy deployments\n- **OAuth 2.0**: For Grafana Cloud\n\n### API Versions\n- **Grafana API**: `/api/` endpoints\n- **Alerting API**: `/api/v1/` Prometheus-compatible\n- **Loki API**: `/loki/api/v1/` LogQL queries\n- **Tempo API**: `/api/traces/` trace queries\n\n### Multi-Datasource Queries\n- Grafana can query multiple datasources\n- Each datasource has unique UID\n- Query routing based on datasource type\n\n### Dashboard JSON Model\n```json\n{\n  \"dashboard\": {\n    \"id\": null,\n    \"title\": \"My Dashboard\",\n    \"panels\": [...],\n    \"time\": { \"from\": \"now-6h\", \"to\": \"now\" },\n    \"refresh\": \"30s\"\n  },\n  \"folderId\": 0,\n  \"overwrite\": false\n}\n```\n\n### Error Handling\n| Code | Meaning | Recovery |\n|------|---------|----------|\n| 400 | Bad Query | Check PromQL/LogQL syntax |\n| 401 | Unauthorized | Check API key |\n| 403 | Forbidden | Check permissions |\n| 404 | Not Found | Dashboard/alert deleted |\n| 422 | Validation Error | Check request body |\n\n## Autonomous SRE Workflow\n\n### Alert → Resolution Pipeline\n1. Alert fires → webhook to FCP connector\n2. Connector creates Bead for incident\n3. Agent investigates via queries\n4. Agent correlates with logs (Loki)\n5. Agent traces request flow (Tempo)\n6. Agent proposes remediation\n7. ApprovalToken required if risky (per zone policy)\n8. Agent executes fix (via fcp.kubernetes)\n9. Agent verifies via metrics\n10. Agent closes Bead + incident\n\n### Common Investigations\n- **CPU spike**: Query node_cpu, correlate with deployments\n- **Memory leak**: Query memory metrics, find trend\n- **Latency spike**: Query HTTP histograms, find slow endpoints\n- **Error spike**: Query error rates, check logs\n\n## Testing Strategy\n\n- Mock Grafana API with `fcp-testkit`\n- Test PromQL/LogQL query building\n- Test dashboard JSON parsing\n- Test alert webhook handling\n- Test multi-datasource scenarios\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T21:41:19.875474655-05:00","created_by":"ubuntu","updated_at":"2026-01-15T07:39:54.740002897-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-dcgw","depends_on_id":"flywheel_connectors-vi7","type":"blocks","created_at":"2026-01-11T22:08:02.148260498-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-dcgw","depends_on_id":"flywheel_connectors-9co","type":"blocks","created_at":"2026-01-11T22:08:02.174003561-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-dcgw","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T22:08:02.199698684-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-dcgw","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T22:08:02.22505008-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-dcgw","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:30:57.33758996-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dcgw","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T07:09:28.316599701-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dcgw","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T07:09:28.728942751-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dcgw","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T07:09:29.152522495-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dcgw","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T07:09:29.589542656-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dcgw","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T07:09:30.012452036-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dcgw","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T07:09:30.429267007-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dcgw","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:09:30.854726775-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-dcgw.1","title":"fcp.grafana: Manifest + Capability Map (FCP2)","description":"## Goal\nProduce the full FCP2 manifest and capability map for this connector.\n\nThis bead is where we translate the connector’s functional surface (operations) into a **mechanically checkable** contract:\n- operation schemas + schema IDs\n- capability families per operation\n- per-operation NetworkConstraints (default deny)\n- sandbox profile requirements\n- declared state model (stateless / singleton_writer / crdt)\n\n## Required content (must be explicit)\n- Operation list is exhaustive and stable for the current phase.\n- Capability IDs DO NOT encode hostnames/ports.\n- NetworkConstraints are minimal and per-operation.\n- Risk tier for each operation (Safe / Dangerous).\n- Explicit bounds: timeouts, max response sizes, pagination limits.\n\n## Tests\n- Add good/bad manifest examples for the compliance runner.\n\n## Acceptance Criteria\n- Passes static checks in `flywheel_connectors-1n78.21.5`.\n- Default-deny is enforced by manifest + capability requirements.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:59.959157757-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:12:59.959157757-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-dcgw.1","depends_on_id":"flywheel_connectors-dcgw","type":"parent-child","created_at":"2026-01-15T07:13:00.017417195-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-dcgw.2","title":"fcp.grafana: Provisioning Automation","description":"## Goal\nAutomate provisioning and configuration with minimal human steps.\n\nThis bead owns:\n- auth setup (OAuth / API keys / webhook secrets) via `CredentialObject`/`CredentialId` (egress proxy injection preferred)\n- endpoint configuration\n- `fcp doctor` readiness checks\n- deterministic, mockable provisioning flows\n\n## FCP2 requirements\n- Secrets never touch disk.\n- Provisioning is deterministic and testable.\n- Error messages are actionable and do not leak secrets/PII.\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Provisioning emits structured logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:00.573852072-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:53.12864522-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-dcgw.2","depends_on_id":"flywheel_connectors-dcgw","type":"parent-child","created_at":"2026-01-15T07:13:00.635337461-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dcgw.2","depends_on_id":"flywheel_connectors-dcgw.1","type":"blocks","created_at":"2026-01-15T07:13:01.185754613-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-dcgw.3","title":"TEST: fcp.grafana Unit/Integration Tests (mock-only)","description":"## Goal\nMock-only unit/integration tests for this connector.\n\n## Required coverage\n- schema validation (inputs + outputs)\n- error taxonomy mapping (retry semantics)\n- pagination and bounds\n- rate limit behavior\n- redaction (no token/secret/PII leakage)\n- idempotency + receipts for Dangerous operations\n\n## Logging\nAll tests emit structured JSON logs per `flywheel_connectors-1n78.35`.\n\n## Acceptance Criteria\n- Deterministic tests; no live external calls.\n- Includes adversarial cases (timeouts, malformed responses, partial failures).\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:01.739243846-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:13:01.739243846-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-dcgw.3","depends_on_id":"flywheel_connectors-dcgw","type":"parent-child","created_at":"2026-01-15T07:13:01.798381871-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dcgw.3","depends_on_id":"flywheel_connectors-dcgw.1","type":"blocks","created_at":"2026-01-15T07:13:02.345825427-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dcgw.3","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:13:02.893864255-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dcgw.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T07:32:13.983645753-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-dcgw.4","title":"E2E: fcp.grafana Connector Compliance Run","description":"## Goal\nRun the shared connector compliance runner and capture an evidence bundle.\n\n## Must validate\n- handshake + introspection correctness\n- default deny (no CapabilityToken → deny + DecisionReceipt)\n- NetworkConstraints enforcement\n- receipts/audit for Dangerous operations\n- structured logs\n\n## Acceptance Criteria\n- E2E run is deterministic and produces a stable artifact bundle.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:03.369982242-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:13:03.369982242-05:00","labels":["connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-dcgw.4","depends_on_id":"flywheel_connectors-dcgw","type":"parent-child","created_at":"2026-01-15T07:13:03.468698437-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dcgw.4","depends_on_id":"flywheel_connectors-dcgw.1","type":"blocks","created_at":"2026-01-15T07:13:04.044168297-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dcgw.4","depends_on_id":"flywheel_connectors-dcgw.2","type":"blocks","created_at":"2026-01-15T07:13:04.604763296-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dcgw.4","depends_on_id":"flywheel_connectors-dcgw.3","type":"blocks","created_at":"2026-01-15T07:13:05.222028066-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dcgw.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T07:13:05.838855622-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ddc","title":"fcp.terraform: Module management and dependency resolution","description":"# fcp.terraform: Module management and dependency resolution (FCP2)\n\n## Goal\nProvide safe visibility into Terraform module structure so agents can:\n- inspect required providers/modules\n- analyze dependency graph\n- prepare plans with correct initialization\n\n## Scope\n- Run `terraform init` in a controlled, non-interactive mode (may download modules/providers).\n- List required providers and versions.\n- Enumerate modules and sources.\n- Produce a canonical `ModuleGraph` summary.\n\n## Capability model (illustrative)\n- `terraform.modules.read`\n- `terraform.init` (dangerous-ish if it downloads content; policy-gated)\n\n## FCP2 requirements\n- Single-zone binding.\n- Sandbox profile:\n  - restrict filesystem to workspace\n  - restrict process execution\n- NetworkConstraints default deny unless module registries are explicitly allowed.\n- No automatic downloads unless policy explicitly permits.\n\n## Deliverables\n- Operation schemas:\n  - `terraform.providers.list`\n  - `terraform.modules.graph`\n  - Optional: `terraform.init`\n- Canonical output type:\n  - `ModuleGraph`\n\n## Test strategy (MUST)\n- Unit tests with fixtures for:\n  - module parsing\n  - provider list parsing\n  - policy denial of init without explicit capability\n\n## Acceptance criteria\n- Module graph summaries are deterministic and safe-by-default.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:15:02.213232461-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:45:52.09867584-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-ddc","depends_on_id":"flywheel_connectors-r6ty","type":"parent-child","created_at":"2026-01-15T02:33:01.172350566-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ddc","depends_on_id":"flywheel_connectors-r6ty.1","type":"blocks","created_at":"2026-01-15T04:45:58.423178508-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-dgi","title":"fcp.mcp-bridge: Model Context Protocol Gateway Connector","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-11T10:27:18.399804049-05:00","created_by":"ubuntu","updated_at":"2026-01-11T12:08:22.932008209-05:00","closed_at":"2026-01-11T12:08:22.932008209-05:00","close_reason":"DUPLICATE: Merged with flywheel_connectors-7ju which has the complete MCP Gateway Meta-Connector specification.","dependencies":[{"issue_id":"flywheel_connectors-dgi","depends_on_id":"flywheel_connectors-iv7","type":"blocks","created_at":"2026-01-11T10:43:27.727776174-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-dgi","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T10:43:27.782108556-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-dgi","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T10:43:27.818367223-05:00","created_by":"ubuntu"}]}
{"id":"flywheel_connectors-djx","title":"fcp.airtable: Base and table discovery API","description":"# fcp.airtable: Base and Table Discovery API\n\n## Goal\nImplement Airtable discovery operations so agents can understand what data exists before attempting record CRUD.\n\n## Scope\nOperations (representative):\n- `airtable.bases.list`\n- `airtable.bases.get` (schema)\n- `airtable.tables.list`\n- `airtable.tables.get`\n- `airtable.fields.list`\n\n## Key requirements\n- Capability gated (`airtable.schema.read`).\n- Prefer stable identifiers:\n  - support referencing fields by **field id** (stable across renames) and name (human-readable).\n- Cache schema responses with bounded TTL to reduce API load.\n- Strict input validation:\n  - base/table identifiers canonicalized\n  - reject ambiguous references\n\n## Tests\n- Mock-only API responses for:\n  - schema changes (rename fields, change options)\n  - permission failures\n  - rate limits\n- Logs are structured JSON (redacted).\n\n## Acceptance Criteria\n- Schema discovery is deterministic and stable across renames.\n- Conformance/E2E runner can validate default deny + allow paths.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:14:32.913194446-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:02:24.099561228-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-djx","depends_on_id":"flywheel_connectors-soft","type":"parent-child","created_at":"2026-01-15T02:29:57.139900813-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-djx","depends_on_id":"flywheel_connectors-soft.1","type":"blocks","created_at":"2026-01-15T04:02:29.835835511-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-dlfp","title":"TEST: Lifecycle Management Unit/Integration Tests","description":"## Overview\n\nComprehensive test suite for Connector Lifecycle Management (y1q8).\n\n## Test Categories\n\n### 1. Activation Workflow Tests\n- **Full activation sequence**: sandbox → secrets → handshake → caps → health\n- **Phase failure handling**: Each phase can fail, verify proper cleanup\n- **Partial activation recovery**: Resume from failed phase\n- **Concurrent activation prevention**: Only one activation at a time\n\n### 2. ConnectorState Machine Tests\n- **State transitions**: Valid transitions between all states\n- **Invalid transitions**: Reject illegal state changes\n- **Persistence**: State survives restart\n- **Audit logging**: Each transition logged\n\n### 3. Crash Loop Detection Tests\n- **Threshold detection**: N crashes in M seconds triggers rollback\n- **Window sliding**: Old crashes age out of window\n- **Reset on success**: Successful run resets counter\n- **Edge cases**: Exactly N crashes, N-1 crashes\n\n### 4. Rollback Tests\n- **Automatic rollback**: Crash loop triggers rollback\n- **Version restoration**: Previous version correctly restored\n- **Rollback audit**: Event logged with details\n- **Rollback failure handling**: What if previous version also fails?\n\n### 5. Update Manager Tests\n- **Staged rollout**: Updates roll out progressively\n- **Version pinning**: Pinned versions not auto-updated\n- **Pin override**: Owner can unpin\n- **Pin persistence**: Survives restart\n\n### 6. Health Monitoring Tests\n- **Health check timing**: Checks run at configured interval\n- **Failure threshold**: Multiple failures before unhealthy\n- **Recovery detection**: Healthy after passing checks\n- **Timeout handling**: Slow connectors handled correctly\n\n## Logging Requirements\n\nAll tests emit structured JSON:\n```json\n{\n  \"test\": \"test_activation_full_sequence\",\n  \"phase\": \"negotiating_handshake\",\n  \"connector_id\": \"fcp.telegram\",\n  \"prev_state\": \"Activating\",\n  \"new_state\": \"Running\",\n  \"result\": \"success\",\n  \"duration_ms\": 234\n}\n```\n\n## Acceptance Criteria\n\n- [ ] All activation phases tested individually\n- [ ] State machine exhaustively tested\n- [ ] Crash loop detection comprehensive\n- [ ] Rollback scenarios covered\n- [ ] Version pinning tested\n- [ ] Health monitoring tested\n- [ ] Structured JSON logging in all tests","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:45:09.60456436-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:45:09.60456436-05:00","dependencies":[{"issue_id":"flywheel_connectors-dlfp","depends_on_id":"flywheel_connectors-y1q8","type":"blocks","created_at":"2026-01-15T04:45:17.547404027-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dlfp","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T04:45:17.798717985-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-dlzr","title":"fcp.sendgrid: Transactional Email Connector","description":"# fcp.sendgrid Connector\n\nTransactional email platform connector for Flywheel agent notifications and communications.\n\n## Overview\n\n- **Value Score**: 58/100 (Tier 4)\n- **Archetype**: Request-Response + Webhook\n- **Platform**: SendGrid v3 API\n- **Authentication**: API Key\n\n## Core Operations\n\n### Email Send Zone\n- **send_email**: Send single transactional email\n- **send_batch**: Send batch emails (up to 1000 recipients)\n- **send_template**: Send using dynamic template\n- **schedule_send**: Schedule email for future delivery\n- **cancel_scheduled**: Cancel scheduled send\n\n### Template Management Zone\n- **list_templates**: List dynamic templates\n- **get_template**: Get template by ID with versions\n- **create_template**: Create new dynamic template\n- **update_template**: Update template metadata\n- **create_version**: Create new template version\n- **activate_version**: Set active template version\n\n### Contact Management Zone\n- **add_contacts**: Add/update contacts (upsert)\n- **search_contacts**: Search contacts with SGQL\n- **get_contact**: Get contact by ID or email\n- **delete_contacts**: Remove contacts\n- **list_lists**: Get contact lists\n- **add_to_list**: Add contacts to list\n\n### Suppression Management\n- **list_bounces**: Get bounce suppressions\n- **list_blocks**: Get block suppressions\n- **list_spam_reports**: Get spam report suppressions\n- **list_unsubscribes**: Get global unsubscribes\n- **add_suppression**: Add email to suppression list\n- **remove_suppression**: Remove from suppression\n\n### Statistics Zone\n- **global_stats**: Get global email stats\n- **category_stats**: Stats by category\n- **mailbox_provider_stats**: Stats by provider\n- **browser_stats**: Email client stats\n\n### Inbound Parse (Webhook)\n- **configure_parse**: Set up inbound parse webhook\n- **parse_email**: Process inbound email webhook\n\n## Architecture\n\n### Zone Design\n```\n┌─────────────────────────────────────────────────┐\n│              fcp.sendgrid Connector             │\n├─────────────────────────────────────────────────┤\n│  ┌──────────────┐  ┌──────────────────────────┐ │\n│  │  Email Send  │  │   Template Management    │ │\n│  │    Zone      │  │         Zone             │ │\n│  │              │  │                          │ │\n│  │ • send       │  │ • templates              │ │\n│  │ • batch      │  │ • versions               │ │\n│  │ • schedule   │  │ • handlebars             │ │\n│  └──────────────┘  └──────────────────────────┘ │\n│  ┌──────────────┐  ┌──────────────────────────┐ │\n│  │   Contact    │  │      Suppression         │ │\n│  │ Management   │  │      Management          │ │\n│  │              │  │                          │ │\n│  │ • contacts   │  │ • bounces                │ │\n│  │ • lists      │  │ • blocks                 │ │\n│  │ • segments   │  │ • spam reports           │ │\n│  └──────────────┘  └──────────────────────────┘ │\n│  ┌──────────────┐  ┌──────────────────────────┐ │\n│  │  Statistics  │  │     Inbound Parse        │ │\n│  │    Zone      │  │       (Webhook)          │ │\n│  │              │  │                          │ │\n│  │ • global     │  │ • parse config           │ │\n│  │ • category   │  │ • email processing       │ │\n│  │ • provider   │  │ • attachment handling    │ │\n│  └──────────────┘  └──────────────────────────┘ │\n└─────────────────────────────────────────────────┘\n```\n\n### Dependencies\n- `fcp-core`: Base connector traits and types\n- `fcp-webhook`: Inbound parse webhook handling\n- `fcp-ratelimit`: SendGrid rate limit management\n- `fcp-telemetry`: Email delivery metrics\n\n## Implementation Details\n\n### SendGrid v3 API\n```rust\npub struct SendGridConnector {\n    client: HttpClient,\n    api_key: SecretString,\n    rate_limiter: RateLimiter,\n    webhook_handler: WebhookHandler,\n}\n\nimpl SendGridConnector {\n    pub async fn send_email(\u0026self, email: Email) -\u003e Result\u003cSendResponse\u003e;\n    pub async fn send_batch(\u0026self, batch: BatchEmail) -\u003e Result\u003cBatchResponse\u003e;\n    pub async fn get_stats(\u0026self, query: StatsQuery) -\u003e Result\u003cStats\u003e;\n}\n```\n\n### Rate Limiting\n- Global: 100 requests/second (starter), 600/sec (pro)\n- Email send: 600/minute (free), 10000/minute (paid)\n- Contact uploads: 3 concurrent jobs\n- Implement exponential backoff on 429\n\n### Webhook Signature Verification\n```rust\nimpl WebhookVerifier for SendGridWebhook {\n    fn verify(\u0026self, payload: \u0026[u8], signature: \u0026str) -\u003e Result\u003cbool\u003e {\n        // ECDSA signature verification\n        // Public key from SendGrid settings\n    }\n}\n```\n\n### Email Types\n```rust\npub struct Email {\n    pub personalizations: Vec\u003cPersonalization\u003e,\n    pub from: EmailAddress,\n    pub subject: String,\n    pub content: Vec\u003cContent\u003e,\n    pub attachments: Option\u003cVec\u003cAttachment\u003e\u003e,\n    pub template_id: Option\u003cString\u003e,\n    pub dynamic_template_data: Option\u003cValue\u003e,\n    pub categories: Vec\u003cString\u003e,\n    pub send_at: Option\u003ci64\u003e,\n}\n\npub struct Personalization {\n    pub to: Vec\u003cEmailAddress\u003e,\n    pub cc: Option\u003cVec\u003cEmailAddress\u003e\u003e,\n    pub bcc: Option\u003cVec\u003cEmailAddress\u003e\u003e,\n    pub substitutions: Option\u003cHashMap\u003cString, String\u003e\u003e,\n    pub dynamic_template_data: Option\u003cValue\u003e,\n}\n```\n\n## Agent Use Cases\n\n### Notification Delivery\n- Alert emails for agent events\n- Status update notifications\n- Error/exception reports\n- Scheduled digest emails\n\n### Communication Workflows\n- User onboarding sequences\n- Password reset emails\n- Verification emails\n- Transactional receipts\n\n### Inbound Processing\n- Parse incoming emails to agent\n- Extract commands from email\n- Process email attachments\n- Auto-reply handling\n\n## Testing Strategy\n\n### Unit Tests\n- Email payload construction\n- Template variable substitution\n- Rate limit calculation\n- Webhook signature verification\n\n### Integration Tests\n- Send test emails (sandbox mode)\n- Template CRUD operations\n- Contact management\n- Stats retrieval\n\n### Webhook Tests\n- Inbound parse processing\n- Event webhook handling\n- Signature verification\n\n## Acceptance Criteria\n\n- [ ] Send single and batch transactional emails\n- [ ] Dynamic template support with Handlebars\n- [ ] Contact list management with SGQL search\n- [ ] Suppression list management (bounces, blocks, spam)\n- [ ] Email statistics retrieval\n- [ ] Inbound parse webhook handling\n- [ ] Rate limiting with backoff\n- [ ] Comprehensive error handling\n- [ ] Sandbox mode for testing","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T22:04:22.630453725-05:00","created_by":"ubuntu","updated_at":"2026-01-11T22:04:22.630453725-05:00","labels":["connector","email","request-response","tier-4","webhook"],"dependencies":[{"issue_id":"flywheel_connectors-dlzr","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T22:08:22.163036411-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-dlzr","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T22:08:22.188515487-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-dlzr","depends_on_id":"flywheel_connectors-vi7","type":"blocks","created_at":"2026-01-11T22:08:32.833863029-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-dlzr","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:37:15.350765514-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dlzr","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T07:07:31.360375778-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dlzr","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T07:09:50.278115174-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dlzr","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T07:09:50.691339175-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dlzr","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T07:09:51.104306323-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dlzr","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T07:09:51.531185777-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dlzr","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T07:09:51.944791037-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dlzr","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:09:52.371451258-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-dlzr.1","title":"fcp.sendgrid: Manifest + Capability Map (FCP2)","description":"## Goal\nProduce the full FCP2 manifest and capability map for this connector.\n\nThis bead is where we translate the connector’s functional surface (operations) into a **mechanically checkable** contract:\n- operation schemas + schema IDs\n- capability families per operation\n- per-operation NetworkConstraints (default deny)\n- sandbox profile requirements\n- declared state model (stateless / singleton_writer / crdt)\n\n## Required content (must be explicit)\n- Operation list is exhaustive and stable for the current phase.\n- Capability IDs DO NOT encode hostnames/ports.\n- NetworkConstraints are minimal and per-operation.\n- Risk tier for each operation (Safe / Dangerous).\n- Explicit bounds: timeouts, max response sizes, pagination limits.\n\n## Tests\n- Add good/bad manifest examples for the compliance runner.\n\n## Acceptance Criteria\n- Passes static checks in `flywheel_connectors-1n78.21.5`.\n- Default-deny is enforced by manifest + capability requirements.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:54.381692111-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:13:54.381692111-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-dlzr.1","depends_on_id":"flywheel_connectors-dlzr","type":"parent-child","created_at":"2026-01-15T07:13:54.442773749-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-dlzr.2","title":"fcp.sendgrid: Provisioning Automation","description":"## Goal\nAutomate provisioning and configuration with minimal human steps.\n\nThis bead owns:\n- auth setup (OAuth / API keys / webhook secrets) via `CredentialObject`/`CredentialId` (egress proxy injection preferred)\n- endpoint configuration\n- `fcp doctor` readiness checks\n- deterministic, mockable provisioning flows\n\n## FCP2 requirements\n- Secrets never touch disk.\n- Provisioning is deterministic and testable.\n- Error messages are actionable and do not leak secrets/PII.\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Provisioning emits structured logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:55.03897456-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:53.192010418-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-dlzr.2","depends_on_id":"flywheel_connectors-dlzr","type":"parent-child","created_at":"2026-01-15T07:13:55.099221265-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dlzr.2","depends_on_id":"flywheel_connectors-dlzr.1","type":"blocks","created_at":"2026-01-15T07:13:55.705934123-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-dlzr.3","title":"TEST: fcp.sendgrid Unit/Integration Tests (mock-only)","description":"## Goal\nMock-only unit/integration tests for this connector.\n\n## Required coverage\n- schema validation (inputs + outputs)\n- error taxonomy mapping (retry semantics)\n- pagination and bounds\n- rate limit behavior\n- redaction (no token/secret/PII leakage)\n- idempotency + receipts for Dangerous operations\n\n## Logging\nAll tests emit structured JSON logs per `flywheel_connectors-1n78.35`.\n\n## Acceptance Criteria\n- Deterministic tests; no live external calls.\n- Includes adversarial cases (timeouts, malformed responses, partial failures).\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:56.312502358-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:13:56.312502358-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-dlzr.3","depends_on_id":"flywheel_connectors-dlzr","type":"parent-child","created_at":"2026-01-15T07:13:56.372701102-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dlzr.3","depends_on_id":"flywheel_connectors-dlzr.1","type":"blocks","created_at":"2026-01-15T07:13:56.990312736-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dlzr.3","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:13:57.593589647-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dlzr.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T07:32:14.599259314-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-dlzr.4","title":"E2E: fcp.sendgrid Connector Compliance Run","description":"## Goal\nRun the shared connector compliance runner and capture an evidence bundle.\n\n## Must validate\n- handshake + introspection correctness\n- default deny (no CapabilityToken → deny + DecisionReceipt)\n- NetworkConstraints enforcement\n- receipts/audit for Dangerous operations\n- structured logs\n\n## Acceptance Criteria\n- E2E run is deterministic and produces a stable artifact bundle.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:58.119439346-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:13:58.119439346-05:00","labels":["connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-dlzr.4","depends_on_id":"flywheel_connectors-dlzr","type":"parent-child","created_at":"2026-01-15T07:13:58.177600819-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dlzr.4","depends_on_id":"flywheel_connectors-dlzr.1","type":"blocks","created_at":"2026-01-15T07:13:58.772820701-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dlzr.4","depends_on_id":"flywheel_connectors-dlzr.2","type":"blocks","created_at":"2026-01-15T07:13:59.400002326-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dlzr.4","depends_on_id":"flywheel_connectors-dlzr.3","type":"blocks","created_at":"2026-01-15T07:14:00.092056446-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dlzr.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T07:14:00.763032179-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-dpo","title":"fcp.twilio: Voice calls with outbound and IVR support","description":"# fcp.twilio: Voice calls with outbound and IVR support (FCP2)\n\n## Goal\nEnable safe voice automation via Twilio:\n- initiate outbound calls\n- manage call status and termination\n- generate constrained TwiML for IVR-style flows\n\nVoice calls are high-impact side effects; treat as approval-gated by policy.\n\n## Scope\n### Outbound call control\n- Create outbound call to a destination.\n- Query call status.\n- Hang up a call.\n- Optional: conference creation/management (defer if too large).\n\n### TwiML (constrained)\n- Generate TwiML responses from a safe template set:\n  - `\u003cSay\u003e`, `\u003cGather\u003e`, `\u003cDial\u003e`, `\u003cRedirect\u003e`\n- Explicitly avoid arbitrary injection of external URLs/scripts.\n\n### Recording/transcription (optional)\n- Accessing recordings is sensitive; treat as dangerous with explicit capability.\n\n## Capability model (illustrative)\n- `twilio.voice.call` (dangerous)\n- `twilio.voice.read`\n- `twilio.voice.hangup` (dangerous)\n- `twilio.voice.twiml.generate`\n- Optional: `twilio.voice.recordings.read` (dangerous)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned to Twilio API host(s).\n- For call initiation/termination:\n  - require ApprovalToken when policy dictates\n  - emit receipts + audit events with call SID + destination hash (never raw phone number)\n- Strict log redaction for phone numbers, call recordings, and transcribed content.\n\n## Deliverables\n- Operation schemas:\n  - `twilio.voice.call`\n  - `twilio.voice.get`\n  - `twilio.voice.hangup`\n  - `twilio.voice.twiml.render`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - call create/get/hangup request formation\n  - TwiML template rendering\n  - approval gating paths\n  - log redaction\n\n## Acceptance criteria\n- Voice operations are mechanically authorized, explainable, and audited.\n- TwiML generation is constrained and cannot be used as an injection vector.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:14:48.520416132-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:32:10.185549592-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-dpo","depends_on_id":"flywheel_connectors-otqy","type":"parent-child","created_at":"2026-01-15T02:29:05.473550135-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-dpo","depends_on_id":"flywheel_connectors-otqy.1","type":"blocks","created_at":"2026-01-15T04:32:15.125369714-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ds4","title":"fcp.zendesk: SLA Tracking","description":"# fcp.zendesk: SLA Tracking (FCP2)\n\n## Goal\nExpose SLA state and warnings so agents can:\n- monitor SLA compliance\n- prioritize tickets at risk of breach\n- trigger escalation workflows safely\n\n## Scope\n### Read\n- Retrieve SLA policy metadata (where permitted).\n- For a ticket:\n  - current SLA status\n  - time-to-breach estimates\n\n### Event ingestion (optional)\n- Ingest SLA breach warning events via webhook if Zendesk supports it.\n\n## Capability model (illustrative)\n- `zendesk.sla.read`\n- `zendesk.webhook.ingest` (if SLA events are delivered)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- SLA events are tainted external inputs.\n- No PII in logs.\n\n## Deliverables\n- Operation schemas:\n  - `zendesk.sla.ticket_status`\n  - Optional: `zendesk.webhook.sla_event_ingest`\n- Reason codes for escalation suggestions (not auto-actions).\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - SLA status parsing\n  - webhook replay/idempotency (if events exist)\n\n## Acceptance criteria\n- Agents can reliably detect SLA risk without leaking ticket content.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:21:50.332752691-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:36:31.403873097-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-ds4","depends_on_id":"flywheel_connectors-pwff","type":"parent-child","created_at":"2026-01-15T02:34:38.422011787-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ds4","depends_on_id":"flywheel_connectors-pwff.1","type":"blocks","created_at":"2026-01-15T04:36:37.458548528-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ds4","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T04:36:37.78964945-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-e27","title":"fcp.google-ai: Google AI/Gemini Provider Connector","description":"# fcp.google-ai - Google AI/Gemini Provider Connector (FCP2)\n\n## Goal\nProvide a Google AI (Gemini) provider connector that is **fully FCP2-compliant** with strong sandboxing and mechanical policy enforcement.\n\n## Manifest archetypes (closed set)\n- `operational`\n- `streaming`\n\n## Zone model\n- Single-zone bound: one connector instance ↔ one `ZoneId`.\n- Outputs must carry provenance/taint metadata (model id + input object ids).\n\n## External surface\n### NetworkConstraints\nDefault-deny; allow only the explicitly configured Google AI endpoints required by the chosen deployment mode.\n\n### Auth / credential injection\nSupport exactly one configured auth mode per instance (still single-zone):\n- API key\n- OAuth2 (user)\n- service account / workload identity (if applicable)\n\nAll secrets via `CredentialObject`/`CredentialId` (egress proxy injection preferred); never persisted.\n\n## Capability model (illustrative)\n- `googleai.text.generate`\n- `googleai.embeddings.generate`\n- `googleai.files.read` / `googleai.files.write` (if supported)\n- `googleai.tuning.manage` (Dangerous)\n\n## Operation surface (initial)\n- generation (non-stream + streaming)\n- chat (multi-turn)\n- embeddings\n- model list/introspection\n- file upload/download where required\n- tuning behind strict policy\n\n## Safety + retries\n- Timeouts bounded.\n- Rate limits respected mechanically.\n- Dangerous actions require ApprovalToken `Execution` scope.\n\n## Tests\n- Mock-only unit tests with streaming simulation.\n- E2E compliance run via shared harness.\n\n## Acceptance Criteria\n- Passes connector compliance runner (static + dynamic).\n- No real Google AI calls in unit tests.\n- Usage metrics emitted; no secret leakage.\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-11T10:11:06.071139538-05:00","created_by":"ubuntu","updated_at":"2026-01-15T08:37:53.25298977-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-e27","depends_on_id":"flywheel_connectors-9co","type":"blocks","created_at":"2026-01-11T12:38:28.399903039-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-e27","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T12:38:28.432753426-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-e27","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T12:38:28.462718347-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-e27","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:27:01.426798489-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-e27","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:25:37.950721636-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-e27","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:25:38.036501611-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-e27","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T03:25:38.130009352-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-e27","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:25:38.220952313-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-e27","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T03:25:38.319593854-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-e27","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T03:25:38.405279231-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-e27.1","title":"fcp.google-ai: Manifest + Capability Map (FCP2)","description":"# fcp.google-ai: Manifest + Capability Map (FCP2)\n\n## Goal\nSpecify the Gemini/Google AI connector manifest contract:\n- archetypes (`operational`, `streaming`)\n- operations + schema IDs\n- capability families + per-operation caps\n- NetworkConstraints allowlist\n\n## Acceptance Criteria\n- Complete manifest spec stored here.\n- Good/bad manifest examples exist for static compliance.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:25:44.106851007-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:25:44.106851007-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-e27.1","depends_on_id":"flywheel_connectors-e27","type":"parent-child","created_at":"2026-01-15T03:25:44.108013597-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-e27.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:26:23.541468003-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-e27.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:26:23.635698406-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-e27.2","title":"fcp.google-ai: Provisioning Automation (auth modes)","description":"# fcp.google-ai: Provisioning Automation (auth modes)\n\n## Goal\nAutomate onboarding for exactly one configured auth mode per instance:\n- API key OR OAuth2 OR service account\n\n## Requirements\n- All secrets via `CredentialObject`/`CredentialId` (egress proxy injection preferred).\n- Validate credentials with a safe read-only call.\n- Validate NetworkConstraints.\n\n## Acceptance Criteria\n- `fcp doctor` path is deterministic and safe.\n- Fully mockable for unit tests.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:25:50.814859277-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:53.309708549-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-e27.2","depends_on_id":"flywheel_connectors-e27","type":"parent-child","created_at":"2026-01-15T03:25:50.816096447-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-e27.3","title":"fcp.google-ai: Generation (streaming + tool use)","description":"# fcp.google-ai: Generation (streaming + tool use)\n\n## Goal\nImplement non-stream + streaming generation.\n\n## Requirements\n- Capability gated.\n- Streaming is backpressured.\n- Outputs include provenance/taint metadata.\n\n## Acceptance Criteria\n- Deterministic tests simulate streaming.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:25:55.629805847-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:25:55.629805847-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-e27.3","depends_on_id":"flywheel_connectors-e27","type":"parent-child","created_at":"2026-01-15T03:25:55.63114576-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-e27.3","depends_on_id":"flywheel_connectors-e27.1","type":"blocks","created_at":"2026-01-15T03:26:23.741034457-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-e27.4","title":"fcp.google-ai: Embeddings","description":"# fcp.google-ai: Embeddings\n\n## Goal\nExpose embeddings generation.\n\n## Requirements\n- Capability gated.\n- Input bounds enforced.\n- Stable output schema.\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:26:00.053269409-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:28:15.16041433-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-e27.4","depends_on_id":"flywheel_connectors-e27","type":"parent-child","created_at":"2026-01-15T03:26:00.05450147-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-e27.5","title":"fcp.google-ai: Tuning (policy-gated)","description":"# fcp.google-ai: Tuning (policy-gated)\n\n## Goal\nSupport model tuning behind strict policy.\n\n## Requirements\n- Dangerous actions require ApprovalToken `Execution` scope.\n- AuditEvents for create/cancel.\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":3,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:26:06.571006344-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:28:16.14441456-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-e27.5","depends_on_id":"flywheel_connectors-e27","type":"parent-child","created_at":"2026-01-15T03:26:06.572508574-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-e27.6","title":"TEST: Google AI Connector Unit/Integration Tests (mock-only)","description":"# TEST: Google AI Connector Unit/Integration Tests (mock-only)\n\n## Must cover\n- Streaming parsing.\n- Error taxonomy mapping.\n- Redaction.\n- Usage metrics.\n\n## Acceptance Criteria\n- Deterministic.\n- Structured JSON logs.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:26:11.970430546-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:26:11.970430546-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-e27.6","depends_on_id":"flywheel_connectors-e27","type":"parent-child","created_at":"2026-01-15T03:26:11.971638771-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-e27.6","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T03:26:23.918930802-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-e27.7","title":"E2E: Google AI Connector Compliance Run","description":"# E2E: Google AI Connector Compliance Run\n\n## Goal\nAdd Gemini/Google AI scenarios to the shared connector compliance runner.\n\n## Scenarios\n- Default deny.\n- Allow with valid token.\n- Network guard allow/deny.\n- Streaming backpressure.\n\n## Acceptance Criteria\n- `cargo test --package fcp-e2e --features google_ai` passes deterministically.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:26:18.844980874-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:26:18.844980874-05:00","labels":["conformance","connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-e27.7","depends_on_id":"flywheel_connectors-e27","type":"parent-child","created_at":"2026-01-15T03:26:18.846172468-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-e27.7","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T03:26:24.073225872-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-e2m","title":"fcp.twilio: Conversations API for multi-channel messaging","description":"# fcp.twilio: Conversations API for multi-channel messaging (FCP2)\n\n## Goal\nExpose Twilio Conversations to enable structured, multi-participant messaging across channels.\n\n## Scope\n- Create conversation.\n- Add/remove participants.\n- Send message into conversation.\n- List conversations and messages (pagination).\n- Optional: configure conversation-level webhooks (provisioning-level).\n\n## Capability model (illustrative)\n- `twilio.conversations.read`\n- `twilio.conversations.write` (dangerous-ish)\n- `twilio.conversations.participants.write` (dangerous)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- PII hygiene:\n  - participant identities and message content are sensitive\n  - never log message bodies\n- For writes:\n  - receipts/audit events include conversation SID + action\n\n## Deliverables\n- Operation schemas:\n  - `twilio.conversation.create`\n  - `twilio.conversation.get`\n  - `twilio.conversation.list`\n  - `twilio.conversation.participant.add`\n  - `twilio.conversation.participant.remove`\n  - `twilio.conversation.message.send`\n  - `twilio.conversation.message.list`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - pagination\n  - participant management\n  - capability gating + receipts/audit for writes\n  - log redaction\n\n## Acceptance criteria\n- Multi-channel messaging workflows are safe, auditable, and do not leak PII.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:14:51.722513827-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:33:16.965765693-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-e2m","depends_on_id":"flywheel_connectors-otqy","type":"parent-child","created_at":"2026-01-15T02:29:05.544343386-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-e2m","depends_on_id":"flywheel_connectors-otqy.1","type":"blocks","created_at":"2026-01-15T04:33:21.637671983-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-e31e","title":"fcp.whisper: Audio transcription connector","description":"## Summary\n\nImplement the fcp.whisper connector providing audio transcription services for the Flywheel Connector Platform. This connector enables speech-to-text capabilities with support for multiple audio/video formats, translation, word-level timestamps, and speaker diarization.\n\n## Value Assessment\n\n- **Value Score**: High (Tier 3 in roadmap)\n- **Impact**: Enables voice-first applications, podcast processing, meeting transcription, and accessibility features\n- **Archetype**: Request-Response with optional streaming for long audio\n\n## Operations\n\n### Core Operations\n1. **transcribe** - Convert audio/video to text\n   - Input: Audio file (mp3, wav, m4a, webm, mp4, mpeg, mpga, oga, ogg)\n   - Output: Transcribed text with optional timestamps\n   - Options: language, prompt, response_format, temperature\n\n2. **translate** - Transcribe and translate to English\n   - Input: Non-English audio\n   - Output: English transcription\n\n3. **transcribe_with_timestamps** - Word-level timing\n   - Input: Audio file\n   - Output: Segments with start/end times per word\n   - Use case: Subtitles, karaoke, video editing\n\n4. **diarize** - Speaker identification\n   - Input: Multi-speaker audio\n   - Output: Transcription with speaker labels\n   - Use case: Meeting transcription, interviews, podcasts\n\n## Zone Architecture\n\n\u003c!-- fcp2-single-zone-note --\u003e\n**FCP2 single-zone binding note:** A connector instance binds to exactly one `ZoneId` for its entire lifetime.\nThe *\"zones\"* described in this section are a **recommended deployment pattern** (run separate connector instances in separate zones with different capability grants/policies) and/or conceptual risk tiers.\nThe connector MUST NOT multiplex multiple zones internally.\n\n\n### Zones\n- **transcription.basic** - Standard transcription access\n- **transcription.premium** - Enhanced features (diarization, word timestamps)\n- **model.whisper-1** - OpenAI Whisper API access\n- **model.whisper-large** - Local large model\n- **model.whisper-turbo** - Fast transcription model\n\n### Policies\n- Rate limiting per zone\n- Audio duration limits\n- File size limits\n- Language restrictions per zone\n\n## Dependencies\n\n### Required Crates\n- **fcp-core** - Base connector traits, FcpResult, error handling\n- **fcp-streaming** - Long audio chunked processing\n- **fcp-telemetry** - Metrics, tracing for transcription jobs\n\n### External\n- OpenAI Whisper API (cloud mode)\n- whisper.cpp / whisper-rs (local mode)\n\n## Integration Points\n\n### Input Sources\n- **fcp.youtube** - Transcribe YouTube videos (when captions unavailable)\n- **fcp.podcast** - Transcribe podcast episodes\n- **fcp.storage** - Audio files from S3, GCS, local storage\n- **fcp.voice-notes** - Personal voice memo transcription\n\n### Output Consumers\n- **fcp.search** - Index transcriptions for full-text search\n- **fcp.summary** - Generate summaries from transcripts\n- **fcp.translation** - Multi-language translation from transcript\n\n## Implementation Strategy\n\n### Phase 1: OpenAI Whisper API\n- Implement basic transcription via OpenAI API\n- Support all audio formats\n- Handle rate limiting and retries\n- Chunk long audio (\u003e25MB limit)\n\n### Phase 2: Local whisper.cpp\n- Integrate whisper-rs for local inference\n- Support multiple model sizes (tiny, base, small, medium, large)\n- GPU acceleration via CUDA/Metal\n- Offline capability\n\n### Phase 3: Advanced Features\n- Speaker diarization via pyannote or similar\n- Real-time streaming transcription\n- Custom vocabulary/prompts\n- Confidence scores\n\n## Technical Design\n\n```rust\n// Core trait\n#[async_trait]\npub trait WhisperConnector: FcpConnector {\n    async fn transcribe(\u0026self, req: TranscribeRequest) -\u003e FcpResult\u003cTranscription\u003e;\n    async fn translate(\u0026self, req: TranslateRequest) -\u003e FcpResult\u003cTranscription\u003e;\n    async fn transcribe_stream(\u0026self, stream: AudioStream) -\u003e FcpResult\u003cTranscriptionStream\u003e;\n}\n\n// Request types\npub struct TranscribeRequest {\n    pub audio: AudioSource,\n    pub language: Option\u003cString\u003e,\n    pub prompt: Option\u003cString\u003e,\n    pub response_format: ResponseFormat,\n    pub timestamp_granularity: TimestampGranularity,\n    pub diarize: bool,\n}\n\npub enum AudioSource {\n    File(PathBuf),\n    Bytes(Bytes),\n    Url(String),\n    Stream(AudioStream),\n}\n\npub enum ResponseFormat {\n    Json,\n    Text,\n    Srt,\n    Vtt,\n    VerboseJson,\n}\n\n// Response types\npub struct Transcription {\n    pub text: String,\n    pub language: String,\n    pub duration: f64,\n    pub segments: Option\u003cVec\u003cSegment\u003e\u003e,\n    pub words: Option\u003cVec\u003cWord\u003e\u003e,\n}\n\npub struct Segment {\n    pub id: u32,\n    pub start: f64,\n    pub end: f64,\n    pub text: String,\n    pub speaker: Option\u003cString\u003e,\n}\n\npub struct Word {\n    pub word: String,\n    pub start: f64,\n    pub end: f64,\n    pub confidence: f64,\n}\n```\n\n## Configuration\n\n```toml\n[whisper]\nmode = \"api\"  # or \"local\"\napi_key = \"${OPENAI_API_KEY}\"\nmodel = \"whisper-1\"\n\n[whisper.local]\nmodel_path = \"/models/whisper-large-v3.bin\"\ndevice = \"cuda\"  # or \"cpu\", \"metal\"\nthreads = 4\n\n[whisper.limits]\nmax_file_size = \"25MB\"\nmax_duration = 7200  # seconds\nconcurrent_jobs = 4\n```\n\n## Testing Strategy\n\n- Unit tests for audio format detection\n- Integration tests with OpenAI API (mocked)\n- End-to-end tests with sample audio files\n- Performance benchmarks for local inference\n- Multi-language transcription tests\n\n## Acceptance Criteria\n\n- [ ] Transcribe audio files in all supported formats\n- [ ] Support translation to English\n- [ ] Generate word-level timestamps\n- [ ] Handle audio files \u003e25MB via chunking\n- [ ] Zone-based access control working\n- [ ] Telemetry metrics for transcription jobs\n- [ ] Local whisper.cpp integration functional\n- [ ] Documentation with usage examples","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T22:06:31.388717248-05:00","created_by":"ubuntu","updated_at":"2026-01-15T07:23:29.036858216-05:00","labels":["audio","connector","connectors","fcp2","tier-3","tier3","transcription","whisper"],"dependencies":[{"issue_id":"flywheel_connectors-e31e","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T22:08:32.941450242-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-e31e","depends_on_id":"flywheel_connectors-9co","type":"blocks","created_at":"2026-01-11T22:08:32.968130099-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-e31e","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:31:58.803853004-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-e3i9","title":"TEST: E2E Connector Verification Framework","description":"# TEST: E2E Connector Verification Framework (FCP2)\n\n## Overview\nEnd-to-end testing framework that verifies **connector implementations** against the **FCP V2-only** platform contract.\n\nThis framework is where we catch \"it compiles but violates the protocol/security model\" failures.\n\n## What this must validate (high-level)\n- Connectors implement the standard method surface (`--manifest`, handshake/describe/introspect/capabilities/configure/invoke/health/shutdown).\n- Connectors are **single-zone bound** for their lifetime.\n- Default deny is mechanical: no capability token → denial + DecisionReceipt.\n- Side effects are safe: OperationIntent/Receipt (and leases where required) prevent duplicate execution.\n- Secrets and PII do not leak to logs.\n\n## Test Scenarios\n\n### Protocol Compliance (FCP2)\n- [ ] Session handshake flow (`MeshSessionHello`/`MeshSessionAck`) success/failure cases\n- [ ] FCPC control-plane framing (ordered, backpressured, canonical object payloads)\n- [ ] FCPS data-plane frames (frame parsing, MAC verification, per-symbol AEAD)\n- [ ] Canonical encoding validation (schema-hash prefix + deterministic CBOR)\n\n### Capability \u0026 Authority\n- [ ] COSE_Sign1 CapabilityToken validation\n- [ ] Expired token rejection\n- [ ] Invalid signature rejection\n- [ ] `grant_object_ids` subset verification\n- [ ] Revocation freshness enforcement (Strict/Warn/BestEffort per policy)\n\n### Lifecycle Tests\n- [ ] Cold start performance (\u003c 50ms target)\n- [ ] Graceful shutdown handling\n- [ ] Crash recovery and restart policy behavior\n- [ ] Health check responses\n\n### Operations \u0026 Events\n- [ ] Introspection accuracy (schemas, risk tiers, hints)\n- [ ] Request/response matching\n- [ ] Streaming/event subscription lifecycle (if connector declares Streaming/Bidirectional)\n- [ ] Cursor-based replay semantics (if connector supports replay)\n\n### Security Boundary Tests\n- [ ] Cross-zone access blocked (must fail closed)\n- [ ] NetworkConstraints enforced (no raw sockets in strict/moderate)\n- [ ] Timeout enforcement\n- [ ] Rate limit compliance (connector and/or platform)\n\n## Test Harness\n\n### MockExternalService\n- Configurable response patterns\n- Latency injection\n- Error injection\n- Rate limit simulation\n- Authentication verification\n\n### ConnectorRunner\n- Spawn connector in subprocess (or run as WASI module)\n- FCPC/FCPS transport shim\n- Output capture (stdout/stderr/logs)\n- Resource monitoring (memory, CPU)\n- Timeout enforcement\n\n### Assertions\n- Protocol message validation via canonical CBOR + schema hash\n- Performance assertions\n- Security assertions\n- DecisionReceipt assertions (reason_code + evidence)\n\n## Logging \u0026 Reporting (REQUIRED)\n- Structured JSON logs for each test\n- Performance metrics collection\n- Test result summary\n- CI integration (JUnit XML or similar)\n\n### Required log fields\n- `timestamp`, `test_name`, `phase`, `correlation_id`, `duration_ms`\n- When applicable: `connector_id`, `operation_id`, `zone_id`, `session_id`\n- For denials: `decision=deny`, `reason_code`, `evidence` (object IDs)\n\n## Dependencies\n- Uses fcp-testkit (mock infrastructure)\n- Depends on core platform conformance artifacts (golden vectors, fuzz harness)\n\n## Execution\n```bash\n# Run E2E tests for specific connector\ncargo test --package fcp-e2e --features telegram\n\n# Run full E2E suite\ncargo test --package fcp-e2e\n\n# Generate report\ncargo test --package fcp-e2e -- --report=json \u003e e2e-results.json\n```\n\n## Acceptance Criteria\n- Runs deterministically in CI (no flake due to timing/network).\n- Uses mocks only (no real external network).\n- Emits structured JSON logs per `flywheel_connectors-1n78.35` with stable `test_name` identifiers.\n","status":"open","priority":0,"issue_type":"feature","created_at":"2026-01-11T12:12:59.91841516-05:00","created_by":"ubuntu","updated_at":"2026-01-15T05:28:11.905622856-05:00","labels":["conformance","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-e3i9","depends_on_id":"flywheel_connectors-iv7","type":"blocks","created_at":"2026-01-11T12:21:43.802980375-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-e3i9","depends_on_id":"flywheel_connectors-shj4","type":"blocks","created_at":"2026-01-11T12:21:43.848761633-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-e3i9","depends_on_id":"flywheel_connectors-agh5","type":"blocks","created_at":"2026-01-11T12:21:43.884810369-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-e3i9","depends_on_id":"flywheel_connectors-4n0q","type":"blocks","created_at":"2026-01-11T12:21:43.91749275-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-e3i9","depends_on_id":"flywheel_connectors-1n78.21","type":"parent-child","created_at":"2026-01-15T01:53:15.190618031-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-e3i9","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T01:53:15.241135128-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-e3i9","depends_on_id":"flywheel_connectors-1n78.21.4","type":"blocks","created_at":"2026-01-15T01:53:15.291838546-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-e3i9","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T01:53:15.3434903-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-e3i9","depends_on_id":"flywheel_connectors-1n78.20.1","type":"blocks","created_at":"2026-01-15T06:48:04.673196645-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-e3i9","depends_on_id":"flywheel_connectors-gqvh","type":"blocks","created_at":"2026-01-15T06:48:05.053790793-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-e8m","title":"fcp.terraform: Apply with ApprovalToken (Plan Hash Binding)","description":"# fcp.terraform: Apply with ApprovalToken (Plan Hash Binding) (FCP2)\n\n## Goal\nExecute `terraform apply` only when:\n- a specific plan artifact is provided\n- the plan hash matches\n- an **ApprovalToken** is present per zone policy (dangerous external side effect)\n\n## Scope\n- Apply a previously-generated plan.\n- Enforce approval token binding to:\n  - plan hash\n  - workspace/backend context\n  - allowed targets (optional)\n- Emit receipts + audit events capturing:\n  - plan hash\n  - apply result summary\n\n## Capability model (illustrative)\n- `terraform.apply` (dangerous)\n\n## FCP2 requirements\n- Single-zone binding.\n- No interactive apply.\n- No auto-approve.\n- Deny-by-default for destroy unless explicitly enabled.\n- Exactly-once semantics where feasible:\n  - OperationIntent pre-commit\n  - OperationReceipt post-commit\n\n## Deliverables\n- Operation schemas:\n  - `terraform.apply`\n- Approval integration points:\n  - request approval with an evidence bundle (plan summary + hash)\n  - validate ApprovalToken scope before executing\n\n## Test strategy (MUST)\n- Unit tests with a terraform shim for:\n  - approval required path\n  - approval denied path\n  - plan hash mismatch denial\n  - audit/receipt emission\n\n## Acceptance criteria\n- Apply cannot execute without a valid ApprovalToken + matching plan hash.\n\n\nLABELS: connectors, fcp2, tier3\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:14:59.660601908-05:00","created_by":"ubuntu","updated_at":"2026-01-15T06:30:07.787833615-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-e8m","depends_on_id":"flywheel_connectors-r6ty","type":"parent-child","created_at":"2026-01-15T02:33:01.253430047-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-e8m","depends_on_id":"flywheel_connectors-r6ty.1","type":"blocks","created_at":"2026-01-15T04:44:48.910210265-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-e8m","depends_on_id":"flywheel_connectors-n6r","type":"blocks","created_at":"2026-01-15T04:44:49.249752589-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-e8m","depends_on_id":"flywheel_connectors-xme","type":"blocks","created_at":"2026-01-15T04:44:49.680458822-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-e9nh","title":"TEST: fcp-cli Unit/E2E Tests (All Commands, JSON Output, Snapshot Tests)","description":"# TEST: fcp-cli Unit/E2E Tests\n\n## Goal\nComprehensive tests for all fcp-cli commands ensuring correct behavior and stable output schemas.\n\n## Test Categories\n\n### 1. fcp install Tests\n- Install valid connector with verified manifest\n- Install fails on invalid signature\n- Install fails on policy requirement mismatch\n- Mirror to mesh store verification\n- Supply chain attestation verification\n- JSON output schema snapshot test\n\n### 2. fcp doctor Tests\n- Report checkpoint freshness (fresh/stale transitions)\n- Report revocation freshness\n- Report degraded-mode state\n- Transport policy state (DERP/Funnel)\n- Zone-scoped doctor output\n- JSON output schema snapshot test\n\n### 3. fcp explain Tests\n- Render DecisionReceipt for denial\n- Include pointers to relevant objects (token, grants, checkpoint, approvals)\n- Explain approval path\n- Explain missing capability\n- Reason code rendering\n- JSON output schema snapshot test\n\n### 4. fcp audit tail Tests\n- Tail AuditEvent stream\n- Trace correlation filtering\n- Zone-scoped audit tail\n- Event type filtering\n- JSON output schema snapshot test\n\n### 5. fcp repair status Tests\n- Report coverage metrics (bps, distinct nodes, max concentration)\n- Report pending repair actions\n- Report last repair actions\n- Zone-scoped repair status\n- JSON output schema snapshot test\n\n### 6. fcp bench Tests\n- Canonical CBOR encode/decode benchmark\n- ObjectId derivation benchmark\n- Token verify benchmark\n- FCPS parse+verify benchmark\n- RaptorQ decode benchmark\n- invoke-local and invoke-mesh benchmarks\n- JSON output schema snapshot test\n\n### 7. Cross-Cutting Tests\n- All commands support --json output\n- All commands use FCP-XXXX error codes\n- No commands print secrets\n- No commands print auth headers/tokens\n\n## E2E Tests (Deterministic Harness)\n- fcp install + invoke flow\n- fcp explain on a denial\n- fcp doctor showing stale→fresh transition\n- fcp repair status showing coverage changes\n\n## Logging Requirements\n- All test output captured as structured JSON\n- Test failures include full command output\n- Snapshot diffs on schema changes\n\n## Acceptance Criteria\n- JSON output schemas are stable and versioned\n- All commands testable without live mesh (mock/deterministic)\n- Snapshot tests prevent accidental schema breaks\n- E2E tests run in deterministic harness","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:50:01.297901088-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:50:01.297901088-05:00","labels":["cli","fcp2","mvp","testing"],"dependencies":[{"issue_id":"flywheel_connectors-e9nh","depends_on_id":"flywheel_connectors-iqrb","type":"blocks","created_at":"2026-01-15T03:50:31.022185804-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-e9nh","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:50:31.189713425-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ehu","title":"fcp.arxiv: Full text and PDF access for papers","description":"# fcp.arxiv: Full text and PDF access for papers (FCP2)\n\n## Goal\nEnable retrieval of paper content for summarization and indexing:\n- fetch paper metadata\n- download PDF (streamed)\n- extract text/sections\n\n## Scope\n- Get paper metadata by arXiv id.\n- Download PDF with strict bounds.\n- Extract plain text and (optional) section segmentation.\n\n## Capability model (illustrative)\n- `arxiv.paper.read`\n- `arxiv.pdf.download` (sensitive-ish: large IO)\n- `arxiv.pdf.extract` (local processing)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned to API + PDF hosts.\n- Strict rate limiting.\n- Streaming + bounds:\n  - max bytes per PDF\n  - cap extraction output size\n\n## Deliverables\n- Operation schemas:\n  - `arxiv.paper.get`\n  - `arxiv.paper.pdf.download`\n  - `arxiv.paper.pdf.extract_text`\n  - Optional: `arxiv.paper.pdf.extract_sections`\n- Canonical output types:\n  - `PaperText`\n  - `PaperSections`\n\n## Test strategy (MUST)\n- Fixture-based tests for PDF extraction (no network).\n- Mock-only tests for download bounds and host pinning.\n\n## Acceptance criteria\n- PDF downloads/extraction are safe, bounded, and deterministic.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:14:32.765039057-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:48:44.1969848-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-ehu","depends_on_id":"flywheel_connectors-8yxg","type":"parent-child","created_at":"2026-01-15T02:32:23.234721306-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ehu","depends_on_id":"flywheel_connectors-8yxg.1","type":"blocks","created_at":"2026-01-15T04:48:48.356041588-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ep21","title":"fcp.asana: Asana project management connector","description":"## Summary\n\nThe **fcp.asana** connector integrates with Asana's project management platform, providing comprehensive task management, project organization, and team collaboration capabilities. Asana is widely used for project tracking with rich features including sections, custom fields, portfolios, goals, timelines, and workload management.\n\n## Value Assessment\n\n- **Value Score**: 67/100 (Tier 4)\n- **Market Position**: Major project management platform alongside Linear and Jira\n- **Target Users**: Teams, enterprises, and organizations using Asana for project tracking\n- **Integration Potential**: High - Asana's extensive feature set enables rich automation workflows\n\n## Technical Architecture\n\n### Archetype: Request-Response + Webhook\n\nThe connector implements a hybrid pattern combining synchronous REST API calls with asynchronous webhook event handling for real-time updates.\n\n### Zone Architecture\n\n**Zone 1: Task Read** (Low risk)\n- List tasks, search tasks\n- Get task details, subtasks\n- Read comments, attachments\n- View task followers, dependencies\n\n**Zone 2: Task Write** (Medium risk)\n- Create/update/delete tasks\n- Manage subtasks\n- Add/remove comments\n- Upload/delete attachments\n- Modify task followers, dependencies\n\n**Zone 3: Project Admin** (High risk)\n- Create/update/delete projects\n- Manage sections\n- Configure custom fields\n- Portfolio management\n- Goal configuration\n- Timeline adjustments\n- Workload settings\n- Team/workspace administration\n\n### Dependencies\n\n```toml\n[dependencies]\nfcp-core = { path = \"../fcp-core\" }\nfcp-oauth = { path = \"../fcp-oauth\" }\nfcp-webhook = { path = \"../fcp-webhook\" }\nfcp-ratelimit = { path = \"../fcp-ratelimit\" }\nfcp-telemetry = { path = \"../fcp-telemetry\" }\n```\n\n## Operations\n\n### Task Operations\n- `task.list` - List tasks with filters (project, assignee, section, tags)\n- `task.get` - Get task details including custom fields\n- `task.create` - Create new task with all properties\n- `task.update` - Update task fields\n- `task.delete` - Delete task\n- `task.search` - Search tasks across workspace\n- `task.duplicate` - Duplicate task with options\n\n### Subtask Operations\n- `subtask.list` - List subtasks of a task\n- `subtask.create` - Create subtask\n- `subtask.convert` - Convert subtask to task or vice versa\n\n### Project Operations\n- `project.list` - List projects in workspace/team\n- `project.get` - Get project details\n- `project.create` - Create new project\n- `project.update` - Update project settings\n- `project.delete` - Delete project\n- `project.duplicate` - Duplicate project with options\n\n### Section Operations\n- `section.list` - List sections in project\n- `section.create` - Create section\n- `section.update` - Update section name/position\n- `section.delete` - Delete section\n- `section.move_task` - Move task to section\n\n### Custom Field Operations\n- `custom_field.list` - List custom fields\n- `custom_field.get` - Get custom field definition\n- `custom_field.create` - Create custom field\n- `custom_field.update` - Update custom field\n- `custom_field.delete` - Delete custom field\n- `custom_field.set_value` - Set custom field value on task\n\n### Portfolio Operations\n- `portfolio.list` - List portfolios\n- `portfolio.get` - Get portfolio details\n- `portfolio.create` - Create portfolio\n- `portfolio.update` - Update portfolio\n- `portfolio.add_item` - Add project to portfolio\n- `portfolio.remove_item` - Remove project from portfolio\n\n### Goal Operations\n- `goal.list` - List goals\n- `goal.get` - Get goal details\n- `goal.create` - Create goal\n- `goal.update` - Update goal progress\n- `goal.add_supporting_work` - Link project/portfolio to goal\n\n### Timeline Operations\n- `timeline.get` - Get project timeline view\n- `timeline.update_dates` - Bulk update task dates\n- `timeline.set_dependencies` - Configure task dependencies\n\n### Workload Operations\n- `workload.get` - Get team workload view\n- `workload.capacity` - Get/set user capacity\n- `workload.effort` - Get/set task effort\n\n### Comment Operations\n- `comment.list` - List comments on task\n- `comment.create` - Add comment\n- `comment.update` - Edit comment\n- `comment.delete` - Delete comment\n\n### Attachment Operations\n- `attachment.list` - List attachments\n- `attachment.upload` - Upload attachment\n- `attachment.download` - Download attachment\n- `attachment.delete` - Delete attachment\n\n### Webhook Operations\n- `webhook.register` - Register webhook for events\n- `webhook.list` - List registered webhooks\n- `webhook.delete` - Remove webhook\n- Events: task created/updated/deleted, comment added, project changes\n\n## Implementation Details\n\n### Authentication\n- **OAuth 2.0** with PKCE flow\n- Scopes: `default`, `openid`, `email`, `profile`\n- Token refresh handling via fcp-oauth\n\n### Rate Limiting\n- 1,500 requests per minute per user\n- Exponential backoff with jitter\n- Rate limit headers: `X-Asana-*`\n\n### Pagination\n- Cursor-based pagination via `offset` parameter\n- Default page size: 100, max: 100\n- `next_page` object in response\n\n### Webhook Implementation\n- HMAC-SHA256 signature verification\n- X-Hook-Secret handshake protocol\n- Event types: task, project, section, story (comment)\n- Webhook filters for specific projects/events\n\n### Error Handling\n- Standard HTTP error codes\n- Asana-specific error objects with `errors` array\n- Retry logic for 429 (rate limit) and 5xx errors\n\n## Beads Sync Potential\n\nThe connector supports bidirectional sync with beads:\n- Tasks map to beads with assignee, due date, priority\n- Sections map to bead labels/categories\n- Custom fields map to bead metadata\n- Comments sync as bead notes\n- Subtasks sync as child beads\n\n## API Reference\n\n- Base URL: `https://app.asana.com/api/1.0`\n- Documentation: https://developers.asana.com/docs\n- API Explorer: https://developers.asana.com/explorer\n\n## Similar Connectors\n\n- **fcp.linear**: Similar task/issue patterns, different API structure\n- **fcp.jira**: Similar project management concepts, more enterprise-focused\n- Both provide reference implementations for project management connectors\n\n## Testing Strategy\n\n- Unit tests with mock Asana responses\n- Integration tests with Asana sandbox workspace\n- Webhook simulation tests\n- Rate limit handling verification\n- OAuth flow testing\n\n## Acceptance Criteria\n\n- [ ] All CRUD operations for tasks, projects, sections implemented\n- [ ] Custom field support with all field types\n- [ ] Portfolio and goal management operations\n- [ ] Timeline and workload read operations\n- [ ] Webhook registration and event handling\n- [ ] OAuth 2.0 authentication flow\n- [ ] Rate limiting with proper backoff\n- [ ] Comprehensive error handling\n- [ ] Beads sync mapping documentation\n- [ ] Integration tests passing","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T22:03:27.734319281-05:00","created_by":"ubuntu","updated_at":"2026-01-11T22:03:27.734319281-05:00","dependencies":[{"issue_id":"flywheel_connectors-ep21","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T22:08:21.955791767-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-ep21","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T22:08:21.98220421-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-ep21","depends_on_id":"flywheel_connectors-lj2","type":"blocks","created_at":"2026-01-11T22:08:32.479803157-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-ep21","depends_on_id":"flywheel_connectors-vi7","type":"blocks","created_at":"2026-01-11T22:08:32.725611225-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-ep21","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:37:15.08457614-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ep21","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T07:07:26.949777376-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ep21","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T07:09:09.774234297-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ep21","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T07:09:10.22105309-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ep21","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T07:09:10.657180859-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ep21","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T07:09:11.081508392-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ep21","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T07:09:11.488887435-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ep21","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:09:11.914080931-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ep21.1","title":"fcp.asana: Manifest + Capability Map (FCP2)","description":"## Goal\nProduce the full FCP2 manifest and capability map for this connector.\n\nThis bead is where we translate the connector’s functional surface (operations) into a **mechanically checkable** contract:\n- operation schemas + schema IDs\n- capability families per operation\n- per-operation NetworkConstraints (default deny)\n- sandbox profile requirements\n- declared state model (stateless / singleton_writer / crdt)\n\n## Required content (must be explicit)\n- Operation list is exhaustive and stable for the current phase.\n- Capability IDs DO NOT encode hostnames/ports.\n- NetworkConstraints are minimal and per-operation.\n- Risk tier for each operation (Safe / Dangerous).\n- Explicit bounds: timeouts, max response sizes, pagination limits.\n\n## Tests\n- Add good/bad manifest examples for the compliance runner.\n\n## Acceptance Criteria\n- Passes static checks in `flywheel_connectors-1n78.21.5`.\n- Default-deny is enforced by manifest + capability requirements.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:17.383919089-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:12:17.383919089-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-ep21.1","depends_on_id":"flywheel_connectors-ep21","type":"parent-child","created_at":"2026-01-15T07:12:17.439321481-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ep21.2","title":"fcp.asana: Provisioning Automation","description":"## Goal\nAutomate provisioning and configuration with minimal human steps.\n\nThis bead owns:\n- auth setup (OAuth / API keys / webhook secrets) via `CredentialObject`/`CredentialId` (egress proxy injection preferred)\n- endpoint configuration\n- `fcp doctor` readiness checks\n- deterministic, mockable provisioning flows\n\n## FCP2 requirements\n- Secrets never touch disk.\n- Provisioning is deterministic and testable.\n- Error messages are actionable and do not leak secrets/PII.\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Provisioning emits structured logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:17.938807289-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:53.370742984-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-ep21.2","depends_on_id":"flywheel_connectors-ep21","type":"parent-child","created_at":"2026-01-15T07:12:17.997013096-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ep21.2","depends_on_id":"flywheel_connectors-ep21.1","type":"blocks","created_at":"2026-01-15T07:12:18.514326653-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ep21.3","title":"TEST: fcp.asana Unit/Integration Tests (mock-only)","description":"## Goal\nMock-only unit/integration tests for this connector.\n\n## Required coverage\n- schema validation (inputs + outputs)\n- error taxonomy mapping (retry semantics)\n- pagination and bounds\n- rate limit behavior\n- redaction (no token/secret/PII leakage)\n- idempotency + receipts for Dangerous operations\n\n## Logging\nAll tests emit structured JSON logs per `flywheel_connectors-1n78.35`.\n\n## Acceptance Criteria\n- Deterministic tests; no live external calls.\n- Includes adversarial cases (timeouts, malformed responses, partial failures).\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:19.026388339-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:12:19.026388339-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-ep21.3","depends_on_id":"flywheel_connectors-ep21","type":"parent-child","created_at":"2026-01-15T07:12:19.085490596-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ep21.3","depends_on_id":"flywheel_connectors-ep21.1","type":"blocks","created_at":"2026-01-15T07:12:19.595142709-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ep21.3","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:12:20.100209479-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ep21.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T07:32:15.212206838-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ep21.4","title":"E2E: fcp.asana Connector Compliance Run","description":"## Goal\nRun the shared connector compliance runner and capture an evidence bundle.\n\n## Must validate\n- handshake + introspection correctness\n- default deny (no CapabilityToken → deny + DecisionReceipt)\n- NetworkConstraints enforcement\n- receipts/audit for Dangerous operations\n- structured logs\n\n## Acceptance Criteria\n- E2E run is deterministic and produces a stable artifact bundle.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:20.532017975-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:12:20.532017975-05:00","labels":["connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-ep21.4","depends_on_id":"flywheel_connectors-ep21","type":"parent-child","created_at":"2026-01-15T07:12:20.590907461-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ep21.4","depends_on_id":"flywheel_connectors-ep21.1","type":"blocks","created_at":"2026-01-15T07:12:21.098326014-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ep21.4","depends_on_id":"flywheel_connectors-ep21.2","type":"blocks","created_at":"2026-01-15T07:12:21.597253329-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ep21.4","depends_on_id":"flywheel_connectors-ep21.3","type":"blocks","created_at":"2026-01-15T07:12:22.184588848-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ep21.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T07:12:22.760625607-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-eqb","title":"fcp.homeassistant: Event subscription and real-time updates","description":"# fcp.homeassistant: Event subscription and real-time updates (FCP2)\n\n## Goal\nProvide streaming access to Home Assistant’s event bus via WebSocket:\n- state_changed\n- call_service\n- custom events\n\n## Scope\n- Establish websocket session and authenticate.\n- Subscribe to events with filters (domain/entity allowlists).\n- Deliver events as FCP2 event envelopes with:\n  - stable event IDs\n  - correlation IDs\n\n## Capability model (illustrative)\n- `ha.events.subscribe` (sensitive)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned (WS + HTTPS to HA host only).\n- Streaming must be bounded/backpressured:\n  - cap queue depth\n  - drop/deny with explicit reason codes when overloaded\n- Taint:\n  - event payloads are tainted external input\n\n## Deliverables\n- Operation schema:\n  - `ha.events.subscribe`\n- Event envelope types:\n  - `ha.event.state_changed`\n  - `ha.event.call_service`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - reconnect + resubscribe\n  - bounds/backpressure behavior\n  - taint propagation\n\n## Acceptance criteria\n- Event streaming is reliable under reconnects and never causes unbounded memory growth.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:17:33.535334333-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:43:49.645209231-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-eqb","depends_on_id":"flywheel_connectors-ortf","type":"parent-child","created_at":"2026-01-15T02:33:22.551724935-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-eqb","depends_on_id":"flywheel_connectors-ortf.1","type":"blocks","created_at":"2026-01-15T04:43:54.99172894-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-eqb","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T04:43:55.348864773-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-f3xi","title":"TEST: Offline Capability Unit Tests (Availability Tracking, Pre-staging, Coverage Metrics)","description":"# TEST: Offline Capability Unit Tests\n\n## Goal\nComprehensive unit tests for offline capability tracking from V2 spec section 21.\n\n## Test Categories\n\n### OfflineAccess Tests\n- can_access() returns true when local_symbols \u003e= k\n- can_access() returns false when local_symbols \u003c k\n- coverage() calculates correct ratio (local_symbols / k)\n- Edge cases: k=0, local_symbols=0, overflow\n\n### OfflineCapability Tests\n- Accessible map tracks multiple objects correctly\n- Object removal updates capability state\n- Query by zone returns correct subset\n- Memory efficient for large object counts\n\n### Pre-staging Tests\n- Access pattern tracking updates correctly\n- Frequent objects prioritized for pre-staging\n- Pre-staging respects device storage limits\n- Stale access patterns decay appropriately\n- Pre-staging triggers before predicted access\n\n### Integration with Stores\n- Symbol store updates reflect in OfflineAccess\n- Symbol eviction updates can_access() correctly\n- Repair loop improves coverage metrics\n\n## Golden Vectors\n- Location: tests/golden/offline_capability/\n- Include: OfflineAccess serialization, coverage calculations\n\n## Logging Requirements (per 1n78.35)\nAll tests emit structured JSON:\n{\n  \"timestamp\": \"RFC3339\",\n  \"test\": \"can_access_sufficient_symbols\",\n  \"object_id\": \"...\",\n  \"local_symbols\": 60,\n  \"k\": 50,\n  \"expected_can_access\": true,\n  \"result\": \"pass|fail\"\n}\n\n## Fuzz Targets\n- OfflineAccess from arbitrary symbol counts\n- Pre-staging priority calculation\n\n## Acceptance Criteria\n- All can_access/coverage calculations correct\n- Pre-staging improves offline availability\n- Integration with stores is consistent","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:41:38.187529965-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:41:52.104414415-05:00","labels":["fcp2","mvp","storage","testing"],"dependencies":[{"issue_id":"flywheel_connectors-f3xi","depends_on_id":"flywheel_connectors-31c7","type":"blocks","created_at":"2026-01-15T03:41:52.157161918-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-f3xi","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:41:52.29944295-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-f50","title":"fcp.reddit: User Posting and Commenting","description":"# fcp.reddit: User Posting and Commenting (FCP2)\n\n## Goal\nEnable controlled Reddit participation:\n- submit posts\n- submit comments\n- edit/delete own content\n\nThese are real-world side effects and must be tightly capability scoped.\n\n## Scope\n- Submit post to a subreddit (text/link).\n- Submit comment.\n- Edit content.\n- Delete content.\n\n## Capability model (illustrative)\n- `reddit.post.write` (dangerous)\n- `reddit.comment.write` (dangerous)\n- `reddit.content.edit` (dangerous)\n\nPolicy guidance:\n- Posting should often require ApprovalToken depending on zone policy.\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- Content safety:\n  - outbound content must be treated as a “publication” action\n  - receipts + audit events include subreddit + post/comment id\n  - never log post bodies\n\n## Deliverables\n- Operation schemas:\n  - `reddit.post.submit`\n  - `reddit.comment.submit`\n  - `reddit.content.edit`\n  - `reddit.content.delete`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - request formation\n  - approval gating\n  - audit/receipt emission\n  - error mapping (subreddit rules, forbidden)\n\n## Acceptance criteria\n- Write operations are mechanically authorized, explainable, and auditable.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:21:21.701995278-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:39:17.084470383-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-f50","depends_on_id":"flywheel_connectors-xz6e","type":"parent-child","created_at":"2026-01-15T02:33:59.37046921-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-f50","depends_on_id":"flywheel_connectors-xz6e.1","type":"blocks","created_at":"2026-01-15T04:39:20.734579704-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-fbql","title":"TEST: Computation Migration Unit Tests (Checkpoint, Lease Transfer, Resume)","description":"# TEST: Computation Migration Unit Tests\n\n## Goal\nComprehensive unit and integration tests for computation migration from V2 spec section 16.\n\n## Test Categories\n\n### Checkpoint Tests\n- Checkpoint creation serializes all computation state\n- Checkpoint is content-addressed ObjectId\n- Checkpoint can be reconstructed from symbols\n- Large checkpoint is chunked correctly\n\n### Lease Transfer Tests\n- Execution lease transfers atomically during migration\n- Duplicate execution prevented during migration window\n- Lease transfer fails gracefully on network partition\n- Fencing token is updated after transfer\n\n### Resume Tests\n- Target device reconstructs checkpoint correctly\n- Computation resumes from checkpoint progress\n- State transitions: Suspended -\u003e Running are audited\n- Failed resume transitions to Failed state correctly\n\n### Adversarial Tests\n- Migration during network partition (split brain prevention)\n- Concurrent migrations of same computation (conflict resolution)\n- Checkpoint corruption detection\n- Lease expiry during migration\n\n## Golden Vectors\n- Location: tests/golden/computation_migration/\n- Include: checkpoint serialization, lease transfer messages, resume protocol\n\n## Logging Requirements (per 1n78.35)\nAll tests emit structured JSON:\n{\n  \"timestamp\": \"RFC3339\",\n  \"test\": \"checkpoint_creation\",\n  \"computation_id\": \"...\",\n  \"checkpoint_size\": 1234,\n  \"result\": \"pass|fail\",\n  \"error\": \"optional error message\"\n}\n\n## Fuzz Targets\n- Checkpoint deserialization (arbitrary bytes)\n- Migration request parsing\n- Lease transfer message validation\n\n## Acceptance Criteria\n- All checkpoint creation/restoration tests pass\n- Lease transfer is atomic (no duplicate execution)\n- Adversarial scenarios handled correctly","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:41:13.221432187-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:41:28.383052588-05:00","labels":["fcp2","mesh","mvp","testing"],"dependencies":[{"issue_id":"flywheel_connectors-fbql","depends_on_id":"flywheel_connectors-mhiv","type":"blocks","created_at":"2026-01-15T03:41:28.441290904-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-fbql","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:41:28.590433071-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-fbql","depends_on_id":"flywheel_connectors-6o25.4","type":"blocks","created_at":"2026-01-15T05:21:09.175034324-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ftw","title":"fcp.reddit: Saved Items Management","description":"# fcp.reddit: Saved Items Management (FCP2)\n\n## Goal\nAllow agents to manage saved posts/comments for research workflows:\n- save/unsave\n- list saved items\n\n## Scope\n- Save a post/comment.\n- Unsave a post/comment.\n- List saved items (pagination).\n\n## Capability model (illustrative)\n- `reddit.saved.read`\n- `reddit.saved.write` (dangerous-ish)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- Receipts/audit for write operations.\n\n## Deliverables\n- Operation schemas:\n  - `reddit.saved.list`\n  - `reddit.saved.save`\n  - `reddit.saved.unsave`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - pagination\n  - save/unsave idempotency\n  - audit/receipt emission\n\n## Acceptance criteria\n- Saved-items workflows are reliable and auditable.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:21:22.499785716-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:39:42.200877458-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-ftw","depends_on_id":"flywheel_connectors-xz6e","type":"parent-child","created_at":"2026-01-15T02:33:59.453553876-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ftw","depends_on_id":"flywheel_connectors-xz6e.1","type":"blocks","created_at":"2026-01-15T04:39:45.962155207-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-fwd","title":"fcp.airtable: Attachment upload and download handling","description":"# fcp.airtable: Attachment Upload and Download Handling\n\n## Goal\nHandle Airtable attachments safely under strict sandboxing.\n\n## Scope\nOperations (representative):\n- `airtable.attachments.upload`\n- `airtable.attachments.get` (fetch attachment metadata/URL)\n- optional: `airtable.attachments.download` (if we choose to implement actual download)\n\n## Key requirements\n- Capability gated:\n  - read vs write separated\n- NetworkConstraints:\n  - Airtable API host(s) allowed\n  - attachment download hosts must be explicitly enumerated/pinned\n  - validate URLs are HTTPS and match allowlist\n- Data handling:\n  - attachments move as **ObjectId references** (no local disk persistence)\n  - enforce size limits and streaming bounds\n- Logging:\n  - never log attachment contents\n  - URLs may contain opaque tokens; treat as sensitive\n\n## Tests\n- Allow/deny matrix for attachment URL hosts.\n- Size limit and timeout tests.\n- Redaction tests.\n\n## Acceptance Criteria\n- Attachment flows are safe-by-default and deterministic.\n- Non-allowed hosts are blocked by Network Guard.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:14:35.521843538-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:03:05.89603361-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-fwd","depends_on_id":"flywheel_connectors-soft","type":"parent-child","created_at":"2026-01-15T02:29:57.215304138-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-fwd","depends_on_id":"flywheel_connectors-soft.1","type":"blocks","created_at":"2026-01-15T04:03:13.222647084-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-g1s","title":"fcp.spotify: Search (Tracks, Albums, Artists, Podcasts)","description":"# fcp.spotify: Search (Tracks, Albums, Artists, Podcasts) (FCP2)\n\n## Goal\nProvide fast, typed Spotify search for discovery workflows.\n\n## Scope\n- Search across types:\n  - track\n  - album\n  - artist\n  - playlist\n  - show/podcast\n  - episode\n- Support filters:\n  - market/locale\n  - pagination\n\n## Capability model (illustrative)\n- `spotify.search.read`\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned to Spotify Web API host.\n- Treat titles/descriptions as tainted external content.\n\n## Deliverables\n- Operation schemas:\n  - `spotify.search`\n  - `spotify.search.tracks`\n  - `spotify.search.albums`\n  - `spotify.search.artists`\n  - `spotify.search.shows`\n  - `spotify.search.episodes`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - pagination\n  - market handling\n  - rate limiting + retry/backoff\n\n## Acceptance criteria\n- Search results are stable and correctly typed.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:21:12.249291793-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:40:35.016329493-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-g1s","depends_on_id":"flywheel_connectors-a4dh","type":"parent-child","created_at":"2026-01-15T02:33:41.998899683-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-g1s","depends_on_id":"flywheel_connectors-a4dh.1","type":"blocks","created_at":"2026-01-15T04:40:38.603658015-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-g2c","title":"fcp.airtable: Full CRUD operations on records","description":"# fcp.airtable: Full CRUD Operations on Records\n\n## Goal\nImplement record CRUD with batching, pagination, and strict safety controls.\n\n## Scope\nOperations (representative):\n- `airtable.records.list` (pagination, filter/sort)\n- `airtable.records.get`\n- `airtable.records.create` / `airtable.records.create_batch`\n- `airtable.records.update` / `airtable.records.update_batch`\n- `airtable.records.upsert`\n- `airtable.records.delete` / `airtable.records.delete_batch` (Dangerous)\n\n## Key requirements\n- Capability gated:\n  - read vs write vs delete are separate capabilities\n- Rate limiting and backpressure are mechanical.\n- Pagination:\n  - support continuation tokens\n  - bound page sizes\n- Batch operations:\n  - handle partial failures deterministically\n  - stable error mapping per record\n- Idempotency / retries:\n  - upsert is preferred for retry-safe workflows\n  - deletes and schema writes must be treated as Dangerous (policy + receipts)\n\n## Tests\n- Mock-only tests cover:\n  - pagination edge cases\n  - batch partial failure semantics\n  - upsert conflict handling\n  - redaction: never log record bodies by default\n\n## Acceptance Criteria\n- CRUD operations behave deterministically under retries.\n- Dangerous operations are properly gated and audited.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:14:33.751522695-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:02:40.739075183-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-g2c","depends_on_id":"flywheel_connectors-soft","type":"parent-child","created_at":"2026-01-15T02:29:57.290070703-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-g2c","depends_on_id":"flywheel_connectors-soft.1","type":"blocks","created_at":"2026-01-15T04:02:44.599019737-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-gif","title":"fcp.pinecone: Pinecone Vector Database Connector","description":"# fcp.pinecone - Pinecone Vector Database Connector (FCP2)\n\n## Goal\nProvide an FCP2-compliant connector for Pinecone (managed vector DB) supporting vector storage and semantic retrieval under strict zone isolation.\n\n## Manifest archetypes (closed set)\n- `storage`\n- `knowledge`\n\n## Zone model\nSingle-zone bound: one connector instance ↔ one `ZoneId`.\n\n## External surface\n### NetworkConstraints\nDefault-deny; allow only the configured Pinecone endpoint(s) and port(s) required by declared operations.\n\n### Credential injection\n- API key via `CredentialId`.\n- Never persist or log keys.\n\n## Capability model (illustrative)\n- `pinecone.index.manage`\n- `pinecone.vectors.read`\n- `pinecone.vectors.write`\n- `pinecone.search.query`\n\n## Operations (initial)\n- index: create/describe/list/delete\n- vectors: upsert/fetch/delete/query\n\n## Tests\n- Mock-only unit tests with wiremock.\n- E2E compliance run validates default deny + NetworkConstraints + receipts for writes.\n\n## Acceptance Criteria\n- Passes connector compliance runner.\n- Deterministic tests (no live Pinecone calls).\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-11T10:11:34.823043494-05:00","created_by":"ubuntu","updated_at":"2026-01-15T08:37:53.432047258-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-gif","depends_on_id":"flywheel_connectors-iv7","type":"blocks","created_at":"2026-01-11T10:43:27.852894723-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-gif","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T10:43:27.887643529-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-gif","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T12:38:29.809998822-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-gif","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:27:10.056735094-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gif","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:27:50.944769769-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gif","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:27:51.037941036-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gif","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T03:27:51.136982451-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gif","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:27:51.242199117-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gif","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T03:27:51.347418939-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gif","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T07:09:58.64461096-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gif","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:09:59.071231807-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-gif.1","title":"fcp.pinecone: Manifest + Capability Map (FCP2)","description":"# fcp.pinecone: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the Pinecone connector manifest contract:\n- archetypes (`storage`, `knowledge`)\n- operations + schema IDs\n- capability families + per-operation caps\n- NetworkConstraints allowlist bound to configured endpoint\n\n## Acceptance Criteria\n- Complete manifest spec stored here.\n- Good/bad manifest examples exist for static compliance.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:27:57.776797762-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:27:57.776797762-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-gif.1","depends_on_id":"flywheel_connectors-gif","type":"parent-child","created_at":"2026-01-15T03:27:57.778112639-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gif.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:28:20.101827602-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gif.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:28:20.207175175-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-gif.2","title":"fcp.pinecone: Core Index + Vector Ops","description":"# fcp.pinecone: Core Index + Vector Ops\n\n## Goal\nImplement the initial operations slice:\n- index: create/describe/list/delete\n- vectors: upsert/fetch/delete/query\n\n## Requirements\n- Capability gated.\n- Writes emit receipts/audit.\n- NetworkConstraints enforced.\n\n## Acceptance Criteria\n- Mock-only tests cover CRUD + query.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:28:03.985993328-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:28:03.985993328-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-gif.2","depends_on_id":"flywheel_connectors-gif","type":"parent-child","created_at":"2026-01-15T03:28:03.987085466-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gif.2","depends_on_id":"flywheel_connectors-gif.1","type":"blocks","created_at":"2026-01-15T03:28:20.314595221-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-gif.3","title":"TEST: Pinecone Connector Unit/Integration Tests (mock-only)","description":"# TEST: Pinecone Connector Unit/Integration Tests (mock-only)\n\n## Must cover\n- Manifest determinism + interface_hash.\n- Request/response parsing.\n- Error taxonomy mapping.\n- Redaction.\n\n## Acceptance Criteria\n- Deterministic.\n- Structured JSON logs.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:28:10.12372744-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:28:10.12372744-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-gif.3","depends_on_id":"flywheel_connectors-gif","type":"parent-child","created_at":"2026-01-15T03:28:10.124984287-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gif.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T03:28:20.485236221-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-gif.4","title":"E2E: Pinecone Connector Compliance Run","description":"# E2E: Pinecone Connector Compliance Run\n\n## Goal\nAdd Pinecone scenarios to the shared compliance harness.\n\n## Scenarios\n- Default deny.\n- Allow reads/writes with valid tokens.\n- Network guard allow/deny.\n\n## Acceptance Criteria\n- `cargo test --package fcp-e2e --features pinecone` passes deterministically.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:28:15.57047511-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:28:15.57047511-05:00","labels":["conformance","connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-gif.4","depends_on_id":"flywheel_connectors-gif","type":"parent-child","created_at":"2026-01-15T03:28:15.572108787-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gif.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T03:28:20.644052938-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-gif.5","title":"fcp.pinecone: Provisioning Automation (Endpoint + API Key)","description":"## Goal\nAutomate provisioning and configuration with minimal human steps.\n\nThis bead owns:\n- auth setup (OAuth / API keys / webhook secrets) via `CredentialObject`/`CredentialId` (egress proxy injection preferred)\n- endpoint configuration\n- `fcp doctor` readiness checks\n- deterministic, mockable provisioning flows\n\n## FCP2 requirements\n- Secrets never touch disk.\n- Provisioning is deterministic and testable.\n- Error messages are actionable and do not leak secrets/PII.\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Provisioning emits structured logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:14:43.777832189-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:53.492167079-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-gif.5","depends_on_id":"flywheel_connectors-gif","type":"parent-child","created_at":"2026-01-15T07:14:43.838170606-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gif.5","depends_on_id":"flywheel_connectors-gif.1","type":"blocks","created_at":"2026-01-15T07:14:44.453699744-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-gigy","title":"TEST: Integration Scenarios (Partition Recovery, Node Failure, Concurrent Conflicts)","description":"# TEST: Integration Scenarios (Partition Recovery, Node Failure, Concurrent Conflicts)\n\n## Goal\nDefine explicit integration test scenarios that verify the system behaves correctly under adverse conditions.\n\n## Why This Matters\nUnit tests and E2E \"happy path\" tests are not sufficient. The system must be tested under realistic failure modes.\n\n## Scenario Categories\n\n### Network Partition Recovery\n- [ ] **Partition-Heal**: 3-node mesh, partition node C from A+B for 60s, heal, verify:\n  - All nodes converge on same AuditHead\n  - No duplicate operations executed\n  - Gossip reconciliation completes\n- [ ] **Split-Brain Prevention**: Both partitions attempt quorum ops, only one succeeds\n- [ ] **Stale Node Rejoins**: Node offline for longer than revocation freshness window must catch up before accepting operations\n\n### Node Failure and Recovery\n- [ ] **Graceful Shutdown**: Node announces shutdown, leases transferred, no operation loss\n- [ ] **Crash Recovery**: Node killed mid-operation, restart, verify:\n  - Incomplete OperationIntent is detected\n  - No duplicate side effects\n  - Lease is released after timeout\n- [ ] **Multi-Node Failure**: Lose f nodes (within quorum tolerance), operations continue\n- [ ] **Quorum Loss**: Lose more than f nodes, operations fail closed with clear error\n\n### Concurrent Operation Conflicts\n- [ ] **Lease Contention**: Two nodes attempt same operation lease simultaneously\n  - Only one succeeds\n  - Loser gets FCP-4320 (LeaseConflict)\n  - Winner produces receipt\n- [ ] **State Fork Detection**: Two nodes write connector state without proper lease\n  - Fork is detected\n  - Audit event emitted\n  - Operations paused pending resolution\n- [ ] **Revocation Race**: Token used while revocation propagating\n  - Operation allowed if checkpoint valid at token issuance time\n  - Subsequent operations rejected\n\n### Revocation Propagation\n- [ ] **Issuer Key Revocation**: Revoke issuer key, verify:\n  - Existing tokens from that issuer rejected within freshness window\n  - New tokens cannot be issued\n  - Audit trail shows revocation\n- [ ] **Capability Revocation**: Revoke capability object, verify:\n  - Tokens referencing revoked grant rejected\n  - DecisionReceipt cites revocation as reason\n- [ ] **Node Removal**: Remove node, verify:\n  - Zone keys rotated\n  - Removed node cannot issue tokens\n  - Removed node cannot participate in gossip\n\n### Zone Key Rotation Under Load\n- [ ] **Hot Rotation**: Rotate zone key while operations in flight\n  - In-flight operations complete with old key\n  - New operations use new key\n  - No operation loss\n- [ ] **Multi-Zone Rotation**: Rotate keys in multiple zones simultaneously\n  - Cross-zone operations handle transition correctly\n\n### Symbol Availability and Repair\n- [ ] **Degraded Availability**: Reduce symbol availability below threshold\n  - Operations that need those symbols report partial availability\n  - Repair loop activates and improves coverage\n- [ ] **Single-Source Prevention**: Block symbols from all but one source\n  - Diversity enforcement triggers\n  - Operations wait for diverse sources\n\n## Test Infrastructure Requirements\n- Deterministic clock control\n- Network fault injection (partitions, latency, packet loss)\n- Node lifecycle control (start, stop, crash, restart)\n- Structured log collection across all nodes\n\n## Logging Requirements\nEach scenario produces:\n```json\n{\n  \"scenario\": \"partition-heal\",\n  \"phase\": \"partition | heal | verify\",\n  \"nodes\": [\"A\", \"B\", \"C\"],\n  \"timestamp\": \"...\",\n  \"assertion\": \"audit_heads_equal\",\n  \"result\": \"pass|fail\",\n  \"evidence\": {...}\n}\n```\n\n## Acceptance Criteria\n- All scenarios have automated tests\n- Tests run in CI with reasonable duration (\u003c5min per scenario)\n- Failures produce actionable logs\n\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T02:54:18.438472152-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:54:18.438472152-05:00","labels":["fcp2","integration","mvp","testing"],"dependencies":[{"issue_id":"flywheel_connectors-gigy","depends_on_id":"flywheel_connectors-1n78.21.4","type":"blocks","created_at":"2026-01-15T02:54:47.4422102-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gigy","depends_on_id":"flywheel_connectors-1n78.17","type":"blocks","created_at":"2026-01-15T02:54:47.528037698-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gigy","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:23:55.225691883-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-gqvh","title":"[FCP2] Rate Limiting: ThrottleViolation, Backpressure Signals, Quota Enforcement","description":"# [FCP2] Rate Limiting: ThrottleViolation, Backpressure Signals, Quota Enforcement\n\n## Goal\nImplement rate limiting at multiple layers: per-connector, per-operation, per-zone, and mesh-wide.\n\n## Why This Matters\nWithout rate limiting:\n- A runaway connector can exhaust external API quotas\n- A compromised node can DoS the mesh\n- Resource exhaustion becomes undetectable until failure\n\n## Rate Limit Layers\n\n### Layer 1: Connector Manifest Limits\nDeclared in connector manifest:\n```toml\n[rate_limits]\nrequests_per_minute = 60\nrequests_per_hour = 1000\nconcurrent_operations = 5\n```\n\n### Layer 2: Zone Policy Limits\n```\nZonePolicy.rate_limits {\n  per_connector_rpm: u32,\n  per_zone_rpm: u32,\n  burst_allowance: f32,  // multiplier for burst\n}\n```\n\n### Layer 3: Capability Limits\nCapabilities can include rate constraints:\n```\nCapabilityGrant.constraints.rate_limit {\n  max_per_minute: 10,\n  max_concurrent: 2,\n}\n```\n\n### Layer 4: MeshNode Admission Control\nGlobal limits per peer node (covered in admission control bead).\n\n## ThrottleViolation Object\nWhen rate limit is exceeded:\n```\nThrottleViolation {\n  violation_id: ObjectId,\n  timestamp: u64,\n  zone_id: ZoneId,\n  connector_id: Option\u003cConnectorId\u003e,\n  operation_id: Option\u003cSchemaId\u003e,\n  limit_type: LimitType,  // RPM, Concurrent, Burst, Quota\n  limit_value: u32,\n  current_value: u32,\n  retry_after_ms: u64,\n}\n```\n\nThrottleViolation is:\n- Recorded in audit chain\n- Returned in InvokeResponse error\n- Triggers backpressure signals\n\n## Backpressure Protocol\nWhen approaching limits:\n1. **Warning Zone (80%)**: Emit metric, log warning\n2. **Soft Limit (95%)**: Return `retry_after_ms` in responses\n3. **Hard Limit (100%)**: Reject with FCP-4290 (RateLimited)\n\nFor streaming operations:\n- Flow control via FCPC backpressure frames\n- Connector can request pause/resume\n\n## Token Bucket Implementation\nUse token bucket algorithm with:\n- `capacity`: max burst size\n- `refill_rate`: tokens per second\n- `current_tokens`: available tokens\n\nTokens are consumed per-operation based on:\n- Base cost (1 token)\n- Size cost (for data transfer)\n- Compute cost (for expensive operations)\n\n## Tests\n- Unit tests: token bucket refill and consumption\n- Property tests: rate limit never exceeds declared max\n- Integration tests: concurrent requests properly limited\n- Adversarial tests: burst exhaustion followed by gradual recovery\n- E2E tests: ThrottleViolation appears in audit chain\n\n## Acceptance Criteria\n- Rate limits are enforced at all layers\n- ThrottleViolation objects are recorded for audit\n- Backpressure signals enable graceful degradation\n\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T02:53:39.479087624-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:53:39.479087624-05:00","labels":["fcp2","mvp","rate-limiting","security"],"dependencies":[{"issue_id":"flywheel_connectors-gqvh","depends_on_id":"flywheel_connectors-1n78","type":"blocks","created_at":"2026-01-15T02:54:46.012115869-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gqvh","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T02:54:46.082305805-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gqvh","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T02:54:46.151244455-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gqvh","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T02:54:46.223022713-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gqvh","depends_on_id":"flywheel_connectors-1n78.11","type":"blocks","created_at":"2026-01-15T02:54:46.294812502-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-gr1","title":"fcp.hubspot: Pipeline analytics and reporting","description":"# fcp.hubspot: Pipeline analytics and reporting (FCP2)\n\n## Goal\nExpose HubSpot reporting surfaces needed for:\n- pipeline health dashboards\n- stage conversion analysis\n- activity/velocity metrics\n\nThis is primarily read-only but may include access to sensitive business data.\n\n## Scope\n### Read\n- Retrieve pipeline definitions (stages, probabilities).\n- Fetch metrics:\n  - counts by stage\n  - conversion rates\n  - time-in-stage\n  - win/loss trends\n- Support time window filters and stable pagination.\n\n### Output shaping\n- Prefer aggregate metrics and IDs over raw deal details where possible.\n\n## Capability model (illustrative)\n- `hubspot.analytics.read`\n- `hubspot.pipelines.read`\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- Avoid logging raw deal contents.\n\n## Deliverables\n- Operation schemas:\n  - `hubspot.pipeline.list`\n  - `hubspot.pipeline.metrics`\n  - `hubspot.pipeline.stage_metrics`\n- Consistent metric naming + units.\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - time window handling\n  - pagination\n  - error mapping\n\n## Acceptance criteria\n- Agents can answer “how is the pipeline doing?” without exposing raw CRM PII in logs.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:15:37.366420096-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:31:12.115312175-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-gr1","depends_on_id":"flywheel_connectors-hy8v","type":"parent-child","created_at":"2026-01-15T02:29:26.560062409-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gr1","depends_on_id":"flywheel_connectors-hy8v.1","type":"blocks","created_at":"2026-01-15T04:31:17.053029556-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-gu3","title":"fcp.arxiv: Category and topic classification system","description":"# fcp.arxiv: Category and topic classification system (FCP2)\n\n## Goal\nProvide structured topic/category classification to support:\n- monitors by topic\n- clustering and trend analysis\n- downstream indexing (CASS/CM)\n\n## Scope\n- List arXiv categories and metadata.\n- Extract topics/keywords from:\n  - title + abstract (minimum)\n  - optional full text (when enabled)\n- Provide a deterministic `TopicProfile` object:\n  - categories\n  - keywords\n  - confidence\n\n## Capability model (illustrative)\n- `arxiv.categories.read`\n- `arxiv.topics.extract`\n\n## FCP2 requirements\n- Single-zone binding.\n- If full text is used, it must come from bounded extraction (`flywheel_connectors-ehu`).\n- Deterministic output (no hidden model randomness inside connector unless explicitly configured).\n\n## Deliverables\n- Operation schemas:\n  - `arxiv.categories.list`\n  - `arxiv.paper.topics.extract`\n- Canonical output type:\n  - `TopicProfile`\n\n## Test strategy (MUST)\n- Golden fixtures for topic extraction.\n- Verify deterministic ordering and bounds.\n\n## Acceptance criteria\n- Topic extraction is deterministic, bounded, and useful for monitoring/indexing.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:14:36.225098952-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:49:49.154552927-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-gu3","depends_on_id":"flywheel_connectors-8yxg","type":"parent-child","created_at":"2026-01-15T02:32:23.31502983-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gu3","depends_on_id":"flywheel_connectors-8yxg.1","type":"blocks","created_at":"2026-01-15T04:50:11.718363583-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-gxx2","title":"fcp.kubernetes connector - Container orchestration integration","description":"# fcp.kubernetes Connector\n\n## Overview\nFlywheel Connector Protocol implementation for Kubernetes container orchestration.\nEnables AI agents to safely interact with Kubernetes clusters through zone-based\naccess controls and comprehensive audit trails.\n\n**Value Score**: 82/100 (Tier 3 - Specialized Infrastructure)\n**Interaction patterns:** Request/Response + Streaming (watch/events)\n\n## Manifest archetypes (closed set)\n- `operational`\n- `streaming`\n- `bidirectional` (optional: interactive exec sessions)\n\n\u003e Note: “request/response”, “watch”, and “streaming logs” are interaction patterns, not manifest archetype values.\n\n\n\n## Operations\n\n### Resource CRUD\n- **Pods**: list, get, create, delete, logs, exec\n- **Deployments**: list, get, create, update, delete, scale, rollout\n- **Services**: list, get, create, update, delete\n- **ConfigMaps**: list, get, create, update, delete\n- **Secrets**: list, get, create, update, delete (values redacted in logs)\n- **Namespaces**: list, get (create/delete restricted)\n\n### Streaming Operations\n- **Log streaming**: Real-time pod log tailing with follow mode\n- **Event watching**: Cluster event stream for monitoring\n- **Rollout status**: Live deployment rollout progress\n- **Exec sessions**: Interactive container shell (ApprovalToken-gated in prod)\n\n### Management Operations\n- **Rollout history**: View deployment revision history\n- **Rollout undo**: Revert to previous deployment version\n- **Port forwarding**: Temporary port-forward sessions\n- **Resource describe**: Detailed resource information\n\n## Zone Architecture (CRITICAL for Production Safety)\n\n\u003c!-- fcp2-single-zone-note --\u003e\n**FCP2 single-zone binding note:** A connector instance binds to exactly one `ZoneId` for its entire lifetime.\nThe *\"zones\"* described in this section are a **recommended deployment pattern** (run separate connector instances in separate zones with different capability grants/policies) and/or conceptual risk tiers.\nThe connector MUST NOT multiplex multiple zones internally.\n\n\n```\nz:k8s:dev          - Full CRUD access to dev cluster\n                     All operations permitted\n                     Namespace isolation enforced\n\nz:k8s:staging      - Deploy and update access\n                     DELETE operations blocked\n                     Rollback permitted with audit\n\nz:k8s:prod:readonly - Observe only (default for prod)\n                      GET, LIST, WATCH, LOGS only\n                      No mutations permitted\n\nz:k8s:prod:deploy  - Deploy with ApprovalToken\n                     CREATE, UPDATE require two-person rule\n                     DELETE blocked entirely\n                     Rollback requires approval\n```\n\n### Zone Escalation Flow\n1. Agent requests prod deployment\n2. Request enters approval queue (out-of-band ApprovalToken issuance)\n3. Human reviewer approves/denies\n4. Approval logged with reviewer identity\n5. Operation executes with full audit trail\n\n## Flywheel Synergy\n\n### ApprovalToken Issuance Integration (Out-of-Band)\n- Two-person rule enforcement for z:k8s:prod:deploy\n- Approval queue with timeout (default 15 min)\n- Reviewer must have k8s:prod:approve capability\n- Denial reasons logged for agent learning\n\n### DCG Integration (Danger Command Guard)\n- Block dangerous kubectl equivalents:\n  - `kubectl delete namespace` patterns\n  - `kubectl drain` without proper flags\n  - `kubectl taint` on critical nodes\n  - Raw `kubectl exec` with shell access in prod\n- Pattern detection with bypass for approved operations\n\n### Observability Correlation\n- **Sentry**: Error correlation with deployment events\n- **Datadog**: Metrics tagged with deployment ID\n- **Trace propagation**: OpenTelemetry context in all k8s calls\n\n## Dependencies\n\n```toml\n[dependencies]\nfcp-core = { path = \"../fcp-core\" }\nfcp-streaming = { path = \"../fcp-streaming\" }\nfcp-ratelimit = { path = \"../fcp-ratelimit\" }\nfcp-telemetry = { path = \"../fcp-telemetry\" }\n\n# Kubernetes client\nkube = { version = \"0.88\", features = [\"runtime\", \"derive\"] }\nk8s-openapi = { version = \"0.21\", features = [\"v1_29\"] }\n\n# Async runtime\ntokio = { version = \"1\", features = [\"full\"] }\nfutures = \"0.3\"\n```\n\n## Implementation Notes\n\n### kube-rs Integration\n- Use `kube::Client` with custom config provider\n- Support in-cluster and kubeconfig auth\n- Implement custom tower layers for FCP middleware\n\n### Kubeconfig Handling\n- Multi-cluster support via context switching\n- Credential refresh handling\n- Service account token injection for in-cluster\n\n### Namespace Isolation\n- All operations scoped to allowed namespaces\n- Namespace allowlist per zone\n- Cross-namespace operations require explicit grant\n\n### RBAC Integration\n- Map FCP zones to Kubernetes RBAC roles\n- Service account per zone level\n- Audit log includes effective RBAC context\n\n### Rate Limiting\n- Per-cluster rate limits (avoid API server overload)\n- Backoff on 429 responses\n- Queue depth limits for streaming operations\n\n## API Design\n\n```rust\n// Core traits\npub trait K8sConnector: FcpConnector {\n    async fn pods(\u0026self) -\u003e PodApi;\n    async fn deployments(\u0026self) -\u003e DeploymentApi;\n    async fn services(\u0026self) -\u003e ServiceApi;\n    async fn configmaps(\u0026self) -\u003e ConfigMapApi;\n    async fn secrets(\u0026self) -\u003e SecretApi;\n}\n\n// Zone-aware client\npub struct K8sClient {\n    zone: Zone,\n    cluster: ClusterConfig,\n    namespace: Option\u003cString\u003e,\n}\n\n// Streaming result\npub struct WatchStream\u003cT\u003e {\n    inner: Pin\u003cBox\u003cdyn Stream\u003cItem = WatchEvent\u003cT\u003e\u003e\u003e\u003e,\n    zone: Zone,\n}\n```\n\n## Security Considerations\n\n1. **Secret Redaction**: Secret values never logged, only key names\n2. **Exec Audit**: All exec sessions fully recorded\n3. **Network Policy**: Connector respects NetworkPolicy restrictions\n4. **Pod Security**: Cannot bypass PodSecurityPolicy/Standards\n5. **Resource Quotas**: Operations fail gracefully on quota exceeded\n\n## Testing Strategy\n\n- Unit tests with mock kube client\n- Integration tests against kind cluster\n- Zone escalation tests with mock ApprovalToken issuer\n- Chaos tests for network partition handling\n\n## Success Criteria\n- The epic includes (or references) the standard base beads `.1`..`.4` per `flywheel_connectors-lszk.5`.\n- The connector passes `flywheel_connectors-1n78.21.5` (static + dynamic) and has an E2E compliance run wired through `flywheel_connectors-e3i9`.\n- Unit/integration tests are mock-only (no real external calls) and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-11T21:42:32.498324635-05:00","created_by":"ubuntu","updated_at":"2026-01-15T07:40:35.238957445-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-gxx2","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T22:08:10.651756068-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-gxx2","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T22:08:10.676831995-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-gxx2","depends_on_id":"flywheel_connectors-9co","type":"blocks","created_at":"2026-01-11T22:08:10.914416549-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-gxx2","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:32:29.76288918-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gxx2","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T04:27:12.416732313-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gxx2","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T04:27:12.649003357-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gxx2","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T04:27:12.87401208-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gxx2","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T04:27:13.103222077-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gxx2","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T04:27:13.337736959-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gxx2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T04:27:13.560287951-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-gxx2.1","title":"fcp.kubernetes: Manifest + Capability Map (FCP2)","description":"# fcp.kubernetes: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the Kubernetes connector’s **mechanical manifest contract** under FCP2.\n\nKubernetes is safety-critical; the manifest must make dangerous operations mechanically obvious.\n\n## Required contents\n- Manifest archetypes (closed set):\n  - `operational` (CRUD, deploy, config)\n  - `streaming` (watch/events/log streams)\n- Operation list + schema IDs.\n- Capability families + per-operation required caps.\n- NetworkConstraints:\n  - pin the configured Kubernetes API server host(s)\n  - restrict any exec/log streaming endpoints to that host\n- Sandbox profile:\n  - strict filesystem allowlist\n  - kubeconfig handling policy\n- State model declaration:\n  - watch cursors/resourceVersions (if persisted)\n\n## Acceptance criteria\n- Another engineer can implement `--manifest` from this bead alone.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:26:24.922072834-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:26:24.922072834-05:00","dependencies":[{"issue_id":"flywheel_connectors-gxx2.1","depends_on_id":"flywheel_connectors-gxx2","type":"parent-child","created_at":"2026-01-15T04:26:24.923493921-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gxx2.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T04:26:29.368160276-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gxx2.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T04:26:29.586569235-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-gxx2.2","title":"fcp.kubernetes: Provisioning Automation (kubeconfig, service accounts, RBAC)","description":"# fcp.kubernetes: Provisioning Automation (kubeconfig, service accounts, RBAC)\n\n## Goal\nAutomate Kubernetes connector onboarding with minimal human steps while keeping credentials zone-scoped.\n\n## Requirements\n- Support auth via `CredentialId`:\n  - kubeconfig bytes\n  - or in-cluster service account token\n- Cluster/context selection and validation.\n- RBAC mapping guidance:\n  - map zone policy levels to Kubernetes RBAC roles/service accounts\n- Validate NetworkConstraints pinning to the Kubernetes API host.\n\n## Acceptance criteria\n- `fcp doctor` verifies readiness without leaking secrets.\n- Mockable in CI.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:26:35.805757001-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:53.55378869-05:00","dependencies":[{"issue_id":"flywheel_connectors-gxx2.2","depends_on_id":"flywheel_connectors-gxx2","type":"parent-child","created_at":"2026-01-15T04:26:35.806971239-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gxx2.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T04:26:40.323562522-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-gxx2.3","title":"TEST: Kubernetes Connector Unit/Integration Tests (mock-only)","description":"# TEST: Kubernetes Connector Unit/Integration Tests (mock-only)\n\n## Goal\nMock-only tests for fcp.kubernetes focusing on request construction, capability gating, and streaming behavior.\n\n## Requirements\n- No real cluster required in CI.\n- Mock Kubernetes API endpoints for:\n  - resource CRUD\n  - watch streams (resourceVersion handling)\n  - log streaming (follow)\n  - exec session initiation\n- Tests for:\n  - namespace scoping enforcement\n  - secret redaction in logs\n  - approval gating for dangerous ops (exec in prod, deletes)\n  - backpressure + bounded memory for streaming\n\n## Acceptance criteria\n- Deterministic CI suite.\n- Structured JSON logs with correlation_id + reason codes.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:26:49.828529592-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:26:49.828529592-05:00","dependencies":[{"issue_id":"flywheel_connectors-gxx2.3","depends_on_id":"flywheel_connectors-gxx2","type":"parent-child","created_at":"2026-01-15T04:26:49.829828799-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gxx2.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T04:26:53.68677472-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-gxx2.4","title":"E2E: Kubernetes Connector Compliance Run","description":"# E2E: Kubernetes Connector Compliance Run\n\n## Goal\nRun the shared Mechanical Connector Compliance Runner against fcp.kubernetes.\n\n## Must verify\n- Default deny via CapabilityTokens.\n- NetworkConstraints enforcement (pinned API server host).\n- Receipts/audit for write/dangerous ops.\n- Streaming operations are bounded/backpressured.\n\n## Optional scenario (nice-to-have)\n- Local kind-based smoke scenario to validate watch/log streaming behavior under real API semantics.\n\n## Acceptance criteria\n- Runner output bundle is green for fcp.kubernetes.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:27:00.758892417-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:27:00.758892417-05:00","dependencies":[{"issue_id":"flywheel_connectors-gxx2.4","depends_on_id":"flywheel_connectors-gxx2","type":"parent-child","created_at":"2026-01-15T04:27:00.760142993-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-gxx2.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T04:27:07.111940943-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-h1wi","title":"TEST: Connector Performance Benchmark Suite","description":"# TEST: Connector Performance Benchmark Suite (FCP2)\n\n## Overview\nPerformance benchmarks ensuring the platform meets the README/spec targets.\n\nBenchmarks must be:\n- repeatable\n- machine-readable\n- diagnostic (logs + environment metadata)\n\n## Benchmarks (README-aligned)\n### `fcp bench connector-activate`\n- cold start time (p50/p99)\n- warm start time (optional)\n\n### `fcp bench invoke-local`\n- end-to-end invoke latency when caller/executor are the same node\n\n### `fcp bench invoke-mesh --path=direct|derp`\n- end-to-end invoke latency across the mesh for:\n  - direct/LAN\n  - DERP\n\n### `fcp bench raptorq --size=1mb`\n- encode/decode throughput and wall time\n- memory high-water mark if available\n\n### `fcp bench secrets --k=3 --n=5`\n- secret reconstruction wall time + overhead\n\n### Microbenches (hot primitives)\n- canonical CBOR encode/decode\n- ObjectId derivation\n- CapabilityToken verify\n- FCPS frame parse + session MAC verify\n\n## Output\n- JSON results with:\n  - benchmark name + parameters\n  - p50/p90/p99\n  - environment (os/arch/cpu)\n  - versions + commit hash\n- Regression detection policy:\n  - start with “report-only”\n  - later enforce thresholds once baselines stabilize\n\n## Logging Requirements\nPer `flywheel_connectors-1n78.35`, logs must include:\n- bench name/params\n- sample counts\n- any detected outliers\n\n## Acceptance Criteria\n- Suite produces stable JSON shapes suitable for snapshot testing.\n- Results are reproducible enough to catch real regressions (not noise).\n","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-11T12:13:06.779412276-05:00","created_by":"ubuntu","updated_at":"2026-01-15T06:03:34.899938979-05:00","labels":["fcp2","perf"],"dependencies":[{"issue_id":"flywheel_connectors-h1wi","depends_on_id":"flywheel_connectors-iv7","type":"blocks","created_at":"2026-01-11T12:47:50.114423235-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-h1wi","depends_on_id":"flywheel_connectors-1n78.23","type":"parent-child","created_at":"2026-01-15T01:53:15.515000932-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-h1wi","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T01:53:15.56703694-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-h32","title":"STANDARD: Connector Testing Requirements and Quality Gates","description":"# STANDARD: Connector Testing Requirements and Quality Gates\n\n## Overview\nDefines mandatory testing requirements and quality gates that ALL FCP connectors must pass before release.\n\nThis standard is connector-focused and builds on the platform-wide test/logging standard `flywheel_connectors-1n78.35` (which this bead depends on).\n\n## Connector Plan Template (Beads)\nThis bead defines **test** expectations.\n\nFor connector planning/bead structure (manifest/provisioning/tests/e2e), use:\n- `flywheel_connectors-lszk.5` — STANDARD: Connector Spec Template (FCP2)\n\n## Unit Test Requirements\n\n### Coverage Thresholds\n- Overall: \u003e80% line coverage\n- Critical paths: \u003e95% coverage\n- Security code: \u003e98% coverage\n\n### Required Test Categories\n- [ ] All connector standard methods (`--manifest`, handshake/describe/introspect/capabilities/configure/invoke/health/shutdown)\n- [ ] Configuration validation (valid/invalid)\n- [ ] Handshake success/failure scenarios\n- [ ] Capability token validation\n- [ ] Each operation (success, common errors, edge cases)\n- [ ] Rate limit handling\n- [ ] Timeout behavior\n- [ ] Error recovery\n\n### Mocking Requirements\n- NEVER make real API calls in unit tests\n- Use wiremock or similar for HTTP mocking\n- Mock external service responses\n- Test error injection (network, auth, rate limit)\n\n## Integration Test Requirements\n- [ ] Real handshake flow (with test credentials) OR fully deterministic harness\n- [ ] Basic operation execution\n- [ ] Event subscription lifecycle\n- [ ] Reconnection handling\n\n## E2E Test Requirements (Mechanical Compliance)\nEvery connector MUST pass the platform E2E/compliance harness:\n- [ ] Mechanical compliance runner (static + dynamic)\n- [ ] Zone binding enforcement\n- [ ] Default deny (no cap token → denial + DecisionReceipt)\n- [ ] No secret leakage in logs\n- [ ] Sandbox/network constraints enforced\n\n## Quality Gates (CI/CD)\n1. `cargo check --all-targets` - No errors\n2. `cargo clippy --all-targets -- -D warnings` - No warnings\n3. `cargo fmt --check` - Properly formatted\n4. `cargo test` - All tests pass\n5. `cargo test --release` - Release tests pass\n6. Coverage threshold met\n7. `ubs` scan clean\n8. No security vulnerabilities\n\n## CRITICAL: Detailed Logging Requirements\n\n### All Tests MUST Include Comprehensive Logging\n\n#### Log Levels by Test Phase\n- **Setup**: INFO - test initialization, mock configuration\n- **Execution**: DEBUG - every significant action\n- **Assertions**: INFO - expected vs actual values\n- **Teardown**: DEBUG - cleanup operations\n- **Errors**: ERROR with full context\n\n#### Required Log Fields (Structured JSON)\nEvery log entry MUST include:\n- `timestamp` - ISO 8601 with milliseconds\n- `test_name` - Full test path (module::test_fn)\n- `phase` - setup|execute|assert|teardown\n- `correlation_id` - Unique per test run\n- `duration_ms` - Time since test start\n- `operation` - Current operation being tested\n\nWhen applicable, also include:\n- `connector_id`, `zone_id`, `session_id`\n- `decision`, `reason_code`, and evidence object IDs for denials\n\n#### Operation-Specific Logging\n- **HTTP Requests**: method, url, headers (redacted), body size, status code, latency_ms\n- **WebSocket**: frame type, payload size, direction (send/recv)\n- **Events**: event type, payload hash, subscriber count\n- **Errors**: error code, message, recoverable flag, retry_count\n\n#### Log Format Example\n```json\n{\n  \"timestamp\": \"2026-01-11T12:00:00.123Z\",\n  \"test_name\": \"discord::gateway::test_heartbeat_mechanism\",\n  \"phase\": \"execute\",\n  \"correlation_id\": \"a1b2c3d4\",\n  \"duration_ms\": 45,\n  \"operation\": \"send_heartbeat\",\n  \"level\": \"DEBUG\",\n  \"message\": \"Sending heartbeat frame\",\n  \"details\": {\n    \"sequence\": 42,\n    \"interval_ms\": 41250,\n    \"last_ack_at\": \"2026-01-11T11:59:58.500Z\"\n  }\n}\n```\n\n#### Test Output Capture\n- All tests run with `--nocapture` in CI for full visibility\n- Failed tests include complete log history in reports\n- Logs retained for 30 days for debugging\n- Performance metrics extracted from logs for trending\n\n#### Assertions MUST Log:\n- What is being asserted\n- Expected value\n- Actual value\n- Context (why this assertion matters)\n\n```rust\ntracing::info!(\n    expected = %expected_code,\n    actual = %response.status(),\n    context = \"Gateway should accept valid heartbeat\",\n    \"Asserting heartbeat response status\"\n);\nassert_eq!(response.status(), expected_code);\n```\n\n#### Error Scenario Logging\nWhen testing error conditions:\n- Log the injected error condition\n- Log the expected error handling behavior\n- Log actual error propagation\n- Log recovery actions if applicable\n\n## Documentation Requirements\n- [ ] All public APIs documented\n- [ ] AI hints for each operation\n- [ ] Configuration schema documented\n- [ ] Error codes documented\n\n## Acceptance Criteria\n- CI enforces the quality gates.\n- The E2E compliance harness rejects non-compliant connectors.\n","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-11T10:38:48.045099693-05:00","created_by":"ubuntu","updated_at":"2026-01-15T08:39:36.182841635-05:00","labels":["fcp2","standard","testing"],"dependencies":[{"issue_id":"flywheel_connectors-h32","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T01:53:15.39208704-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-h32","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T01:53:15.462107739-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-h32","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T08:39:20.926352562-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-h35","title":"fcp.arxiv: Paper search with semantic and keyword modes","description":"# fcp.arxiv: Paper search with semantic and keyword modes (FCP2)\n\n## Goal\nProvide high-quality discovery of arXiv papers:\n- keyword/fielded search (official arXiv API)\n- optional semantic search (requires embeddings + indexed corpus)\n\n## Scope\n### Keyword/fielded search\n- Support arXiv query syntax with filters:\n  - categories\n  - author\n  - title/abstract\n  - date range\n- Pagination and sorting.\n\n### Semantic search (optional)\n- If enabled, search a local/indexed corpus (e.g., CASS-backed) using embeddings.\n- Must be bounded and deterministic.\n\n## Capability model (illustrative)\n- `arxiv.search.keyword`\n- `arxiv.search.semantic` (optional)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned to arXiv API host(s).\n- Strict rate limiting to avoid bans.\n\n## Deliverables\n- Operation schemas:\n  - `arxiv.search.keyword`\n  - `arxiv.search.advanced`\n  - Optional: `arxiv.search.semantic`\n- Canonical output types:\n  - `ArxivSearchResult`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - query parsing/validation\n  - pagination\n  - rate limiter behavior\n\n## Acceptance criteria\n- Search results are stable, paginated, and policy-respecting.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:14:32.145747042-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:48:28.051287632-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-h35","depends_on_id":"flywheel_connectors-8yxg","type":"parent-child","created_at":"2026-01-15T02:32:23.392346509-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-h35","depends_on_id":"flywheel_connectors-8yxg.1","type":"blocks","created_at":"2026-01-15T04:48:33.029012054-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-hc2","title":"fcp.cron: Scheduled Task Runner","description":"# Scheduled Task Runner Meta-Connector\n\n**Force Multiplier:** Time-based automation for FCP zones.\n\n## Overview\n\nMany automation workflows require scheduled execution: daily reports, periodic syncs, cleanup jobs, reminder systems. This meta-connector provides a robust scheduling infrastructure that triggers FCP actions on time-based schedules.\n\n## Core Components\n\n### 1. Cron Expression Scheduling\n- Standard cron syntax (5-field and 6-field)\n- Extended syntax with seconds precision\n- Timezone-aware scheduling\n- Named schedules for common patterns\n- Cron expression validation and preview\n\n```\n# Standard patterns\n@hourly    = 0 * * * *\n@daily     = 0 0 * * *\n@weekly    = 0 0 * * 0\n@monthly   = 0 0 1 * *\n\n# Custom patterns\n*/15 * * * *     = Every 15 minutes\n0 9 * * 1-5      = 9 AM on weekdays\n0 0 1,15 * *     = 1st and 15th of month\n```\n\n### 2. One-Time Scheduled Tasks\n- Schedule task for specific datetime\n- Support for relative scheduling (\"in 30 minutes\")\n- Cancellation before execution\n- Rescheduling capability\n- Batch scheduling (multiple one-time tasks)\n\n### 3. Interval-Based Triggers\n- Fixed interval execution (every N minutes/hours/days)\n- Sliding window intervals\n- Jitter support for load distribution\n- Minimum interval enforcement\n- Pause/resume capability\n\n### 4. Task History and Logs\n- Complete execution history\n- Stdout/stderr capture\n- Execution duration tracking\n- Success/failure status\n- Searchable log storage\n- Log retention policies\n\n### 5. Failure Alerting\n- Configurable alert channels (email, Slack, PagerDuty)\n- Alert on:\n  - Task failure\n  - Task timeout\n  - Consecutive failures\n  - Missed schedules\n- Alert suppression/snooze\n- Escalation policies\n\n## Configuration Example\n\n```toml\n[[schedules]]\nname = \"daily-backup\"\ncron = \"0 2 * * *\"\ntimezone = \"America/New_York\"\naction = \"zone.backup.run_backup\"\nparams = { full = true }\ntimeout = \"1h\"\nalert_on_failure = true\n\n[[schedules]]\nname = \"hourly-sync\"\ninterval = \"1h\"\njitter = \"5m\"\naction = \"zone.sync.pull_updates\"\nretry_on_failure = 3\n\n[[one_time]]\nname = \"migration-task\"\nrun_at = \"2024-02-01T03:00:00Z\"\naction = \"zone.db.run_migration\"\nparams = { version = \"v2.0\" }\n```\n\n## Task State Machine\n\n```\nPENDING → RUNNING → COMPLETED\n              ↓\n           FAILED → RETRYING → COMPLETED/FAILED\n              ↓\n         DEAD (max retries exceeded)\n```\n\n## Dashboard Features\n\n- Calendar view of scheduled tasks\n- Next N upcoming executions\n- Recent execution history\n- Live execution monitoring\n- Manual trigger capability\n- Bulk operations (pause all, resume all)\n\n## Success Criteria\n\n- [ ] Sub-second scheduling precision\n- [ ] Support 1000+ concurrent schedules\n- [ ] Missed task detection and alerting\n- [ ] Distributed execution (no single point of failure)\n- [ ] Complete audit trail\n- [ ] Hot-reload of schedule configurations\n\n## Dependencies\n\n- Persistent storage for schedules and history\n- Time synchronization (NTP)\n- Alert channel integrations\n- Zone action invocation system\n\n## Considerations\n\n- Handle daylight saving time transitions\n- Cluster-safe (only one instance executes)\n- Graceful shutdown (complete running tasks)\n- Clock skew tolerance\n- Long-running task support","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:23:20.104073834-05:00","created_by":"ubuntu","updated_at":"2026-01-11T10:53:35.225906099-05:00","closed_at":"2026-01-11T10:53:35.225906099-05:00","close_reason":"Duplicate of flywheel_connectors-hiu (fcp.cron: Scheduled Task Runner Connector)"}
{"id":"flywheel_connectors-heeq","title":"Threshold Secrets (Shamir Secret Sharing)","description":"## Overview\n\nImplement cryptographic threshold secret sharing using Shamir's Secret Sharing Scheme (SSS) over GF(2^8) as mandated by V2 spec §17.3. This is a DISTINCT system from RaptorQ symbol distribution - secrets use real cryptographic secret sharing because RaptorQ symbols can leak structure.\n\n## Background \u0026 Justification\n\n**Why This Matters:**\nThe V2 spec explicitly states: \"Secrets use real cryptographic secret sharing (Shamir), not just RaptorQ symbols. RaptorQ symbols are NOT a secret sharing scheme—a single symbol can leak structure.\"\n\nKey differences from RaptorQ:\n- RaptorQ symbols can leak structure (not semantically secure)\n- Single RaptorQ symbol may reveal partial information\n- Shamir shares reveal NOTHING until k shares collected\n- Wrapped shares ensure a node cannot decrypt other nodes' shares\n\n**Design Philosophy:**\n\"Secrets are never complete anywhere\" - the secret is only reconstructed ephemerally during use and immediately zeroized. No single device ever stores the complete secret.\n\n## Normative Types (V2 Spec §17.3)\n\n### SecretObject\n```rust\npub struct SecretObject {\n    pub header: ObjectHeader,\n    pub secret_id: SecretId,        // Unique identifier\n    pub zone_id: ZoneId,            // Zone binding\n    pub k: u8,                      // Threshold (need k shares)\n    pub n: u8,                      // Total shares distributed\n    pub scheme: SecretSharingScheme,\n    pub wrapped_shares: HashMap\u003cTailscaleNodeId, Vec\u003cu8\u003e\u003e,\n    pub rotation: SecretRotationPolicy,\n}\n```\n\n### SecretSharingScheme\n```rust\npub enum SecretSharingScheme {\n    ShamirGf256,  // Shamir's Secret Sharing over GF(2^8)\n}\n```\n\n### SecretRotationPolicy\n```rust\npub struct SecretRotationPolicy {\n    pub rotate_after_secs: u64,    // Auto-rotate interval\n    pub overlap_secs: u64,         // Both old and new valid\n}\n```\n\n### SecretAccessToken\n```rust\npub struct SecretAccessToken {\n    pub jti: Uuid,                  // Unique token ID\n    pub secret_id: SecretId,        // Which secret\n    pub purpose: String,            // For audit trail\n    pub requested_by: PrincipalId,  // Requester identity\n    pub iat: u64,                   // Issued at\n    pub exp: u64,                   // Expires at (short-lived!)\n    pub signature: Signature,       // Approver signature\n}\n```\n\n## Implementation Requirements\n\n### 1. Shamir Secret Sharing Implementation\n- Implement Shamir SSS over GF(2^8) with constant-time operations\n- Support configurable k-of-n thresholds\n- Each share MUST be wrapped (encrypted) so nodes cannot decrypt other nodes' shares\n- Use per-node Tailscale keys for share wrapping\n\n### 2. SecretObject Management\n- Create/store secrets with proper threshold configuration\n- Distribute wrapped shares to mesh peers\n- Track share locations for reconstruction\n- Implement zone-scoped access control\n\n### 3. Secret Reconstruction (Ephemeral)\n```rust\nimpl SecretObject {\n    pub async fn use_secret\u003cF, R\u003e(\u0026self, access_token: \u0026SecretAccessToken, f: F) -\u003e Result\u003cR\u003e\n    where F: FnOnce(\u0026[u8]) -\u003e R\n    {\n        // 1. Verify access token\n        access_token.verify()?;\n        \n        // 2. Create audit event BEFORE reconstruction\n        self.audit_secret_access(access_token).await?;\n        \n        // 3. Collect k wrapped shares from peers\n        let shares = self.collect_k_wrapped_shares(access_token).await?;\n        \n        // 4. Reconstruct using Shamir\n        let secret = reconstruct_shamir_secure(\u0026shares)?;\n        \n        // 5. Execute closure with ephemeral secret\n        let result = f(\u0026secret);\n        \n        // 6. Zeroize IMMEDIATELY after use\n        secure_zero(secret);\n        \n        Ok(result)\n    }\n}\n```\n\n### 4. SecretAccessToken Workflow\n- Token issuance requires owner or delegated approver signature\n- Tokens MUST be short-lived (minutes, not hours)\n- Purpose field required for audit trail\n- Verify before any secret operation\n\n### 5. Secret Rotation\n- Implement automatic rotation based on SecretRotationPolicy\n- Support overlap period where both old and new secrets valid\n- Coordinate rotation across mesh peers\n- Maintain audit trail of rotation events\n\n### 6. Integration with Credentials\nThe CredentialObject (§10.4) references secrets via SecretId:\n- CredentialObject.secret_ref: Option\u003cSecretId\u003e\n- Secret materialization requires SecretAccessToken\n- Audit every secret access for credential injection\n\n## Security Considerations\n\n1. **Constant-time operations**: All Shamir math MUST be constant-time to prevent timing attacks\n2. **Zeroization**: Use zeroize crate; secrets never persist in memory longer than closure execution\n3. **Share isolation**: Wrapped shares use per-node keys; compromise of one node doesn't leak other shares\n4. **Audit trail**: Every secret access creates AuditEvent BEFORE reconstruction\n5. **Token validation**: SecretAccessToken signature and expiry verified before any operation\n\n## Acceptance Criteria\n\n- [ ] Shamir GF(2^8) implementation with constant-time polynomial evaluation\n- [ ] SecretObject with k-of-n threshold configuration\n- [ ] Per-node share wrapping using Tailscale node keys\n- [ ] SecretAccessToken creation and validation\n- [ ] Ephemeral reconstruction with immediate zeroization\n- [ ] SecretRotationPolicy with overlap period support\n- [ ] Integration with CredentialObject for secret-backed credentials\n- [ ] Comprehensive audit events for all secret operations\n- [ ] Unit tests for Shamir math, threshold edge cases, rotation\n- [ ] Integration tests for multi-node secret reconstruction\n\n## Dependencies\n\nThis feature depends on:\n- Core Types (ObjectHeader, ZoneId, etc.)\n- Zone Architecture (zone-scoped access)\n- Capability System (for SecretAccessToken authorization)\n- MeshNode (for peer share collection)\n- Observability (for audit events)","status":"closed","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:41:27.758361051-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:47:20.445243106-05:00","closed_at":"2026-01-15T04:47:20.445243106-05:00","close_reason":"Duplicate of 6o25.1 (enhanced with detailed V2 spec content)","dependencies":[{"issue_id":"flywheel_connectors-heeq","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T04:41:52.710979314-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-heeq","depends_on_id":"flywheel_connectors-1n78.17","type":"blocks","created_at":"2026-01-15T04:42:48.351360458-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-heeq","depends_on_id":"flywheel_connectors-1n78.28","type":"blocks","created_at":"2026-01-15T04:42:49.218849666-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-hiu","title":"fcp.cron: Scheduled Task Runner Connector","description":"Time-based automation connector. Cron expression scheduling, one-time scheduled tasks, interval-based triggers, task history and logs, failure alerting. Enables agents to schedule recurring tasks like daily email summaries, weekly reports, nightly security scans.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:27:30.639093697-05:00","created_by":"ubuntu","updated_at":"2026-01-11T12:08:27.235633713-05:00","closed_at":"2026-01-11T12:08:27.235633713-05:00","close_reason":"DUPLICATE: fcp.cron already completed and closed as flywheel_connectors-hc2."}
{"id":"flywheel_connectors-hwo","title":"fcp.linear - Linear Issue Tracking Connector","description":"# fcp.linear - Linear Issue Tracking Connector (FCP2)\n\n## Goal\nProvide an FCP2-compliant Linear connector for issue/project automation and (optionally) bidirectional sync with Flywheel Beads.\n\n## Manifest archetypes (closed set)\n- `operational` (GraphQL CRUD)\n- `streaming` (webhook/event ingestion if enabled)\n- `bidirectional` (if we implement Beads↔Linear sync)\n\n## Zone model\n- Single-zone bound: one connector instance ↔ one `ZoneId`.\n- Recommended: `z:work:linear:\u003cworkspace\u003e` or `z:project:\u003cname\u003e:linear`.\n\n## External surface\n### NetworkConstraints\nDefault-deny; allow only the configured Linear API host(s).\n\n### Credential injection\n- API key or OAuth token via `CredentialId`.\n\n## Capability model (illustrative)\n- `linear.issues.read` / `linear.issues.write`\n- `linear.comments.write`\n- `linear.projects.read` / `linear.projects.write`\n- `linear.webhooks.manage` (Dangerous)\n\n## Operations (representative)\n- issues: create/update/get/list/search/move/assign/relations\n- comments: create/update/delete/list\n- projects/cycles/teams/users: list/get where applicable\n\n## Optional: Beads ↔ Linear sync\nIf enabled, treat sync as a high-risk side effect:\n- requires explicit capability\n- uses OperationIntent/Receipt to avoid duplicate writes\n- emits AuditEvents and stable reason codes on denials\n\n## Tests\n- Mock-only unit tests with wiremock.\n- Deterministic webhook event simulation (if streaming enabled).\n- E2E compliance run validates default deny + NetworkConstraints + receipts for writes.\n\n## Acceptance Criteria\n- Passes connector compliance runner.\n- Deterministic tests; no live Linear calls in unit tests.\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-11T10:11:43.988027398-05:00","created_by":"ubuntu","updated_at":"2026-01-15T08:37:53.61593941-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-hwo","depends_on_id":"flywheel_connectors-k4ka","type":"blocks","created_at":"2026-01-11T12:11:58.261695-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-hwo","depends_on_id":"flywheel_connectors-lj2","type":"blocks","created_at":"2026-01-11T12:38:15.881942536-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-hwo","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T12:38:15.917718406-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-hwo","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T12:38:15.955590034-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-hwo","depends_on_id":"flywheel_connectors-vi7","type":"blocks","created_at":"2026-01-11T12:38:15.988100431-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-hwo","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T01:23:43.589254136-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-hwo","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:33:38.772083691-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-hwo","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:33:38.885115575-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-hwo","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T03:33:39.002398276-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-hwo","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:33:39.11904007-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-hwo","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T03:33:39.244084602-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-hwo","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T03:33:39.356149745-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-hwo","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T03:33:39.480992617-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-hwo.1","title":"fcp.linear: Manifest + Capability Map (FCP2)","description":"# fcp.linear: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the Linear connector manifest contract:\n- archetypes (`operational`, optional `streaming`, optional `bidirectional`)\n- operations + schema IDs\n- capability families + per-operation caps\n- NetworkConstraints allowlist\n\n## Acceptance Criteria\n- Complete manifest spec stored here.\n- Good/bad manifest examples exist for static compliance.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:33:47.586179848-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:33:47.586179848-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-hwo.1","depends_on_id":"flywheel_connectors-hwo","type":"parent-child","created_at":"2026-01-15T03:33:47.587388424-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-hwo.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:34:28.767906744-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-hwo.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:34:28.882806766-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-hwo.2","title":"fcp.linear: Provisioning Automation (API key/OAuth)","description":"# fcp.linear: Provisioning Automation (API key/OAuth)\n\n## Goal\nAutomate Linear auth onboarding:\n- API key or OAuth token via `CredentialId`\n- validate permissions\n- validate NetworkConstraints\n\n## Acceptance Criteria\n- `fcp doctor` can validate readiness.\n- Mockable for unit tests.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:33:52.32122228-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:53.677201634-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-hwo.2","depends_on_id":"flywheel_connectors-hwo","type":"parent-child","created_at":"2026-01-15T03:33:52.322404207-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-hwo.3","title":"fcp.linear: Core Issue/Comment Operations","description":"# fcp.linear: Core Issue/Comment Operations\n\n## Goal\nImplement core issue/comment operations:\n- issues: create/update/get/list/search\n- comments: create/update/delete/list\n\n## Requirements\n- Capability gated.\n- Writes emit receipts/audit.\n- Error taxonomy mapping.\n\n## Acceptance Criteria\n- Mock-only tests cover success + 401/403/429.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:33:58.514031319-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:33:58.514031319-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-hwo.3","depends_on_id":"flywheel_connectors-hwo","type":"parent-child","created_at":"2026-01-15T03:33:58.515209729-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-hwo.3","depends_on_id":"flywheel_connectors-hwo.1","type":"blocks","created_at":"2026-01-15T03:34:29.010046314-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-hwo.4","title":"fcp.linear: Webhook Event Ingestion (optional)","description":"# fcp.linear: Webhook Event Ingestion (optional)\n\n## Goal\nIf enabled, ingest Linear webhooks as an FCP2 streaming source.\n\n## Requirements\n- Connector does not expose inbound ports.\n- `fcp-host` owns ingress and forwards verified payloads over FCPC.\n- Events emitted as EventEnvelopes with correct topics/taints.\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:34:04.318014648-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:28:14.749168747-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-hwo.4","depends_on_id":"flywheel_connectors-hwo","type":"parent-child","created_at":"2026-01-15T03:34:04.319327191-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-hwo.5","title":"fcp.linear: Beads ↔ Linear Sync (optional, high-risk)","description":"# fcp.linear: Beads ↔ Linear Sync (optional, high-risk)\n\n## Goal\nImplement bidirectional sync between Flywheel Beads and Linear issues.\n\n## Requirements\n- Explicit capability gating; default deny.\n- OperationIntent/Receipt to avoid duplicate writes.\n- Conflict resolution rules must be explicit and auditable.\n\n## Acceptance Criteria\n- Deterministic test scenarios for conflict resolution.\n","status":"open","priority":2,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:34:10.092823791-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:34:10.092823791-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-hwo.5","depends_on_id":"flywheel_connectors-hwo","type":"parent-child","created_at":"2026-01-15T03:34:10.094164576-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-hwo.6","title":"TEST: Linear Connector Unit/Integration Tests (mock-only)","description":"# TEST: Linear Connector Unit/Integration Tests (mock-only)\n\n## Must cover\n- Manifest determinism + interface_hash.\n- GraphQL request/response parsing.\n- Error taxonomy mapping.\n- Redaction.\n\n## Acceptance Criteria\n- Deterministic.\n- Structured JSON logs.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:34:17.502747148-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:34:17.502747148-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-hwo.6","depends_on_id":"flywheel_connectors-hwo","type":"parent-child","created_at":"2026-01-15T03:34:17.503955885-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-hwo.6","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T03:34:29.223392344-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-hwo.7","title":"E2E: Linear Connector Compliance Run","description":"# E2E: Linear Connector Compliance Run\n\n## Goal\nAdd Linear scenarios to the shared compliance harness.\n\n## Scenarios\n- Default deny.\n- Allow with valid token.\n- Network guard allow/deny.\n- Dangerous action gating (project/issue writes).\n\n## Acceptance Criteria\n- `cargo test --package fcp-e2e --features linear` passes deterministically.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:34:22.234182486-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:34:22.234182486-05:00","labels":["conformance","connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-hwo.7","depends_on_id":"flywheel_connectors-hwo","type":"parent-child","created_at":"2026-01-15T03:34:22.23546443-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-hwo.7","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T03:34:29.413907417-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-hy8v","title":"fcp.hubspot: HubSpot CRM \u0026 Marketing Platform Connector","description":"# fcp.hubspot - HubSpot CRM \u0026 Marketing Platform Connector\n\n## Overview\nFull HubSpot CRM and Marketing Hub connector for inbound marketing, sales automation, and customer relationship management.\n\n## Manifest archetypes (closed set)\n- `operational`\n- `streaming`\n\n\u003e Interaction patterns (non-archetype): Request/Response + Webhook + Polling\n\n## Key Operations\n\n### CRM Objects (CRUD)\n- `hubspot.contact.create/get/update/delete/list/search` - Contact management\n- `hubspot.company.create/get/update/delete/list/search` - Company management\n- `hubspot.deal.create/get/update/delete/list/search` - Deal pipeline management\n- `hubspot.ticket.create/get/update/delete/list/search` - Service tickets\n- `hubspot.custom_object.*` - Custom object operations\n- `hubspot.association.*` - Object associations\n\n### Marketing Hub\n- `hubspot.email.send` - Send transactional/marketing emails\n- `hubspot.email.template.list/get` - Email templates\n- `hubspot.form.list/get/submissions` - Form management\n- `hubspot.campaign.list/get/analytics` - Campaign tracking\n- `hubspot.list.create/get/update/contacts` - Marketing lists\n\n### Sales Hub\n- `hubspot.pipeline.list/get` - Pipeline configuration\n- `hubspot.deal_stage.list` - Deal stages\n- `hubspot.sequence.enroll/unenroll` - Sales sequences\n- `hubspot.task.create/get/update/complete` - Task management\n- `hubspot.meeting.schedule/get/list` - Meeting scheduling\n- `hubspot.quote.create/get/send` - Quote generation\n\n### Activity \u0026 Timeline\n- `hubspot.engagement.create/get/list` - Engagements (calls, emails, meetings, notes)\n- `hubspot.timeline.create_event` - Custom timeline events\n- `hubspot.activity.log` - Activity logging\n\n### Reporting \u0026 Analytics\n- `hubspot.report.list/get/run` - Saved reports\n- `hubspot.dashboard.list/get` - Dashboard data\n- `hubspot.analytics.sources` - Traffic sources\n- `hubspot.analytics.funnel` - Funnel metrics\n\n### Workflows \u0026 Automation\n- `hubspot.workflow.list/get/enroll` - Workflow automation\n- `hubspot.workflow.trigger` - Trigger workflows\n\n### Email Tracking\n- `hubspot.email.tracking.opens` - Email open tracking\n- `hubspot.email.tracking.clicks` - Link click tracking\n- `hubspot.email.tracking.bounces` - Bounce handling\n\n## Authentication\n- OAuth 2.0 (preferred)\n- Private App Access Token\n\n## Rate Limiting\n- 100 requests per 10 seconds (private apps)\n- Burst: 150 requests\n- Daily limits vary by tier\n\n## Zone Architecture\n\n\u003c!-- fcp2-single-zone-note --\u003e\n**FCP2 single-zone binding note:** A connector instance binds to exactly one `ZoneId` for its entire lifetime.\nThe *\"zones\"* described in this section are a **recommended deployment pattern** (run separate connector instances in separate zones with different capability grants/policies) and/or conceptual risk tiers.\nThe connector MUST NOT multiplex multiple zones internally.\n\n```\nZone 0 (Public):     Public forms, landing pages\nZone 1 (Authorized): Contact/deal data (scoped to user)\nZone 2 (Private):    Full CRM access, email content\nZone 3 (Sensitive):  API keys, OAuth tokens\n```\n\n## Dependencies\n- fcp-core, fcp-oauth, fcp-ratelimit, fcp-testkit, fcp-telemetry, fcp-webhook\n\n## Sub-Features (consolidated)\nThis connector encompasses: CRM CRUD, Marketing automation, Sales sequences, Activity logging, Reporting/dashboards, Meeting scheduling, Email tracking\n\n## Success Criteria\n- The epic includes (or references) the standard base beads `.1`..`.4` per `flywheel_connectors-lszk.5`.\n- The connector passes `flywheel_connectors-1n78.21.5` (static + dynamic) and has an E2E compliance run wired through `flywheel_connectors-e3i9`.\n- Unit/integration tests are mock-only (no real external calls) and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-11T12:31:07.859678341-05:00","created_by":"ubuntu","updated_at":"2026-01-15T07:39:54.857197756-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-hy8v","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:29:14.805023619-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-hy8v","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T04:21:06.564604539-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-hy8v","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T04:21:06.756025081-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-hy8v","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T04:21:06.940859697-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-hy8v","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T04:21:07.132719726-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-hy8v","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T04:21:07.328710597-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-hy8v","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T04:21:07.510302224-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-hy8v.1","title":"fcp.hubspot: Manifest + Capability Map (FCP2)","description":"# fcp.hubspot: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the HubSpot connector’s **mechanical manifest contract** under FCP2.\n\n## Required contents\n- Manifest archetypes (closed set):\n  - `operational` (CRM CRUD, workflows)\n  - `streaming` (webhooks/events)\n  - `knowledge` (analytics/reporting reads)\n- Operation list + schema IDs.\n- Capability families + per-operation required caps.\n- NetworkConstraints:\n  - pin HubSpot API host(s)\n  - explicitly enumerate/pin any file/attachment download hosts if applicable\n- State model declaration:\n  - webhook cursor/idempotency\n  - optional pagination cursors for incremental sync\n\n## Output artifacts\n- Full manifest spec stored here.\n- Good/bad examples for static compliance.\n\n## Acceptance criteria\n- Another engineer can implement `--manifest` from this bead alone.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:20:28.966239781-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:20:28.966239781-05:00","dependencies":[{"issue_id":"flywheel_connectors-hy8v.1","depends_on_id":"flywheel_connectors-hy8v","type":"parent-child","created_at":"2026-01-15T04:20:28.967818484-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-hy8v.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T04:20:32.816164941-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-hy8v.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T04:20:33.033857011-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-hy8v.2","title":"fcp.hubspot: Provisioning Automation (OAuth / private app token / webhooks)","description":"# fcp.hubspot: Provisioning Automation (OAuth / private app token / webhooks)\n\n## Goal\nAutomate HubSpot onboarding with minimal human steps while keeping secrets zone-scoped.\n\n## Requirements\n- Support auth via `CredentialId`:\n  - OAuth2 (preferred)\n  - Private App Access Token (policy-gated)\n- Webhook setup automation:\n  - register webhook subscriptions for CRM object changes\n  - validate webhook secret/signature configuration\n- Safe credential validation via read-only calls.\n- Validate NetworkConstraints pinning.\n\n## Acceptance criteria\n- `fcp doctor` verifies readiness without leaking secrets.\n- Fully mockable for unit tests.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:20:39.662372532-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:53.738524663-05:00","dependencies":[{"issue_id":"flywheel_connectors-hy8v.2","depends_on_id":"flywheel_connectors-hy8v","type":"parent-child","created_at":"2026-01-15T04:20:39.663823395-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-hy8v.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T04:20:42.681520325-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-hy8v.3","title":"TEST: HubSpot Connector Unit/Integration Tests (mock-only)","description":"# TEST: HubSpot Connector Unit/Integration Tests (mock-only)\n\n## Goal\nMock-only tests for HubSpot connector (CRM CRUD, analytics reads, and webhook ingestion).\n\n## Requirements\n- No real HubSpot calls in CI.\n- Mock endpoints for:\n  - contacts/companies/deals CRUD\n  - pipeline analytics reporting\n  - webhook ingestion\n- Tests for:\n  - pagination + search correctness\n  - rate limiting + retry/backoff\n  - capability gating for write operations\n  - taint handling for webhook inputs\n\n## Acceptance criteria\n- Deterministic CI suite.\n- Structured JSON logs with correlation_id + reason codes.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:20:48.988633757-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:20:48.988633757-05:00","dependencies":[{"issue_id":"flywheel_connectors-hy8v.3","depends_on_id":"flywheel_connectors-hy8v","type":"parent-child","created_at":"2026-01-15T04:20:48.990221928-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-hy8v.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T04:20:53.343103064-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-hy8v.4","title":"E2E: HubSpot Connector Compliance Run","description":"# E2E: HubSpot Connector Compliance Run\n\n## Goal\nRun the shared Mechanical Connector Compliance Runner against fcp.hubspot.\n\n## Must verify\n- Default deny via CapabilityTokens.\n- NetworkConstraints enforcement.\n- Receipts/audit for write operations.\n- Webhook ingestion is taint-aware.\n\n## Acceptance criteria\n- Runner output bundle is green for fcp.hubspot.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:20:58.051576374-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:20:58.051576374-05:00","dependencies":[{"issue_id":"flywheel_connectors-hy8v.4","depends_on_id":"flywheel_connectors-hy8v","type":"parent-child","created_at":"2026-01-15T04:20:58.052813304-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-hy8v.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T04:21:01.185730786-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-i00","title":"fcp.docusign: Template Management","description":"# fcp.docusign: Template Management (FCP2)\n\n## Goal\nSupport DocuSign templates to enable repeatable envelope creation:\n- list templates\n- fetch template details\n- create envelopes from templates\n- optionally manage templates (admin; dangerous)\n\n## Scope\n### Read\n- List templates.\n- Get template definition, including recipient roles and tab placeholders.\n\n### Write\n- Create envelope from template (dangerous-ish).\n- Optional: create/update/delete templates (dangerous; admin).\n\n## Capability model (illustrative)\n- `docusign.templates.read`\n- `docusign.templates.use` (create from template)\n- Optional: `docusign.templates.write` (dangerous)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- For any write:\n  - receipts + audit events\n  - approval gating recommended for admin template changes\n\n## Deliverables\n- Operation schemas:\n  - `docusign.template.list`\n  - `docusign.template.get`\n  - `docusign.envelope.create_from_template`\n  - Optional: `docusign.template.create/update/delete`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - list/get\n  - create-from-template flow\n  - capability gating\n\n## Acceptance criteria\n- Template-based envelope creation is deterministic and safe.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:21:34.669513117-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:38:28.211556821-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-i00","depends_on_id":"flywheel_connectors-bijm","type":"parent-child","created_at":"2026-01-15T02:34:17.46983675-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i00","depends_on_id":"flywheel_connectors-bijm.1","type":"blocks","created_at":"2026-01-15T04:38:34.439503211-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-i1b","title":"fcp.slack: Slack Workspace Integration Connector","description":"# fcp.slack - Slack Workspace Integration Connector (FCP2)\n\n## Goal\nProvide an FCP2-compliant Slack connector for team messaging + workflow automation with strict zone isolation, sandboxing, and mechanical authorization.\n\n## Manifest archetypes (closed set)\n- `bidirectional` (send + receive)\n- `streaming` (real-time events)\n- `operational` (Web API actions)\n\n## Threat model\nSlack contains:\n- adversarial prompt surfaces (messages)\n- sensitive enterprise data (DMs, private channels, files)\n\nHard requirements:\n- inbound content is tainted as external input by default\n- no token/PII leakage in logs\n- default deny for all actions\n\n## Zone model (mechanical)\n- Single-zone bound: one connector instance ↔ one `ZoneId`.\n- Recommended: one instance per Slack workspace per zone (policy-defined).\n\n## External surface\n### NetworkConstraints\nDefault-deny; allow only Slack endpoints required by the selected runtime mode:\n- Web API (HTTPS)\n- Socket Mode (WSS) for events (preferred over inbound webhooks)\n- Slack file endpoints for upload/download (if enabled)\n\n### Credential injection\nAll secrets via `CredentialObject`/`CredentialId` (egress proxy injection preferred):\n- bot token\n- app-level token (Socket Mode)\n- signing secret (only if Events API webhooks are supported)\n\n## Capability model (illustrative)\nCapability IDs MUST NOT encode hosts/ports.\n\nCapability families (finalize names + risk tiers in manifest bead):\n- `slack.messages.read`\n- `slack.messages.send`\n- `slack.channels.read`\n- `slack.channels.write` (Dangerous in many orgs)\n- `slack.users.read` (PII)\n- `slack.files.read` / `slack.files.write`\n- `slack.search.read` (sensitive)\n- `slack.interactive.manage` (modals/actions; can cause side effects)\n\n## Operations (representative; keep expanding by phase)\n- message: post/update/delete/react/unreact/reply/schedule\n- channels: list/info/create/archive/rename/topic/purpose/members\n- users: info/list/profile\n- files: upload/list/info/delete/share\n- interactive: modals/shortcuts/actions\n- search: messages/files\n\n## Events (streaming)\nSupport real-time events via Socket Mode where possible:\n- message events\n- reactions\n- member join/leave\n- interactive payloads\n\n## State model\n- Stateless for pure Web API calls.\n- Singleton-writer lease for any long-lived Socket Mode connection.\n\n## Rate limiting\n- Obey Slack Retry-After and tiered limits mechanically.\n\n## Tests\n- Mock-only unit tests with wiremock + mock WebSocket server.\n- E2E compliance run validates default deny + NetworkConstraints + event streaming behavior.\n\n## Acceptance Criteria\n- Passes connector compliance runner.\n- Deterministic tests; no live Slack calls in unit tests.\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-11T10:54:03.183126745-05:00","created_by":"ubuntu","updated_at":"2026-01-15T08:37:53.800579001-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-i1b","depends_on_id":"flywheel_connectors-lj2","type":"blocks","created_at":"2026-01-11T10:54:11.520862429-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-i1b","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T10:54:11.549966682-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-i1b","depends_on_id":"flywheel_connectors-9co","type":"blocks","created_at":"2026-01-11T10:54:11.576092449-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-i1b","depends_on_id":"flywheel_connectors-iv7","type":"blocks","created_at":"2026-01-11T10:54:11.603655041-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-i1b","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T10:54:11.633023481-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-i1b","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T01:23:43.995591737-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i1b","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:30:11.614108495-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i1b","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:30:11.713977268-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i1b","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T03:30:11.819631258-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i1b","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:30:11.924071091-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i1b","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T03:30:12.036259969-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i1b","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T03:30:12.134729396-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i1b","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T03:30:12.249061903-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-i1b.1","title":"fcp.slack: Manifest + Capability Map (FCP2)","description":"# fcp.slack: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the Slack connector manifest contract:\n- archetypes (`bidirectional`, `streaming`, `operational`)\n- operations + schema IDs\n- capability families + per-operation caps\n- NetworkConstraints allowlist for Slack Web API + Socket Mode\n\n## Acceptance Criteria\n- Complete manifest spec stored here.\n- Good/bad manifest examples exist for static compliance.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:30:19.751406073-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:30:19.751406073-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-i1b.1","depends_on_id":"flywheel_connectors-i1b","type":"parent-child","created_at":"2026-01-15T03:30:19.752689981-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i1b.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:31:01.790022251-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i1b.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:31:01.898010437-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-i1b.2","title":"fcp.slack: Provisioning Automation (OAuth + Socket Mode)","description":"# fcp.slack: Provisioning Automation (OAuth + Socket Mode)\n\n## Goal\nAutomate Slack app onboarding:\n- obtain/store bot token (OAuth2)\n- obtain/store app-level token for Socket Mode (if used)\n- validate required scopes\n- validate NetworkConstraints\n\n## Acceptance Criteria\n- `fcp doctor` can validate readiness (tokens present, scopes ok, network ok).\n- Fully mockable.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:30:24.889261313-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:30:24.889261313-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-i1b.2","depends_on_id":"flywheel_connectors-i1b","type":"parent-child","created_at":"2026-01-15T03:30:24.903095241-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-i1b.3","title":"fcp.slack: Web API Operations (messages/channels/users)","description":"# fcp.slack: Web API Operations (messages/channels/users)\n\n## Goal\nImplement the core Slack Web API surface:\n- messages: post/update/delete/react/unreact/reply/schedule\n- channels: list/info/create/archive/rename/topic/purpose/members\n- users: info/list/profile\n\n## Requirements\n- Capability gated.\n- Rate limits obeyed (Retry-After).\n- Side effects emit receipts/audit.\n\n## Acceptance Criteria\n- Mock-only integration tests cover success + 401/403/429.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:30:31.06526513-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:30:31.06526513-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-i1b.3","depends_on_id":"flywheel_connectors-i1b","type":"parent-child","created_at":"2026-01-15T03:30:31.066724028-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i1b.3","depends_on_id":"flywheel_connectors-i1b.1","type":"blocks","created_at":"2026-01-15T03:31:02.014120652-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-i1b.4","title":"fcp.slack: Socket Mode Streaming (events → EventEnvelope)","description":"# fcp.slack: Socket Mode Streaming (events → EventEnvelope)\n\n## Goal\nImplement real-time event ingestion via Slack Socket Mode:\n- maintain a single long-lived WebSocket connection\n- emit EventEnvelopes with correct topics, taints, cursors\n\n## Requirements\n- Singleton-writer lease for the connection.\n- Strict parsing; never panic.\n- Backpressure and bounded buffers.\n\n## Acceptance Criteria\n- Deterministic integration tests with a mock Socket Mode server.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:30:38.579673605-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:30:38.579673605-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-i1b.4","depends_on_id":"flywheel_connectors-i1b","type":"parent-child","created_at":"2026-01-15T03:30:38.58080214-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i1b.4","depends_on_id":"flywheel_connectors-i1b.1","type":"blocks","created_at":"2026-01-15T03:31:02.220239147-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i1b.4","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T03:31:02.421019877-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-i1b.5","title":"fcp.slack: Files (upload/download)","description":"# fcp.slack: Files (upload/download)\n\n## Goal\nSupport file upload and download under strict policy.\n\n## Requirements\n- Inputs/outputs are ObjectId references; never write to local disk.\n- Capability gated (`slack.files.read` / `slack.files.write`).\n- Strong redaction.\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:30:43.804651199-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:28:15.057806328-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-i1b.5","depends_on_id":"flywheel_connectors-i1b","type":"parent-child","created_at":"2026-01-15T03:30:43.80582498-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-i1b.6","title":"TEST: Slack Connector Unit/Integration Tests (mock-only)","description":"# TEST: Slack Connector Unit/Integration Tests (mock-only)\n\n## Must cover\n- Manifest determinism + interface_hash.\n- Web API request/response parsing.\n- Socket Mode streaming parsing.\n- Rate limit behavior.\n- Redaction (no tokens, no raw messages by default).\n\n## Acceptance Criteria\n- Deterministic.\n- Structured JSON logs.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:30:50.655178216-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:30:50.655178216-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-i1b.6","depends_on_id":"flywheel_connectors-i1b","type":"parent-child","created_at":"2026-01-15T03:30:50.656798138-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i1b.6","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T03:31:02.521144482-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-i1b.7","title":"E2E: Slack Connector Compliance Run","description":"# E2E: Slack Connector Compliance Run\n\n## Goal\nAdd Slack scenarios to the shared compliance harness.\n\n## Scenarios\n- Default deny.\n- Allow with valid token.\n- Network guard allow/deny.\n- Socket Mode streaming + cursor behavior.\n\n## Acceptance Criteria\n- `cargo test --package fcp-e2e --features slack` passes deterministically.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:30:55.597736957-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:30:55.597736957-05:00","labels":["conformance","connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-i1b.7","depends_on_id":"flywheel_connectors-i1b","type":"parent-child","created_at":"2026-01-15T03:30:55.598990969-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i1b.7","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T03:31:02.691936085-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-i32c","title":"fcp.mailchimp: Email Marketing Platform Connector","description":"## Summary\nImplement FCP connector for Mailchimp Marketing API - an email marketing automation platform. This connector enables audience/list management, campaign creation, template management, automation workflows, and analytics reporting.\n\n## Value Assessment\n- **Value Score**: 59/100 (Tier 4)\n- **Archetype**: Request-Response + Webhook\n- **Priority**: P3\n\n## API Integration\n- **Primary API**: Mailchimp Marketing API v3\n- **Base URL**: https://{dc}.api.mailchimp.com/3.0/\n- **Authentication**: OAuth 2.0 (API key also supported)\n- **Rate Limits**: 10 concurrent connections, varies by plan\n\n## Operations\n\n### Audience Management\n- List/create/update/delete audiences (lists)\n- Manage audience members (subscribers)\n- Batch subscribe/unsubscribe operations\n- Member activity and history\n- Interest categories and interests\n- Merge fields management\n\n### Campaign Management\n- Create/send/schedule campaigns\n- Campaign content editing\n- A/B testing campaigns\n- Campaign reports and analytics\n- Replicate campaigns\n- Pause/resume sending\n\n### Templates\n- List/create/update templates\n- Template folders\n- Default content blocks\n\n### Automations\n- List automation workflows\n- Start/pause automations\n- Automation emails and queues\n- Subscriber workflow management\n\n### Segments \u0026 Tags\n- Create/manage segments\n- Segment conditions and logic\n- Tag management\n- Batch tagging operations\n\n### Reports \u0026 Analytics\n- Campaign reports\n- Open/click reports\n- Subscriber activity\n- E-commerce reports\n- Automation reports\n- Comparative reports\n\n## Zone Architecture\n\n### Zone 1: Audience Read (Low Risk)\n- Read audience/list information\n- Get subscriber data\n- View segments and tags\n- Access reports and analytics\n\n### Zone 2: Campaign Management (Medium Risk)\n- Create and edit campaigns\n- Manage templates\n- Configure automations\n- Manage segments\n\n### Zone 3: Admin (High Risk)\n- Send campaigns\n- Delete audiences/subscribers\n- Modify automation workflows\n- Batch operations\n\n## Dependencies\n- fcp-core: Core connector framework\n- fcp-oauth: OAuth 2.0 authentication flow\n- fcp-webhook: Real-time event notifications\n- fcp-ratelimit: Rate limiting and throttling\n- fcp-telemetry: Observability and metrics\n\n## Webhook Events\n- Subscribe events\n- Unsubscribe events\n- Profile updates\n- Email sent/opened/clicked\n- Campaign events\n- Cleaned (bounced) emails\n\n## Data Models\n- Audience (List)\n- Member (Subscriber)\n- Campaign\n- Template\n- Automation\n- Segment\n- Tag\n- Report\n\n## Implementation Notes\n- Mailchimp uses data center-specific URLs (us1, us2, etc.)\n- API key contains datacenter suffix (key-dc)\n- Batch operations available for bulk subscriber management\n- Webhook verification via secret key\n- Pagination uses offset/count pattern\n- Some endpoints have specific rate limits\n\n## Testing Strategy\n- Unit tests for data transformations\n- Integration tests with Mailchimp sandbox\n- Webhook signature verification tests\n- Rate limit handling tests\n\n## Acceptance Criteria\n- [ ] OAuth 2.0 authentication working\n- [ ] All CRUD operations for audiences\n- [ ] Campaign creation and sending\n- [ ] Template management\n- [ ] Automation workflow support\n- [ ] Segment and tag operations\n- [ ] Webhook event handling\n- [ ] Report/analytics retrieval\n- [ ] Rate limiting compliance\n- [ ] Comprehensive error handling","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T22:04:10.722425069-05:00","created_by":"ubuntu","updated_at":"2026-01-11T22:04:10.722425069-05:00","dependencies":[{"issue_id":"flywheel_connectors-i32c","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T22:08:22.111997016-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-i32c","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T22:08:22.137567614-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-i32c","depends_on_id":"flywheel_connectors-lj2","type":"blocks","created_at":"2026-01-11T22:08:32.561796608-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-i32c","depends_on_id":"flywheel_connectors-vi7","type":"blocks","created_at":"2026-01-11T22:08:32.806690955-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-i32c","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:37:15.216777113-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i32c","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T07:07:30.025512078-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i32c","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T07:09:36.75883649-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i32c","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T07:09:37.179016796-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i32c","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T07:09:37.591903191-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i32c","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T07:09:38.018838761-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i32c","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T07:09:38.435966632-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i32c","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:09:38.864076435-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-i32c.1","title":"fcp.mailchimp: Manifest + Capability Map (FCP2)","description":"## Goal\nProduce the full FCP2 manifest and capability map for this connector.\n\nThis bead is where we translate the connector’s functional surface (operations) into a **mechanically checkable** contract:\n- operation schemas + schema IDs\n- capability families per operation\n- per-operation NetworkConstraints (default deny)\n- sandbox profile requirements\n- declared state model (stateless / singleton_writer / crdt)\n\n## Required content (must be explicit)\n- Operation list is exhaustive and stable for the current phase.\n- Capability IDs DO NOT encode hostnames/ports.\n- NetworkConstraints are minimal and per-operation.\n- Risk tier for each operation (Safe / Dangerous).\n- Explicit bounds: timeouts, max response sizes, pagination limits.\n\n## Tests\n- Add good/bad manifest examples for the compliance runner.\n\n## Acceptance Criteria\n- Passes static checks in `flywheel_connectors-1n78.21.5`.\n- Default-deny is enforced by manifest + capability requirements.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:20.900673753-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:13:20.900673753-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-i32c.1","depends_on_id":"flywheel_connectors-i32c","type":"parent-child","created_at":"2026-01-15T07:13:20.957995062-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-i32c.2","title":"fcp.mailchimp: Provisioning Automation","description":"## Goal\nAutomate provisioning and configuration with minimal human steps.\n\nThis bead owns:\n- auth setup (OAuth / API keys / webhook secrets) via `CredentialObject`/`CredentialId` (egress proxy injection preferred)\n- endpoint configuration\n- `fcp doctor` readiness checks\n- deterministic, mockable provisioning flows\n\n## FCP2 requirements\n- Secrets never touch disk.\n- Provisioning is deterministic and testable.\n- Error messages are actionable and do not leak secrets/PII.\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Provisioning emits structured logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:21.534058712-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:53.861324331-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-i32c.2","depends_on_id":"flywheel_connectors-i32c","type":"parent-child","created_at":"2026-01-15T07:13:21.59142736-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i32c.2","depends_on_id":"flywheel_connectors-i32c.1","type":"blocks","created_at":"2026-01-15T07:13:22.161276405-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-i32c.3","title":"TEST: fcp.mailchimp Unit/Integration Tests (mock-only)","description":"## Goal\nMock-only unit/integration tests for this connector.\n\n## Required coverage\n- schema validation (inputs + outputs)\n- error taxonomy mapping (retry semantics)\n- pagination and bounds\n- rate limit behavior\n- redaction (no token/secret/PII leakage)\n- idempotency + receipts for Dangerous operations\n\n## Logging\nAll tests emit structured JSON logs per `flywheel_connectors-1n78.35`.\n\n## Acceptance Criteria\n- Deterministic tests; no live external calls.\n- Includes adversarial cases (timeouts, malformed responses, partial failures).\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:22.723117913-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:13:22.723117913-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-i32c.3","depends_on_id":"flywheel_connectors-i32c","type":"parent-child","created_at":"2026-01-15T07:13:22.781078478-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i32c.3","depends_on_id":"flywheel_connectors-i32c.1","type":"blocks","created_at":"2026-01-15T07:13:23.354190183-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i32c.3","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:13:23.926327791-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i32c.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T07:32:15.82477072-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-i32c.4","title":"E2E: fcp.mailchimp Connector Compliance Run","description":"## Goal\nRun the shared connector compliance runner and capture an evidence bundle.\n\n## Must validate\n- handshake + introspection correctness\n- default deny (no CapabilityToken → deny + DecisionReceipt)\n- NetworkConstraints enforcement\n- receipts/audit for Dangerous operations\n- structured logs\n\n## Acceptance Criteria\n- E2E run is deterministic and produces a stable artifact bundle.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:13:24.420357885-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:13:24.420357885-05:00","labels":["connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-i32c.4","depends_on_id":"flywheel_connectors-i32c","type":"parent-child","created_at":"2026-01-15T07:13:24.479716365-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i32c.4","depends_on_id":"flywheel_connectors-i32c.1","type":"blocks","created_at":"2026-01-15T07:13:25.03889877-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i32c.4","depends_on_id":"flywheel_connectors-i32c.2","type":"blocks","created_at":"2026-01-15T07:13:25.638863547-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i32c.4","depends_on_id":"flywheel_connectors-i32c.3","type":"blocks","created_at":"2026-01-15T07:13:26.321547323-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i32c.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T07:13:26.963861765-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-i4zm","title":"Revocation System (RevocationObject/Registry/Chain)","description":"## Overview\n\nImplement the revocation system as specified in V2 spec §14.3. This is CRITICAL security infrastructure - the spec explicitly states: \"Without revocation, 'compromised device' recovery is mostly imaginary.\"\n\nRevocations are mesh objects distributed like any other object and MUST be enforced before use.\n\n## Background \u0026 Justification\n\nWhen a device is compromised or a key is leaked, the mesh MUST be able to:\n1. Revoke capabilities issued to that device\n2. Revoke the device's issuer key (can no longer mint tokens)\n3. Remove the device from the mesh entirely\n4. Revoke compromised connector binaries\n5. Force zone key rotation\n\nWithout revocation, security incidents cannot be recovered from.\n\n## Normative Types (V2 Spec §14.3)\n\n### RevocationObject\n```rust\npub struct RevocationObject {\n    pub header: ObjectHeader,\n    /// ObjectIds being revoked\n    pub revoked: Vec\u003cObjectId\u003e,\n    /// Scope of revocation\n    pub scope: RevocationScope,\n    /// Human-readable reason\n    pub reason: String,\n    /// When revocation becomes effective\n    pub effective_at: u64,\n    /// Optional expiry (None = permanent)\n    pub expires_at: Option\u003cu64\u003e,\n    /// Owner signature (revocations MUST be owner-signed)\n    pub signature: Signature,\n}\n```\n\n### RevocationScope\n```rust\npub enum RevocationScope {\n    /// Revoke capability objects/tokens\n    Capability,\n    /// Revoke issuer keys (node can no longer mint tokens)\n    IssuerKey,\n    /// Revoke node attestation (removes device from mesh)\n    NodeAttestation,\n    /// Revoke zone key (forces rotation)\n    ZoneKey,\n    /// Revoke connector binary (supply chain response)\n    ConnectorBinary,\n}\n```\n\n### RevocationEvent (Chain Node)\n```rust\n/// Hash-linked chain for revocation freshness\npub struct RevocationEvent {\n    pub header: ObjectHeader,\n    pub revocation_object_id: ObjectId,\n    pub prev: Option\u003cObjectId\u003e,\n    /// Monotonic chain sequence number (NORMATIVE)\n    /// Enables O(1) freshness comparison: seq_a \u003e seq_b ⟹ a is fresher than b\n    pub seq: u64,\n    pub occurred_at: u64,\n    pub signature: Signature,\n}\n```\n\n### RevocationHead (Checkpoint)\n```rust\n/// Enables freshness semantics: tokens bound to a rev_head, verifiers MUST\n/// have revocation state \u003e= that head before accepting the token\npub struct RevocationHead {\n    pub header: ObjectHeader,\n    pub zone_id: ZoneId,\n    pub head_event: ObjectId,\n    /// Sequence number of head_event (NORMATIVE)\n    /// Enables O(1) freshness comparison without chain traversal\n    pub head_seq: u64,\n    pub epoch_id: EpochId,\n    pub quorum_signatures: Vec\u003c(TailscaleNodeId, Signature)\u003e,\n}\n```\n\n### RevocationRegistry\n```rust\npub struct RevocationRegistry {\n    revocations: HashMap\u003cObjectId, RevocationObject\u003e,\n    bloom_filter: BloomFilter,  // Fast negative lookup\n    /// Latest revocation head known for this zone\n    pub head: Option\u003cObjectId\u003e,\n}\n\nimpl RevocationRegistry {\n    /// Check if object is revoked (MUST be called before use)\n    pub fn is_revoked(\u0026self, object_id: \u0026ObjectId) -\u003e bool {\n        // Fast path: bloom filter definitely-not check\n        if !self.bloom_filter.might_contain(object_id.as_bytes()) {\n            return false;\n        }\n        self.revocations.contains_key(object_id)\n    }\n}\n```\n\n## Implementation Requirements\n\n### 1. RevocationObject Creation and Signing\n- Owner-only signing (revocations are critical operations)\n- Support all RevocationScope variants\n- Validate effective_at is in future or now\n- Propagate via mesh gossip immediately\n\n### 2. RevocationEvent Chain\n- Hash-linked for integrity\n- Monotonic seq for O(1) freshness comparison\n- Each new revocation creates new chain node\n- Support chain traversal for full audit\n\n### 3. RevocationHead Quorum\n- Requires quorum signatures from mesh nodes\n- Binds capability tokens to revocation state\n- Verifiers MUST check token.rev_head \u003c= local.head\n- Enables freshness guarantees\n\n### 4. Bloom Filter Optimization\n- Fast negative lookup for non-revoked objects\n- Size tuned for expected revocation volume\n- Rebuild on restart from persistent store\n\n### 5. Revocation Enforcement Points\n\nEVERY capability verification MUST include:\n```rust\nfn verify_capability_token(\u0026self, token: \u0026CapabilityToken) -\u003e Result\u003c()\u003e {\n    // MANDATORY: Check revocation before any other validation\n    if self.revocation_registry.is_revoked(\u0026token.object_id) {\n        return Err(Error::Revoked);\n    }\n    \n    // Check revocation freshness\n    if let Some(token_rev_head) = token.rev_head {\n        if !self.revocation_registry.is_at_least(token_rev_head)? {\n            return Err(Error::RevocationStateStale);\n        }\n    }\n    \n    // Continue with normal verification...\n}\n```\n\n### 6. Revocation Propagation\n- High-priority gossip (revocations supersede other traffic)\n- Persist to local store immediately\n- Trigger re-evaluation of cached capability decisions\n\n## Use Cases by Scope\n\n### Capability Revocation\n- Revoke specific capability tokens (e.g., leaked token)\n- Immediate effect on all nodes\n\n### IssuerKey Revocation  \n- Node can no longer mint new tokens\n- Existing tokens remain valid until they expire\n- Used for semi-trusted devices\n\n### NodeAttestation Revocation\n- Complete device removal from mesh\n- All capabilities issued TO and BY this node revoked\n- Used for compromised devices\n\n### ZoneKey Revocation\n- Forces zone key rotation\n- All zone members must re-enroll\n- Used for catastrophic key compromise\n\n### ConnectorBinary Revocation\n- Specific binary hash revoked\n- Connectors using that binary MUST stop\n- Used for supply chain incidents\n\n## Acceptance Criteria\n\n- [ ] RevocationObject with all scope variants\n- [ ] Owner-only signature validation\n- [ ] RevocationEvent hash-linked chain\n- [ ] Monotonic seq numbers for O(1) freshness\n- [ ] RevocationHead with quorum signatures\n- [ ] RevocationRegistry with bloom filter\n- [ ] is_revoked() check at all enforcement points\n- [ ] Revocation freshness comparison\n- [ ] High-priority gossip propagation\n- [ ] Persistent storage with crash recovery\n- [ ] Audit events for all revocation operations\n\n## Dependencies\n\n- Core Types (ObjectHeader, ObjectId, etc.)\n- Zone Architecture (zone-scoped revocations)\n- Capability System (enforcement points)\n- MeshNode (gossip propagation)\n- Observability (audit events)","status":"closed","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:44:25.848323653-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:47:20.691101782-05:00","closed_at":"2026-01-15T04:47:20.691101782-05:00","close_reason":"Duplicate of 1n78.9 (enhanced with detailed V2 spec content)","dependencies":[{"issue_id":"flywheel_connectors-i4zm","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T04:44:35.262322521-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i4zm","depends_on_id":"flywheel_connectors-1n78.7","type":"blocks","created_at":"2026-01-15T04:44:35.503327279-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i4zm","depends_on_id":"flywheel_connectors-1n78.17","type":"blocks","created_at":"2026-01-15T04:44:35.752827498-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i4zm","depends_on_id":"flywheel_connectors-1n78.28","type":"blocks","created_at":"2026-01-15T04:44:36.0081018-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-i7nk","title":"TEST: Error Taxonomy Unit Tests (FCP-XXXX Codes, Retry Semantics, AI Hints)","description":"# TEST: Error Taxonomy Unit Tests\n\n## Scope\nComprehensive tests for error code system and recovery hints.\n\n## Test Categories\n\n### Error Code Ranges\n- [ ] FCP-1xxx (protocol errors) mapped correctly\n- [ ] FCP-2xxx (auth/capability errors) mapped correctly\n- [ ] FCP-3xxx (zone errors) mapped correctly\n- [ ] FCP-4xxx (store/mesh errors) mapped correctly\n- [ ] FCP-5xxx (connector errors) mapped correctly\n- [ ] FCP-9xxx (internal errors) mapped correctly\n\n### Error Structure\n- [ ] All errors have stable `code` string\n- [ ] All errors have human-readable `message`\n- [ ] All errors have `retryable` flag\n- [ ] Retryable errors have `retry_after_ms`\n- [ ] Errors include `details` when applicable\n\n### AI Recovery Hints\n- [ ] Top 20 failure modes have ai_recovery_hint\n- [ ] Hints are actionable and specific\n- [ ] Hints don't leak secrets\n- [ ] Hints are stable across versions\n\n### Error Serialization\n- [ ] Errors serialize to canonical CBOR\n- [ ] Errors deserialize correctly\n- [ ] Unknown error codes handled gracefully\n- [ ] Forward compatibility for new codes\n\n### Retry Semantics\n- [ ] Retryable errors retry correctly\n- [ ] Non-retryable errors fail immediately\n- [ ] Retry budget is respected\n- [ ] Exponential backoff applied\n\n## Golden Vectors\nLocation: `tests/vectors/errors/`\n- `error_protocol.cbor`\n- `error_auth.cbor`\n- `error_zone.cbor`\n- `error_retryable.cbor`\n\n## Logging Requirements\n```json\n{\n  \"timestamp\": \"RFC3339\",\n  \"test_name\": \"test_error_taxonomy\",\n  \"phase\": \"execute\",\n  \"correlation_id\": \"uuid\",\n  \"error_code\": \"FCP-2101\",\n  \"retryable\": false,\n  \"ai_hint_present\": true,\n  \"result\": \"pass\"\n}\n```\n\n## Acceptance Criteria\n- All error codes are tested\n- AI hints exist for common failures\n- Error serialization is stable\n\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:26:20.789935529-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:26:20.789935529-05:00","labels":["errors","fcp2","mvp","testing","ux"],"dependencies":[{"issue_id":"flywheel_connectors-i7nk","depends_on_id":"flywheel_connectors-1n78.29","type":"blocks","created_at":"2026-01-15T03:26:30.547400262-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-i7nk","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:26:30.633288922-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ig2","title":"fcp.spotify: Listening History","description":"# fcp.spotify: Listening History (FCP2)\n\n## Goal\nExpose listening history surfaces for personalization and analytics:\n- recently played\n- top tracks/artists\n\nThis is sensitive personal data.\n\n## Scope\n- Get recently played (pagination / time window).\n- Get top tracks/artists by time range.\n\n## Capability model (illustrative)\n- `spotify.history.read` (sensitive)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- Privacy hygiene:\n  - never log track names, artist names, or listening timestamps\n  - logs include only counts and correlation IDs\n\n## Deliverables\n- Operation schemas:\n  - `spotify.history.recently_played`\n  - `spotify.history.top_tracks`\n  - `spotify.history.top_artists`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - pagination\n  - time-range selection\n\n## Acceptance criteria\n- History access is reliable and privacy-preserving.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:21:13.538713829-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:41:33.571884482-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-ig2","depends_on_id":"flywheel_connectors-a4dh","type":"parent-child","created_at":"2026-01-15T02:33:42.080970611-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ig2","depends_on_id":"flywheel_connectors-a4dh.1","type":"blocks","created_at":"2026-01-15T04:41:40.701402569-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-imc","title":"fcp.figma: Image export (PNG, SVG, PDF formats)","description":"# fcp.figma: Image export (PNG, SVG, PDF formats) (FCP2)\n\n## Goal\nExport design assets from Figma safely:\n- render nodes/frames to PNG/SVG/PDF\n- download rendered assets with strict bounds\n\n## Scope\n- Request render URLs for one or more node IDs.\n- Download rendered assets (streamed).\n- Enforce size and host constraints:\n  - bounded max bytes\n  - allowlist content-types\n  - deny redirects to new hosts\n\n## Capability model (illustrative)\n- `figma.export.read`\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints must explicitly allow:\n  - Figma API host(s)\n  - the specific export CDN host(s) if distinct\n- Avoid logging URLs/tokens embedded in export links.\n\n## Deliverables\n- Operation schemas:\n  - `figma.export.render`\n  - `figma.export.download`\n- Streaming download implementation with hash computation for evidence.\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - render request formation\n  - download bounds + early abort\n  - host pinning and redirect refusal\n  - content-type allowlist\n\n## Acceptance criteria\n- Asset export is safe-by-default and does not allow arbitrary egress.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:14:50.320738647-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:34:45.188234855-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-imc","depends_on_id":"flywheel_connectors-vuwy","type":"parent-child","created_at":"2026-01-15T02:30:18.611364427-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-imc","depends_on_id":"flywheel_connectors-vuwy.1","type":"blocks","created_at":"2026-01-15T04:34:48.711671333-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-imi","title":"fcp.browser - Headless Browser Automation Connector","description":"# fcp.browser - Headless Browser Automation Connector (FCP2)\n\n## Goal\nProvide a headless browser automation connector under FCP2 with **strict sandboxing** and **mechanical authorization**.\n\nThis connector is inherently high-risk and resource-heavy; it must be treated accordingly by DeviceProfiles and policy.\n\n## Manifest archetypes (closed set)\n- `operational`\n- `bidirectional` (actions + results)\n\n## Threat model\nBrowsers can:\n- execute untrusted JavaScript\n- exfiltrate secrets\n- perform arbitrary network access\n- persist cookies/sessions\n\nHard requirements:\n- Default deny for all operations.\n- NetworkConstraints enforced by the Network Guard.\n- No secrets on disk (cookies/sessions must be mesh-state objects if persisted).\n- Strong audit for dangerous actions.\n\n## Zone model\n- Single-zone bound: one connector instance ↔ one `ZoneId`.\n- Recommended zones:\n  - `z:public:web` for hostile browsing\n  - `z:work:web` only with strict policy ceilings\n\n## External surface\n### NetworkConstraints\nDefault-deny.\n\nDesign requirement:\n- The manifest must not claim “navigate to any URL” unless policy explicitly permits broad egress.\n- Prefer an allowlist model: the operation includes an allowlist of hostnames and the Network Guard enforces it.\n\n### Credential injection\n- Optional: credentials injected via `CredentialId` for explicit, user-approved login flows.\n\n## Capability model (illustrative)\n- `browser.navigate`\n- `browser.extract`\n- `browser.screenshot`\n- `browser.form.submit` (Dangerous)\n- `browser.cookies.manage` (Dangerous)\n- `browser.js.execute` (Dangerous)\n- `browser.proxy.use` (Dangerous)\n\n## Operations (representative)\n- navigation + waits\n- extraction (CSS/XPath)\n- screenshots/PDF\n- form fill + submit\n- cookie/session management\n- JS execution\n\n## State model\n- Stateless for single-shot operations.\n- If session persistence is enabled:\n  - store cookies/session state in mesh state objects\n  - protect with singleton-writer lease\n\n## Performance / placement\nThis connector will exceed “tiny connector” budgets.\n\nHard requirement:\n- Declare resource requirements in DeviceProfile terms so the Execution Planner can place it appropriately.\n\n## Tests\n- Mock-only unit tests for:\n  - URL parsing and allowlist enforcement behavior\n  - redaction\n  - state persistence logic\n- E2E compliance run validates:\n  - Network Guard blocks disallowed hosts\n  - dangerous ops are policy-gated\n\n## Acceptance Criteria\n- Passes connector compliance runner.\n- Deterministic tests; no uncontrolled network egress.\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-11T10:10:58.961549987-05:00","created_by":"ubuntu","updated_at":"2026-01-15T08:37:53.92229179-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-imi","depends_on_id":"flywheel_connectors-iv7","type":"blocks","created_at":"2026-01-11T10:43:17.855076124-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-imi","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T10:43:17.904036896-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-imi","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T10:43:17.929826211-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-imi","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T01:23:43.745537554-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-imi","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:38:54.967661915-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-imi","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:38:55.097942832-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-imi","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T03:38:55.236428564-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-imi","depends_on_id":"flywheel_connectors-1n78.18.2","type":"blocks","created_at":"2026-01-15T03:38:55.374919246-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-imi","depends_on_id":"flywheel_connectors-1n78.18.3","type":"blocks","created_at":"2026-01-15T03:38:55.512896601-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-imi","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:38:55.655439846-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-imi","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T03:38:55.810025437-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-imi","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T03:38:55.945770476-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-imi","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T03:38:56.09989073-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-imi","depends_on_id":"flywheel_connectors-wwq8","type":"blocks","created_at":"2026-01-15T03:38:56.230952989-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-imi","depends_on_id":"flywheel_connectors-1n78.17.6","type":"blocks","created_at":"2026-01-15T03:38:56.361643246-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-imi","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:09:57.811197686-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-imi.1","title":"fcp.browser: Manifest + Capability Map (FCP2)","description":"# fcp.browser: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the browser connector manifest contract:\n- archetypes (`operational`, `bidirectional`)\n- operations + schema IDs\n- capability families + per-operation caps\n- NetworkConstraints strategy (prefer explicit allowlists)\n- resource requirements for Execution Planner\n- state model for optional session persistence\n\n## Acceptance Criteria\n- Complete manifest spec stored here.\n- Good/bad manifest examples exist for static compliance.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:39:03.967231307-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:39:03.967231307-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-imi.1","depends_on_id":"flywheel_connectors-imi","type":"parent-child","created_at":"2026-01-15T03:39:03.968580018-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-imi.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:39:46.143708092-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-imi.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:39:46.280426255-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-imi.2","title":"fcp.browser: Core Navigation/Extraction/Screenshots","description":"# fcp.browser: Core Navigation/Extraction/Screenshots\n\n## Goal\nImplement low-risk operations:\n- navigate + wait\n- extract (CSS/XPath)\n- screenshot/PDF\n\n## Requirements\n- NetworkConstraints enforced by Network Guard.\n- Bounded timeouts.\n- Strong logging redaction.\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:39:11.441345945-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:28:12.920478314-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-imi.2","depends_on_id":"flywheel_connectors-imi","type":"parent-child","created_at":"2026-01-15T03:39:11.44301582-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-imi.2","depends_on_id":"flywheel_connectors-imi.1","type":"blocks","created_at":"2026-01-15T03:39:46.433224789-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-imi.3","title":"fcp.browser: Dangerous Ops (JS/cookies/forms/proxy)","description":"# fcp.browser: Dangerous Ops (JS/cookies/forms/proxy)\n\n## Goal\nImplement high-risk operations behind explicit policy:\n- execute JS\n- manage cookies/session\n- form submission\n- proxy usage\n\n## Requirements\n- Each operation is capability gated.\n- Many actions should require ApprovalToken `Execution` scope.\n- Emit AuditEvents for every dangerous action.\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:39:16.692497237-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:28:12.815450539-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-imi.3","depends_on_id":"flywheel_connectors-imi","type":"parent-child","created_at":"2026-01-15T03:39:16.693773811-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-imi.4","title":"fcp.browser: Session Persistence via Mesh State","description":"# fcp.browser: Session Persistence via Mesh State\n\n## Goal\nPersist browser sessions without writing secrets to disk.\n\n## Requirements\n- Cookies/session state stored as mesh state objects.\n- Singleton-writer lease for session updates.\n- Redaction: never log cookie values.\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:39:22.066337174-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:28:12.714984616-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-imi.4","depends_on_id":"flywheel_connectors-imi","type":"parent-child","created_at":"2026-01-15T03:39:22.102816502-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-imi.4","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T03:39:46.702069365-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-imi.5","title":"fcp.browser: Sandbox/Placement Profile","description":"# fcp.browser: Sandbox/Placement Profile\n\n## Goal\nDefine and validate the sandbox profile + device placement constraints for the browser connector.\n\n## Requirements\n- OS sandbox profile is strict.\n- Network Guard enforces allowlists.\n- Resource requirements declared for Execution Planner.\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:39:26.720934628-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:28:12.613609308-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-imi.5","depends_on_id":"flywheel_connectors-imi","type":"parent-child","created_at":"2026-01-15T03:39:26.722062302-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-imi.6","title":"TEST: Browser Connector Unit/Integration Tests (deterministic)","description":"# TEST: Browser Connector Unit/Integration Tests (deterministic)\n\n## Must cover\n- Manifest determinism + interface_hash.\n- Allowlist parsing.\n- Redaction.\n- Session state persistence rules.\n\n## Note\nEnd-to-end browser automation is inherently heavy; keep unit/integration tests deterministic and small.\n\n## Acceptance Criteria\n- Deterministic.\n- Structured JSON logs.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:39:31.897366958-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:39:31.897366958-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-imi.6","depends_on_id":"flywheel_connectors-imi","type":"parent-child","created_at":"2026-01-15T03:39:31.898624738-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-imi.6","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T03:39:46.841393907-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-imi.7","title":"E2E: Browser Connector Compliance Run","description":"# E2E: Browser Connector Compliance Run\n\n## Goal\nValidate browser connector behavior in the shared compliance harness.\n\n## Scenarios\n- Default deny.\n- Network guard allow/deny against a local test domain.\n- Dangerous op gating (execute_js, form submit).\n\n## Acceptance Criteria\n- `cargo test --package fcp-e2e --features browser` passes deterministically.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:39:37.836583112-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:39:37.836583112-05:00","labels":["conformance","connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-imi.7","depends_on_id":"flywheel_connectors-imi","type":"parent-child","created_at":"2026-01-15T03:39:37.838055265-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-imi.7","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T03:39:47.046606807-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-imi.8","title":"fcp.browser: Provisioning Automation (Profiles + Optional Login)","description":"## Goal\nAutomate provisioning and configuration with minimal human steps.\n\nThis bead owns:\n- auth setup (OAuth / API keys / webhook secrets) via `CredentialObject`/`CredentialId` (egress proxy injection preferred)\n- endpoint configuration\n- `fcp doctor` readiness checks\n- deterministic, mockable provisioning flows\n\n## FCP2 requirements\n- Secrets never touch disk.\n- Provisioning is deterministic and testable.\n- Error messages are actionable and do not leak secrets/PII.\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Provisioning emits structured logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:14:41.113685217-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:53.981882914-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-imi.8","depends_on_id":"flywheel_connectors-imi","type":"parent-child","created_at":"2026-01-15T07:14:41.173231932-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-imi.8","depends_on_id":"flywheel_connectors-imi.1","type":"blocks","created_at":"2026-01-15T07:14:41.817127676-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-in4","title":"fcp.google-calendar: Google Calendar API Connector","description":"# fcp.google-calendar - Google Calendar API Connector (FCP2)\n\n## Goal\nProvide an FCP2-compliant Google Calendar connector for scheduling and availability with strict zone isolation.\n\n## Manifest archetypes (closed set)\n- `operational`\n- `streaming` (optional: watch/push or polling-driven event stream)\n\n## Zone model\n- Single-zone bound: one connector instance ↔ one `ZoneId`.\n- Calendar data is private and sensitive; enforce strict capability gating.\n\n## External surface\n### NetworkConstraints\nDefault-deny; allow only Google Calendar API endpoints and OAuth refresh endpoints required by the configured auth mode.\n\n### Credential injection\n- OAuth tokens or service account credentials via `CredentialId`.\n\n## Capability model (illustrative)\n- `calendar.events.read` / `calendar.events.write`\n- `calendar.freebusy.read`\n- `calendar.calendars.read` / `calendar.calendars.write`\n- `calendar.acl.manage` (Dangerous)\n- `calendar.watch.manage` (Dangerous)\n\n## Operations (representative)\n- events CRUD + instances\n- freebusy queries\n- calendars + calendarlist\n- ACL management (Dangerous)\n\n## State model\n- Persist syncToken cursor for incremental sync.\n- Advance cursor under singleton-writer lease.\n\n## Tests\n- Mock-only unit/integration tests with wiremock.\n- Deterministic syncToken simulation.\n- E2E compliance run validates default deny + NetworkConstraints + cursor behavior.\n\n## Acceptance Criteria\n- Passes connector compliance runner.\n- Deterministic tests; no live Calendar calls in unit tests.\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-11T10:47:19.536020495-05:00","created_by":"ubuntu","updated_at":"2026-01-15T08:37:54.041421679-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-in4","depends_on_id":"flywheel_connectors-lj2","type":"blocks","created_at":"2026-01-11T10:53:05.151967557-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-in4","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T10:53:05.401646864-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-in4","depends_on_id":"flywheel_connectors-iv7","type":"blocks","created_at":"2026-01-11T10:53:05.632236165-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-in4","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T12:38:27.486017386-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-in4","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T01:23:43.894930224-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-in4","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:41:19.388372526-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-in4","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:41:19.535360575-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-in4","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T03:41:19.691379255-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-in4","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:41:19.842971277-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-in4","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T03:41:20.00258016-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-in4","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T03:41:20.143865235-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-in4","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T03:41:20.29946705-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-in4.1","title":"fcp.google-calendar: Manifest + Capability Map (FCP2)","description":"# fcp.google-calendar: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the Calendar connector manifest contract:\n- archetypes (`operational`, optional `streaming`)\n- operations + schema IDs\n- capability families + per-operation caps\n- NetworkConstraints allowlist\n- state model for syncToken\n\n## Acceptance Criteria\n- Complete manifest spec stored here.\n- Good/bad manifest examples exist for static compliance.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:41:26.894996303-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:41:26.894996303-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-in4.1","depends_on_id":"flywheel_connectors-in4","type":"parent-child","created_at":"2026-01-15T03:41:26.896326649-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-in4.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:42:48.619681218-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-in4.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:42:48.76739921-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-in4.2","title":"fcp.google-calendar: Provisioning Automation (OAuth/service account)","description":"# fcp.google-calendar: Provisioning Automation (OAuth/service account)\n\n## Goal\nAutomate auth onboarding for the selected mode:\n- OAuth tokens OR service account credentials via `CredentialId`\n- validate scopes + NetworkConstraints\n\n## Acceptance Criteria\n- `fcp doctor` validates readiness.\n- Mockable.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:41:32.029902849-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:54.10150435-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-in4.2","depends_on_id":"flywheel_connectors-in4","type":"parent-child","created_at":"2026-01-15T03:41:32.031107479-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-in4.3","title":"fcp.google-calendar: Core Operations (events/freebusy/calendars)","description":"# fcp.google-calendar: Core Operations (events/freebusy/calendars)\n\n## Goal\nImplement:\n- events CRUD + instances\n- freebusy queries\n- calendars/calendarlist\n\n## Requirements\n- Capability gated.\n- Writes emit receipts/audit.\n- Strong redaction.\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:41:38.116965118-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:28:12.412277237-05:00","dependencies":[{"issue_id":"flywheel_connectors-in4.3","depends_on_id":"flywheel_connectors-in4","type":"parent-child","created_at":"2026-01-15T03:42:14.714359426-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-in4.3","depends_on_id":"flywheel_connectors-in4.1","type":"blocks","created_at":"2026-01-15T03:42:48.924377928-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-in4.4","title":"fcp.google-calendar: Core Operations (events/freebusy/calendars)","description":"# fcp.google-calendar: Core Operations (events/freebusy/calendars)\n\n## Goal\nImplement:\n- events CRUD + instances\n- freebusy queries\n- calendars/calendarlist\n\n## Requirements\n- Capability gated.\n- Writes emit receipts/audit.\n- Strong redaction.\n","status":"closed","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:41:51.210098759-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:42:23.794015437-05:00","closed_at":"2026-01-15T03:42:23.794015437-05:00","close_reason":"Duplicate: created during transient DB lock; use flywheel_connectors-in4.3","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-in4.4","depends_on_id":"flywheel_connectors-in4","type":"parent-child","created_at":"2026-01-15T03:41:51.211403687-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-in4.5","title":"fcp.google-calendar: Incremental Sync Cursor + State (syncToken)","description":"# fcp.google-calendar: Incremental Sync Cursor + State (syncToken)\n\n## Goal\nImplement incremental sync using syncToken:\n- persist syncToken cursor\n- advance under singleton-writer lease\n\n## Acceptance Criteria\n- Restart resumes without duplication.\n- Lease conflict behavior is correct.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:42:30.860792721-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:42:30.860792721-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-in4.5","depends_on_id":"flywheel_connectors-in4","type":"parent-child","created_at":"2026-01-15T03:42:30.862139819-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-in4.5","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T03:42:49.166657882-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-in4.6","title":"TEST: Google Calendar Connector Unit/Integration Tests (mock-only)","description":"# TEST: Google Calendar Connector Unit/Integration Tests (mock-only)\n\n## Must cover\n- Manifest determinism + interface_hash.\n- OAuth refresh handling (mocked).\n- Error taxonomy mapping.\n- Redaction.\n- syncToken cursor logic.\n\n## Acceptance Criteria\n- Deterministic.\n- Structured JSON logs.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:42:37.106458955-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:42:37.106458955-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-in4.6","depends_on_id":"flywheel_connectors-in4","type":"parent-child","created_at":"2026-01-15T03:42:37.107832994-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-in4.6","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T03:42:49.313645669-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-in4.7","title":"E2E: Google Calendar Connector Compliance Run","description":"# E2E: Google Calendar Connector Compliance Run\n\n## Goal\nAdd Calendar scenarios to the shared compliance harness.\n\n## Scenarios\n- Default deny.\n- Allow with valid token.\n- Network guard allow/deny.\n- syncToken cursor + lease behavior.\n\n## Acceptance Criteria\n- `cargo test --package fcp-e2e --features google_calendar` passes deterministically.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:42:42.537202969-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:42:42.537202969-05:00","labels":["conformance","connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-in4.7","depends_on_id":"flywheel_connectors-in4","type":"parent-child","created_at":"2026-01-15T03:42:42.53919921-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-in4.7","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T03:42:49.532385407-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-iqrb","title":"[FCP2] fcp-cli: Developer + Operator CLI","description":"# [FCP2] fcp-cli: Developer + Operator CLI\n\n## Overview\nCommand-line tools for FCP2 development and operations.\n\nKey principle: if you can't explain a denial or quantify offline availability, the system isn't finished.\n\n## Core operator commands (must exist)\n- `fcp install` (verify manifest/binary + install/mirror)\n- `fcp doctor --zone \u003czone\u003e` (revocation/checkpoint freshness, degraded mode)\n- `fcp explain --request \u003cobjectid\u003e` (render DecisionReceipt)\n- `fcp audit tail --zone \u003czone\u003e` (tail audit events)\n- `fcp repair status --zone \u003czone\u003e` (coverage/placement)\n- `fcp bench ...` (latency, raptorq, invoke-local)\n\n## Developer commands (nice-to-have, but valuable)\n- `fcp new \u003cname\u003e` - Create new connector from template\n- `fcp check` - Run lints and validation\n- `fcp test` - Run connector tests\n- `fcp bench` - Run benchmarks\n\n## Management commands\n- `fcp list` - List installed connectors\n- `fcp update` - Update connectors\n- `fcp info \u003cconnector\u003e` - Show connector manifest\n- `fcp verify \u003cconnector\u003e` - Verify signatures/checksums\n- `fcp introspect \u003cconnector\u003e` - Show operations/caps\n\n## Safety notes\n- Any destructive management action (e.g., uninstall/unpin) must respect GC roots (ZoneCheckpoint) and should be implemented as policy-aware unpinning, not unsafe deletion.\n\n## Output + scripting\n- JSON output mode for scripting.\n- Structured error codes (FCP-XXXX) and recovery hints.\n\n## Acceptance Criteria\n- CLI commands operate purely from mesh objects and verifiable receipts.\n- CLI never prints secrets.\n","status":"open","priority":0,"issue_type":"feature","created_at":"2026-01-11T12:11:03.581644646-05:00","created_by":"ubuntu","updated_at":"2026-01-15T02:59:36.751333183-05:00","labels":["cli","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-iqrb","depends_on_id":"flywheel_connectors-1n78.3","type":"blocks","created_at":"2026-01-15T03:36:17.180758818-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-iqrb","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T03:36:18.374892026-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-iqrb","depends_on_id":"flywheel_connectors-1n78.11","type":"blocks","created_at":"2026-01-15T03:36:19.469722642-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-iqrb","depends_on_id":"flywheel_connectors-1n78.15","type":"blocks","created_at":"2026-01-15T03:36:20.453046698-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-iqrb","depends_on_id":"flywheel_connectors-1n78.17","type":"blocks","created_at":"2026-01-15T03:36:21.658294894-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-iqrb","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:36:22.963285038-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-iqrb.1","title":"CLI: fcp install (verify + mirror)","description":"# CLI: `fcp install` (verify + mirror)\n\n## Goal\nImplement `fcp install` as the user-facing entrypoint for installing a connector safely.\n\n## Behavior\n- Fetch or load a connector manifest + binary.\n- Run the full verification chain (policy-controlled):\n  - manifest signature(s)\n  - binary checksum and signature\n  - platform/arch compatibility\n  - policy requirements (transparency/attestations when required)\n- Mirror/pin connector objects into the mesh store for offline installs.\n- Emit audit events describing what was installed (by object id).\n\n## Output\n- Human mode: concise success/failure.\n- `--json` mode: machine-readable result including installed object ids.\n\n## Tests\n- Integration tests with a mock registry:\n  - install success\n  - bad signature rejected\n  - checksum mismatch rejected\n  - missing attestation rejected when policy requires\n- Snapshot tests for `--json` output.\n\n## Acceptance Criteria\n- A connector cannot be installed if verification fails.\n- CLI never prints secrets.\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:00:15.446055563-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:00:15.446055563-05:00","dependencies":[{"issue_id":"flywheel_connectors-iqrb.1","depends_on_id":"flywheel_connectors-iqrb","type":"parent-child","created_at":"2026-01-15T03:00:15.447409216-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-iqrb.1","depends_on_id":"flywheel_connectors-1n78.27","type":"blocks","created_at":"2026-01-15T03:01:04.599098928-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-iqrb.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:01:04.671013027-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-iqrb.1","depends_on_id":"flywheel_connectors-1n78.15","type":"blocks","created_at":"2026-01-15T03:01:04.776969229-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-iqrb.1","depends_on_id":"flywheel_connectors-1n78.11","type":"blocks","created_at":"2026-01-15T03:01:04.851982383-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-iqrb.1","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T03:01:04.925995621-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-iqrb.1","depends_on_id":"flywheel_connectors-1n78.29","type":"blocks","created_at":"2026-01-15T03:01:05.002953543-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-iqrb.1","depends_on_id":"flywheel_connectors-1n78.28","type":"blocks","created_at":"2026-01-15T03:01:05.073860322-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-iqrb.2","title":"CLI: fcp doctor (freshness + degraded mode)","description":"# CLI: `fcp doctor` (freshness + degraded mode)\n\n## Goal\nImplement `fcp doctor --zone \u003czone\u003e` to report the current safety posture of a zone.\n\n## Behavior\nReport, at minimum:\n- latest pinned ZoneCheckpoint id + checkpoint_seq + age\n- revocation/audit head freshness state\n- whether the system is in degraded mode for this zone and why\n- transport policy settings (DERP/Funnel allowed?)\n- store coverage summary for key roots (checkpoint, policy heads)\n\n## Output\n- Human mode: clear OK/WARN/FAIL summary with reason codes.\n- `--json` mode: full structured state for automation.\n\n## Tests\n- E2E harness scenarios:\n  - fresh checkpoint -\u003e OK\n  - stale checkpoint -\u003e WARN/FAIL depending on policy\n  - missing checkpoint -\u003e degraded mode report\n\n## Acceptance Criteria\n- Output is sufficient to decide whether Risky/Dangerous operations should be allowed.\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:00:24.865101348-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:00:24.865101348-05:00","dependencies":[{"issue_id":"flywheel_connectors-iqrb.2","depends_on_id":"flywheel_connectors-iqrb","type":"parent-child","created_at":"2026-01-15T03:00:24.86629011-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-iqrb.2","depends_on_id":"flywheel_connectors-1n78.11","type":"blocks","created_at":"2026-01-15T03:01:10.277370432-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-iqrb.2","depends_on_id":"flywheel_connectors-1n78.15","type":"blocks","created_at":"2026-01-15T03:01:10.353753881-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-iqrb.2","depends_on_id":"flywheel_connectors-1n78.9","type":"blocks","created_at":"2026-01-15T03:01:10.427661469-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-iqrb.2","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T03:01:10.504182577-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-iqrb.2","depends_on_id":"flywheel_connectors-1n78.28","type":"blocks","created_at":"2026-01-15T03:01:10.581956718-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-iqrb.2","depends_on_id":"flywheel_connectors-1n78.29","type":"blocks","created_at":"2026-01-15T03:01:10.658767372-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-iqrb.3","title":"CLI: fcp explain (DecisionReceipt renderer)","description":"# CLI: `fcp explain` (DecisionReceipt renderer)\n\n## Goal\nImplement `fcp explain --request \u003cobjectid\u003e` to render the *mechanical evidence* behind an allow/deny.\n\n## Behavior\n- Load the DecisionReceipt for the request (or explain why it is missing).\n- Render:\n  - decision (allow/deny)\n  - reason_code\n  - evidence object ids and a short description of each (token, grants, checkpoint, approvals, policy head)\n  - optional human message if present\n\n## Output\n- Human mode: readable explanation.\n- `--json` mode: fully structured output for tooling.\n\n## Tests\n- Snapshot tests for representative deny reason codes.\n- E2E: invoke a request that is denied and ensure `fcp explain` matches the DecisionReceipt.\n\n## Acceptance Criteria\n- A user can understand why a denial happened without guessing or disabling security.\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:00:31.845715273-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:00:31.845715273-05:00","dependencies":[{"issue_id":"flywheel_connectors-iqrb.3","depends_on_id":"flywheel_connectors-iqrb","type":"parent-child","created_at":"2026-01-15T03:00:31.847133848-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-iqrb.3","depends_on_id":"flywheel_connectors-1n78.11","type":"blocks","created_at":"2026-01-15T03:01:15.613157786-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-iqrb.3","depends_on_id":"flywheel_connectors-1n78.15","type":"blocks","created_at":"2026-01-15T03:01:15.686931573-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-iqrb.3","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T03:01:15.759025932-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-iqrb.3","depends_on_id":"flywheel_connectors-1n78.29","type":"blocks","created_at":"2026-01-15T03:01:15.831961247-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-iqrb.4","title":"CLI: fcp audit tail (AuditEvent stream)","description":"# CLI: `fcp audit tail` (AuditEvent stream)\n\n## Goal\nImplement `fcp audit tail --zone \u003czone\u003e` to tail audit events with trace correlation.\n\n## Behavior\n- Stream AuditEvent entries in order (by seq).\n- Support filtering by:\n  - connector_id\n  - operation_id\n  - correlation_id / trace_id\n- Support `--json` output for piping.\n\n## Tests\n- E2E: generate audit events and assert tail shows them with stable ordering and required fields.\n\n## Acceptance Criteria\n- Audit output is usable for incident response without leaking secrets.\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:00:38.378592382-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:00:38.378592382-05:00","dependencies":[{"issue_id":"flywheel_connectors-iqrb.4","depends_on_id":"flywheel_connectors-iqrb","type":"parent-child","created_at":"2026-01-15T03:00:38.379871555-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-iqrb.4","depends_on_id":"flywheel_connectors-1n78.11","type":"blocks","created_at":"2026-01-15T03:01:20.39319902-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-iqrb.4","depends_on_id":"flywheel_connectors-1n78.15","type":"blocks","created_at":"2026-01-15T03:01:20.467585091-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-iqrb.4","depends_on_id":"flywheel_connectors-1n78.28","type":"blocks","created_at":"2026-01-15T03:01:20.542554052-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-iqrb.5","title":"CLI: fcp repair status (coverage + placement)","description":"# CLI: `fcp repair status` (coverage + placement)\n\n## Goal\nImplement `fcp repair status --zone \u003czone\u003e` to report offline availability SLO health.\n\n## Behavior\n- Report coverage metrics (basis points):\n  - distinct nodes\n  - max_node_fraction_bps\n  - coverage_bps\n  - is_available\n- Report last repair cycle actions and pending deficits.\n- Support `--json` output for dashboards.\n\n## Tests\n- Simulation harness test: after removing symbols, status shows deficit; after repair cycle, deficit improves.\n\n## Acceptance Criteria\n- Offline availability is quantifiable and debuggable.\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:00:44.44376139-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:00:44.44376139-05:00","dependencies":[{"issue_id":"flywheel_connectors-iqrb.5","depends_on_id":"flywheel_connectors-iqrb","type":"parent-child","created_at":"2026-01-15T03:00:44.444918522-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-iqrb.5","depends_on_id":"flywheel_connectors-1n78.15","type":"blocks","created_at":"2026-01-15T03:01:25.661793459-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-iqrb.5","depends_on_id":"flywheel_connectors-1n78.17","type":"blocks","created_at":"2026-01-15T03:01:25.735231753-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-iqrb.6","title":"CLI: fcp bench (perf suite runner)","description":"# CLI: `fcp bench` (perf suite runner)\n\n## Goal\nImplement `fcp bench` as the user-facing runner for the platform benchmark suite.\n\n## Behavior\n- Run microbenchmarks for hot paths (CBOR, ObjectId, token verify, FCPS parse, RaptorQ decode, invoke-local/invoke-mesh).\n- Emit machine-readable results (JSON) for regression tracking.\n- Provide stable subcommands/flags so CI or users can run targeted benchmarks.\n\n## Tests\n- Snapshot tests for JSON result shape.\n\n## Acceptance Criteria\n- Bench output is stable enough to track regressions over time.\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:00:53.933260148-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:00:53.933260148-05:00","dependencies":[{"issue_id":"flywheel_connectors-iqrb.6","depends_on_id":"flywheel_connectors-iqrb","type":"parent-child","created_at":"2026-01-15T03:00:53.934584246-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-iqrb.6","depends_on_id":"flywheel_connectors-1n78.23","type":"blocks","created_at":"2026-01-15T03:01:32.221175375-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-iqrb.6","depends_on_id":"flywheel_connectors-1n78.28","type":"blocks","created_at":"2026-01-15T03:01:32.294775795-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-iqrb.6","depends_on_id":"flywheel_connectors-1n78.29","type":"blocks","created_at":"2026-01-15T03:01:32.37196889-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-iv4","title":"fcp.reddit: Messaging","description":"# fcp.reddit: Messaging (FCP2)\n\n## Goal\nSupport Reddit inbox and direct messaging to enable:\n- receiving replies/mentions\n- sending messages to users (when permitted)\n\nMessaging is privacy sensitive.\n\n## Scope\n- Fetch inbox (unread, mentions, messages) with pagination.\n- Mark as read (optional; dangerous-ish).\n- Send a message.\n\n## Capability model (illustrative)\n- `reddit.messages.read`\n- `reddit.messages.send` (dangerous)\n- Optional: `reddit.messages.manage` (mark read)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- PII hygiene:\n  - never log message bodies or usernames\n- For sends:\n  - receipts + audit events include recipient hash + message id\n\n## Deliverables\n- Operation schemas:\n  - `reddit.inbox.list`\n  - `reddit.inbox.unread.list`\n  - `reddit.message.send`\n  - Optional: `reddit.inbox.mark_read`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - pagination\n  - send request formation\n  - redaction\n  - audit/receipt on send\n\n## Acceptance criteria\n- Messaging operations are safe, auditable, and privacy-preserving.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:21:22.963374379-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:39:30.803076048-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-iv4","depends_on_id":"flywheel_connectors-xz6e","type":"parent-child","created_at":"2026-01-15T02:33:59.537793186-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-iv4","depends_on_id":"flywheel_connectors-xz6e.1","type":"blocks","created_at":"2026-01-15T04:39:34.890390246-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-iv7","title":"fcp-testkit: Connector Testing Framework and Mock Infrastructure","status":"closed","priority":0,"issue_type":"feature","created_at":"2026-01-11T10:37:14.373917896-05:00","created_by":"ubuntu","updated_at":"2026-01-11T12:30:44.410241683-05:00","closed_at":"2026-01-11T12:30:44.410241683-05:00","close_reason":"Implemented fcp-testkit crate with test harness, mock server, fixtures, assertions, and tracing configuration"}
{"id":"flywheel_connectors-ivb","title":"fcp.datadog: Metrics querying with Datadog query language","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:16:19.02983816-05:00","created_by":"ubuntu","updated_at":"2026-01-11T12:31:34.363701126-05:00","closed_at":"2026-01-11T12:31:34.363701126-05:00","close_reason":"CONSOLIDATED: Merged into parent connector bead flywheel_connectors-cu3 (fcp.datadog: Datadog Observability Platform Connector)"}
{"id":"flywheel_connectors-ixwa","title":"fcp.semanticscholar connector - Academic paper search and citation analysis","description":"# fcp.semanticscholar - Semantic Scholar Connector (FCP2)\n\n## Goal\nProvide an FCP2-compliant Semantic Scholar connector for academic search and citation graph traversal (complements `fcp.arxiv`).\n\n## Manifest archetypes (closed set)\n- `knowledge`\n- `operational`\n\n## Zone model\n- Single-zone bound: one connector instance ↔ one `ZoneId`.\n- Treat results as external/untrusted content unless policy says otherwise.\n\n## External surface\n### NetworkConstraints\nDefault-deny; allow only `api.semanticscholar.org:443`.\n\n### Credential injection\n- Optional API key via `CredentialId` (for higher limits).\n\n## Capability model (illustrative)\n- `semanticscholar.search.read`\n- `semanticscholar.paper.read`\n- `semanticscholar.author.read`\n- `semanticscholar.citations.read`\n\n## Operations (representative)\n- paper search\n- paper details\n- author info\n- citations/references traversal\n- recommendations (if available)\n\n## Tests\n- Mock-only unit/integration tests with wiremock.\n- E2E compliance run validates default deny + NetworkConstraints.\n\n## Acceptance Criteria\n- Passes connector compliance runner.\n- Deterministic tests; no live Semantic Scholar calls in unit tests.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T22:06:31.541206149-05:00","created_by":"ubuntu","updated_at":"2026-01-15T08:37:54.162462892-05:00","labels":["academic","connector","connectors","fcp2","request-response","tier-3","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-ixwa","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T22:08:32.888231383-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-ixwa","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T22:08:32.915409177-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-ixwa","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:32:04.533087245-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ixwa","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:48:07.639427823-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ixwa","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:48:07.797357293-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ixwa","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T03:48:07.967924459-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ixwa","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:48:08.134292766-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ixwa","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T03:48:08.313402035-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ixwa","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T07:10:00.369471581-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ixwa","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:10:00.827838754-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ixwa.1","title":"fcp.semanticscholar: Manifest + Capability Map (FCP2)","description":"# fcp.semanticscholar: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the Semantic Scholar connector manifest contract:\n- archetypes (`knowledge`, `operational`)\n- operations + schema IDs\n- capability families + per-operation caps\n- NetworkConstraints allowlist\n\n## Acceptance Criteria\n- Complete manifest spec stored here.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:48:15.495209781-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:48:15.495209781-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-ixwa.1","depends_on_id":"flywheel_connectors-ixwa","type":"parent-child","created_at":"2026-01-15T03:48:15.496428728-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ixwa.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:48:43.797307007-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ixwa.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:48:43.959927353-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ixwa.2","title":"fcp.semanticscholar: Core Search + Citation Graph","description":"# fcp.semanticscholar: Core Search + Citation Graph\n\n## Goal\nImplement:\n- paper search\n- paper details\n- author info\n- citations/references traversal\n\n## Requirements\n- Capability gated.\n- Rate limits enforced.\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:48:22.981872666-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:28:13.633015948-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-ixwa.2","depends_on_id":"flywheel_connectors-ixwa","type":"parent-child","created_at":"2026-01-15T03:48:22.983162025-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ixwa.2","depends_on_id":"flywheel_connectors-ixwa.1","type":"blocks","created_at":"2026-01-15T03:48:44.136139024-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ixwa.3","title":"TEST: Semantic Scholar Connector Unit/Integration Tests (mock-only)","description":"# TEST: Semantic Scholar Connector Unit/Integration Tests (mock-only)\n\n## Must cover\n- Manifest determinism + interface_hash.\n- Error taxonomy mapping.\n- Redaction.\n\n## Acceptance Criteria\n- Deterministic.\n- Structured JSON logs.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:48:29.40388328-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:48:29.40388328-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-ixwa.3","depends_on_id":"flywheel_connectors-ixwa","type":"parent-child","created_at":"2026-01-15T03:48:29.40549179-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ixwa.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T03:48:44.373751014-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ixwa.4","title":"E2E: Semantic Scholar Connector Compliance Run","description":"# E2E: Semantic Scholar Connector Compliance Run\n\n## Goal\nAdd Semantic Scholar scenarios to the shared compliance harness.\n\n## Scenarios\n- Default deny.\n- Network guard allow/deny.\n\n## Acceptance Criteria\n- `cargo test --package fcp-e2e --features semanticscholar` passes deterministically.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:48:34.860438268-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:48:34.860438268-05:00","labels":["conformance","connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-ixwa.4","depends_on_id":"flywheel_connectors-ixwa","type":"parent-child","created_at":"2026-01-15T03:48:34.86175004-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ixwa.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T03:48:44.609500757-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ixwa.5","title":"fcp.semanticscholar: Provisioning Automation (Optional API Key + Bounds)","description":"## Goal\nAutomate provisioning and configuration with minimal human steps.\n\nThis bead owns:\n- auth setup (OAuth / API keys / webhook secrets) via `CredentialObject`/`CredentialId` (egress proxy injection preferred)\n- endpoint configuration\n- `fcp doctor` readiness checks\n- deterministic, mockable provisioning flows\n\n## FCP2 requirements\n- Secrets never touch disk.\n- Provisioning is deterministic and testable.\n- Error messages are actionable and do not leak secrets/PII.\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Provisioning emits structured logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:14:46.391008663-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:54.222477915-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-ixwa.5","depends_on_id":"flywheel_connectors-ixwa","type":"parent-child","created_at":"2026-01-15T07:14:46.45224342-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ixwa.5","depends_on_id":"flywheel_connectors-ixwa.1","type":"blocks","created_at":"2026-01-15T07:14:47.072017981-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-jeq","title":"fcp.salesforce: Custom object support","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:17:56.447672907-05:00","created_by":"ubuntu","updated_at":"2026-01-11T12:09:27.333687786-05:00","closed_at":"2026-01-11T12:09:27.333687786-05:00","close_reason":"CONSOLIDATED: All Salesforce sub-features merged into comprehensive parent connector bead flywheel_connectors-4m0 (fcp.salesforce: Salesforce CRM Platform Connector)"}
{"id":"flywheel_connectors-k4ka","title":"fcp-graphql: GraphQL Client Infrastructure Library","description":"# fcp-graphql: GraphQL Client Infrastructure Library\n\n## Overview\nShared GraphQL client library for connectors that interface with GraphQL APIs (Linear, GitHub, Notion, Shopify, etc.).\n\n## Features\n\n### Core Client\n- Async GraphQL client with connection pooling\n- Query/mutation/subscription support\n- Automatic retry with exponential backoff\n- Request batching and deduplication\n- Query complexity estimation\n\n### Query Building\n- Type-safe query builder\n- Fragment composition\n- Variable handling\n- Directive support\n\n### Pagination\n- Cursor-based pagination (Relay-style)\n- Offset-based pagination\n- Automatic page traversal\n- Total count estimation\n\n### Subscriptions\n- WebSocket transport\n- Reconnection handling\n- Subscription multiplexing\n- Heartbeat management\n\n### Introspection\n- Schema introspection caching\n- Type validation\n- Deprecation warnings\n\n### Error Handling\n- GraphQL error parsing\n- Partial data handling\n- Network error recovery\n- Rate limit detection\n\n## Dependencies\n- reqwest (HTTP)\n- tokio-tungstenite (WebSocket)\n- serde_json\n- fcp-core\n\n## Consumers\n- fcp.linear (GraphQL-only API)\n- fcp.github (GraphQL API v4)\n- fcp.notion (REST+GraphQL hybrid)\n- fcp.shopify (Admin API)\n\n## Testing\n- Mock GraphQL server\n- Response recording/playback\n- Schema validation tests\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-11T12:10:53.615224102-05:00","created_by":"ubuntu","updated_at":"2026-01-15T05:28:13.529011322-05:00","labels":["connector-utility"],"dependencies":[{"issue_id":"flywheel_connectors-k4ka","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:36:47.035227231-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-k57","title":"fcp.jira: Bidirectional Beads sync integration","description":"# fcp.jira: Bidirectional Beads sync integration (FCP2)\n\n## Goal\nImplement **bidirectional synchronization** between Flywheel Beads issues and Jira issues for the connector’s bound zone.\n\nThis enables:\n- Jira → Beads: convert incoming Jira work into native Beads (agent-ready tasks)\n- Beads → Jira: propagate Beads updates back into Jira to keep humans in their existing workflows\n\n## Non-goals\n- “Backwards compatibility” with any older sync format or FCP1 behavior.\n- Cross-zone sync from a single connector instance (still single-zone bound).\n\n## Core requirements (hard)\n- **Deterministic mapping** (same inputs produce same object updates).\n- **Loop prevention** (Jira update triggers Beads update triggers Jira update… must stop).\n- **Conflict detection** (concurrent edits) with explicit policy:\n  - default: fail-closed + raise a conflict event\n  - optional: last-write-wins only if explicitly enabled\n- **Idempotency**: repeated webhook deliveries or retries must not duplicate issues/comments.\n\n## Scope\n### Mapping surface (minimum viable)\n- Bead fields ↔ Jira fields:\n  - title ↔ summary\n  - description ↔ description (ADF/markdown conversion)\n  - status ↔ workflow status\n  - priority ↔ priority mapping\n  - labels ↔ labels\n  - assignee ↔ assignee\n  - due date ↔ duedate\n  - estimates ↔ timeoriginalestimate (if policy allows)\n  - bead_id ↔ a dedicated custom field (or label) for stable correlation\n\n### Sync directions\n- `jira_to_beads`\n- `beads_to_jira`\n- `bidirectional`\n\n### Event sources\n- Jira webhooks (issue created/updated/commented/transitioned).\n- Beads change events (local event stream from the platform).\n\n## Connector state model (FCP2)\nThis bead MUST use the platform connector-state mechanism:\n- Store a persistent mapping table:\n  - `bead_id ↔ jira_issue_id/key`\n  - last_seen_revision / fingerprint\n  - last_sync_origin (jira|beads)\n  - tombstones for deletions/archives\n- Use singleton-writer lease semantics if the connector runs in multiple locations.\n\n## Capability + approval model\nIllustrative capabilities:\n- `jira.issues.read` / `jira.issues.write`\n- `jira.comments.write`\n- `jira.webhooks.manage` (dangerous; provisioning only)\n\nPolicy guidance:\n- Creating/transitioning issues in Jira is a write and must produce receipts/audit.\n- Bulk sync operations may require an ApprovalToken depending on org policy.\n\n## Deliverables\n- A sync engine with:\n  - field mapping layer\n  - ADF ↔ markdown conversion\n  - conflict detection + resolution policy\n  - loop prevention via origin stamps + revision fingerprints\n- Operation schemas:\n  - `jira.sync.push_bead`\n  - `jira.sync.pull_issue`\n  - `jira.sync.reconcile`\n- Structured logging:\n  - correlation_id per sync run\n  - per-item reason codes for skips/conflicts\n\n## Test strategy (MUST)\n### Unit/integration (mock-only)\n- Webhook replay tests:\n  - duplicate webhook deliveries do not duplicate Beads/Jira updates\n- Conflict tests:\n  - concurrent edits produce conflict events and do not silently overwrite\n- Loop tests:\n  - Beads update → Jira update → webhook does not re-trigger Beads update\n- State tests:\n  - mapping table persists across restarts\n  - lease enforcement prevents double writers\n\n### E2E compliance\n- Use the shared compliance runner to confirm:\n  - default deny on all sync operations\n  - receipts/audit for all writes\n  - NetworkConstraints enforcement\n\n## Acceptance criteria\n- A round-trip sync of a single issue converges in ≤2 sync cycles without loops.\n- Conflict cases are explicit, logged, and surfaced as events.\n- Sync behavior is deterministic and idempotent.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:14:39.23794671-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:14:39.677884568-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-k57","depends_on_id":"flywheel_connectors-x9af","type":"parent-child","created_at":"2026-01-15T02:28:43.362192244-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-k57","depends_on_id":"flywheel_connectors-x9af.1","type":"blocks","created_at":"2026-01-15T04:14:42.70678057-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-kjk","title":"fcp.jira: Issue CRUD with custom fields support","description":"# fcp.jira: Issue CRUD with Custom Fields Support\n\n## Goal\nImplement the core Jira issue lifecycle operations with robust custom-field handling.\n\n## Scope\nOperations (representative):\n- `jira.issue.create`\n- `jira.issue.get`\n- `jira.issue.update`\n- `jira.issue.delete` (Dangerous)\n- `jira.issue.assign`\n- `jira.issue.link` / `jira.issue.unlink`\n\n## Key requirements\n- Capability gated (read vs write vs delete).\n- Custom fields:\n  - discover field IDs and contexts\n  - handle typed values correctly (selects, multi-select, cascading, user, sprint/epic link)\n  - avoid relying on field display names (unstable)\n- Text format:\n  - Jira Cloud uses ADF; implement deterministic markdown ↔ ADF conversions\n- Idempotency / receipts:\n  - writes emit OperationReceipt + AuditEvents\n  - delete is Dangerous and should require ApprovalToken `Execution` scope\n\n## Tests\n- Mock-only tests cover:\n  - field discovery + context differences\n  - ADF conversion round-trip\n  - permission failures and rate limits\n\n## Acceptance Criteria\n- Issue CRUD works across Cloud and Server/DC with explicit feature gating.\n- Custom fields are handled deterministically and safely.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:14:33.52801393-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:06:18.31015869-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-kjk","depends_on_id":"flywheel_connectors-x9af","type":"parent-child","created_at":"2026-01-15T02:28:43.434027929-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-kjk","depends_on_id":"flywheel_connectors-x9af.1","type":"blocks","created_at":"2026-01-15T04:06:23.728651556-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-krt","title":"fcp-telemetry: Unified Metrics, Logging, and Tracing Library","description":"# fcp-telemetry: Unified Metrics, Logging, and Tracing Library\n\n## Overview\nComprehensive observability library providing structured logging, metrics collection, and distributed tracing for FCP connectors.\n\n## Structured Logging\n- JSON output format\n- Log level filtering (trace → error)\n- Automatic field injection:\n  - Correlation ID\n  - Zone ID\n  - Connector ID\n  - Request ID\n- Sensitive data redaction\n- Async log writing\n\n## Metrics Collection\n- Counter metrics (requests, errors)\n- Gauge metrics (connections, queue depth)\n- Histogram metrics (latencies, sizes)\n- Timer helpers\n- Label/tag support\n- Pre-defined FCP metrics\n\n## Distributed Tracing\n- Span creation and nesting\n- Context propagation (W3C Trace Context)\n- Trace ID generation\n- Span attributes\n- Sampling strategies\n- Cross-connector correlation\n\n## Export Formats\n- Prometheus exposition format\n- OTLP (OpenTelemetry Protocol)\n- JSON logs to stdout\n- Custom sinks\n\n## Integration\n- tracing crate integration\n- HTTP middleware for auto-instrumentation\n- FCP operation decoration\n- Health endpoint exposure\n\n## Performance\n- Low overhead (\u003c1% CPU)\n- Async export\n- Batch flushing\n- Sampling support\n\n## Dependencies\n- tracing, tracing-subscriber\n- opentelemetry, opentelemetry-otlp\n- metrics, fcp-core","status":"closed","priority":0,"issue_type":"feature","created_at":"2026-01-11T10:37:41.061916979-05:00","created_by":"ubuntu","updated_at":"2026-01-11T12:47:47.279327696-05:00","closed_at":"2026-01-11T12:47:47.279327696-05:00","close_reason":"Implemented fcp-telemetry crate with structured logging, metrics, distributed tracing, Prometheus and OTLP export"}
{"id":"flywheel_connectors-kt9r","title":"[FCP2] Credential Injection: SecretObject + CredentialObject + Secretless Egress (Zeroize)","description":"# [FCP2] Credential Injection: SecretObject + CredentialObject + Secretless Egress (Zeroize)\n\n## Goal\nDefine how credentials (API keys, OAuth tokens, webhook secrets, database passwords, client certs) flow to connectors in a way that is:\n- mechanically capability-gated\n- single-zone bound\n- audited and explainable\n- secret-safe (no disk; no logs; prefer no plaintext in connector memory)\n\n## Why this is MVP\nConnectors cannot do useful work without credentials, and credentials are one of the highest-value compromise targets. If we get this wrong, every connector becomes an exfiltration vector.\n\nThis bead defines the *platform contract* for credential access, so connector authors can implement auth once and rely on mechanical enforcement.\n\n## NORMATIVE object model (Spec + `docs/fcp_model_connectors_rust.md`)\n\n### 1) `SecretObject` + `SecretAccessToken`\n- Secrets are stored/represented as mesh objects (`SecretObject`).\n- Using/reconstructing a secret requires an explicit, short-lived authorization (`SecretAccessToken`).\n- Every successful access MUST emit an `AuditEvent` (e.g., `event_type = \"secret.access\"`) and MUST NOT include secret bytes.\n- Secret material MUST be zeroized immediately after use.\n\nNote: Threshold secrets (k-of-n) and wrapped shares are part of the spec security model. Even if we ship a simplified MVP path, the *interfaces* must not preclude threshold reconstruction.\n\n### 2) `CredentialObject` + `CredentialId` (\"secretless\" by default)\nA `CredentialObject` is a zone-bound, auditable handle describing *how to apply* a secret to outbound traffic:\n- maps `CredentialId` -\u003e `SecretId`\n- defines application method (e.g., HTTP header format)\n- optionally binds allowed hosts for defense-in-depth\n\nConnectors SHOULD NOT receive raw credential bytes. They should reference a `CredentialId` in egress requests and rely on MeshNode enforcement.\n\n### 3) Capability constraints: `credential_allow`\nCapabilities grant *permission to use credentials* by listing allowed `CredentialId`s:\n- `CapabilityConstraints.credential_allow` is the authoritative allow-list.\n- Credential permissions are checked at the boundary (egress proxy / host), not by connector convention.\n\n## Preferred flow: secretless credential injection via MeshNode egress proxy\n1. Connector prepares an `EgressHttpRequest` (or `EgressTcpConnectRequest`) and sets `credential = Some(CredentialId)`.\n2. Egress proxy verifies ALL of the following:\n   - `CredentialId` ∈ invoking capability’s `credential_allow`\n   - destination host/port conforms to `NetworkConstraints`\n   - destination host is allowed by the referenced `CredentialObject.host_allow` (when present)\n   - policy allows the operation’s safety tier in this zone (fail closed)\n3. Proxy fetches/validates the referenced `CredentialObject` and `SecretObject` and injects credential material at the network boundary.\n4. Proxy emits an `AuditEvent` describing usage (credential id, host, purpose) without any secret bytes.\n\nThis yields \"secretless connectors\" where plaintext credentials never enter connector memory.\n\n## When secret materialization is unavoidable (explicit, audited, bounded)\nSome connectors may need to sign payloads locally (HMAC), perform mTLS client auth, or interact with non-proxied libraries.\n\nIn these cases:\n- The connector (or host on its behalf) must obtain a `SecretAccessToken`.\n- Reconstruction/use must be short-lived and bounded.\n- Every materialization MUST be audited.\n- Dangerous operations MUST require explicit ApprovalToken policy (and emit DecisionReceipt on deny).\n- Secret bytes MUST be zeroized on all paths, including errors and panics.\n\n## Manifest / schema integration requirements\n- Credential IDs MUST NOT be encoded inside capability IDs.\n- Operations that need credentials must require a capability whose constraints include the needed `CredentialId` in `credential_allow`.\n- If credentials are host-bound, host canonicalization rules MUST match the NetworkConstraints canonicalization rules.\n\n## Tests (owned by `flywheel_connectors-nnja`)\n- Unit: `CredentialObject` validation (format, host binding, canonicalization)\n- Unit: `credential_allow` enforcement logic (allow/deny)\n- Integration: egress proxy injection (header injection, deny wrong host, deny missing `credential_allow`)\n- Adversarial: prove connectors cannot obtain secret bytes unless explicitly granted and audited\n- Audit: `secret.access` events emitted with redaction guarantees\n\n## Acceptance Criteria\n- Secretless credential injection works end-to-end with mechanical enforcement at the boundary.\n- No secrets touch disk; no secret bytes appear in logs or error messages.\n- Unauthorized credential use fails closed with a DecisionReceipt and evidence.\n- Secret materialization (when required) is explicit, audited, short-lived, and zeroized.\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T02:53:07.542098129-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:36:40.29896316-05:00","labels":["fcp2","mvp","secrets","security"],"dependencies":[{"issue_id":"flywheel_connectors-kt9r","depends_on_id":"flywheel_connectors-1n78","type":"blocks","created_at":"2026-01-15T02:54:36.462831896-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-kt9r","depends_on_id":"flywheel_connectors-1n78.7","type":"blocks","created_at":"2026-01-15T02:54:36.560080415-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-kt9r","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T02:54:36.633658392-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-l25","title":"fcp.terraform: Resource import for existing infrastructure","description":"# fcp.terraform: Resource import for existing infrastructure (FCP2)\n\n## Goal\nAllow controlled `terraform import` so agents can bring existing infrastructure under state management.\n\nImport mutates state and can be risky; require approval gating.\n\n## Scope\n- Import a resource into state with explicit address + provider id.\n- Validate inputs and prevent injection into CLI arguments.\n- Emit receipts/audit for the import action.\n\n## Capability model (illustrative)\n- `terraform.import` (dangerous)\n\n## FCP2 requirements\n- Single-zone binding.\n- Sandbox profile restricts filesystem + process execution.\n- NetworkConstraints default deny unless provider APIs are explicitly allowed.\n- Approval gating recommended.\n\n## Deliverables\n- Operation schema:\n  - `terraform.import`\n- Input validation:\n  - strict address grammar\n  - strict provider id format\n\n## Test strategy (MUST)\n- Unit tests with a terraform shim for:\n  - arg construction\n  - approval gating\n  - audit/receipt emission\n\n## Acceptance criteria\n- Imports are mechanically authorized, safe, and auditable.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:15:01.405312258-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:45:34.771010538-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-l25","depends_on_id":"flywheel_connectors-r6ty","type":"parent-child","created_at":"2026-01-15T02:33:01.331962482-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-l25","depends_on_id":"flywheel_connectors-r6ty.1","type":"blocks","created_at":"2026-01-15T04:45:39.686091734-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-l25","depends_on_id":"flywheel_connectors-n6r","type":"blocks","created_at":"2026-01-15T04:45:40.030037036-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-l85v","title":"TEST: fcp-security Unit Test Suite","description":"# TEST: fcp-security Unit Test Suite\n\n## Scope\nComprehensive unit tests for security testing and audit framework.\n\n## Test Categories\n\n### Capability Token Validation\n- [ ] Ed25519 signature verification\n- [ ] Token expiration checks\n- [ ] Issuer/audience validation\n- [ ] Capability scope enforcement\n- [ ] Resource constraint validation\n\n### Zone Security\n- [ ] Zone boundary enforcement\n- [ ] Trust level validation\n- [ ] Cross-zone access denial\n- [ ] Zone hierarchy traversal\n\n### Provenance Tracking\n- [ ] Taint label propagation\n- [ ] Origin tracking\n- [ ] Causal chain verification\n\n### Input Validation\n- [ ] SQL injection patterns\n- [ ] XSS patterns\n- [ ] Command injection patterns\n- [ ] Path traversal patterns\n- [ ] SSRF patterns\n\n### Cryptographic Operations\n- [ ] Key generation\n- [ ] Signature creation/verification\n- [ ] Secure random generation\n- [ ] Constant-time comparisons\n\n### Audit Logging\n- [ ] Security event capture\n- [ ] Tamper-evident logging\n- [ ] Correlation ID tracking\n\n## Coverage Target: \u003e98% (security-critical)","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-11T12:12:48.845571789-05:00","created_by":"ubuntu","updated_at":"2026-01-15T03:22:24.386898237-05:00","closed_at":"2026-01-15T03:22:24.386898237-05:00","close_reason":"Superseded - parent bead fcp-security is closed. Security testing is now covered by crypto tests (2ukh), capability tests (nlz4), and zone crypto tests (9smo).","dependencies":[{"issue_id":"flywheel_connectors-l85v","depends_on_id":"flywheel_connectors-1j7","type":"blocks","created_at":"2026-01-11T12:21:35.936768789-05:00","created_by":"ubuntu"}]}
{"id":"flywheel_connectors-l9wf","title":"TEST: FCPS/FCPC Protocol Unit Tests (Frame Parsing, AEAD, MAC Verification)","description":"# TEST: FCPS/FCPC Protocol Unit Tests\n\n## Scope\nComprehensive unit tests for wire protocol frame parsing and cryptographic verification.\n\n## FCPS (Symbol Plane) Tests\n\n### Frame Parsing\n- [ ] Valid frame parses correctly\n- [ ] Magic bytes validation (\"FCPS\")\n- [ ] Version field bounds checking\n- [ ] Flag combinations parsed correctly\n- [ ] Symbol count matches actual symbols\n- [ ] Total payload length matches content\n- [ ] Zone ID hash is 32 bytes exactly\n- [ ] Object ID is 32 bytes exactly\n\n### Symbol Record Parsing\n- [ ] ESI (encoding symbol identifier) extraction\n- [ ] K parameter extraction\n- [ ] Data length matches symbol_size\n- [ ] Auth tag is 16 bytes exactly\n\n### Datagram Envelope\n- [ ] Session ID extraction (16 bytes)\n- [ ] Sequence number parsing (u64 LE)\n- [ ] MAC extraction (16 bytes)\n- [ ] MAC verification success with correct key\n- [ ] MAC verification failure with wrong key\n- [ ] MAC verification failure with tampered frame\n- [ ] Direction byte in MAC context\n\n### Per-Symbol AEAD\n- [ ] Sender key derivation matches spec\n- [ ] Nonce derivation: frame_seq || esi\n- [ ] AAD binding includes all required fields\n- [ ] Decrypt success with correct key\n- [ ] Decrypt failure with wrong key\n- [ ] Decrypt failure with tampered ciphertext\n- [ ] Decrypt failure with wrong AAD\n\n### Frame Flags\n- [ ] REQUIRES_ACK flag handling\n- [ ] COMPRESSED flag handling\n- [ ] ENCRYPTED flag handling\n- [ ] STREAMING + STREAM_END combination\n- [ ] HAS_CAP_TOKEN flag handling\n- [ ] ZONE_CROSSING flag handling\n- [ ] CONTROL_PLANE flag handling\n- [ ] Invalid flag combinations rejected\n\n## FCPC (Control Plane) Tests\n\n### Frame Structure\n- [ ] Canonical CBOR envelope parsing\n- [ ] Object type discrimination\n- [ ] Length prefix validation\n- [ ] Backpressure frame parsing\n\n### Control Objects\n- [ ] ControlPlaneObject type dispatch\n- [ ] Session control messages\n- [ ] Capability objects\n- [ ] Revocation objects\n- [ ] Checkpoint objects\n\n## DoS Resistance Tests\n- [ ] Oversized frame rejected\n- [ ] Invalid symbol count rejected\n- [ ] Frame exceeding MTU rejected\n- [ ] Memory bounds on malformed input\n\n## Golden Vectors\nEach test category needs:\n- Valid frame bytes (hex)\n- Expected parsed structure\n- Invalid frame bytes that MUST be rejected\n\n## Fuzz Targets\n- FCPS frame parsing\n- FCPC frame parsing\n- Symbol record parsing\n- Datagram envelope parsing\n\n## Logging Requirements\n```json\n{\n  \"test_name\": \"...\",\n  \"protocol\": \"fcps|fcpc\",\n  \"operation\": \"parse|verify|encode\",\n  \"frame_size\": 1234,\n  \"result\": \"pass|fail\",\n  \"error_code\": \"optional\"\n}\n```\n\n## Acceptance Criteria\n- All parsing paths have test coverage\n- DoS protections verified\n- Golden vectors match exactly\n- Fuzz targets find no crashes\n\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T02:55:24.993533714-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:55:24.993533714-05:00","labels":["fcp2","mvp","protocol","testing"],"dependencies":[{"issue_id":"flywheel_connectors-l9wf","depends_on_id":"flywheel_connectors-1n78.12","type":"blocks","created_at":"2026-01-15T02:55:32.381014822-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-l9wf","depends_on_id":"flywheel_connectors-1n78.13","type":"blocks","created_at":"2026-01-15T02:55:32.451877976-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-l9wf","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:23:46.679074526-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lib","title":"fcp.zendesk: Customer Lookup","description":"# fcp.zendesk: Customer Lookup (FCP2)\n\n## Goal\nEnable agents to retrieve customer context safely:\n- look up users/requesters\n- fetch basic profile metadata\n- list recent tickets for context\n\nThis is read-heavy but touches PII.\n\n## Scope\n- Search users by email/name/external id.\n- Fetch user profile (minimize returned PII).\n- List tickets for a user (pagination).\n\n## Capability model (illustrative)\n- `zendesk.users.read`\n- `zendesk.tickets.read`\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- PII hygiene:\n  - never log emails/phone numbers\n  - return only the minimal fields required for support workflows\n\n## Deliverables\n- Operation schemas:\n  - `zendesk.user.search`\n  - `zendesk.user.get`\n  - `zendesk.user.tickets.list`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - search pagination\n  - redaction rules\n\n## Acceptance criteria\n- Customer context can be retrieved without leaking PII into logs.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:21:48.246203316-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:35:46.34512984-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-lib","depends_on_id":"flywheel_connectors-pwff","type":"parent-child","created_at":"2026-01-15T02:34:38.506175374-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lib","depends_on_id":"flywheel_connectors-pwff.1","type":"blocks","created_at":"2026-01-15T04:35:52.028538674-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lj2","title":"fcp-oauth: Shared OAuth2/OAuth1 Authentication Library","description":"# fcp-oauth: Shared OAuth2/OAuth1 Authentication Library\n\n## Overview\nUnified OAuth library supporting OAuth 2.0 (authorization code, client credentials, PKCE) and OAuth 1.0a flows for connectors requiring user authorization.\n\n## Supported Flows\n\n### OAuth 2.0 Authorization Code (with PKCE)\n- Authorization URL generation\n- State parameter for CSRF protection\n- PKCE challenge/verifier\n- Token exchange\n- Refresh token handling\n\n### OAuth 2.0 Client Credentials\n- Service-to-service authentication\n- Token caching with TTL\n- Automatic refresh\n\n### OAuth 1.0a (Twitter legacy)\n- Request token acquisition\n- User authorization\n- Access token exchange\n- HMAC-SHA1 signature generation\n\n## Token Management\n- In-memory token storage (no disk!)\n- Automatic refresh before expiry\n- Token validation\n- Secure token handling\n\n## Provider Support\n- Google (OAuth 2.0 + PKCE)\n- GitHub (OAuth 2.0)\n- Twitter/X (OAuth 1.0a + OAuth 2.0)\n- Slack (OAuth 2.0)\n- Notion (OAuth 2.0)\n- Linear (OAuth 2.0)\n- Custom providers via configuration\n\n## Security\n- State parameter validation\n- PKCE enforcement where supported\n- Secure redirect URI handling\n- Token encryption at rest\n\n## Dependencies\n- reqwest, serde_json, chrono, base64\n- fcp-core (for FCP integration)","status":"closed","priority":0,"issue_type":"feature","created_at":"2026-01-11T10:35:45.591389925-05:00","created_by":"ubuntu","updated_at":"2026-01-11T13:38:26.814607347-05:00","closed_at":"2026-01-11T13:38:26.814607347-05:00","close_reason":"Implemented fcp-oauth crate with OAuth 2.0 (authorization code + PKCE, client credentials), OAuth 1.0a, token management, and pre-configured providers. All 25 tests passing."}
{"id":"flywheel_connectors-lszk","title":"[FCP2] Connector Library: V2-Compliant Connectors","description":"# [FCP2] Connector Library: V2-Compliant Connectors\n\n## Goal\nBuild a library of production connectors that **fully comply** with the FCP V2 platform:\n- single-zone binding\n- default deny via capabilities\n- revocation freshness enforcement\n- correct receipts and audit events\n- sandbox + network constraints\n- no secrets on disk; no secret logging\n\nThis epic intentionally assumes the **core platform** exists first.\n\n## Entry criteria (what must exist before connectors are real)\nConnectors should not begin until these are available:\n- `[FCP2] Connector SDK (Rust)`\n- `[FCP2] Connector Manifest (TOML)`\n- `[FCP2] Policy Engine` (DecisionReceipts + reason codes)\n- `[FCP2] Sandbox + Egress Proxy`\n- `[FCP2] MeshNode` (enforcement boundary)\n- `[FCP2] Registry + Supply Chain` (install/verify)\n- `[FCP2] Conformance` (golden vectors + fuzz + compliance runner)\n\n## Definition of Done\n- Each connector has:\n  - a manifest with explicit capabilities + sandbox profile\n  - a conformance test suite (unit + integration with mocks)\n  - E2E compliance run output\n  - performance checks where applicable\n  - no real external API calls in unit tests\n\n## Notes\n- Backwards compatibility is not a goal. Implement the V2 model directly.\n- Mechanical compliance checking is part of the conformance suite.\n\n## Success Criteria\n- Every connector epic follows `flywheel_connectors-lszk.5` (base beads `.1`..`.4`, state model, NetworkConstraints, etc.).\n- Every connector has mock-only unit/integration coverage per `flywheel_connectors-h32`.\n- Tier-1 connectors (Telegram, Discord, OpenAI, Anthropic) each have:\n  - a complete manifest/capability map\n  - provisioning automation (where applicable)\n  - passing E2E compliance runs (`flywheel_connectors-e3i9` + `flywheel_connectors-1n78.21.5`).\n- No connector requires hard-coded pricing tables; usage metrics are emitted and policy can compute costs externally.\n","status":"open","priority":1,"issue_type":"epic","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:23:11.697355437-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:26:46.343812378-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-lszk","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T01:23:17.655440103-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T01:23:17.706226413-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T01:23:17.756141701-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk","depends_on_id":"flywheel_connectors-1n78.17","type":"blocks","created_at":"2026-01-15T01:23:17.804999867-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk","depends_on_id":"flywheel_connectors-1n78.21","type":"blocks","created_at":"2026-01-15T01:23:17.854836968-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T01:51:15.234666189-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk","depends_on_id":"flywheel_connectors-1n78.27","type":"blocks","created_at":"2026-01-15T01:51:15.282726147-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T01:51:15.336841523-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk","depends_on_id":"flywheel_connectors-1n78.29","type":"blocks","created_at":"2026-01-15T01:51:15.397328021-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk","depends_on_id":"flywheel_connectors-1n78.28","type":"blocks","created_at":"2026-01-15T01:51:15.448030627-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T01:51:15.497823079-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.1","title":"fcp.telegram - Telegram Connector (V2)","description":"# fcp.telegram - Telegram Connector (FCP2)\n\n## Goal\nProvide a **fully FCP2-compliant** Telegram Bot integration for secure automation in high-risk chat surfaces.\n\nThis connector must be:\n- **Single-zone bound** for its lifetime (one instance ↔ one `ZoneId`).\n- **Default-deny**: every external action requires explicit CapabilityTokens.\n- **Mechanically sandboxed**: NetworkConstraints + OS/WASI sandbox enforced by the host.\n- **Secrets-safe**: bot tokens never touch disk; never appear in logs.\n\n## Manifest archetypes (closed set)\n- `bidirectional` (send + receive)\n- `streaming` (message/update events)\n- `operational` (request/response actions)\n\n\u003e Note: polling/webhooks are *interaction patterns*, not manifest archetype values.\n\n## Threat model (why this connector is special)\nTelegram content is an adversarial prompt surface.\n\nHard requirements:\n- All inbound Telegram content is tainted as **external input** by default.\n- The connector must emit provenance/taint metadata so policy can enforce:\n  - deny-by-default cross-zone data movement\n  - declassification only with explicit ApprovalToken scope\n  - sanitizer receipts for any “cleaning” step\n\n## Zone model (mechanical)\n\n\u003c!-- fcp2-single-zone-note --\u003e\n**FCP2 single-zone binding note:** A connector instance binds to exactly one `ZoneId` for its entire lifetime.\nThe *\"zones\"* described in this section are a **recommended deployment pattern** (run separate connector instances in separate zones with different capability grants/policies) and/or conceptual risk tiers.\nThe connector MUST NOT multiplex multiple zones internally.\n\nEach connector instance binds to exactly one zone. Recommended zone naming conventions (policy-owned, not connector-owned):\n- `z:community:telegram:\u003cgroup_or_guild\u003e` (semi-trusted communities)\n- `z:public:telegram:\u003cchannel\u003e` (public channels)\n- `z:owner:telegram:\u003cdm\u003e` (explicitly opted-in DMs)\n\n## External surface\n### NetworkConstraints (MUST)\n- Allow egress only to Telegram Bot API endpoints:\n  - `api.telegram.org:443`\n- Deny IP literals by default; require hostname canonicalization.\n- No raw sockets in strict/moderate sandboxes; all egress goes through the Network Guard.\n\n### Auth / credential injection\n- Bot token provided via FCP2 `CredentialObject`/`CredentialId` injection (egress proxy preferred).\n- Never persist token (or derived bearer headers) to disk.\n\n## Capability model (illustrative, final IDs defined in manifest bead)\n**NORMATIVE constraint:** capability IDs must not encode hosts/ports.\n\nCapability families:\n- `telegram.messages.read` (receive/poll updates; creates EventEnvelopes)\n- `telegram.messages.send` (side-effecting send)\n- `telegram.media.read` (download attachments)\n- `telegram.media.send` (upload media)\n- `telegram.chats.read` (list/get chat metadata)\n- `telegram.members.read` (chat member info; treat as PII)\n- `telegram.webhooks.manage` (Dangerous; requires explicit policy + ApprovalToken `Execution` scope)\n\n## Operations \u0026 event topics (initial slice)\nKeep the first slice tight and correct; expand after conformance is stable.\n\n### Operations\n- `telegram.send_message` (side-effect; requires `telegram.messages.send`)\n- `telegram.send_media` (side-effect; requires `telegram.media.send`)\n- `telegram.get_chat` / `telegram.list_chats` (read-only; requires `telegram.chats.read`)\n- `telegram.get_updates` (streaming source; requires `telegram.messages.read`)\n- `telegram.download_file` (read-only; requires `telegram.media.read`)\n\n### Event topics\n- `telegram.message.new`\n- `telegram.message.edited`\n- `telegram.chat.member_joined`\n- `telegram.chat.member_left`\n\n## State model\nTelegram polling is inherently stateful.\n\n- Use **singleton-writer** state with a lease (to avoid two instances consuming the same update stream).\n- Persist cursor/offset in a state object (e.g., last `update_id` + replay/ack cursor).\n- Side-effect idempotency:\n  - Prefer **fail-closed** on uncertain outcomes (timeout after request sent) to avoid duplicate sends.\n  - When the remote API provides a definitive message id response, bind it to an OperationReceipt.\n\n## Rate limiting \u0026 timeouts\n- Enforce Telegram Bot API limits mechanically (connector + platform). No “best effort”.\n- All network calls must be bounded by timeouts; no unbounded long-polls outside allowed sandbox policy.\n\n## Observability \u0026 audit\n- Structured logs with redaction (no token, no raw message bodies by default).\n- Emit AuditEvents for:\n  - credential injection usage\n  - side-effecting sends\n  - webhook configuration changes\n  - repeated denials / policy violations\n\n## Test plan (must be mechanical)\n- **Unit tests**: pure logic (parsers, schema validation, state machine) + wiremock HTTP client.\n- **Integration tests**: deterministic fake Bot API server producing scripted updates.\n- **E2E compliance**: run through the Mechanical Connector Compliance Runner:\n  - `--manifest` correctness (archetypes, NetworkConstraints, capability map)\n  - default deny (no token → denial + DecisionReceipt)\n  - sandbox/network enforcement (deny any non-telegram host)\n  - taint/provenance labeling on inbound events\n  - structured JSON logs with correlation IDs\n\n## Acceptance Criteria\n- Passes connector compliance runner (static + dynamic).\n- Passes integration tests without real Telegram calls.\n- Meets cold-start and steady-state budgets (target: \u003c50ms cold start; \u003c10MB idle).\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:24:04.685605437-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:40:33.883427477-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.1","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T01:24:04.686893334-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.1","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T01:24:15.967260516-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T01:24:16.017704062-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.1","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T01:24:16.067413866-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.1","depends_on_id":"flywheel_connectors-1n78.17","type":"blocks","created_at":"2026-01-15T01:24:16.118347005-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.1","depends_on_id":"flywheel_connectors-1n78.21","type":"blocks","created_at":"2026-01-15T01:24:16.168644255-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.1","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T03:18:45.151969137-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.1","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T03:18:45.242917412-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.1.1","title":"fcp.telegram: Manifest + Capability Map (FCP2)","description":"# fcp.telegram: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the **mechanical contract** for `fcp.telegram` so the platform can sandbox, authorize, and test it without ambiguity.\n\nThis bead produces the Telegram connector’s manifest inputs:\n- operation list + schema IDs\n- capability IDs + per-operation required caps\n- NetworkConstraints for each operation\n- state model declaration (`singleton_writer`)\n- event topics + replay/ack model\n\n## Required decisions (be explicit)\n### 1) Archetypes\nUse only the manifest’s closed-set values:\n- `bidirectional`, `streaming`, `operational`\n\n### 2) Capability IDs\n- Must be stable and human-readable.\n- MUST NOT encode host/port inside IDs.\n\nProposed families (finalize names + risk tiers):\n- `telegram.messages.read`\n- `telegram.messages.send`\n- `telegram.media.read`\n- `telegram.media.send`\n- `telegram.chats.read`\n- `telegram.members.read`\n- `telegram.webhooks.manage` (Dangerous)\n\n### 3) Operation map\nFor each operation:\n- risk tier (and whether holder proof / ApprovalToken `Execution` scope is required)\n- required capabilities\n- timeouts and retry policy (especially for side effects)\n- NetworkConstraints scope\n\n### 4) NetworkConstraints\n- Default-deny.\n- Allow only `api.telegram.org:443`.\n- Explicitly reject IP literals.\n\n### 5) Events\nDefine topics and payload schemas:\n- `telegram.message.new`\n- `telegram.message.edited`\n- `telegram.chat.member_joined`\n- `telegram.chat.member_left`\n\nAlso define replay semantics:\n- cursor type\n- ack requirements\n- minimum replay buffer expectations\n\n## Outputs\n- A fully specified manifest section for `fcp.telegram` (as markdown within this bead).\n- “Good” and “bad” manifest examples that the conformance runner should accept/reject.\n\n## Acceptance Criteria\n- The manifest spec is complete enough that another engineer can implement `--manifest` without opening external docs.\n- The Mechanical Connector Compliance Runner has everything it needs to validate Telegram statically.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:19:30.215444937-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:19:30.215444937-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.1.1","depends_on_id":"flywheel_connectors-lszk.1","type":"parent-child","created_at":"2026-01-15T03:19:30.217029592-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.1.2","title":"fcp.telegram: Provisioning Automation (Bot setup)","description":"# fcp.telegram: Provisioning Automation (Bot setup)\n\n## Goal\nMake Telegram setup **automatic and low-friction** while remaining security-first and zone-scoped.\n\n## What must be automated\n- Validate that a provided bot token is syntactically valid and works (via a safe read-only call).\n- Surface minimal user prompts (only what cannot be inferred).\n\n## Provisioning interface\nUse the platform AutomationRecipe/Provisioning interface:\n- “I need a bot token” is modeled as a `CredentialId` requirement.\n- The recipe verifies token correctness without leaking it.\n\n## Optional: webhook mode (later)\nIf/when we support Telegram webhooks:\n- Connector must NOT expose an inbound port directly.\n- `fcp-host` owns the public endpoint; it forwards verified webhook payloads over FCPC.\n- Enabling/disabling webhooks is a **Dangerous** action:\n  - requires `telegram.webhooks.manage`\n  - requires ApprovalToken `Execution` scope\n  - emits AuditEvents\n\n## UX requirements\n- Clear errors for common mistakes:\n  - wrong token\n  - bot blocked by chat\n  - insufficient permissions\n- A “doctor” check path that validates:\n  - token valid\n  - network constraints allow Telegram\n  - rate-limit config sane\n\n## Acceptance Criteria\n- Provisioning flow can bring a new Telegram bot online with minimal steps.\n- All verification is mockable for unit tests.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:19:38.804077946-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:54.3458756-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.1.2","depends_on_id":"flywheel_connectors-lszk.1","type":"parent-child","created_at":"2026-01-15T03:19:38.805376452-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.1.2","depends_on_id":"flywheel_connectors-w1g","type":"blocks","created_at":"2026-01-15T03:22:01.48447513-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.1.3","title":"fcp.telegram: Polling + Event Streaming (getUpdates)","description":"# fcp.telegram: Polling + Event Streaming (getUpdates)\n\n## Goal\nImplement Telegram inbound updates as an FCP2 streaming source:\n- consume updates from Telegram Bot API (`getUpdates` long-poll)\n- emit FCP2 `EventEnvelope`s with correct topics, taints, and cursors\n\n## Core requirements\n### Singleton-writer\n- The poll loop MUST be protected by a singleton-writer lease.\n- Non-lease-holder instances must fail closed (no polling).\n\n### Cursor model\n- Persist `update_id` cursor in connector state.\n- Ensure restart resumes without re-emitting old updates.\n\n### Event emission\n- Map Telegram update types → event topics.\n- All inbound content must be tainted as external input.\n- Attach sufficient provenance (chat id, message id, update id) without leaking secrets.\n\n### Backpressure + bounds\n- Bound poll concurrency and queue sizes.\n- No unbounded memory growth on high-volume chats.\n\n### Timeouts\n- Long poll timeout is bounded and policy-controlled.\n- Cancellation/shutdown must be prompt.\n\n## Acceptance Criteria\n- Deterministic integration tests can script an update stream and observe emitted EventEnvelopes.\n- Replay/ack behavior is consistent with the connector SDK’s streaming contract.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:19:46.871633334-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:19:46.871633334-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.1.3","depends_on_id":"flywheel_connectors-lszk.1","type":"parent-child","created_at":"2026-01-15T03:19:46.872960905-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.1.3","depends_on_id":"flywheel_connectors-w1g","type":"blocks","created_at":"2026-01-15T03:22:01.633777776-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.1.4","title":"fcp.telegram: Send + Media Operations (receipts, fail-closed)","description":"# fcp.telegram: Send + Media Operations (receipts, fail-closed)\n\n## Goal\nImplement the side-effecting operation surface for Telegram in a way that is:\n- capability-gated\n- auditable\n- safe under retries and partial failures\n\n## Operations (initial)\n- `telegram.send_message`\n- `telegram.send_media`\n\n## Exactly-once / retry safety\nTelegram does not provide robust server-side idempotency keys.\n\nDesign requirement:\n- If the connector cannot prove whether a send succeeded (e.g., timeout after request was sent), it MUST **fail closed** to avoid accidental duplicate sends.\n- When a send succeeds and returns a definitive `message_id`, bind that to an OperationReceipt.\n\n## Audit requirements\n- Emit AuditEvents for each side-effecting send (redacting message bodies by default).\n- Include correlation IDs that allow tracing user intent → invoke → receipt.\n\n## Acceptance Criteria\n- Conformance runner can validate default-deny and that allowed calls produce receipts.\n- Integration tests cover timeout/partial failure behavior.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:19:53.767241748-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:19:53.767241748-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.1.4","depends_on_id":"flywheel_connectors-lszk.1","type":"parent-child","created_at":"2026-01-15T03:19:53.768892869-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.1.4","depends_on_id":"flywheel_connectors-w1g","type":"blocks","created_at":"2026-01-15T03:22:01.785167284-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.1.5","title":"TEST: Telegram Connector Unit Tests (mock-only)","description":"# TEST: Telegram Connector Unit Tests (mock-only)\n\n## Goal\nCover Telegram connector logic with fast, deterministic unit tests.\n\n## Must cover\n- Manifest serialization + interface_hash determinism (via connector SDK helpers)\n- Capability gating checks (deny reasons stable)\n- Request building + response parsing for Bot API types\n- Cursor persistence and advancement logic\n- Taint/provenance labeling rules\n- Redaction: ensure logs never contain bot tokens or message bodies by default\n\n## Test infrastructure\n- Use wiremock for HTTP.\n- Use fcp-testkit utilities for spawning and capturing logs.\n\n## Acceptance Criteria\n- Tests run in \u003c 1s locally.\n- Logs are structured JSON and include correlation IDs.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:19:59.952304389-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:19:59.952304389-05:00","labels":["connectors","fcp2","testing","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.1.5","depends_on_id":"flywheel_connectors-lszk.1","type":"parent-child","created_at":"2026-01-15T03:19:59.953514769-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.1.5","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T07:32:16.442642076-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.1.6","title":"E2E: Telegram Connector Compliance Run","description":"# E2E: Telegram Connector Compliance Run\n\n## Goal\nAdd Telegram-specific scenarios to the shared FCP2 connector compliance runner and system E2E harness.\n\nThis is where we prove:\n- protocol correctness end-to-end (spawn connector → invoke → receipts)\n- sandbox enforcement (network allow/deny)\n- taint/provenance propagation\n\n## Scenarios\n- Default deny (no token): denial + DecisionReceipt reason_code must match spec expectations.\n- Allow (valid token): invoke succeeds, receipt emitted.\n- Network guard deny: attempt any non-telegram host → deny at Network Guard boundary.\n- Streaming: emit events from scripted updates and validate cursors + acks/replay.\n\n## Logging\n- Structured JSON logs and a summarized report artifact (machine-readable).\n\n## Acceptance Criteria\n- `cargo test --package fcp-e2e --features telegram` passes deterministically.\n- Failure output is actionable (reason_code + evidence surfaced).\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:20:07.632214704-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:20:07.632214704-05:00","labels":["conformance","connectors","e2e","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.1.6","depends_on_id":"flywheel_connectors-lszk.1","type":"parent-child","created_at":"2026-01-15T03:20:07.63371998-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.1.6","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T07:31:59.600646603-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.10","title":"fcp.box — Enterprise File Storage Connector","description":"# fcp.box — Enterprise File Storage Connector\n\n## Goal\nProvide a V2-compliant connector for Box (enterprise file storage): browse/search files, download/upload, and share links under strict zone/capability control.\n\n## Manifest archetypes (closed set)\n- `storage`\n- `operational`\n- `streaming`\n\n\u003e Interaction patterns (non-archetype): File/Blob + Request/Response (+ optional webhooks)\n\n## FCP2 Notes\n- Single-zone binding + default deny.\n- NetworkConstraints pinned to Box API hosts.\n- Large file transfers must be bounded and use chunked object patterns (ChunkedObjectManifest) where applicable.\n\n## Success Criteria\n- Before implementation begins, create the base beads `.1`..`.4` per `flywheel_connectors-lszk.5` (manifest, provisioning, tests, E2E).\n- Passes `flywheel_connectors-1n78.21.5` (mechanical compliance) and `flywheel_connectors-e3i9` (E2E evidence bundle).\n","status":"open","priority":3,"issue_type":"epic","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:10:04.536122615-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:39:54.974757934-05:00","labels":["connector","connectors","fcp2","storage","tier-4","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.10","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T06:10:04.537641148-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.10","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T06:24:02.414520595-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.10","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:24:02.720508219-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.10","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T06:24:03.00367087-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.10","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:24:03.291491653-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.10","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T06:24:03.589164471-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.10","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:24:03.876417614-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.10.1","title":"fcp.box: Manifest + Capability Map (FCP2)","description":"# fcp.box: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the complete FCP2 manifest surface for fcp.box:\n- operation list + schema IDs\n- capability families (per operation)\n- sandbox profile requirements\n- NetworkConstraints (deny-by-default)\n- state model declaration (stateless/singleton_writer/crdt)\n\n## Notes\n- Capability IDs MUST NOT encode hostnames/ports.\n- If streaming/webhooks exist, replay/ack/cursor semantics must be explicitly declared.\n\n## Acceptance Criteria\n- Manifest validates strictly.\n- Mechanical compliance runner accepts the manifest.\n\n\nLABELS: connectors, fcp2, tier4\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:11.742326162-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:02.252104439-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.10.1","depends_on_id":"flywheel_connectors-lszk.10","type":"parent-child","created_at":"2026-01-15T06:25:11.743755477-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.10.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:25:12.119798824-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.10.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:25:12.412646184-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.10.2","title":"fcp.box: Provisioning Automation (Auth/Webhooks/Setup)","description":"# fcp.box: Provisioning Automation (Auth/Webhooks/Setup)\n\n## Goal\nAutomate setup with minimal human prompts:\n- auth bootstrap (OAuth/API key/PAT)\n- webhook registration/verification (if applicable)\n- deterministic config validation (-style)\n\n## Constraints\n- Secrets via `CredentialObject`/`CredentialId` (egress proxy injection preferred) only.\n- Provisioning must be fully mockable for unit tests.\n\n## Acceptance Criteria\n- Provisioning flow is deterministic and produces clear failure diagnostics.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:12.798895523-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:54.409631976-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.10.2","depends_on_id":"flywheel_connectors-lszk.10","type":"parent-child","created_at":"2026-01-15T06:25:12.800259805-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.10.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:25:13.167059063-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.10.3","title":"TEST: fcp.box Connector Unit/Integration Tests (mock-only)","description":"# TEST: fcp.box Connector Unit/Integration Tests (mock-only)\n\n## Goal\nMock-only unit/integration tests for fcp.box covering:\n- request validation + bounded parsing\n- idempotency + receipts/audit for external side effects\n- rate limiting + retries\n- strict redaction (no secrets/PII in logs)\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Tests emit structured JSON logs per platform test standard.\n\n\nLABELS: connectors, fcp2, testing, tier4\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:13.548747172-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:02.30765423-05:00","labels":["connectors","fcp2","testing","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.10.3","depends_on_id":"flywheel_connectors-lszk.10","type":"parent-child","created_at":"2026-01-15T06:25:13.550128266-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.10.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T06:25:13.915668099-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.10.4","title":"E2E: fcp.box Connector Compliance Run","description":"# E2E: fcp.box Connector Compliance Run\n\n## Goal\nRun the shared connector compliance framework against fcp.box.\n\n## Acceptance Criteria\n- Evidence bundle produced.\n- Default deny, NetworkConstraints, receipts/audit, and structured logs are validated.\n\n\nLABELS: connectors, fcp2, e2e, tier4\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:14.349285204-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:02.360847299-05:00","labels":["connectors","e2e","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.10.4","depends_on_id":"flywheel_connectors-lszk.10","type":"parent-child","created_at":"2026-01-15T06:25:14.350756659-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.10.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T06:25:14.716421327-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.11","title":"fcp.clickup — Project Management Connector","description":"# fcp.clickup — Project Management Connector\n\n## Goal\nProvide a V2-compliant connector for ClickUp: tasks, projects/spaces, comments, and notifications.\n\n## Manifest archetypes (closed set)\n- `operational`\n- `streaming`\n\n\u003e Interaction patterns (non-archetype): Request/Response (+ optional webhooks)\n\n## FCP2 Notes\n- Single-zone binding + default deny.\n- Treat inbound webhooks/comments as tainted inputs.\n- Writes (task updates, comments) are external side effects → receipts/audit.\n\n## Success Criteria\n- Before implementation begins, create the base beads `.1`..`.4` per `flywheel_connectors-lszk.5`.\n- Mock-only unit tests + E2E compliance evidence.\n","status":"open","priority":3,"issue_type":"epic","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:10:12.395073113-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:39:55.092091966-05:00","labels":["connector","connectors","fcp2","project-mgmt","tier-4","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.11","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T06:10:12.396378355-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.11","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T06:24:04.172073759-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.11","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:24:04.460945264-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.11","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T06:24:04.741315329-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.11","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:24:05.028891481-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.11","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T06:24:05.328455164-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.11","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:24:05.613112853-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.11.1","title":"fcp.clickup: Manifest + Capability Map (FCP2)","description":"# fcp.clickup: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the complete FCP2 manifest surface for fcp.clickup:\n- operation list + schema IDs\n- capability families (per operation)\n- sandbox profile requirements\n- NetworkConstraints (deny-by-default)\n- state model declaration (stateless/singleton_writer/crdt)\n\n## Notes\n- Capability IDs MUST NOT encode hostnames/ports.\n- If streaming/webhooks exist, replay/ack/cursor semantics must be explicitly declared.\n\n## Acceptance Criteria\n- Manifest validates strictly.\n- Mechanical compliance runner accepts the manifest.\n\n\nLABELS: connectors, fcp2, tier4\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:15.119107636-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:02.415119722-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.11.1","depends_on_id":"flywheel_connectors-lszk.11","type":"parent-child","created_at":"2026-01-15T06:25:15.120496875-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.11.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:25:15.491586983-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.11.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:25:15.788995433-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.11.2","title":"fcp.clickup: Provisioning Automation (Auth/Webhooks/Setup)","description":"# fcp.clickup: Provisioning Automation (Auth/Webhooks/Setup)\n\n## Goal\nAutomate setup with minimal human prompts:\n- auth bootstrap (OAuth/API key/PAT)\n- webhook registration/verification (if applicable)\n- deterministic config validation (-style)\n\n## Constraints\n- Secrets via `CredentialObject`/`CredentialId` (egress proxy injection preferred) only.\n- Provisioning must be fully mockable for unit tests.\n\n## Acceptance Criteria\n- Provisioning flow is deterministic and produces clear failure diagnostics.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:16.177897132-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:54.470457397-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.11.2","depends_on_id":"flywheel_connectors-lszk.11","type":"parent-child","created_at":"2026-01-15T06:25:16.179276864-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.11.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:25:16.554114827-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.11.3","title":"TEST: fcp.clickup Connector Unit/Integration Tests (mock-only)","description":"# TEST: fcp.clickup Connector Unit/Integration Tests (mock-only)\n\n## Goal\nMock-only unit/integration tests for fcp.clickup covering:\n- request validation + bounded parsing\n- idempotency + receipts/audit for external side effects\n- rate limiting + retries\n- strict redaction (no secrets/PII in logs)\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Tests emit structured JSON logs per platform test standard.\n\n\nLABELS: connectors, fcp2, testing, tier4\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:16.997355817-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:02.467583896-05:00","labels":["connectors","fcp2","testing","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.11.3","depends_on_id":"flywheel_connectors-lszk.11","type":"parent-child","created_at":"2026-01-15T06:25:16.998856948-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.11.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T06:25:17.389285496-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.11.4","title":"E2E: fcp.clickup Connector Compliance Run","description":"# E2E: fcp.clickup Connector Compliance Run\n\n## Goal\nRun the shared connector compliance framework against fcp.clickup.\n\n## Acceptance Criteria\n- Evidence bundle produced.\n- Default deny, NetworkConstraints, receipts/audit, and structured logs are validated.\n\n\nLABELS: connectors, fcp2, e2e, tier4\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:17.831082423-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:02.520315795-05:00","labels":["connectors","e2e","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.11.4","depends_on_id":"flywheel_connectors-lszk.11","type":"parent-child","created_at":"2026-01-15T06:25:17.832575268-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.11.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T06:25:18.202302366-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.12","title":"fcp.todoist — Personal Task Management Connector","description":"# fcp.todoist — Personal Task Management Connector\n\n## Goal\nProvide a V2-compliant connector for Todoist: create/update/complete tasks, projects/labels, and sync.\n\n## Manifest archetypes (closed set)\n- `operational`\n- `streaming`\n\n\u003e Interaction patterns (non-archetype): Request/Response (+ optional webhook/poll-driven events)\n\n## FCP2 Notes\n- Single-zone binding + default deny.\n- Writes are external side effects → Strict idempotency + receipts/audit.\n\n## Success Criteria\n- Before implementation begins, create the base beads `.1`..`.4` per `flywheel_connectors-lszk.5`.\n- Mock-only tests + E2E compliance evidence.\n","status":"open","priority":3,"issue_type":"epic","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:10:18.8829237-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:39:55.210646518-05:00","labels":["connector","connectors","fcp2","tasks","tier-4","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.12","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T06:10:18.884348556-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.12","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T06:24:05.912394214-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.12","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:24:06.203053659-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.12","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T06:24:06.485734171-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.12","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:24:06.776317362-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.12","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T06:24:07.072012972-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.12","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:24:07.355030609-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.12.1","title":"fcp.todoist: Manifest + Capability Map (FCP2)","description":"# fcp.todoist: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the complete FCP2 manifest surface for fcp.todoist:\n- operation list + schema IDs\n- capability families (per operation)\n- sandbox profile requirements\n- NetworkConstraints (deny-by-default)\n- state model declaration (stateless/singleton_writer/crdt)\n\n## Notes\n- Capability IDs MUST NOT encode hostnames/ports.\n- If streaming/webhooks exist, replay/ack/cursor semantics must be explicitly declared.\n\n## Acceptance Criteria\n- Manifest validates strictly.\n- Mechanical compliance runner accepts the manifest.\n\n\nLABELS: connectors, fcp2, tier4\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:18.613752357-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:02.574198053-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.12.1","depends_on_id":"flywheel_connectors-lszk.12","type":"parent-child","created_at":"2026-01-15T06:25:18.615077837-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.12.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:25:18.996614851-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.12.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:25:19.294815514-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.12.2","title":"fcp.todoist: Provisioning Automation (Auth/Webhooks/Setup)","description":"# fcp.todoist: Provisioning Automation (Auth/Webhooks/Setup)\n\n## Goal\nAutomate setup with minimal human prompts:\n- auth bootstrap (OAuth/API key/PAT)\n- webhook registration/verification (if applicable)\n- deterministic config validation (-style)\n\n## Constraints\n- Secrets via `CredentialObject`/`CredentialId` (egress proxy injection preferred) only.\n- Provisioning must be fully mockable for unit tests.\n\n## Acceptance Criteria\n- Provisioning flow is deterministic and produces clear failure diagnostics.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:19.682508625-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:54.531245769-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.12.2","depends_on_id":"flywheel_connectors-lszk.12","type":"parent-child","created_at":"2026-01-15T06:25:19.68387437-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.12.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:25:20.062742532-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.12.3","title":"TEST: fcp.todoist Connector Unit/Integration Tests (mock-only)","description":"# TEST: fcp.todoist Connector Unit/Integration Tests (mock-only)\n\n## Goal\nMock-only unit/integration tests for fcp.todoist covering:\n- request validation + bounded parsing\n- idempotency + receipts/audit for external side effects\n- rate limiting + retries\n- strict redaction (no secrets/PII in logs)\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Tests emit structured JSON logs per platform test standard.\n\n\nLABELS: connectors, fcp2, testing, tier4\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:20.463968608-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:02.629091867-05:00","labels":["connectors","fcp2","testing","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.12.3","depends_on_id":"flywheel_connectors-lszk.12","type":"parent-child","created_at":"2026-01-15T06:25:20.465488744-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.12.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T06:25:20.846903047-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.12.4","title":"E2E: fcp.todoist Connector Compliance Run","description":"# E2E: fcp.todoist Connector Compliance Run\n\n## Goal\nRun the shared connector compliance framework against fcp.todoist.\n\n## Acceptance Criteria\n- Evidence bundle produced.\n- Default deny, NetworkConstraints, receipts/audit, and structured logs are validated.\n\n\nLABELS: connectors, fcp2, e2e, tier4\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:21.296582195-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:02.682828691-05:00","labels":["connectors","e2e","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.12.4","depends_on_id":"flywheel_connectors-lszk.12","type":"parent-child","created_at":"2026-01-15T06:25:21.297967417-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.12.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T06:25:21.683028866-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.13","title":"fcp.evernote — Notes Connector","description":"# fcp.evernote — Notes Connector\n\n## Goal\nProvide a V2-compliant connector for Evernote: note CRUD, notebooks/tags, and search.\n\n## Manifest archetypes (closed set)\n- `storage`\n- `knowledge`\n- `operational`\n\n\u003e Interaction patterns (non-archetype): Notes storage + search (Request/Response)\n\n## FCP2 Notes\n- Single-zone binding + default deny.\n- Large note bodies/attachments must be bounded and handled as mesh objects (chunked if needed).\n\n## Success Criteria\n- Before implementation begins, create the base beads `.1`..`.4` per `flywheel_connectors-lszk.5`.\n- Mock-only tests + E2E compliance evidence.\n","status":"open","priority":3,"issue_type":"epic","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:10:25.793356661-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:42:51.257193282-05:00","labels":["connector","connectors","fcp2","notes","tier-4","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.13","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T06:10:25.794731744-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.13","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T06:24:07.653906014-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.13","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:24:07.943199935-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.13","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T06:24:08.224316889-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.13","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:24:08.514101184-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.13","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T06:24:08.813920468-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.13","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:24:09.098712962-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.13.1","title":"fcp.evernote: Manifest + Capability Map (FCP2)","description":"# fcp.evernote: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the complete FCP2 manifest surface for fcp.evernote:\n- operation list + schema IDs\n- capability families (per operation)\n- sandbox profile requirements\n- NetworkConstraints (deny-by-default)\n- state model declaration (stateless/singleton_writer/crdt)\n\n## Notes\n- Capability IDs MUST NOT encode hostnames/ports.\n- If streaming/webhooks exist, replay/ack/cursor semantics must be explicitly declared.\n\n## Acceptance Criteria\n- Manifest validates strictly.\n- Mechanical compliance runner accepts the manifest.\n\n\nLABELS: connectors, fcp2, tier4\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:22.098010937-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:02.736755653-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.13.1","depends_on_id":"flywheel_connectors-lszk.13","type":"parent-child","created_at":"2026-01-15T06:25:22.099601045-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.13.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:25:22.484534092-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.13.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:25:22.786769833-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.13.2","title":"fcp.evernote: Provisioning Automation (Auth/Webhooks/Setup)","description":"# fcp.evernote: Provisioning Automation (Auth/Webhooks/Setup)\n\n## Goal\nAutomate setup with minimal human prompts:\n- auth bootstrap (OAuth/API key/PAT)\n- webhook registration/verification (if applicable)\n- deterministic config validation (-style)\n\n## Constraints\n- Secrets via `CredentialObject`/`CredentialId` (egress proxy injection preferred) only.\n- Provisioning must be fully mockable for unit tests.\n\n## Acceptance Criteria\n- Provisioning flow is deterministic and produces clear failure diagnostics.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:23.223293969-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:54.590169024-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.13.2","depends_on_id":"flywheel_connectors-lszk.13","type":"parent-child","created_at":"2026-01-15T06:25:23.224748592-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.13.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:25:23.619608284-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.13.3","title":"TEST: fcp.evernote Connector Unit/Integration Tests (mock-only)","description":"# TEST: fcp.evernote Connector Unit/Integration Tests (mock-only)\n\n## Goal\nMock-only unit/integration tests for fcp.evernote covering:\n- request validation + bounded parsing\n- idempotency + receipts/audit for external side effects\n- rate limiting + retries\n- strict redaction (no secrets/PII in logs)\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Tests emit structured JSON logs per platform test standard.\n\n\nLABELS: connectors, fcp2, testing, tier4\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:24.030994275-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:02.790534746-05:00","labels":["connectors","fcp2","testing","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.13.3","depends_on_id":"flywheel_connectors-lszk.13","type":"parent-child","created_at":"2026-01-15T06:25:24.032509382-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.13.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T06:25:24.415938644-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.13.4","title":"E2E: fcp.evernote Connector Compliance Run","description":"# E2E: fcp.evernote Connector Compliance Run\n\n## Goal\nRun the shared connector compliance framework against fcp.evernote.\n\n## Acceptance Criteria\n- Evidence bundle produced.\n- Default deny, NetworkConstraints, receipts/audit, and structured logs are validated.\n\n\nLABELS: connectors, fcp2, e2e, tier4\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:24.870149606-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:02.844791589-05:00","labels":["connectors","e2e","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.13.4","depends_on_id":"flywheel_connectors-lszk.13","type":"parent-child","created_at":"2026-01-15T06:25:24.871722933-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.13.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T06:25:25.261384645-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.14","title":"fcp.roam — PKM / Graph Notes Connector","description":"# fcp.roam — PKM / Graph Notes Connector\n\n## Goal\nProvide a V2-compliant connector for Roam Research: read/write pages/blocks and graph queries.\n\n## Manifest archetypes (closed set)\n- `storage`\n- `knowledge`\n- `operational`\n\n\u003e Interaction patterns (non-archetype): Graph notes storage + query/search (Request/Response)\n\n## FCP2 Notes\n- Single-zone binding + default deny.\n- Writes are external side effects → receipts/audit.\n- Inbound content can be untrusted; treat imported data as tainted when appropriate.\n\n## Success Criteria\n- Before implementation begins, create the base beads `.1`..`.4` per `flywheel_connectors-lszk.5`.\n- Mock-only tests + E2E compliance evidence.\n","status":"open","priority":3,"issue_type":"epic","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:10:32.69999616-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:42:51.371268981-05:00","labels":["connector","connectors","fcp2","pkm","tier-4","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.14","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T06:10:32.701435214-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.14","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T06:24:09.396699672-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.14","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:24:09.686055138-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.14","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T06:24:09.970946067-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.14","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:24:10.266982119-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.14","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T06:24:10.569036298-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.14","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:24:10.88052297-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.14.1","title":"fcp.roam: Manifest + Capability Map (FCP2)","description":"# fcp.roam: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the complete FCP2 manifest surface for fcp.roam:\n- operation list + schema IDs\n- capability families (per operation)\n- sandbox profile requirements\n- NetworkConstraints (deny-by-default)\n- state model declaration (stateless/singleton_writer/crdt)\n\n## Notes\n- Capability IDs MUST NOT encode hostnames/ports.\n- If streaming/webhooks exist, replay/ack/cursor semantics must be explicitly declared.\n\n## Acceptance Criteria\n- Manifest validates strictly.\n- Mechanical compliance runner accepts the manifest.\n\n\nLABELS: connectors, fcp2, tier4\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:25.674132063-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:02.898754309-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.14.1","depends_on_id":"flywheel_connectors-lszk.14","type":"parent-child","created_at":"2026-01-15T06:25:25.675435561-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.14.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:25:26.063363454-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.14.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:25:26.378444243-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.14.2","title":"fcp.roam: Provisioning Automation (Auth/Webhooks/Setup)","description":"# fcp.roam: Provisioning Automation (Auth/Webhooks/Setup)\n\n## Goal\nAutomate setup with minimal human prompts:\n- auth bootstrap (OAuth/API key/PAT)\n- webhook registration/verification (if applicable)\n- deterministic config validation (-style)\n\n## Constraints\n- Secrets via `CredentialObject`/`CredentialId` (egress proxy injection preferred) only.\n- Provisioning must be fully mockable for unit tests.\n\n## Acceptance Criteria\n- Provisioning flow is deterministic and produces clear failure diagnostics.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:26.780428017-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:54.652076344-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.14.2","depends_on_id":"flywheel_connectors-lszk.14","type":"parent-child","created_at":"2026-01-15T06:25:26.781659899-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.14.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:25:27.168041468-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.14.3","title":"TEST: fcp.roam Connector Unit/Integration Tests (mock-only)","description":"# TEST: fcp.roam Connector Unit/Integration Tests (mock-only)\n\n## Goal\nMock-only unit/integration tests for fcp.roam covering:\n- request validation + bounded parsing\n- idempotency + receipts/audit for external side effects\n- rate limiting + retries\n- strict redaction (no secrets/PII in logs)\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Tests emit structured JSON logs per platform test standard.\n\n\nLABELS: connectors, fcp2, testing, tier4\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:27.574046644-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:02.952681321-05:00","labels":["connectors","fcp2","testing","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.14.3","depends_on_id":"flywheel_connectors-lszk.14","type":"parent-child","created_at":"2026-01-15T06:25:27.575336646-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.14.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T06:25:27.962241721-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.14.4","title":"E2E: fcp.roam Connector Compliance Run","description":"# E2E: fcp.roam Connector Compliance Run\n\n## Goal\nRun the shared connector compliance framework against fcp.roam.\n\n## Acceptance Criteria\n- Evidence bundle produced.\n- Default deny, NetworkConstraints, receipts/audit, and structured logs are validated.\n\n\nLABELS: connectors, fcp2, e2e, tier4\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:28.418223422-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:03.006531007-05:00","labels":["connectors","e2e","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.14.4","depends_on_id":"flywheel_connectors-lszk.14","type":"parent-child","created_at":"2026-01-15T06:25:28.419513394-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.14.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T06:25:28.809951771-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.15","title":"fcp.logseq — Local-First PKM Connector","description":"# fcp.logseq — Local-First PKM Connector\n\n## Goal\nProvide a V2-compliant connector for Logseq.\n\nBecause Logseq is often local-first, the connector may be:\n- a filesystem watcher + query interface\n- a local API client (if available)\n\n## Manifest archetypes (closed set)\n- `storage`\n- `knowledge`\n- `operational`\n\n\u003e Interaction patterns (non-archetype): Local-first notes storage + query/search (Request/Response)\n\n## FCP2 Notes\n- Single-zone binding + default deny.\n- Treat local filesystem paths as Resources (ResourceObject) with explicit policy.\n- Ensure no path traversal or exfiltration via resource handles.\n\n## Success Criteria\n- Before implementation begins, create the base beads `.1`..`.4` per `flywheel_connectors-lszk.5`.\n- Mock-only tests + E2E compliance evidence.\n","status":"open","priority":3,"issue_type":"epic","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:10:41.283497097-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:42:51.486985594-05:00","labels":["connector","connectors","fcp2","pkm","tier-4","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.15","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T06:10:41.284752044-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.15","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T06:24:11.202301797-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.15","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:24:11.491461725-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.15","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T06:24:11.777158724-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.15","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:24:12.065667193-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.15","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T06:24:12.36125999-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.15","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:24:12.652995404-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.15.1","title":"fcp.logseq: Manifest + Capability Map (FCP2)","description":"# fcp.logseq: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the complete FCP2 manifest surface for fcp.logseq:\n- operation list + schema IDs\n- capability families (per operation)\n- sandbox profile requirements\n- NetworkConstraints (deny-by-default)\n- state model declaration (stateless/singleton_writer/crdt)\n\n## Notes\n- Capability IDs MUST NOT encode hostnames/ports.\n- If streaming/webhooks exist, replay/ack/cursor semantics must be explicitly declared.\n\n## Acceptance Criteria\n- Manifest validates strictly.\n- Mechanical compliance runner accepts the manifest.\n\n\nLABELS: connectors, fcp2, tier4\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:29.286249385-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:03.05938695-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.15.1","depends_on_id":"flywheel_connectors-lszk.15","type":"parent-child","created_at":"2026-01-15T06:25:29.287729466-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.15.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:25:29.679002987-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.15.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:25:29.997813939-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.15.2","title":"fcp.logseq: Provisioning Automation (Auth/Webhooks/Setup)","description":"# fcp.logseq: Provisioning Automation (Auth/Webhooks/Setup)\n\n## Goal\nAutomate setup with minimal human prompts:\n- auth bootstrap (OAuth/API key/PAT)\n- webhook registration/verification (if applicable)\n- deterministic config validation (-style)\n\n## Constraints\n- Secrets via `CredentialObject`/`CredentialId` (egress proxy injection preferred) only.\n- Provisioning must be fully mockable for unit tests.\n\n## Acceptance Criteria\n- Provisioning flow is deterministic and produces clear failure diagnostics.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:30.4089509-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:54.71297333-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.15.2","depends_on_id":"flywheel_connectors-lszk.15","type":"parent-child","created_at":"2026-01-15T06:25:30.410259658-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.15.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:25:30.799584595-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.15.3","title":"TEST: fcp.logseq Connector Unit/Integration Tests (mock-only)","description":"# TEST: fcp.logseq Connector Unit/Integration Tests (mock-only)\n\n## Goal\nMock-only unit/integration tests for fcp.logseq covering:\n- request validation + bounded parsing\n- idempotency + receipts/audit for external side effects\n- rate limiting + retries\n- strict redaction (no secrets/PII in logs)\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Tests emit structured JSON logs per platform test standard.\n\n\nLABELS: connectors, fcp2, testing, tier4\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:31.216521712-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:03.114511579-05:00","labels":["connectors","fcp2","testing","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.15.3","depends_on_id":"flywheel_connectors-lszk.15","type":"parent-child","created_at":"2026-01-15T06:25:31.21788894-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.15.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T06:25:31.625743613-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.15.4","title":"E2E: fcp.logseq Connector Compliance Run","description":"# E2E: fcp.logseq Connector Compliance Run\n\n## Goal\nRun the shared connector compliance framework against fcp.logseq.\n\n## Acceptance Criteria\n- Evidence bundle produced.\n- Default deny, NetworkConstraints, receipts/audit, and structured logs are validated.\n\n\nLABELS: connectors, fcp2, e2e, tier4\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:32.087152727-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:03.168020252-05:00","labels":["connectors","e2e","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.15.4","depends_on_id":"flywheel_connectors-lszk.15","type":"parent-child","created_at":"2026-01-15T06:25:32.088798771-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.15.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T06:25:32.483538236-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.16","title":"fcp.segment — Customer Data Platform Connector","description":"# fcp.segment — Customer Data Platform Connector\n\n## Goal\nProvide a V2-compliant connector for Segment (sources/destinations, tracking calls, schema introspection).\n\n## Manifest archetypes (closed set)\n- `operational`\n- `streaming`\n\n\u003e Interaction patterns (non-archetype): Request/Response (+ optional webhooks)\n\n## FCP2 Notes\n- Single-zone binding + default deny.\n- Tracking/event writes are external side effects → receipts/audit.\n\n## Success Criteria\n- Before implementation begins, create the base beads `.1`..`.4` per `flywheel_connectors-lszk.5`.\n","status":"open","priority":4,"issue_type":"epic","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:10:47.535170202-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:39:55.327613508-05:00","labels":["analytics","connector","connectors","fcp2","tier-4","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.16","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T06:10:47.55790529-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.16","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T06:24:12.952716313-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.16","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:24:13.243311106-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.16","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T06:24:13.527332125-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.16","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:24:13.81634751-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.16","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T06:24:14.124593062-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.16","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:24:14.413117081-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.16.1","title":"fcp.segment: Manifest + Capability Map (FCP2)","description":"# fcp.segment: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the complete FCP2 manifest surface for fcp.segment:\n- operation list + schema IDs\n- capability families (per operation)\n- sandbox profile requirements\n- NetworkConstraints (deny-by-default)\n- state model declaration (stateless/singleton_writer/crdt)\n\n## Notes\n- Capability IDs MUST NOT encode hostnames/ports.\n- If streaming/webhooks exist, replay/ack/cursor semantics must be explicitly declared.\n\n## Acceptance Criteria\n- Manifest validates strictly.\n- Mechanical compliance runner accepts the manifest.\n\n\nLABELS: connectors, fcp2, tier4\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:32.920880705-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:03.22200337-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.16.1","depends_on_id":"flywheel_connectors-lszk.16","type":"parent-child","created_at":"2026-01-15T06:25:32.922185736-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.16.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:25:33.328666769-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.16.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:25:33.65241517-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.16.2","title":"fcp.segment: Provisioning Automation (Auth/Webhooks/Setup)","description":"# fcp.segment: Provisioning Automation (Auth/Webhooks/Setup)\n\n## Goal\nAutomate setup with minimal human prompts:\n- auth bootstrap (OAuth/API key/PAT)\n- webhook registration/verification (if applicable)\n- deterministic config validation (-style)\n\n## Constraints\n- Secrets via `CredentialObject`/`CredentialId` (egress proxy injection preferred) only.\n- Provisioning must be fully mockable for unit tests.\n\n## Acceptance Criteria\n- Provisioning flow is deterministic and produces clear failure diagnostics.\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:34.063292882-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:54.775153295-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.16.2","depends_on_id":"flywheel_connectors-lszk.16","type":"parent-child","created_at":"2026-01-15T06:25:34.064777512-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.16.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:25:34.476866177-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.16.3","title":"TEST: fcp.segment Connector Unit/Integration Tests (mock-only)","description":"# TEST: fcp.segment Connector Unit/Integration Tests (mock-only)\n\n## Goal\nMock-only unit/integration tests for fcp.segment covering:\n- request validation + bounded parsing\n- idempotency + receipts/audit for external side effects\n- rate limiting + retries\n- strict redaction (no secrets/PII in logs)\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Tests emit structured JSON logs per platform test standard.\n\n\nLABELS: connectors, fcp2, testing, tier4\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:34.894641635-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:03.276197486-05:00","labels":["connectors","fcp2","testing","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.16.3","depends_on_id":"flywheel_connectors-lszk.16","type":"parent-child","created_at":"2026-01-15T06:25:34.896732908-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.16.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T06:25:35.322332808-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.16.4","title":"E2E: fcp.segment Connector Compliance Run","description":"# E2E: fcp.segment Connector Compliance Run\n\n## Goal\nRun the shared connector compliance framework against fcp.segment.\n\n## Acceptance Criteria\n- Evidence bundle produced.\n- Default deny, NetworkConstraints, receipts/audit, and structured logs are validated.\n\n\nLABELS: connectors, fcp2, e2e, tier4\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:35.821494289-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:03.329941062-05:00","labels":["connectors","e2e","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.16.4","depends_on_id":"flywheel_connectors-lszk.16","type":"parent-child","created_at":"2026-01-15T06:25:35.822856488-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.16.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T06:25:36.227421518-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.17","title":"fcp.mixpanel — Product Analytics Connector","description":"# fcp.mixpanel — Product Analytics Connector\n\n## Goal\nProvide a V2-compliant connector for Mixpanel: query reports/insights and (optionally) emit tracking events.\n\n## Manifest archetypes (closed set)\n- `operational`\n\n\u003e Interaction patterns (non-archetype): Request/Response\n\n## Success Criteria\n- Before implementation begins, create the base beads `.1`..`.4` per `flywheel_connectors-lszk.5`.\n","status":"open","priority":4,"issue_type":"epic","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:10:52.940075212-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:39:55.445176992-05:00","labels":["analytics","connector","connectors","fcp2","tier-4","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.17","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T06:10:52.941283651-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.17","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T06:24:14.708991338-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.17","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:24:14.997303197-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.17","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T06:24:15.280933739-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.17","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:24:15.57363281-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.17","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T06:24:15.87755996-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.17","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:24:16.168101883-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.17.1","title":"fcp.mixpanel: Manifest + Capability Map (FCP2)","description":"# fcp.mixpanel: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the complete FCP2 manifest surface for fcp.mixpanel:\n- operation list + schema IDs\n- capability families (per operation)\n- sandbox profile requirements\n- NetworkConstraints (deny-by-default)\n- state model declaration (stateless/singleton_writer/crdt)\n\n## Notes\n- Capability IDs MUST NOT encode hostnames/ports.\n- If streaming/webhooks exist, replay/ack/cursor semantics must be explicitly declared.\n\n## Acceptance Criteria\n- Manifest validates strictly.\n- Mechanical compliance runner accepts the manifest.\n\n\nLABELS: connectors, fcp2, tier4\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:36.665600254-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:03.382200941-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.17.1","depends_on_id":"flywheel_connectors-lszk.17","type":"parent-child","created_at":"2026-01-15T06:25:36.667060898-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.17.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:25:37.066962176-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.17.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:25:37.394836365-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.17.2","title":"fcp.mixpanel: Provisioning Automation (Auth/Webhooks/Setup)","description":"# fcp.mixpanel: Provisioning Automation (Auth/Webhooks/Setup)\n\n## Goal\nAutomate setup with minimal human prompts:\n- auth bootstrap (OAuth/API key/PAT)\n- webhook registration/verification (if applicable)\n- deterministic config validation (-style)\n\n## Constraints\n- Secrets via `CredentialObject`/`CredentialId` (egress proxy injection preferred) only.\n- Provisioning must be fully mockable for unit tests.\n\n## Acceptance Criteria\n- Provisioning flow is deterministic and produces clear failure diagnostics.\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:37.806225672-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:54.836774786-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.17.2","depends_on_id":"flywheel_connectors-lszk.17","type":"parent-child","created_at":"2026-01-15T06:25:37.807496859-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.17.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:25:38.215601293-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.17.3","title":"TEST: fcp.mixpanel Connector Unit/Integration Tests (mock-only)","description":"# TEST: fcp.mixpanel Connector Unit/Integration Tests (mock-only)\n\n## Goal\nMock-only unit/integration tests for fcp.mixpanel covering:\n- request validation + bounded parsing\n- idempotency + receipts/audit for external side effects\n- rate limiting + retries\n- strict redaction (no secrets/PII in logs)\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Tests emit structured JSON logs per platform test standard.\n\n\nLABELS: connectors, fcp2, testing, tier4\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:38.63716343-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:03.436071506-05:00","labels":["connectors","fcp2","testing","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.17.3","depends_on_id":"flywheel_connectors-lszk.17","type":"parent-child","created_at":"2026-01-15T06:25:38.638620447-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.17.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T06:25:39.059855698-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.17.4","title":"E2E: fcp.mixpanel Connector Compliance Run","description":"# E2E: fcp.mixpanel Connector Compliance Run\n\n## Goal\nRun the shared connector compliance framework against fcp.mixpanel.\n\n## Acceptance Criteria\n- Evidence bundle produced.\n- Default deny, NetworkConstraints, receipts/audit, and structured logs are validated.\n\n\nLABELS: connectors, fcp2, e2e, tier4\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:39.555242002-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:03.488586026-05:00","labels":["connectors","e2e","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.17.4","depends_on_id":"flywheel_connectors-lszk.17","type":"parent-child","created_at":"2026-01-15T06:25:39.556555228-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.17.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T06:25:39.983811691-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.18","title":"fcp.amplitude — Product Analytics Connector","description":"# fcp.amplitude — Product Analytics Connector\n\n## Goal\nProvide a V2-compliant connector for Amplitude: query analytics and (optionally) emit tracking events.\n\n## Manifest archetypes (closed set)\n- `operational`\n\n\u003e Interaction patterns (non-archetype): Request/Response\n\n## Success Criteria\n- Before implementation begins, create the base beads `.1`..`.4` per `flywheel_connectors-lszk.5`.\n","status":"open","priority":4,"issue_type":"epic","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:10:58.288111514-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:39:55.562829584-05:00","labels":["analytics","connector","connectors","fcp2","tier-4","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.18","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T06:10:58.289575464-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.18","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T06:24:16.473402382-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.18","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:24:16.767815414-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.18","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T06:24:17.054671408-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.18","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:24:17.346650441-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.18","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T06:24:17.645529083-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.18","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:24:17.929996092-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.18.1","title":"fcp.amplitude: Manifest + Capability Map (FCP2)","description":"# fcp.amplitude: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the complete FCP2 manifest surface for fcp.amplitude:\n- operation list + schema IDs\n- capability families (per operation)\n- sandbox profile requirements\n- NetworkConstraints (deny-by-default)\n- state model declaration (stateless/singleton_writer/crdt)\n\n## Notes\n- Capability IDs MUST NOT encode hostnames/ports.\n- If streaming/webhooks exist, replay/ack/cursor semantics must be explicitly declared.\n\n## Acceptance Criteria\n- Manifest validates strictly.\n- Mechanical compliance runner accepts the manifest.\n\n\nLABELS: connectors, fcp2, tier4\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:40.430077223-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:03.544806201-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.18.1","depends_on_id":"flywheel_connectors-lszk.18","type":"parent-child","created_at":"2026-01-15T06:25:40.431465801-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.18.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:25:40.840642006-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.18.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:25:41.174010324-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.18.2","title":"fcp.amplitude: Provisioning Automation (Auth/Webhooks/Setup)","description":"# fcp.amplitude: Provisioning Automation (Auth/Webhooks/Setup)\n\n## Goal\nAutomate setup with minimal human prompts:\n- auth bootstrap (OAuth/API key/PAT)\n- webhook registration/verification (if applicable)\n- deterministic config validation (-style)\n\n## Constraints\n- Secrets via `CredentialObject`/`CredentialId` (egress proxy injection preferred) only.\n- Provisioning must be fully mockable for unit tests.\n\n## Acceptance Criteria\n- Provisioning flow is deterministic and produces clear failure diagnostics.\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:41.595539779-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:54.896398291-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.18.2","depends_on_id":"flywheel_connectors-lszk.18","type":"parent-child","created_at":"2026-01-15T06:25:41.596812539-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.18.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:25:42.007261273-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.18.3","title":"TEST: fcp.amplitude Connector Unit/Integration Tests (mock-only)","description":"# TEST: fcp.amplitude Connector Unit/Integration Tests (mock-only)\n\n## Goal\nMock-only unit/integration tests for fcp.amplitude covering:\n- request validation + bounded parsing\n- idempotency + receipts/audit for external side effects\n- rate limiting + retries\n- strict redaction (no secrets/PII in logs)\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Tests emit structured JSON logs per platform test standard.\n\n\nLABELS: connectors, fcp2, testing, tier4\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:42.478202288-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:03.599455224-05:00","labels":["connectors","fcp2","testing","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.18.3","depends_on_id":"flywheel_connectors-lszk.18","type":"parent-child","created_at":"2026-01-15T06:25:42.479644377-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.18.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T06:25:42.906917221-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.18.4","title":"E2E: fcp.amplitude Connector Compliance Run","description":"# E2E: fcp.amplitude Connector Compliance Run\n\n## Goal\nRun the shared connector compliance framework against fcp.amplitude.\n\n## Acceptance Criteria\n- Evidence bundle produced.\n- Default deny, NetworkConstraints, receipts/audit, and structured logs are validated.\n\n\nLABELS: connectors, fcp2, e2e, tier4\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:43.394588699-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:03.652059823-05:00","labels":["connectors","e2e","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.18.4","depends_on_id":"flywheel_connectors-lszk.18","type":"parent-child","created_at":"2026-01-15T06:25:43.395945778-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.18.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T06:25:43.812649946-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.19","title":"fcp.posthog — Open-Source Product Analytics Connector","description":"# fcp.posthog — Open-Source Product Analytics Connector\n\n## Goal\nProvide a V2-compliant connector for PostHog: query analytics/feature flags and (optionally) emit events.\n\n## Manifest archetypes (closed set)\n- `operational`\n\n\u003e Interaction patterns (non-archetype): Request/Response\n\n## Success Criteria\n- Before implementation begins, create the base beads `.1`..`.4` per `flywheel_connectors-lszk.5`.\n","status":"open","priority":4,"issue_type":"epic","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:11:05.772072785-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:39:55.680024914-05:00","labels":["analytics","connector","connectors","fcp2","tier-4","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.19","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T06:11:05.773316521-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.19","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T06:24:18.229828622-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.19","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:24:18.519685193-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.19","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T06:24:18.810011731-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.19","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:24:19.103346239-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.19","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T06:24:19.403680465-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.19","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:24:19.692965399-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.19.1","title":"fcp.posthog: Manifest + Capability Map (FCP2)","description":"# fcp.posthog: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the complete FCP2 manifest surface for fcp.posthog:\n- operation list + schema IDs\n- capability families (per operation)\n- sandbox profile requirements\n- NetworkConstraints (deny-by-default)\n- state model declaration (stateless/singleton_writer/crdt)\n\n## Notes\n- Capability IDs MUST NOT encode hostnames/ports.\n- If streaming/webhooks exist, replay/ack/cursor semantics must be explicitly declared.\n\n## Acceptance Criteria\n- Manifest validates strictly.\n- Mechanical compliance runner accepts the manifest.\n\n\nLABELS: connectors, fcp2, tier4\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:44.254528788-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:03.705642305-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.19.1","depends_on_id":"flywheel_connectors-lszk.19","type":"parent-child","created_at":"2026-01-15T06:25:44.255945198-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.19.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:25:44.666881862-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.19.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:25:45.00744253-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.19.2","title":"fcp.posthog: Provisioning Automation (Auth/Webhooks/Setup)","description":"# fcp.posthog: Provisioning Automation (Auth/Webhooks/Setup)\n\n## Goal\nAutomate setup with minimal human prompts:\n- auth bootstrap (OAuth/API key/PAT)\n- webhook registration/verification (if applicable)\n- deterministic config validation (-style)\n\n## Constraints\n- Secrets via `CredentialObject`/`CredentialId` (egress proxy injection preferred) only.\n- Provisioning must be fully mockable for unit tests.\n\n## Acceptance Criteria\n- Provisioning flow is deterministic and produces clear failure diagnostics.\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:45.438928998-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:54.956821564-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.19.2","depends_on_id":"flywheel_connectors-lszk.19","type":"parent-child","created_at":"2026-01-15T06:25:45.440134691-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.19.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:25:45.855477503-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.19.3","title":"TEST: fcp.posthog Connector Unit/Integration Tests (mock-only)","description":"# TEST: fcp.posthog Connector Unit/Integration Tests (mock-only)\n\n## Goal\nMock-only unit/integration tests for fcp.posthog covering:\n- request validation + bounded parsing\n- idempotency + receipts/audit for external side effects\n- rate limiting + retries\n- strict redaction (no secrets/PII in logs)\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Tests emit structured JSON logs per platform test standard.\n\n\nLABELS: connectors, fcp2, testing, tier4\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:46.289418078-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:03.759259794-05:00","labels":["connectors","fcp2","testing","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.19.3","depends_on_id":"flywheel_connectors-lszk.19","type":"parent-child","created_at":"2026-01-15T06:25:46.290735121-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.19.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T06:25:46.711357476-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.19.4","title":"E2E: fcp.posthog Connector Compliance Run","description":"# E2E: fcp.posthog Connector Compliance Run\n\n## Goal\nRun the shared connector compliance framework against fcp.posthog.\n\n## Acceptance Criteria\n- Evidence bundle produced.\n- Default deny, NetworkConstraints, receipts/audit, and structured logs are validated.\n\n\nLABELS: connectors, fcp2, e2e, tier4\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:47.19052982-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:03.813716243-05:00","labels":["connectors","e2e","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.19.4","depends_on_id":"flywheel_connectors-lszk.19","type":"parent-child","created_at":"2026-01-15T06:25:47.191813731-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.19.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T06:25:47.604414663-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.2","title":"fcp.discord - Discord Connector (V2)","description":"# fcp.discord - Discord Connector (FCP2)\n\n## Goal\nProvide a **fully FCP2-compliant** Discord bot + gateway connector for secure community automation.\n\nDiscord is a high-risk prompt surface; correctness is security.\n\n## Manifest archetypes (closed set)\n- `bidirectional` (send + receive)\n- `streaming` (gateway events)\n- `operational` (REST actions)\n\n\u003e Note: “webhook”, “polling”, “request-response” are interaction patterns, not manifest archetype values.\n\n## Threat model\n- Inbound Discord content is adversarial by default.\n- Messages, embeds, attachments, and interaction payloads must be tainted as external input.\n- Any cross-zone movement requires policy + approvals; connector must emit the metadata needed for that enforcement.\n\n## Zone model (mechanical)\nEach connector instance binds to exactly one `ZoneId`.\n\nRecommended zone naming patterns:\n- `z:community:discord:\u003cguild\u003e` for semi-trusted servers\n- `z:public:discord:\u003cguild\u003e` for public/untrusted servers\n\n## External surface\n### NetworkConstraints (MUST)\nDefault deny; allow only the endpoints required by the declared operations:\n- Discord REST API: `discord.com:443`\n- Gateway (wss): `gateway.discord.gg:443`\n- Attachments/CDN (if media download is supported): `cdn.discordapp.com:443`\n\nAll egress must go through the Network Guard in strict/moderate sandboxes.\n\n### Auth / credential injection\n- Bot token via `CredentialObject`/`CredentialId` (egress proxy injection preferred).\n- Never persist bot tokens or gateway session secrets to disk.\n\n## Capability model (illustrative)\n**NORMATIVE constraint:** capability IDs must not encode hosts/ports.\n\nCapability families (finalize names + risk tiers in the manifest bead):\n- `discord.messages.read` (gateway events)\n- `discord.messages.send` (side-effect)\n- `discord.reactions.write` (side-effect)\n- `discord.channels.read`\n- `discord.channels.write` (dangerous in many orgs)\n- `discord.threads.write`\n- `discord.members.read` (PII)\n- `discord.webhooks.manage` (Dangerous)\n\n## Operations \u0026 event topics (initial slice)\n### Operations\n- `discord.send_message` (side-effect)\n- `discord.add_reaction` (side-effect)\n- `discord.list_channels` (read-only)\n- `discord.create_thread` (side-effect)\n- `discord.download_attachment` (read-only, optional)\n\n### Event topics\n- `discord.message.create`\n- `discord.message.update`\n- `discord.reaction.add`\n- `discord.member.join`\n\n## State model\nGateway connectivity is stateful.\n\n- Use **singleton-writer** state with a lease for the gateway connection.\n- Persist enough state to resume safely:\n  - last sequence number\n  - session id / resume token (if used)\n  - replay cursor mapping for emitted events\n\n## Rate limiting (MUST)\nDiscord’s rate limits are complex (bucketed + global).\n\nHard requirements:\n- Implement bucket-aware limits mechanically.\n- Never “retry blindly” on 429; obey Retry-After.\n\n## Exactly-once / retry safety\nDiscord REST does not provide robust idempotency keys for all actions.\n\nDesign requirement:\n- For side-effecting sends, prefer **fail-closed** on uncertain outcomes.\n- If using `nonce` for message create idempotency, bind it to the OperationIntent id and verify before retry.\n\n## Observability \u0026 audit\n- Structured logs (no token, no raw message bodies by default).\n- AuditEvents for:\n  - credential injection usage\n  - side-effecting actions\n  - elevated actions (webhooks/channel mgmt)\n  - repeated denials\n\n## Test plan\n- Unit tests: REST request formation, gateway frame parsing, state machine, rate limiter.\n- Integration tests: deterministic mock REST + mock gateway server.\n- E2E compliance: run in the shared compliance harness and prove:\n  - default deny\n  - sandbox network allow/deny\n  - taint/provenance on inbound events\n  - stable DecisionReceipt reason codes\n\n## Acceptance Criteria\n- Passes connector compliance runner (static + dynamic).\n- Passes deterministic integration tests without real Discord calls.\n- Meets cold-start and idle memory budgets.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T01:24:04.740882794-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:55.017633159-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.2","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T01:24:04.742310265-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.2","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T01:24:16.219048477-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.2","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T01:24:16.267627469-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.2","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T01:24:16.314815129-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.2","depends_on_id":"flywheel_connectors-1n78.17","type":"blocks","created_at":"2026-01-15T01:24:16.365067865-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.2","depends_on_id":"flywheel_connectors-1n78.21","type":"blocks","created_at":"2026-01-15T01:24:16.413974304-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T03:20:44.869455122-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.2","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T03:20:44.962955615-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.2.1","title":"fcp.discord: Manifest + Capability Map (FCP2)","description":"# fcp.discord: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the mechanical manifest contract for `fcp.discord`:\n- operations + schema IDs\n- capability IDs and per-operation requirements\n- NetworkConstraints (REST + gateway + CDN)\n- state model (`singleton_writer`)\n- event topics + replay/ack model\n\n## Required decisions\n- Manifest archetypes must be in the closed set: `bidirectional`, `streaming`, `operational`.\n- Capability IDs must NOT encode hosts/ports.\n\nProposed capability families (finalize):\n- `discord.messages.read`\n- `discord.messages.send`\n- `discord.reactions.write`\n- `discord.channels.read`\n- `discord.channels.write`\n- `discord.threads.write`\n- `discord.members.read`\n- `discord.webhooks.manage` (Dangerous)\n\n## NetworkConstraints\nDefault-deny; allow only:\n- `discord.com:443` (REST)\n- `gateway.discord.gg:443` (wss)\n- `cdn.discordapp.com:443` (optional)\n\n## Outputs\n- A complete manifest spec for Discord stored in this bead (markdown).\n- Good/bad manifest examples for static compliance testing.\n\n## Acceptance Criteria\n- Another engineer can implement `--manifest` without external docs.\n- Static compliance runner requirements are fully satisfied.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:21:12.424387291-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:21:12.424387291-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.2.1","depends_on_id":"flywheel_connectors-lszk.2","type":"parent-child","created_at":"2026-01-15T03:21:12.42560755-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.2.2","title":"fcp.discord: Provisioning Automation (Bot + intents)","description":"# fcp.discord: Provisioning Automation (Bot + intents)\n\n## Goal\nMake Discord bot onboarding as automatic as possible:\n- validate bot token\n- validate required gateway intents for declared event topics\n- validate that NetworkConstraints allow Discord endpoints\n\n## Provisioning interface\nUse AutomationRecipe/Provisioning:\n- secrets: bot token (`CredentialId`)\n- parameters: guild/channel allowlist (if policy requires)\n\n## Safety requirements\n- Connector must not “self-escalate” privileges.\n- Anything that changes server configuration (webhooks/channel mgmt) is Dangerous and requires ApprovalToken `Execution` scope.\n\n## Acceptance Criteria\n- `fcp doctor` can confirm readiness: token ok, intents ok, network ok.\n- Entire flow is mockable for unit tests.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:21:20.382687767-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:55.075041088-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.2.2","depends_on_id":"flywheel_connectors-lszk.2","type":"parent-child","created_at":"2026-01-15T03:21:20.394550935-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.2.2","depends_on_id":"flywheel_connectors-v6w","type":"blocks","created_at":"2026-01-15T03:22:01.940238528-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.2.3","title":"fcp.discord: Gateway Streaming (events → EventEnvelope)","description":"# fcp.discord: Gateway Streaming (events → EventEnvelope)\n\n## Goal\nImplement Discord Gateway connectivity as an FCP2 streaming source:\n- connect to gateway\n- consume events\n- emit EventEnvelopes with correct topics, taints, and cursors\n\n## Requirements\n- Singleton-writer lease around the gateway connection.\n- Persist sequence/session state to support safe resume.\n- Backpressure: bound event buffering.\n- Strict parsing: malformed frames must never panic.\n\n## Acceptance Criteria\n- Deterministic integration tests can drive a fake gateway and observe emitted EventEnvelopes.\n- Resume behavior is correct (or fails closed when unsafe).\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:21:25.849826513-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:21:25.849826513-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.2.3","depends_on_id":"flywheel_connectors-lszk.2","type":"parent-child","created_at":"2026-01-15T03:21:25.851166628-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.2.3","depends_on_id":"flywheel_connectors-v6w","type":"blocks","created_at":"2026-01-15T03:22:02.091341766-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.2.4","title":"fcp.discord: REST Operations (messages/reactions/channels)","description":"# fcp.discord: REST Operations (messages/reactions/channels)\n\n## Goal\nImplement the initial Discord REST operation slice safely:\n- `discord.send_message`\n- `discord.add_reaction`\n- `discord.list_channels`\n- `discord.create_thread`\n\n## Requirements\n- Capability gating is mechanical.\n- Rate limiting is bucket-aware and obeys Retry-After.\n- Side effects are retry-safe:\n  - prefer fail-closed on uncertain outcomes\n  - optionally use `nonce` to dedupe message sends\n\n## Acceptance Criteria\n- Integration tests cover success + 401/403/429 + timeout.\n- AuditEvents emitted for side-effecting actions.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:21:31.535900184-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:21:31.535900184-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.2.4","depends_on_id":"flywheel_connectors-lszk.2","type":"parent-child","created_at":"2026-01-15T03:21:31.537260427-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.2.4","depends_on_id":"flywheel_connectors-v6w","type":"blocks","created_at":"2026-01-15T03:22:02.239643658-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.2.5","title":"TEST: Discord Connector Unit Tests (mock-only)","description":"# TEST: Discord Connector Unit Tests (mock-only)\n\n## Must cover\n- Manifest determinism + interface_hash.\n- Capability gating reason codes.\n- REST request builders + response parsing.\n- Gateway frame parsing + state machine.\n- Rate limiter bucket logic.\n- Redaction (no token, no message bodies in logs by default).\n\n## Acceptance Criteria\n- Deterministic and fast.\n- Structured JSON logs.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:21:36.446329314-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:21:36.446329314-05:00","labels":["connectors","fcp2","testing","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.2.5","depends_on_id":"flywheel_connectors-lszk.2","type":"parent-child","created_at":"2026-01-15T03:21:36.447580521-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.2.5","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T07:32:17.071908064-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.2.6","title":"E2E: Discord Connector Compliance Run","description":"# E2E: Discord Connector Compliance Run\n\n## Goal\nAdd Discord-specific scenarios to the shared connector compliance runner and system E2E harness.\n\n## Scenarios\n- Default deny.\n- Allow with valid token.\n- Network guard allow/deny (block any non-discord host).\n- Gateway streaming + cursor behavior.\n- Rate limit behavior under scripted load.\n\n## Acceptance Criteria\n- `cargo test --package fcp-e2e --features discord` passes deterministically.\n- Logs and report artifacts are machine-readable and actionable.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:21:41.871858764-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:21:41.871858764-05:00","labels":["conformance","connectors","e2e","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.2.6","depends_on_id":"flywheel_connectors-lszk.2","type":"parent-child","created_at":"2026-01-15T03:21:41.873208446-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.2.6","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T07:32:00.203386705-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.20","title":"fcp.duckdb — Analytical Database Connector","description":"# fcp.duckdb — Analytical Database Connector\n\n## Goal\nProvide a V2-compliant connector for DuckDB.\n\nLikely patterns:\n- local embedded DB per zone with strict filesystem sandboxing\n- explicit import/export of data as mesh objects\n\n## Manifest archetypes (closed set)\n- `storage`\n- `operational`\n\n\u003e Interaction patterns (non-archetype): Embedded DB + Request/Response queries\n\n## FCP2 Notes\n- Single-zone binding + default deny.\n- Filesystem access must be explicitly scoped and audited.\n\n## Success Criteria\n- Before implementation begins, create the base beads `.1`..`.4` per `flywheel_connectors-lszk.5`.\n","status":"open","priority":4,"issue_type":"epic","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:11:13.136919853-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:42:51.603613605-05:00","labels":["connector","connectors","database","fcp2","tier-4","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.20","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T06:11:13.138236095-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.20","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T06:24:20.020840109-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.20","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:24:20.333979277-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.20","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T06:24:20.617949981-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.20","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:24:20.910836375-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.20","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T06:24:21.208620843-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.20","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:24:21.49578071-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.20.1","title":"fcp.duckdb: Manifest + Capability Map (FCP2)","description":"# fcp.duckdb: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the complete FCP2 manifest surface for fcp.duckdb:\n- operation list + schema IDs\n- capability families (per operation)\n- sandbox profile requirements\n- NetworkConstraints (deny-by-default)\n- state model declaration (stateless/singleton_writer/crdt)\n\n## Notes\n- Capability IDs MUST NOT encode hostnames/ports.\n- If streaming/webhooks exist, replay/ack/cursor semantics must be explicitly declared.\n\n## Acceptance Criteria\n- Manifest validates strictly.\n- Mechanical compliance runner accepts the manifest.\n\n\nLABELS: connectors, fcp2, tier4\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:48.056049999-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:03.86730637-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.20.1","depends_on_id":"flywheel_connectors-lszk.20","type":"parent-child","created_at":"2026-01-15T06:25:48.057426455-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.20.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:25:48.504904363-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.20.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:25:48.874939802-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.20.2","title":"fcp.duckdb: Provisioning Automation (Auth/Webhooks/Setup)","description":"# fcp.duckdb: Provisioning Automation (Auth/Webhooks/Setup)\n\n## Goal\nAutomate setup with minimal human prompts:\n- auth bootstrap (OAuth/API key/PAT)\n- webhook registration/verification (if applicable)\n- deterministic config validation (-style)\n\n## Constraints\n- Secrets via `CredentialObject`/`CredentialId` (egress proxy injection preferred) only.\n- Provisioning must be fully mockable for unit tests.\n\n## Acceptance Criteria\n- Provisioning flow is deterministic and produces clear failure diagnostics.\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:49.304567837-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:55.135862001-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.20.2","depends_on_id":"flywheel_connectors-lszk.20","type":"parent-child","created_at":"2026-01-15T06:25:49.305987914-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.20.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:25:49.731798972-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.20.3","title":"TEST: fcp.duckdb Connector Unit/Integration Tests (mock-only)","description":"# TEST: fcp.duckdb Connector Unit/Integration Tests (mock-only)\n\n## Goal\nMock-only unit/integration tests for fcp.duckdb covering:\n- request validation + bounded parsing\n- idempotency + receipts/audit for external side effects\n- rate limiting + retries\n- strict redaction (no secrets/PII in logs)\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Tests emit structured JSON logs per platform test standard.\n\n\nLABELS: connectors, fcp2, testing, tier4\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:50.170609509-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:03.920567637-05:00","labels":["connectors","fcp2","testing","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.20.3","depends_on_id":"flywheel_connectors-lszk.20","type":"parent-child","created_at":"2026-01-15T06:25:50.171892227-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.20.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T06:25:50.590665459-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.20.4","title":"E2E: fcp.duckdb Connector Compliance Run","description":"# E2E: fcp.duckdb Connector Compliance Run\n\n## Goal\nRun the shared connector compliance framework against fcp.duckdb.\n\n## Acceptance Criteria\n- Evidence bundle produced.\n- Default deny, NetworkConstraints, receipts/audit, and structured logs are validated.\n\n\nLABELS: connectors, fcp2, e2e, tier4\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:51.079364413-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:03.973391329-05:00","labels":["connectors","e2e","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.20.4","depends_on_id":"flywheel_connectors-lszk.20","type":"parent-child","created_at":"2026-01-15T06:25:51.081255689-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.20.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T06:25:51.504285835-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.21","title":"fcp.metabase — BI / Dashboard Connector","description":"# fcp.metabase — BI / Dashboard Connector\n\n## Goal\nProvide a V2-compliant connector for Metabase: query cards/dashboards, export results, and manage queries under policy.\n\n## Manifest archetypes (closed set)\n- `operational`\n\n\u003e Interaction patterns (non-archetype): Request/Response\n\n## Success Criteria\n- Before implementation begins, create the base beads `.1`..`.4` per `flywheel_connectors-lszk.5`.\n","status":"open","priority":4,"issue_type":"epic","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:11:20.430438908-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:39:55.7948572-05:00","labels":["bi","connector","connectors","fcp2","tier-4","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.21","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T06:11:20.431804082-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.21","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T06:24:21.796903332-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.21","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:24:22.088623637-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.21","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T06:24:22.376140798-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.21","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:24:22.66977958-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.21","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T06:24:22.971217166-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.21","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:24:23.257216535-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.21.1","title":"fcp.metabase: Manifest + Capability Map (FCP2)","description":"# fcp.metabase: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the complete FCP2 manifest surface for fcp.metabase:\n- operation list + schema IDs\n- capability families (per operation)\n- sandbox profile requirements\n- NetworkConstraints (deny-by-default)\n- state model declaration (stateless/singleton_writer/crdt)\n\n## Notes\n- Capability IDs MUST NOT encode hostnames/ports.\n- If streaming/webhooks exist, replay/ack/cursor semantics must be explicitly declared.\n\n## Acceptance Criteria\n- Manifest validates strictly.\n- Mechanical compliance runner accepts the manifest.\n\n\nLABELS: connectors, fcp2, tier4\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:51.956571624-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:04.028050522-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.21.1","depends_on_id":"flywheel_connectors-lszk.21","type":"parent-child","created_at":"2026-01-15T06:25:51.958017229-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.21.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:25:52.383142866-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.21.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:25:52.731141705-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.21.2","title":"fcp.metabase: Provisioning Automation (Auth/Webhooks/Setup)","description":"# fcp.metabase: Provisioning Automation (Auth/Webhooks/Setup)\n\n## Goal\nAutomate setup with minimal human prompts:\n- auth bootstrap (OAuth/API key/PAT)\n- webhook registration/verification (if applicable)\n- deterministic config validation (-style)\n\n## Constraints\n- Secrets via `CredentialObject`/`CredentialId` (egress proxy injection preferred) only.\n- Provisioning must be fully mockable for unit tests.\n\n## Acceptance Criteria\n- Provisioning flow is deterministic and produces clear failure diagnostics.\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:53.165014863-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:55.195977704-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.21.2","depends_on_id":"flywheel_connectors-lszk.21","type":"parent-child","created_at":"2026-01-15T06:25:53.166383243-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.21.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:25:53.61205863-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.21.3","title":"TEST: fcp.metabase Connector Unit/Integration Tests (mock-only)","description":"# TEST: fcp.metabase Connector Unit/Integration Tests (mock-only)\n\n## Goal\nMock-only unit/integration tests for fcp.metabase covering:\n- request validation + bounded parsing\n- idempotency + receipts/audit for external side effects\n- rate limiting + retries\n- strict redaction (no secrets/PII in logs)\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Tests emit structured JSON logs per platform test standard.\n\n\nLABELS: connectors, fcp2, testing, tier4\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:54.060513136-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:04.081210267-05:00","labels":["connectors","fcp2","testing","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.21.3","depends_on_id":"flywheel_connectors-lszk.21","type":"parent-child","created_at":"2026-01-15T06:25:54.061987575-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.21.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T06:25:54.490781117-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.21.4","title":"E2E: fcp.metabase Connector Compliance Run","description":"# E2E: fcp.metabase Connector Compliance Run\n\n## Goal\nRun the shared connector compliance framework against fcp.metabase.\n\n## Acceptance Criteria\n- Evidence bundle produced.\n- Default deny, NetworkConstraints, receipts/audit, and structured logs are validated.\n\n\nLABELS: connectors, fcp2, e2e, tier4\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:54.990228964-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:04.137613417-05:00","labels":["connectors","e2e","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.21.4","depends_on_id":"flywheel_connectors-lszk.21","type":"parent-child","created_at":"2026-01-15T06:25:54.991588988-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.21.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T06:25:55.457974908-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.22","title":"fcp.retool — Internal Tools Connector","description":"# fcp.retool — Internal Tools Connector\n\n## Goal\nProvide a V2-compliant connector for Retool: trigger jobs/queries and retrieve results with strict policy + audit.\n\n## Manifest archetypes (closed set)\n- `operational`\n\n\u003e Interaction patterns (non-archetype): Request/Response\n\n## Success Criteria\n- Before implementation begins, create the base beads `.1`..`.4` per `flywheel_connectors-lszk.5`.\n","status":"open","priority":4,"issue_type":"epic","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:11:25.790198264-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:39:55.911518423-05:00","labels":["connector","connectors","fcp2","internal-tools","tier-4","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.22","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T06:11:25.791624303-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.22","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T06:24:23.564175821-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.22","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:24:23.857783926-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.22","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T06:24:24.144449932-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.22","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:24:24.437312941-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.22","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T06:24:24.743462671-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.22","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:24:25.030606859-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.22.1","title":"fcp.retool: Manifest + Capability Map (FCP2)","description":"# fcp.retool: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the complete FCP2 manifest surface for fcp.retool:\n- operation list + schema IDs\n- capability families (per operation)\n- sandbox profile requirements\n- NetworkConstraints (deny-by-default)\n- state model declaration (stateless/singleton_writer/crdt)\n\n## Notes\n- Capability IDs MUST NOT encode hostnames/ports.\n- If streaming/webhooks exist, replay/ack/cursor semantics must be explicitly declared.\n\n## Acceptance Criteria\n- Manifest validates strictly.\n- Mechanical compliance runner accepts the manifest.\n\n\nLABELS: connectors, fcp2, tier4\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:55.940098667-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:04.189430572-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.22.1","depends_on_id":"flywheel_connectors-lszk.22","type":"parent-child","created_at":"2026-01-15T06:25:55.941514155-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.22.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:25:56.369995658-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.22.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:25:56.723911202-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.22.2","title":"fcp.retool: Provisioning Automation (Auth/Webhooks/Setup)","description":"# fcp.retool: Provisioning Automation (Auth/Webhooks/Setup)\n\n## Goal\nAutomate setup with minimal human prompts:\n- auth bootstrap (OAuth/API key/PAT)\n- webhook registration/verification (if applicable)\n- deterministic config validation (-style)\n\n## Constraints\n- Secrets via `CredentialObject`/`CredentialId` (egress proxy injection preferred) only.\n- Provisioning must be fully mockable for unit tests.\n\n## Acceptance Criteria\n- Provisioning flow is deterministic and produces clear failure diagnostics.\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:57.165934364-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:55.25836033-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.22.2","depends_on_id":"flywheel_connectors-lszk.22","type":"parent-child","created_at":"2026-01-15T06:25:57.167451393-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.22.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:25:57.597681604-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.22.3","title":"TEST: fcp.retool Connector Unit/Integration Tests (mock-only)","description":"# TEST: fcp.retool Connector Unit/Integration Tests (mock-only)\n\n## Goal\nMock-only unit/integration tests for fcp.retool covering:\n- request validation + bounded parsing\n- idempotency + receipts/audit for external side effects\n- rate limiting + retries\n- strict redaction (no secrets/PII in logs)\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Tests emit structured JSON logs per platform test standard.\n\n\nLABELS: connectors, fcp2, testing, tier4\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:58.049072615-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:04.243285918-05:00","labels":["connectors","fcp2","testing","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.22.3","depends_on_id":"flywheel_connectors-lszk.22","type":"parent-child","created_at":"2026-01-15T06:25:58.050578935-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.22.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T06:25:58.481042615-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.22.4","title":"E2E: fcp.retool Connector Compliance Run","description":"# E2E: fcp.retool Connector Compliance Run\n\n## Goal\nRun the shared connector compliance framework against fcp.retool.\n\n## Acceptance Criteria\n- Evidence bundle produced.\n- Default deny, NetworkConstraints, receipts/audit, and structured logs are validated.\n\n\nLABELS: connectors, fcp2, e2e, tier4\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:58.982173986-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:04.2962316-05:00","labels":["connectors","e2e","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.22.4","depends_on_id":"flywheel_connectors-lszk.22","type":"parent-child","created_at":"2026-01-15T06:25:58.983618219-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.22.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T06:25:59.42299415-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.23","title":"fcp.zapier — Automation Connector","description":"# fcp.zapier — Automation Connector\n\n## Goal\nProvide a V2-compliant connector for Zapier: trigger zaps, inspect workflows, and manage connections under strict policy.\n\n## Manifest archetypes (closed set)\n- `operational`\n- `streaming`\n\n\u003e Interaction patterns (non-archetype): Request/Response + Webhook triggers\n\n## FCP2 Notes\n- Treat automation triggers as external side effects; require receipts/audit.\n\n## Success Criteria\n- Before implementation begins, create the base beads `.1`..`.4` per `flywheel_connectors-lszk.5`.\n","status":"open","priority":4,"issue_type":"epic","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:11:32.0797288-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:39:56.029592019-05:00","labels":["automation","connector","connectors","fcp2","tier-4","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.23","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T06:11:32.081252062-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.23","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T06:24:25.333504377-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.23","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:24:25.624274721-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.23","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T06:24:25.90962712-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.23","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:24:26.201241356-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.23","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T06:24:26.499969543-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.23","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:24:26.793177734-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.23.1","title":"fcp.zapier: Manifest + Capability Map (FCP2)","description":"# fcp.zapier: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the complete FCP2 manifest surface for fcp.zapier:\n- operation list + schema IDs\n- capability families (per operation)\n- sandbox profile requirements\n- NetworkConstraints (deny-by-default)\n- state model declaration (stateless/singleton_writer/crdt)\n\n## Notes\n- Capability IDs MUST NOT encode hostnames/ports.\n- If streaming/webhooks exist, replay/ack/cursor semantics must be explicitly declared.\n\n## Acceptance Criteria\n- Manifest validates strictly.\n- Mechanical compliance runner accepts the manifest.\n\n\nLABELS: connectors, fcp2, tier4\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:25:59.891030672-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:04.351009326-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.23.1","depends_on_id":"flywheel_connectors-lszk.23","type":"parent-child","created_at":"2026-01-15T06:25:59.892393902-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.23.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:26:00.347228826-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.23.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:26:00.705552359-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.23.2","title":"fcp.zapier: Provisioning Automation (Auth/Webhooks/Setup)","description":"# fcp.zapier: Provisioning Automation (Auth/Webhooks/Setup)\n\n## Goal\nAutomate setup with minimal human prompts:\n- auth bootstrap (OAuth/API key/PAT)\n- webhook registration/verification (if applicable)\n- deterministic config validation (-style)\n\n## Constraints\n- Secrets via `CredentialObject`/`CredentialId` (egress proxy injection preferred) only.\n- Provisioning must be fully mockable for unit tests.\n\n## Acceptance Criteria\n- Provisioning flow is deterministic and produces clear failure diagnostics.\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:26:01.152919836-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:55.319716562-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.23.2","depends_on_id":"flywheel_connectors-lszk.23","type":"parent-child","created_at":"2026-01-15T06:26:01.154318803-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.23.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:26:01.596390186-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.23.3","title":"TEST: fcp.zapier Connector Unit/Integration Tests (mock-only)","description":"# TEST: fcp.zapier Connector Unit/Integration Tests (mock-only)\n\n## Goal\nMock-only unit/integration tests for fcp.zapier covering:\n- request validation + bounded parsing\n- idempotency + receipts/audit for external side effects\n- rate limiting + retries\n- strict redaction (no secrets/PII in logs)\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Tests emit structured JSON logs per platform test standard.\n\n\nLABELS: connectors, fcp2, testing, tier4\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:26:02.047966106-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:04.404451614-05:00","labels":["connectors","fcp2","testing","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.23.3","depends_on_id":"flywheel_connectors-lszk.23","type":"parent-child","created_at":"2026-01-15T06:26:02.049253343-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.23.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T06:26:02.523092814-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.23.4","title":"E2E: fcp.zapier Connector Compliance Run","description":"# E2E: fcp.zapier Connector Compliance Run\n\n## Goal\nRun the shared connector compliance framework against fcp.zapier.\n\n## Acceptance Criteria\n- Evidence bundle produced.\n- Default deny, NetworkConstraints, receipts/audit, and structured logs are validated.\n\n\nLABELS: connectors, fcp2, e2e, tier4\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:26:03.05540695-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:04.458956926-05:00","labels":["connectors","e2e","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.23.4","depends_on_id":"flywheel_connectors-lszk.23","type":"parent-child","created_at":"2026-01-15T06:26:03.056826647-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.23.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T06:26:03.510693186-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.24","title":"fcp.make — Visual Automation Connector","description":"# fcp.make — Visual Automation Connector\n\n## Goal\nProvide a V2-compliant connector for Make.com (Integromat): trigger scenarios, inspect runs, and manage connections under strict policy.\n\n## Manifest archetypes (closed set)\n- `operational`\n- `streaming`\n\n\u003e Interaction patterns (non-archetype): Request/Response + Webhook triggers\n\n## Success Criteria\n- Before implementation begins, create the base beads `.1`..`.4` per `flywheel_connectors-lszk.5`.\n","status":"open","priority":4,"issue_type":"epic","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:11:37.56738468-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:39:56.145380477-05:00","labels":["automation","connector","connectors","fcp2","tier-4","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.24","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T06:11:37.598050021-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.24","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T06:24:27.096391569-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.24","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:24:27.393451631-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.24","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T06:24:27.681708436-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.24","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:24:27.974694278-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.24","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T06:24:28.273732099-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.24","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:24:28.560320969-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.24.1","title":"fcp.make: Manifest + Capability Map (FCP2)","description":"# fcp.make: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the complete FCP2 manifest surface for fcp.make:\n- operation list + schema IDs\n- capability families (per operation)\n- sandbox profile requirements\n- NetworkConstraints (deny-by-default)\n- state model declaration (stateless/singleton_writer/crdt)\n\n## Notes\n- Capability IDs MUST NOT encode hostnames/ports.\n- If streaming/webhooks exist, replay/ack/cursor semantics must be explicitly declared.\n\n## Acceptance Criteria\n- Manifest validates strictly.\n- Mechanical compliance runner accepts the manifest.\n\n\nLABELS: connectors, fcp2, tier4\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:26:03.986428751-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:04.513448232-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.24.1","depends_on_id":"flywheel_connectors-lszk.24","type":"parent-child","created_at":"2026-01-15T06:26:03.987795087-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.24.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:26:04.427682032-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.24.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:26:04.792212997-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.24.2","title":"fcp.make: Provisioning Automation (Auth/Webhooks/Setup)","description":"# fcp.make: Provisioning Automation (Auth/Webhooks/Setup)\n\n## Goal\nAutomate setup with minimal human prompts:\n- auth bootstrap (OAuth/API key/PAT)\n- webhook registration/verification (if applicable)\n- deterministic config validation (-style)\n\n## Constraints\n- Secrets via `CredentialObject`/`CredentialId` (egress proxy injection preferred) only.\n- Provisioning must be fully mockable for unit tests.\n\n## Acceptance Criteria\n- Provisioning flow is deterministic and produces clear failure diagnostics.\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:26:05.243982452-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:55.380254591-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.24.2","depends_on_id":"flywheel_connectors-lszk.24","type":"parent-child","created_at":"2026-01-15T06:26:05.245265641-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.24.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:26:05.693081914-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.24.3","title":"TEST: fcp.make Connector Unit/Integration Tests (mock-only)","description":"# TEST: fcp.make Connector Unit/Integration Tests (mock-only)\n\n## Goal\nMock-only unit/integration tests for fcp.make covering:\n- request validation + bounded parsing\n- idempotency + receipts/audit for external side effects\n- rate limiting + retries\n- strict redaction (no secrets/PII in logs)\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Tests emit structured JSON logs per platform test standard.\n\n\nLABELS: connectors, fcp2, testing, tier4\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:26:06.152030413-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:04.56753233-05:00","labels":["connectors","fcp2","testing","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.24.3","depends_on_id":"flywheel_connectors-lszk.24","type":"parent-child","created_at":"2026-01-15T06:26:06.153401738-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.24.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T06:26:06.607716241-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.24.4","title":"E2E: fcp.make Connector Compliance Run","description":"# E2E: fcp.make Connector Compliance Run\n\n## Goal\nRun the shared connector compliance framework against fcp.make.\n\n## Acceptance Criteria\n- Evidence bundle produced.\n- Default deny, NetworkConstraints, receipts/audit, and structured logs are validated.\n\n\nLABELS: connectors, fcp2, e2e, tier4\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:26:07.113908594-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:04.622239423-05:00","labels":["connectors","e2e","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.24.4","depends_on_id":"flywheel_connectors-lszk.24","type":"parent-child","created_at":"2026-01-15T06:26:07.115160914-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.24.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T06:26:07.563301078-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.25","title":"fcp.n8n — Self-Hosted Automation Connector","description":"# fcp.n8n — Self-Hosted Automation Connector\n\n## Goal\nProvide a V2-compliant connector for n8n: trigger workflows, inspect runs, and manage credentials/connections under strict policy.\n\n## Manifest archetypes (closed set)\n- `operational`\n- `streaming`\n\n\u003e Interaction patterns (non-archetype): Request/Response + Webhook triggers\n\n## FCP2 Notes\n- Self-hosted instances vary; NetworkConstraints should pin to configured host(s) only.\n\n## Success Criteria\n- Before implementation begins, create the base beads `.1`..`.4` per `flywheel_connectors-lszk.5`.\n","status":"open","priority":4,"issue_type":"epic","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:11:43.562499073-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:39:56.26266763-05:00","labels":["automation","connector","connectors","fcp2","tier-4","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.25","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T06:11:43.563747006-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.25","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T06:24:28.860639946-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.25","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:24:29.155026438-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.25","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T06:24:29.470593133-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.25","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:24:29.793861418-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.25","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T06:24:30.09819276-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.25","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:24:30.38516301-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.25.1","title":"fcp.n8n: Manifest + Capability Map (FCP2)","description":"# fcp.n8n: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the complete FCP2 manifest surface for fcp.n8n:\n- operation list + schema IDs\n- capability families (per operation)\n- sandbox profile requirements\n- NetworkConstraints (deny-by-default)\n- state model declaration (stateless/singleton_writer/crdt)\n\n## Notes\n- Capability IDs MUST NOT encode hostnames/ports.\n- If streaming/webhooks exist, replay/ack/cursor semantics must be explicitly declared.\n\n## Acceptance Criteria\n- Manifest validates strictly.\n- Mechanical compliance runner accepts the manifest.\n\n\nLABELS: connectors, fcp2, tier4\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:26:08.037095544-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:04.677024462-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.25.1","depends_on_id":"flywheel_connectors-lszk.25","type":"parent-child","created_at":"2026-01-15T06:26:08.038436462-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.25.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:26:08.485611867-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.25.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:26:08.853269196-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.25.2","title":"fcp.n8n: Provisioning Automation (Auth/Webhooks/Setup)","description":"# fcp.n8n: Provisioning Automation (Auth/Webhooks/Setup)\n\n## Goal\nAutomate setup with minimal human prompts:\n- auth bootstrap (OAuth/API key/PAT)\n- webhook registration/verification (if applicable)\n- deterministic config validation (-style)\n\n## Constraints\n- Secrets via `CredentialObject`/`CredentialId` (egress proxy injection preferred) only.\n- Provisioning must be fully mockable for unit tests.\n\n## Acceptance Criteria\n- Provisioning flow is deterministic and produces clear failure diagnostics.\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:26:09.317890429-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:55.442724251-05:00","labels":["connectors","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.25.2","depends_on_id":"flywheel_connectors-lszk.25","type":"parent-child","created_at":"2026-01-15T06:26:09.319128443-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.25.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:26:09.769273335-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.25.3","title":"TEST: fcp.n8n Connector Unit/Integration Tests (mock-only)","description":"# TEST: fcp.n8n Connector Unit/Integration Tests (mock-only)\n\n## Goal\nMock-only unit/integration tests for fcp.n8n covering:\n- request validation + bounded parsing\n- idempotency + receipts/audit for external side effects\n- rate limiting + retries\n- strict redaction (no secrets/PII in logs)\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Tests emit structured JSON logs per platform test standard.\n\n\nLABELS: connectors, fcp2, testing, tier4\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:26:10.300065483-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:04.729016867-05:00","labels":["connectors","fcp2","testing","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.25.3","depends_on_id":"flywheel_connectors-lszk.25","type":"parent-child","created_at":"2026-01-15T06:26:10.301744307-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.25.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T06:26:10.755835429-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.25.4","title":"E2E: fcp.n8n Connector Compliance Run","description":"# E2E: fcp.n8n Connector Compliance Run\n\n## Goal\nRun the shared connector compliance framework against fcp.n8n.\n\n## Acceptance Criteria\n- Evidence bundle produced.\n- Default deny, NetworkConstraints, receipts/audit, and structured logs are validated.\n\n\nLABELS: connectors, fcp2, e2e, tier4\n","status":"open","priority":4,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:26:11.277310051-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:27:04.782775562-05:00","labels":["connectors","e2e","fcp2","tier4"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.25.4","depends_on_id":"flywheel_connectors-lszk.25","type":"parent-child","created_at":"2026-01-15T06:26:11.278783078-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.25.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T06:26:11.738948091-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.26","title":"fcp.vectordb — Vector Database (Provider-Selectable) Connector","description":"# (EPIC) fcp.vectordb — Vector Database (Provider-Selectable) Connector (FCP2)\n\n## Goal\nProvide a **single, stable FCP2 operation surface** for vector database usage (collections, upsert, query, delete) while allowing deployment-time selection of the backend provider.\n\nThis is explicitly called out in `docs/fcp_additional_connectors_prioritized.md` as a way to let agents swap vector DB providers without rewriting tool logic.\n\n## Critical constraint: FCP2 composition model\n- This connector MUST NOT “call other connectors”.\n- Provider selection is an **implementation detail inside this connector binary** (or a build/install-time variant of it).\n- The Gateway remains the only composition point across connectors.\n\n## Deployment model (recommended)\nWe ship provider-specific **signed artifacts**:\n- `fcp.vectordb` (pinecone variant)\n- `fcp.vectordb` (qdrant variant)\n\nEach artifact embeds a manifest whose:\n- operations + schemas are stable and hashed\n- NetworkConstraints are correct for that provider\n\nThis avoids unsafe “runtime provider swapping” that could expand egress without a manifest update.\n\n## Manifest archetypes (closed set)\n- `storage`\n- `knowledge`\n\n## Zone model\n- Single-zone bound: one connector instance ↔ one `ZoneId`.\n- No multi-tenant multiplexing inside a single instance.\n\n## External surface / NetworkConstraints\n- Default deny.\n- Allow only the configured provider endpoint(s) required by the declared operations.\n- Host restrictions are expressed via NetworkConstraints (never encoded into capability IDs).\n\n## Capability model (illustrative)\nCapability families are **provider-agnostic** and map to the common surface:\n- `vectordb.collections.manage` (create/delete/update)\n- `vectordb.points.read`\n- `vectordb.points.write` (Dangerous)\n- `vectordb.search.query`\n- `vectordb.snapshots.manage` (Dangerous, optional)\n\nProvider-specific extensions (optional) must be explicitly named and documented.\n\n## Operations (common surface)\n- Collections: create/get/list/delete\n- Points: upsert/get/delete/scroll\n- Search: query / batch query\n\nNormative behavior constraints:\n- Bounded payload sizes and timeouts.\n- Idempotency rules are explicit per operation.\n- Writes emit receipts/audit and fail closed on uncertain outcomes.\n\n## State model\n- Prefer stateless.\n- If implementing retries with idempotency keys or cursors, persist via connector state objects and use singleton-writer leases.\n\n## Test plan\n- Mock-only unit/integration tests with deterministic provider simulators.\n- Cross-provider golden behavior tests:\n  - common schema validation\n  - error taxonomy mapping\n  - retry semantics\n  - redaction / no secret logging\n- E2E compliance run through `flywheel_connectors-e3i9`.\n\n## Acceptance Criteria\n- Passes mechanical connector compliance runner (static + dynamic).\n- Mock-only tests; no live network calls.\n- Provider selection cannot expand egress without a new signed manifest.\n\n## Success Criteria\n- The epic includes baseline beads (.1.. .4) per `flywheel_connectors-lszk.5`.\n- Provider selection cannot expand egress without a new signed manifest.\n- The connector passes `flywheel_connectors-1n78.21.5` and has an E2E run wired through `flywheel_connectors-e3i9`.\n","status":"open","priority":1,"issue_type":"epic","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:03:14.899665644-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:16:06.071269611-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.26","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T07:03:14.901013034-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.26","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T07:03:15.323150364-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.26","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T07:03:15.710635538-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.26","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T07:03:16.094125189-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.26","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T07:03:16.483629951-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.26","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T07:03:16.878401992-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.26","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T07:03:17.265064986-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.26","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T07:03:17.694035667-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.26","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:03:18.096471896-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.26.1","title":"fcp.vectordb: Manifest + Capability Map (FCP2)","description":"# fcp.vectordb: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the manifest for the `fcp.vectordb` connector artifact, including:\n- operation list + schema IDs\n- capability families\n- NetworkConstraints per operation\n- sandbox profile requirements\n- explicit provider variant boundary (pinecone vs qdrant)\n\n## Notes\n- The common operation surface MUST remain stable across provider variants.\n- Provider-specific extensions MUST be optional and clearly separated.\n\n## Acceptance Criteria\n- Manifest passes static checks in `flywheel_connectors-1n78.21.5`.\n- NetworkConstraints are default-deny and minimal.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:03:18.494742322-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:03:18.494742322-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.26.1","depends_on_id":"flywheel_connectors-lszk.26","type":"parent-child","created_at":"2026-01-15T07:03:18.55076275-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.26.2","title":"fcp.vectordb: Provisioning Automation (Provider Variant + Credentials)","description":"# fcp.vectordb: Provisioning Automation (Provider Variant + Credentials)\n\n## Goal\nAutomate setup so humans do not have to hand-wire credentials:\n- accept `CredentialObject`/`CredentialId` injection (egress proxy preferred) (API key / bearer token)\n- validate endpoint + TLS settings\n- run `fcp doctor` readiness checks\n\n## Provider selection\nProvider variant is chosen at install/build time (not runtime) so the embedded manifest matches the allowed egress surface.\n\n## Acceptance Criteria\n- Provisioning produces a deterministic config and does not write secrets to disk.\n- All failure modes return actionable, non-leaky errors.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:03:19.014498078-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:55.502204657-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.26.2","depends_on_id":"flywheel_connectors-lszk.26","type":"parent-child","created_at":"2026-01-15T07:03:19.06935893-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.26.3","title":"TEST: fcp.vectordb Unit/Integration Tests (mock-only)","description":"# TEST: fcp.vectordb Unit/Integration Tests (mock-only)\n\n## Goal\nDeterministic tests for the provider-agnostic surface:\n- schema validation\n- error taxonomy mapping\n- retry + idempotency rules\n- redaction (no credential leakage)\n- payload bounds and timeouts\n\n## Mocks\n- in-process provider simulators for pinecone and qdrant semantics.\n\n## Logging\nEmit structured JSON logs per `flywheel_connectors-1n78.35`.\n\n## Acceptance Criteria\n- Tests are mock-only and deterministic.\n- Coverage includes schema validation, error taxonomy mapping, retry semantics, redaction, and bounds.\n- Emits structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:03:19.549205611-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:16:13.544553814-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.26.3","depends_on_id":"flywheel_connectors-lszk.26","type":"parent-child","created_at":"2026-01-15T07:03:19.605277426-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.26.3","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:03:20.088749311-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.26.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T07:32:17.686993138-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.26.4","title":"E2E: fcp.vectordb Connector Compliance Run","description":"# E2E: fcp.vectordb Connector Compliance Run\n\n## Goal\nRun the shared connector compliance runner and capture an evidence bundle:\n- default deny\n- NetworkConstraints enforcement\n- receipts/audit for writes\n- structured logging\n\n## Acceptance Criteria\n- Run is deterministic and produces an evidence bundle.\n- Validates default deny, NetworkConstraints enforcement, receipts/audit for writes, and structured logging.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:03:20.492568708-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:16:20.954620322-05:00","labels":["connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.26.4","depends_on_id":"flywheel_connectors-lszk.26","type":"parent-child","created_at":"2026-01-15T07:03:20.550431278-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.26.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T07:03:21.03183795-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.27","title":"fcp.cron — Scheduled Task Runner (Meta-Connector)","description":"# (EPIC) fcp.cron — Scheduled Task Runner (Meta-Connector, FCP2)\n\n## Goal\nProvide time-based automation as an FCP2-compliant **event source + schedule manager**.\n\nThis is a force-multiplier connector from `docs/fcp_additional_connectors_prioritized.md`.\n\n## Important: what this connector does (and does NOT do)\n- It **does not** “invoke other connectors”. (FCP2 composition is gateway-only.)\n- It emits **schedule-fired events** that the Gateway/Agent can react to, and it exposes operations to manage schedules.\n\nIf we later want “schedule → automatically invoke operation X”, that must be implemented as a **Gateway policy feature** that consumes cron events and performs the invocation with normal capability checks and audit.\n\n## Manifest archetypes (closed set)\n- `streaming` (schedule-fired events)\n- `operational` (CRUD schedules)\n\n## Zone model\n- Single-zone bound: schedules belong to exactly one `ZoneId`.\n- Zone policy governs what kinds of schedules are allowed (frequency ceilings, max concurrency).\n\n## External surface / NetworkConstraints\n- Default deny.\n- This connector should require **no outbound network egress** in the common case.\n- If it supports optional alert delivery to external systems, that must be explicit operations with explicit NetworkConstraints.\n\n## Capability model (illustrative)\n- `cron.schedules.read`\n- `cron.schedules.write` (Dangerous: automation can cause side effects downstream)\n- `cron.history.read`\n\n## Core operations\n- schedule CRUD (cron, interval, one-shot)\n- preview next N fire times (pure)\n- pause/resume schedules\n- emit schedule-fired events with correlation IDs\n\n## State model\n- Stateful:\n  - persisted schedules\n  - execution history (bounded)\n  - missed-fire tracking (bounded)\n\nState MUST be:\n- bounded in size\n- written under singleton-writer lease semantics\n- auditable (changes to schedules produce audit events)\n\n## Test plan\n- Unit tests for cron parsing and next-fire computation (timezone/DST correctness).\n- Adversarial tests for clock skew and missed-fire behavior.\n- E2E compliance run verifying:\n  - default deny\n  - structured logs\n  - correct event envelope behavior\n\n## Acceptance Criteria\n- Passes mechanical connector compliance runner.\n- Deterministic tests; no reliance on wall-clock flakiness (use controlled clock).\n- Schedule state is bounded and auditable.\n\n## Success Criteria\n- The epic includes baseline beads (.1.. .4) per `flywheel_connectors-lszk.5`.\n- Scheduling semantics are deterministic under a controlled clock in tests.\n- The connector passes mechanical compliance checks and has an E2E run wired through `flywheel_connectors-e3i9`.\n","status":"open","priority":2,"issue_type":"epic","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:03:50.022055956-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:16:27.633788363-05:00","labels":["connectors","fcp2","meta"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.27","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T07:03:50.023383048-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.27","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T07:03:50.451934298-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.27","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T07:03:50.836551476-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.27","depends_on_id":"flywheel_connectors-1n78.20.1","type":"blocks","created_at":"2026-01-15T07:03:51.244461524-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.27","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T07:03:51.643366236-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.27","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T07:03:52.043510274-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.27","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T07:03:52.428542343-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.27","depends_on_id":"flywheel_connectors-1n78.34","type":"blocks","created_at":"2026-01-15T07:03:52.821808275-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.27","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:03:53.215017259-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.27.1","title":"fcp.cron: Manifest + Capability Map (FCP2)","description":"# fcp.cron: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the schedule-management and event-stream manifest surface:\n- schedule CRUD operations + schemas\n- event types emitted\n- capability families\n- sandbox profile\n\n## Acceptance Criteria\n- Static manifest checks pass.\n- NetworkConstraints default deny (usually empty).\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:03:53.621367317-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:03:53.621367317-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.27.1","depends_on_id":"flywheel_connectors-lszk.27","type":"parent-child","created_at":"2026-01-15T07:03:53.677350044-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.27.2","title":"fcp.cron: Provisioning Automation (Clock/Storage/Policy)","description":"# fcp.cron: Provisioning Automation (Clock/Storage/Policy)\n\n## Goal\nAutomate setup with minimal human steps:\n- validate state storage configuration\n- configure clock source / time policy\n- run `fcp doctor` checks\n\n## Acceptance Criteria\n- Provisioning is deterministic.\n- No secrets on disk.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:03:54.136926051-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:03:54.136926051-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.27.2","depends_on_id":"flywheel_connectors-lszk.27","type":"parent-child","created_at":"2026-01-15T07:03:54.191782094-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.27.3","title":"TEST: fcp.cron Unit/Integration Tests (deterministic clock)","description":"# TEST: fcp.cron Unit/Integration Tests (deterministic clock)\n\n## Goal\nDeterministic tests covering:\n- cron parsing + scheduling correctness (including DST)\n- missed-fire handling\n- state bounds + compaction\n- event emission correctness\n\n## Logging\nStructured JSON logs per `flywheel_connectors-1n78.35`.\n\n## Acceptance Criteria\n- Uses a deterministic clock (no wall-clock flake).\n- Covers cron parsing correctness (including DST), missed-fire handling, and state bounds.\n- Emits structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:03:54.687223934-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:16:34.500048742-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.27.3","depends_on_id":"flywheel_connectors-lszk.27","type":"parent-child","created_at":"2026-01-15T07:03:54.747538337-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.27.3","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:03:55.202524151-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.27.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T07:32:18.30382226-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.27.4","title":"E2E: fcp.cron Connector Compliance Run","description":"# E2E: fcp.cron Connector Compliance Run\n\n## Goal\nRun compliance runner + capture evidence:\n- default deny\n- event envelope correctness\n- audit/logging behavior\n\n## Acceptance Criteria\n- E2E run is deterministic and produces an evidence bundle.\n- Validates default deny, event envelope correctness, and structured logging.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:03:55.596559854-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:16:43.211727602-05:00","labels":["connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.27.4","depends_on_id":"flywheel_connectors-lszk.27","type":"parent-child","created_at":"2026-01-15T07:03:55.651998404-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.27.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T07:03:56.107584099-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.28","title":"fcp.webhook-receiver — Inbound Event Gateway (Meta-Connector)","description":"# (EPIC) fcp.webhook-receiver — Inbound Event Gateway (Meta-Connector, FCP2)\n\n## Goal\nProvide a mechanically safe ingress point for external webhooks:\n- receive inbound HTTP requests\n- verify signatures\n- normalize payloads into EventEnvelope objects\n- route events to the correct zone and connector consumer via the Gateway\n\nThis is a force-multiplier connector from `docs/fcp_additional_connectors_prioritized.md`.\n\n## Manifest archetypes (closed set)\n- `operational` (endpoint CRUD + secret rotation)\n- `streaming` (emit EventEnvelopes from inbound deliveries)\n\n\u003e Note: “webhook” is an interaction pattern; streaming is represented via EventEnvelope emission.\n\n\n## Zone model\n- Single-zone bound.\n- One instance ↔ one `ZoneId`.\n\nImportant: Webhooks are a major untrusted input surface.\n- All payloads are tainted by default.\n- Any elevation/declassification requires ApprovalToken and DecisionReceipt.\n\n## External surface\n### Ingress\n- This connector requires an inbound HTTP listener.\n- If exposed via Tailscale Funnel or similar, treat inbound traffic as hostile.\n\n### NetworkConstraints (egress)\n- Default deny.\n- Only required if the connector supports optional downstream calls (e.g., webhook ack callbacks). Prefer “ingress only”.\n\n## Capability model (illustrative)\n- `webhook.endpoints.read`\n- `webhook.endpoints.write` (Dangerous)\n- `webhook.deliveries.read` (may contain sensitive content)\n\n## Core operations\n- Endpoint CRUD (create/delete/rotate secret)\n- Signature verification per provider type (HMAC, Ed25519, etc)\n- Replay protection (delivery id + timestamp windows)\n- Payload size limits\n- Normalized event emission (EventEnvelope)\n- Dead-letter queue (bounded) for failed deliveries\n\n## State model\n- Stateful:\n  - endpoint registry (bounded)\n  - recent delivery ids (bounded replay cache)\n  - dead-letter queue pointers\n\nAll state must be bounded and written under singleton-writer lease semantics.\n\n## Test plan\n- Unit tests: signature verification vectors (HMAC + Ed25519), replay window handling.\n- Adversarial tests: oversized payloads, invalid encodings, signature stripping.\n- E2E: compliance run + evidence bundle.\n\n## Acceptance Criteria\n- Passes mechanical compliance runner.\n- Default deny + taint-by-default is enforced.\n- Deterministic tests; no reliance on real network.\n\n## Success Criteria\n- The epic includes baseline beads (.1.. .4) per `flywheel_connectors-lszk.5`.\n- Webhook payloads are tainted by default and signature verification is mechanically testable.\n- The connector passes mechanical compliance checks and has an E2E run wired through `flywheel_connectors-e3i9`.\n","status":"open","priority":2,"issue_type":"epic","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:04:21.608228639-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:35:11.342798902-05:00","labels":["connectors","fcp2","meta"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.28","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T07:04:21.609554127-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.28","depends_on_id":"flywheel_connectors-1n78.16","type":"blocks","created_at":"2026-01-15T07:04:22.045391043-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.28","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T07:04:22.444912697-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.28","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T07:04:22.840540191-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.28","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T07:04:23.234625447-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.28","depends_on_id":"flywheel_connectors-1n78.20.1","type":"blocks","created_at":"2026-01-15T07:04:23.637739595-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.28","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T07:04:24.042096314-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.28","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T07:04:24.455774937-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.28","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T07:04:24.853643275-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.28","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:04:25.249833169-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.28.1","title":"fcp.webhook-receiver: Manifest + Capability Map (FCP2)","description":"# fcp.webhook-receiver: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine endpoint/signer/event schemas and capability families.\n\n## Acceptance Criteria\n- Manifest passes static compliance checks.\n- Ingress requirements are explicit in sandbox profile.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:04:25.656981792-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:04:25.656981792-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.28.1","depends_on_id":"flywheel_connectors-lszk.28","type":"parent-child","created_at":"2026-01-15T07:04:25.712844142-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.28.2","title":"fcp.webhook-receiver: Provisioning Automation (Endpoint Setup + Secrets)","description":"# fcp.webhook-receiver: Provisioning Automation (Endpoint Setup + Secrets)\n\n## Goal\nAutomate endpoint creation and safe secret handling:\n- rotate webhook secrets\n- generate endpoint URLs\n- validate provider signature settings\n- run `fcp doctor` readiness checks\n\n## Acceptance Criteria\n- No secrets on disk.\n- Deterministic provisioning outputs.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:04:26.180883885-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:04:26.180883885-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.28.2","depends_on_id":"flywheel_connectors-lszk.28","type":"parent-child","created_at":"2026-01-15T07:04:26.236363463-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.28.3","title":"TEST: fcp.webhook-receiver Unit/Integration Tests (signature + replay)","description":"# TEST: fcp.webhook-receiver Unit/Integration Tests (signature + replay)\n\n## Goal\nDeterministic tests for:\n- signature verification vectors\n- replay protection windows\n- payload size limits\n- taint labeling\n\n## Logging\nStructured JSON logs per `flywheel_connectors-1n78.35`.\n\n## Acceptance Criteria\n- Deterministic tests cover signature verification vectors, replay protection, and bounds.\n- Emits structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:04:26.710932124-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:16:57.714928813-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.28.3","depends_on_id":"flywheel_connectors-lszk.28","type":"parent-child","created_at":"2026-01-15T07:04:26.767282885-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.28.3","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:04:27.23893128-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.28.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T07:32:18.919342945-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.28.4","title":"E2E: fcp.webhook-receiver Connector Compliance Run","description":"# E2E: fcp.webhook-receiver Connector Compliance Run\n\n## Goal\nCompliance runner + evidence bundle:\n- default deny\n- taint-by-default\n- structured logs\n\n## Acceptance Criteria\n- E2E run is deterministic and produces an evidence bundle.\n- Validates default deny, taint-by-default, and structured logging.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:04:27.64067266-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:17:04.652528467-05:00","labels":["connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.28.4","depends_on_id":"flywheel_connectors-lszk.28","type":"parent-child","created_at":"2026-01-15T07:04:27.742404411-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.28.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T07:04:28.237111636-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.3","title":"fcp.sentry - Sentry Error Tracking Connector","description":"# fcp.sentry - Sentry Error Tracking Connector\n\n## Goal\nImplement a V2-compliant Sentry connector for error tracking + performance monitoring + alert-driven automation.\n\n## Why this matters\nSentry is the canonical \"production reality\" signal for many teams. A great connector enables:\n- automatic incident bead creation\n- root-cause triage workflows\n- safe/approved remediation (with audit)\n\n## Required FCP behaviors\n- Single-zone binding.\n- Default deny (capability-gated operations).\n- No secret/PII logging.\n- Webhook inputs are tainted by default and require sanitization/approval for dangerous downstream actions.\n\n## Manifest archetypes (closed set)\n- `operational` (query issues/events/releases; manage alert rules)\n- `streaming` (webhook ingest for alerts/incidents)\n\n\u003e Note: “webhook” is an interaction pattern, not a manifest archetype value.\n\n\n## Scope\nThis epic owns the end-to-end Sentry connector and groups the operation-level child beads.\n\n## Acceptance Criteria\n- Connector passes mechanical conformance checks.\n- Webhook flows can run fully locally with mocks in CI.\n\n## Success Criteria\n- The epic includes (or references) the standard base beads `.1`..`.4` per `flywheel_connectors-lszk.5`.\n- The connector passes `flywheel_connectors-1n78.21.5` (static + dynamic) and has an E2E compliance run wired through `flywheel_connectors-e3i9`.\n- Unit/integration tests are mock-only (no real external calls) and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"epic","owner":"jeff141421@gmail.com","created_at":"2026-01-15T02:30:29.117836486-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:35:11.217865429-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.3","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:30:29.162847862-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.3","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T04:20:21.050282096-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.3","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T04:20:21.235704398-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.3","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T04:20:21.414107649-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.3","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T04:20:21.599824246-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.3","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T04:20:21.793347809-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.3","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T04:20:21.974434094-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.3.1","title":"fcp.sentry: Manifest + Capability Map (FCP2)","description":"# fcp.sentry: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the Sentry connector’s **mechanical manifest contract** for strict FCP2 compliance.\n\n## Required contents\n- Manifest archetypes (closed set):\n  - `knowledge` (events/issues/performance data reads)\n  - `operational` (issue assignment/status updates, alert rules)\n  - `streaming` (webhooks: issue events, alert triggers, releases)\n- Operation list + schema IDs.\n- Capability families + per-operation required caps.\n- NetworkConstraints:\n  - pin Sentry API host (SaaS: sentry.io; self-hosted: configured base host)\n  - pin attachment/artifact download hosts if distinct\n  - HTTPS-only; deny redirects by default\n- State model declaration:\n  - webhook cursor/idempotency state if persisted\n  - mapping state for auto-create-beads feature (if stored)\n\n## Output artifacts\n- Full manifest spec stored here.\n- Good/bad examples for static compliance.\n\n## Acceptance criteria\n- Another engineer can implement `--manifest` from this bead alone.\n- Static compliance can mechanically reject overly-broad egress.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:19:36.227777549-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:19:36.227777549-05:00","dependencies":[{"issue_id":"flywheel_connectors-lszk.3.1","depends_on_id":"flywheel_connectors-lszk.3","type":"parent-child","created_at":"2026-01-15T04:19:36.22903603-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.3.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T04:19:39.86736876-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.3.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T04:19:40.045809341-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.3.2","title":"fcp.sentry: Provisioning Automation (auth, projects, webhooks)","description":"# fcp.sentry: Provisioning Automation (auth, projects, webhooks)\n\n## Goal\nAutomate Sentry onboarding (auth + project binding + webhook setup) with minimal human steps.\n\n## Requirements\n- Auth via `CredentialId` (token) for either:\n  - Sentry SaaS, or\n  - self-hosted base URL (policy-owned)\n- Project/environment selection:\n  - validate project slug/org\n  - validate environment filters (prod/staging)\n- Webhook setup automation:\n  - register webhook(s) for issue/alert/release events\n  - validate webhook signature/HMAC (if supported)\n\n## Safety rules\n- Validate credentials with safe read-only calls.\n- Validate NetworkConstraints pinning before readiness.\n- Never log tokens or DSNs.\n\n## Acceptance criteria\n- `fcp doctor` verifies readiness without leaking secrets.\n- Mockable in CI.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:19:48.098137219-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:55.563945203-05:00","dependencies":[{"issue_id":"flywheel_connectors-lszk.3.2","depends_on_id":"flywheel_connectors-lszk.3","type":"parent-child","created_at":"2026-01-15T04:19:48.099409205-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.3.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T04:19:51.167622153-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.3.3","title":"TEST: Sentry Connector Unit/Integration Tests (mock-only)","description":"# TEST: Sentry Connector Unit/Integration Tests (mock-only)\n\n## Goal\nComprehensive mock-only tests for fcp.sentry (issue/event/perf reads, webhooks, and safe write ops).\n\n## Requirements\n- No real Sentry API calls in CI.\n- Mock endpoints for:\n  - issue search/list\n  - event detail fetch (stack traces)\n  - performance transactions\n  - release associations\n  - alert rule config\n  - webhook event ingestion\n- Tests for:\n  - tainting of webhook inputs\n  - capability gating for reads vs writes\n  - dangerous ops (rule changes) require approval\n  - rate limiting + retry/backoff\n\n## Acceptance criteria\n- Deterministic CI suite.\n- Logs include correlation_id + reason codes for deny paths.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:19:58.453725903-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:19:58.453725903-05:00","dependencies":[{"issue_id":"flywheel_connectors-lszk.3.3","depends_on_id":"flywheel_connectors-lszk.3","type":"parent-child","created_at":"2026-01-15T04:19:58.455177166-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.3.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T04:20:01.801499973-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.3.4","title":"E2E: Sentry Connector Compliance Run","description":"# E2E: Sentry Connector Compliance Run\n\n## Goal\nRun the shared Mechanical Connector Compliance Runner against fcp.sentry.\n\n## Must verify\n- Default deny via CapabilityTokens.\n- NetworkConstraints enforcement.\n- Receipts/audit for any write/dangerous operation.\n- Webhook ingestion path is taint-aware and does not permit unsafe elevation without approval.\n- Structured JSON logs with correlation_id + reason codes.\n\n## Acceptance criteria\n- Runner output bundle is green for fcp.sentry.\n- Failures are explainable and actionable from logs alone.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:20:10.118318817-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:20:10.118318817-05:00","dependencies":[{"issue_id":"flywheel_connectors-lszk.3.4","depends_on_id":"flywheel_connectors-lszk.3","type":"parent-child","created_at":"2026-01-15T04:20:10.119952604-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.3.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T04:20:14.168872313-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.4","title":"fcp.anthropic - Anthropic Provider Connector","description":"# fcp.anthropic - Anthropic Provider Connector (FCP2)\n\n## Goal\nImplement an Anthropic (Claude) provider connector that is **fully FCP2-compliant**:\n- single-zone bound\n- default deny via CapabilityTokens\n- sandbox + NetworkConstraints enforced mechanically\n- structured logs with strict redaction\n\n## Manifest archetypes (closed set)\n- `operational`\n- `streaming` (SSE streaming responses)\n\n## Zone model\n- One connector instance binds to exactly one `ZoneId`.\n- Model outputs must carry provenance/taint metadata so policy can govern downstream use.\n\n## External surface\n### NetworkConstraints\nDefault-deny; allow only Anthropic API hosts required by the declared operations.\n\n### Credential injection\n- API key via `CredentialObject`/`CredentialId` (egress proxy injection preferred).\n- Never write keys to disk; never log them.\n\n## Capability model (illustrative)\n- `anthropic.text.generate`\n- `anthropic.embeddings.generate` (if supported)\n- `anthropic.files.read` / `anthropic.files.write` (if supported)\n\n## Operation surface (initial)\n- `anthropic.messages.create` (non-stream)\n- `anthropic.messages.stream` (streaming)\n- tool use / function calling support\n- multimodal input support if exposed by the API\n\n## Safety + retries\n- Timeouts bounded.\n- Rate limits respected mechanically (Retry-After).\n- Side-effecting operations (if any) use OperationIntent/Receipt and fail closed on uncertain outcomes.\n\n## Tests\n- Unit tests with wiremock.\n- Integration tests with deterministic SSE simulation.\n- E2E compliance run via shared compliance harness.\n\n## Acceptance Criteria\n- Passes connector compliance runner (static + dynamic).\n- No real Anthropic calls in unit tests.\n- Usage metrics emitted; no secret leakage.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T02:35:11.109729231-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:55.62794605-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.4","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:35:11.155109125-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.4","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:24:31.03841551-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.4","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:24:31.122321037-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.4","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T03:24:31.209523004-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.4","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:24:31.297465155-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.4","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T03:24:31.393748701-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.4","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T03:24:31.478345369-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.4.1","title":"fcp.anthropic: Manifest + Capability Map (FCP2)","description":"# fcp.anthropic: Manifest + Capability Map (FCP2)\n\n## Goal\nSpecify the Anthropic connector manifest contract:\n- archetypes (`operational`, `streaming`)\n- operations + schema IDs\n- capability families + per-operation caps\n- NetworkConstraints (default-deny allowlist)\n\n## Acceptance Criteria\n- Complete manifest spec is stored in this bead.\n- Good/bad manifest examples exist for static compliance testing.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:24:41.472775193-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:24:41.472775193-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.4.1","depends_on_id":"flywheel_connectors-lszk.4","type":"parent-child","created_at":"2026-01-15T03:24:41.474158789-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.4.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:25:21.42557395-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.4.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:25:21.511521861-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.4.2","title":"fcp.anthropic: Provisioning Automation (API key)","description":"# fcp.anthropic: Provisioning Automation (API key)\n\n## Goal\nAutomate Anthropic key onboarding via AutomationRecipe:\n- request API key as `CredentialId`\n- validate key with a safe read-only call\n- validate NetworkConstraints\n\n## Acceptance Criteria\n- `fcp doctor` can verify the connector is ready without leaking secrets.\n- Entire flow is mockable.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:24:46.092353678-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:55.695214737-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.4.2","depends_on_id":"flywheel_connectors-lszk.4","type":"parent-child","created_at":"2026-01-15T03:24:46.093726264-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.4.3","title":"fcp.anthropic: Messages (streaming + tool use)","description":"# fcp.anthropic: Messages (streaming + tool use)\n\n## Goal\nImplement the core Anthropic message generation surface:\n- non-stream and streaming generation\n- tool/function calling\n- multimodal input where supported\n\n## Requirements\n- Capability gated.\n- Streaming is incremental and backpressured.\n- Outputs include provenance/taint metadata.\n\n## Acceptance Criteria\n- Deterministic unit tests simulate SSE streaming.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:24:51.382212162-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:24:51.382212162-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.4.3","depends_on_id":"flywheel_connectors-lszk.4","type":"parent-child","created_at":"2026-01-15T03:24:51.383415539-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.4.3","depends_on_id":"flywheel_connectors-lszk.4.1","type":"blocks","created_at":"2026-01-15T03:25:21.61450473-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.4.4","title":"TEST: Anthropic Connector Unit Tests (mock-only)","description":"# TEST: Anthropic Connector Unit Tests (mock-only)\n\n## Must cover\n- Manifest determinism + interface_hash.\n- Streaming SSE parsing.\n- Error taxonomy mapping.\n- Redaction (no API keys, no raw prompt/response by default).\n\n## Acceptance Criteria\n- Deterministic in CI.\n- Structured JSON logs.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:24:56.066252781-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:24:56.066252781-05:00","labels":["connectors","fcp2","testing","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.4.4","depends_on_id":"flywheel_connectors-lszk.4","type":"parent-child","created_at":"2026-01-15T03:24:56.067578798-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.4.4","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T03:25:21.795913962-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.4.5","title":"E2E: Anthropic Connector Compliance Run","description":"# E2E: Anthropic Connector Compliance Run\n\n## Goal\nAdd Anthropic provider scenarios to the shared compliance harness.\n\n## Scenarios\n- Default deny.\n- Allow with valid token.\n- Network guard allow/deny.\n- Streaming backpressure behavior.\n\n## Acceptance Criteria\n- `cargo test --package fcp-e2e --features anthropic` passes deterministically.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:25:01.903475149-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:25:01.903475149-05:00","labels":["conformance","connectors","e2e","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.4.5","depends_on_id":"flywheel_connectors-lszk.4","type":"parent-child","created_at":"2026-01-15T03:25:01.904719292-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.4.5","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T03:25:21.954904567-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.5","title":"STANDARD: Connector Spec Template (FCP2)","description":"# STANDARD: Connector Spec Template (FCP2)\n\n## Purpose\nA copy/paste template for planning **new FCP2 connectors** in Beads.\n\nGoal: every connector plan should be mechanically consistent with FCP2 (single-zone binding, default deny, NetworkConstraints, receipts/audit, taint/approval), and should include tests/E2E from day one.\n\nThis template is intentionally independent of any specific external service.\n\n---\n\n## Required Bead Structure (recommended)\nFor each connector **epic**:\n1. `\u003cconnector\u003e.1` — **Manifest + Capability Map (FCP2)**\n2. `\u003cconnector\u003e.2` — **Provisioning Automation** (OAuth/webhooks/setup)\n3. `\u003cconnector\u003e.3` — **TEST: Unit/Integration Tests (mock-only)**\n4. `\u003cconnector\u003e.4` — **E2E: Connector Compliance Run**\n\nFor each connector **feature** bead under the epic (operations / slices):\n- Add dependency: feature → `\u003cconnector\u003e.1` (manifest/caps)\n- Add dependency on `flywheel_connectors-1n78.33` if the feature requires **persistent cursor/dedupe/streaming state**.\n\n---\n\n## Template: Connector Epic Description\n\n### 1) Goal\n- One sentence: what this connector enables.\n\n### 2) Hard Requirements (FCP2)\n- **Single-zone binding** (exactly one `ZoneId` per connector instance).\n- **Default deny**: every operation requires explicit CapabilityTokens.\n- **Sandbox + NetworkConstraints** enforced mechanically.\n- **Receipts + audit** for all writes/dangerous ops.\n- **No secrets on disk**; strict log redaction.\n- **Prefer secretless connectors**: credentials injected at the network boundary via `CredentialObject`/`CredentialId` (egress proxy) so raw secret bytes never enter connector memory.\n\n### 3) Manifest Archetypes (closed set)\nList which apply (only from):\n- `bidirectional`, `streaming`, `operational`, `storage`, `knowledge`\n\n(“webhook/polling/request-response/database” are interaction patterns, not archetypes.)\n\n### 4) External Surface (mechanical)\n- NetworkConstraints allowlist (default deny): which hosts are permitted.\n- Redirect policy (default deny to new hosts).\n- Timeouts and max response sizes.\n\n### 5) Capability Model\n- Capability families and per-operation required caps.\n- **Rule**: capability IDs MUST NOT encode hostnames/ports.\n\n### 6) State Model\nDeclare one:\n- `stateless`\n- `singleton_writer` (requires lease)\n- `crdt` (rare; justify)\n\nList what state is persisted (dedupe keys, cursors, mapping tables) and how to bound it.\n\n### 7) Security / Taint / Approval\n- Identify tainted inputs (webhooks, external content, untrusted metadata).\n- Define what requires ApprovalToken vs is safe.\n\n### 8) Observability\n- Structured JSON logs with correlation IDs.\n- Reason codes for denials.\n\n### 9) Testing Strategy (required)\n- Unit/integration tests are **mock-only**.\n- E2E compliance run uses the shared runner and produces evidence bundle.\n\n### 10) Acceptance Criteria\n- “Passes compliance runner (static + dynamic).”\n- “No real external calls in unit tests.”\n- “Dangerous ops audited/receipted and approval gated.”\n\n---\n\n## Template: Manifest + Capability Map Bead (`\u003cconnector\u003e.1`)\n- Full operation list + schema IDs\n- Capability families\n- NetworkConstraints per operation\n- Sandbox profile requirements\n- Good/bad manifest examples for static compliance\n\n---\n\n## Template: Provisioning Bead (`\u003cconnector\u003e.2`)\n- Auth setup (preferred): create `CredentialObject` + `CredentialId` and rely on MeshNode egress-proxy credential injection (\"secretless\" connectors)\n- Webhook/OAuth automation\n- `fcp doctor` readiness checks\n- Fully mockable for unit tests\n\n---\n\n## Template: Test Bead (`\u003cconnector\u003e.3`)\n- Mock servers for external API\n- Golden vectors for:\n  - signature validation\n  - redaction\n  - idempotency\n  - pagination\n  - streaming bounds/backpressure\n\n---\n\n## Template: E2E Compliance Bead (`\u003cconnector\u003e.4`)\n- Run shared compliance runner\n- Validate:\n  - default deny\n  - NetworkConstraints\n  - receipts/audit\n  - structured logs\n- Capture artifacts bundle\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:56:47.053051026-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:35:36.571773098-05:00","dependencies":[{"issue_id":"flywheel_connectors-lszk.5","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T04:56:47.054461044-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.6","title":"fcp.pulumi — Infrastructure as Code Connector","description":"# fcp.pulumi — Infrastructure as Code Connector\n\n## Overview\nThe **fcp.pulumi** connector provides a safety-critical interface between agents and Pulumi infrastructure management.\n\nIt wraps the Pulumi CLI (and/or Pulumi Automation API later) to enable:\n- safe inspection of stacks\n- deterministic previews\n- tightly controlled updates\n\nThis connector treats infra operations with appropriate gravity:\n- read operations are safe by default\n- updates/destroys require explicit approval + strict idempotency\n- destructive operations require stricter multi-approval patterns\n\n## Manifest archetypes (closed set)\n- `operational`\n\n\u003e Interaction patterns (non-archetype): Request/Response (CLI-based)\n\n## Operations (initial)\n### Safe (read-only)\n- `stack.list`\n- `stack.select`\n- `stack.outputs.read`\n- `state.export` (bounded; redacted)\n- `preview` (no side effects)\n\n### Risky/Dangerous (writes)\n- `up` / `apply` (approval gated)\n- `destroy` (multi-approval; dangerous)\n- `refresh` (may be risky depending on provider)\n\n## Zone Architecture\n\n\u003c!-- fcp2-single-zone-note --\u003e\n**FCP2 single-zone binding note:** A connector instance binds to exactly one `ZoneId` for its entire lifetime.\nThe *\"zones\"* described in this section are a **recommended deployment pattern** (run separate connector instances in separate zones with different capability grants/policies) and/or conceptual risk tiers.\nThe connector MUST NOT multiplex multiple zones internally.\n\nRecommended zones:\n- `z:infra:pulumi:plan` (read + preview)\n- `z:infra:pulumi:apply` (up/apply)\n- `z:infra:pulumi:destroy` (destroy)\n\n## FCP2 Hard Requirements\n- Single-zone binding.\n- Default deny via capabilities.\n- Sandbox profile must forbid arbitrary filesystem access outside an explicit working directory.\n- NetworkConstraints default deny (CLI should not talk to arbitrary hosts unless explicitly permitted).\n- Strict receipts/audit for any external side effects.\n- No secrets on disk; Pulumi secrets must be injected via `CredentialId` and never logged.\n\n## Tests\n- Mock-only unit/integration tests (no real cloud providers).\n- Golden tests for:\n  - safety tier classification\n  - log redaction\n  - idempotency + intent/receipt behavior\n\n## Success Criteria\n- Epic expanded into base beads `.1`..`.4` per `flywheel_connectors-lszk.5` before implementation begins.\n- Passes mechanical connector compliance runner (`flywheel_connectors-1n78.21.5`) and E2E framework (`flywheel_connectors-e3i9`).\n","status":"open","priority":2,"issue_type":"epic","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:05:10.520992225-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:55.756648765-05:00","labels":["connector","connectors","fcp2","infrastructure","safety-critical","tier-3","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.6","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T06:05:10.52250623-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.6","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T06:05:10.76231778-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.6","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:05:10.964308858-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.6","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T06:05:11.159400265-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.6","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:05:11.361116945-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.6","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T06:05:11.569536444-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.6","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:05:11.770145455-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.6","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-15T06:05:11.988768643-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.6","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-15T06:05:12.188214582-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.6.1","title":"fcp.pulumi: Manifest + Capability Map (FCP2)","description":"# fcp.pulumi: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the complete FCP2 manifest surface for `fcp.pulumi`:\n- operation list + schemas\n- capability families\n- sandbox profile\n- NetworkConstraints (deny-by-default)\n- state model (if any)\n\n## Notes\n- Capability IDs MUST NOT encode hostnames/ports; hosts belong in NetworkConstraints.\n- Writes (`up`/`destroy`) must be Strict idempotency + receipts/audit.\n\n## Acceptance Criteria\n- Manifest validates under strict rules.\n- Mechanical compliance runner accepts the manifest.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:06:10.643146621-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:06:10.643146621-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.6.1","depends_on_id":"flywheel_connectors-lszk.6","type":"parent-child","created_at":"2026-01-15T06:06:10.644437005-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.6.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:06:16.277445389-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.6.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:06:16.536064172-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.6.2","title":"fcp.pulumi: Provisioning Automation (pulumi CLI, stacks, secrets)","description":"# fcp.pulumi: Provisioning Automation (pulumi CLI, stacks, secrets)\n\n## Goal\nAutomate the minimum setup needed to run Pulumi operations safely:\n- locate/provision the Pulumi CLI\n- bind to a stack/workdir\n- configure provider auth via `CredentialObject`/`CredentialId` (egress proxy injection preferred)\n\n## Requirements\n- No secrets on disk; no secret logs.\n- Deterministic environment setup for reproducible behavior.\n\n## Acceptance Criteria\n- `fcp doctor`-style readiness checks can validate configuration.\n- Unit tests can fully mock provisioning.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:06:22.161141112-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:55.819270713-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.6.2","depends_on_id":"flywheel_connectors-lszk.6","type":"parent-child","created_at":"2026-01-15T06:06:22.189634919-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.6.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:06:30.901432652-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.6.3","title":"TEST: Pulumi Connector Unit/Integration Tests (mock-only)","description":"# TEST: Pulumi Connector Unit/Integration Tests (mock-only)\n\n## Goal\nMock-only tests for `fcp.pulumi`:\n- safety tier classification\n- idempotency + intent/receipt wiring for writes\n- log redaction (no secrets)\n- bounded command execution + timeouts\n\n## Acceptance Criteria\n- No tests hit real cloud providers.\n- Tests emit structured JSON logs per platform test standard.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:06:38.22349046-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:06:38.22349046-05:00","labels":["connectors","fcp2","testing","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.6.3","depends_on_id":"flywheel_connectors-lszk.6","type":"parent-child","created_at":"2026-01-15T06:06:38.224814757-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.6.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T06:06:43.287803262-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.6.4","title":"E2E: Pulumi Connector Compliance Run","description":"# E2E: Pulumi Connector Compliance Run\n\n## Goal\nRun the shared connector E2E compliance framework against `fcp.pulumi`.\n\n## Coverage\n- default deny (no token → deny)\n- NetworkConstraints enforcement\n- receipts/audit for write operations\n- structured logs and stable reason codes\n\n## Acceptance Criteria\n- E2E run produces an evidence bundle and passes in CI.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:06:49.381032714-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:06:49.381032714-05:00","labels":["connectors","e2e","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.6.4","depends_on_id":"flywheel_connectors-lszk.6","type":"parent-child","created_at":"2026-01-15T06:06:49.382343245-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.6.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T06:06:52.54969302-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.7","title":"fcp.pandadoc — Document Generation + E-Sign Connector","description":"# fcp.pandadoc — Document Generation + E-Sign Connector\n\n## Overview\nThe **fcp.pandadoc** connector enables agents to create, send, and track PandaDoc documents (quotes, proposals, contracts) through a strictly-audited FCP2 interface.\n\nDocument workflows are **high risk**:\n- contain sensitive data\n- can trigger irreversible external side effects (sending/signing)\n\nSo the connector must be fail-closed, approval-gated, and produce strong receipts + audit evidence.\n\n## Manifest archetypes (closed set)\n- `storage`\n- `operational`\n- `streaming`\n\n\u003e Interaction patterns (non-archetype): Request/Response + Webhook\n\n## Operations (initial)\n### Safe / read-only\n- `document.list`\n- `document.get`\n- `document.download` (bounded; content hashing; no logging contents)\n- `template.list`\n\n### Risky/Dangerous (writes)\n- `document.create_from_template` (risky)\n- `document.send` (dangerous; approval required)\n- `document.cancel` / `document.void` (dangerous)\n\n## Zone Architecture\n\n\u003c!-- fcp2-single-zone-note --\u003e\n**FCP2 single-zone binding note:** A connector instance binds to exactly one `ZoneId` for its entire lifetime.\nThe *\"zones\"* described in this section are a **recommended deployment pattern** (run separate connector instances in separate zones with different capability grants/policies) and/or conceptual risk tiers.\nThe connector MUST NOT multiplex multiple zones internally.\n\nRecommended zones:\n- `z:docs:pandadoc:read`\n- `z:docs:pandadoc:write`\n\n## FCP2 Hard Requirements\n- Single-zone binding.\n- Default deny via capabilities.\n- NetworkConstraints pinned to PandaDoc hosts.\n- Strict bounds for download/upload sizes.\n- Never log document bodies or PII.\n- Writes require Strict idempotency + OperationIntent/Receipt + audit events.\n\n## Tests\n- Mock-only tests (wiremock) for API calls.\n- E2E compliance run in a simulated host environment (no real PandaDoc calls).\n\n## Success Criteria\n- Base beads `.1`..`.4` exist (manifest, provisioning, tests, E2E) per `flywheel_connectors-lszk.5`.\n- Passes mechanical connector compliance runner (`flywheel_connectors-1n78.21.5`) and E2E framework (`flywheel_connectors-e3i9`).\n","status":"open","priority":2,"issue_type":"epic","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:07:09.576240246-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:39:56.497253889-05:00","labels":["connector","connectors","documents","fcp2","safety-critical","tier-3","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.7","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T06:07:09.577625407-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.7","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T06:07:09.826149135-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.7","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:07:10.033756773-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.7","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T06:07:10.24074375-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.7","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:07:10.452896168-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.7","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T06:07:10.670383514-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.7","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:07:10.873476399-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.7","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-15T06:07:11.089539109-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.7","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-15T06:07:11.305806746-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.7.1","title":"fcp.pandadoc: Manifest + Capability Map (FCP2)","description":"# fcp.pandadoc: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the manifest surface for PandaDoc:\n- operation list + schemas\n- capability families (read vs write)\n- sandbox + NetworkConstraints\n- webhook/event declarations (if supported)\n\n## Acceptance Criteria\n- Manifest validates strictly and is accepted by the compliance runner.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:07:19.781816656-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:07:19.781816656-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.7.1","depends_on_id":"flywheel_connectors-lszk.7","type":"parent-child","created_at":"2026-01-15T06:07:19.783442492-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.7.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:07:23.400540466-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.7.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:07:23.673563849-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.7.2","title":"fcp.pandadoc: Provisioning Automation (OAuth/API key, webhooks)","description":"# fcp.pandadoc: Provisioning Automation (OAuth/API key, webhooks)\n\n## Goal\nAutomate authentication + webhook setup where possible.\n\n## Requirements\n- Secrets enter the connector only via `CredentialObject`/`CredentialId` (egress proxy injection preferred).\n- Webhook verification must be strict (signatures, replay window).\n\n## Acceptance Criteria\n- Provisioning is fully mockable in unit tests.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:07:29.451278037-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:55.88119745-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.7.2","depends_on_id":"flywheel_connectors-lszk.7","type":"parent-child","created_at":"2026-01-15T06:07:29.452610078-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.7.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:07:33.530030811-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.7.3","title":"TEST: PandaDoc Connector Unit/Integration Tests (mock-only)","description":"# TEST: PandaDoc Connector Unit/Integration Tests (mock-only)\n\n## Goal\nMock-only tests for `fcp.pandadoc`:\n- pagination and filtering\n- strict bounds on document upload/download\n- log redaction (never log document bodies)\n- idempotency + receipts/audit for writes\n- webhook signature verification (if supported)\n\n## Acceptance Criteria\n- No real PandaDoc API calls in unit tests.\n- Structured JSON logging for test diagnostics.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:07:39.014731762-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:07:39.014731762-05:00","labels":["connectors","fcp2","testing","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.7.3","depends_on_id":"flywheel_connectors-lszk.7","type":"parent-child","created_at":"2026-01-15T06:07:39.016123827-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.7.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T06:07:42.59210851-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.7.4","title":"E2E: PandaDoc Connector Compliance Run","description":"# E2E: PandaDoc Connector Compliance Run\n\n## Goal\nRun the shared connector compliance framework against `fcp.pandadoc`.\n\n## Acceptance Criteria\n- Evidence bundle is produced.\n- Default deny, NetworkConstraints, receipts/audit, and structured logs are validated.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:07:47.71218094-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:07:47.71218094-05:00","labels":["connectors","e2e","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.7.4","depends_on_id":"flywheel_connectors-lszk.7","type":"parent-child","created_at":"2026-01-15T06:07:47.71355446-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.7.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T06:07:51.117045685-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.8","title":"fcp.intercom — Customer Support + Messaging Connector","description":"# fcp.intercom — Customer Support + Messaging Connector\n\n## Overview\nThe **fcp.intercom** connector enables agents to triage and respond to customer conversations/tickets in Intercom.\n\nThis is inherently security-sensitive:\n- inbound messages are untrusted (prompt injection surface)\n- outbound replies are external side effects\n\nSo the connector must be taint-aware, approval-gated for risky actions, and auditable.\n\n## Manifest archetypes (closed set)\n- `bidirectional`\n- `operational`\n- `streaming`\n\n\u003e Interaction patterns (non-archetype): Request/Response + Webhook + (optional) streaming\n\n## Operations (initial)\n### Read-only\n- `conversation.list`\n- `conversation.get`\n- `user.get`\n\n### Writes (risky/dangerous)\n- `conversation.reply` (dangerous; external side effect)\n- `conversation.assign` (risky)\n- `conversation.close` (risky)\n\n## Zone Architecture\n\n\u003c!-- fcp2-single-zone-note --\u003e\n**FCP2 single-zone binding note:** A connector instance binds to exactly one `ZoneId` for its entire lifetime.\nThe *\"zones\"* described in this section are a **recommended deployment pattern** (run separate connector instances in separate zones with different capability grants/policies) and/or conceptual risk tiers.\nThe connector MUST NOT multiplex multiple zones internally.\n\nRecommended zones:\n- `z:support:intercom:read`\n- `z:support:intercom:write`\n\n## FCP2 Hard Requirements\n- Single-zone binding.\n- Default deny via capabilities.\n- NetworkConstraints pinned to Intercom API hosts.\n- Inbound messages MUST be tainted and require explicit sanitizer/approval for any dangerous downstream use.\n- Writes require Strict idempotency + OperationIntent/Receipt + audit.\n\n## Tests\n- Mock-only tests for API calls and webhook events.\n- E2E compliance run verifies default deny + receipts/audit.\n\n## Success Criteria\n- Base beads `.1`..`.4` exist (manifest, provisioning, tests, E2E) per `flywheel_connectors-lszk.5`.\n- Passes mechanical connector compliance runner and E2E framework.\n","status":"open","priority":2,"issue_type":"epic","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:08:03.151938811-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:39:56.616325747-05:00","labels":["connector","connectors","fcp2","support","tier-3","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.8","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T06:08:03.153526235-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.8","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T06:08:03.400299201-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.8","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:08:03.6127069-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.8","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T06:08:03.824501583-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.8","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:08:04.037528098-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.8","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T06:08:04.261469714-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.8","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:08:04.473317106-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.8","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-15T06:08:04.693903436-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.8","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-15T06:08:04.900876287-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.8.1","title":"fcp.intercom: Manifest + Capability Map (FCP2)","description":"# fcp.intercom: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine Intercom connector manifest:\n- operations + schemas\n- capability families (read/write)\n- streaming/webhook declarations (if present)\n- sandbox + NetworkConstraints\n\n## Acceptance Criteria\n- Manifest validates strictly and is accepted by compliance runner.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:08:11.055936074-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:08:11.055936074-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.8.1","depends_on_id":"flywheel_connectors-lszk.8","type":"parent-child","created_at":"2026-01-15T06:08:11.057367393-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.8.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:08:15.3017216-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.8.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:08:15.568690607-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.8.2","title":"fcp.intercom: Provisioning Automation (OAuth, webhooks)","description":"# fcp.intercom: Provisioning Automation (OAuth, webhooks)\n\n## Goal\nAutomate auth + webhook setup where possible.\n\n## Requirements\n- Secrets via `CredentialObject`/`CredentialId` (egress proxy injection preferred) only.\n- Webhook verification strict (signature + replay window).\n- Provisioning flow must be mockable.\n\n## Acceptance Criteria\n- Provisioning can be run headlessly with minimal human prompts.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:08:21.486016351-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:55.940778926-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.8.2","depends_on_id":"flywheel_connectors-lszk.8","type":"parent-child","created_at":"2026-01-15T06:08:21.487350707-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.8.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:08:27.114036941-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.8.3","title":"TEST: Intercom Connector Unit/Integration Tests (mock-only)","description":"# TEST: Intercom Connector Unit/Integration Tests (mock-only)\n\n## Goal\nMock-only tests for `fcp.intercom` focusing on:\n- safe parsing + taint marking of inbound messages\n- reply/assign/close gating (capabilities + approvals)\n- idempotency + intent/receipt for external side effects\n- pagination and rate limit behavior\n\n## Acceptance Criteria\n- No real Intercom calls in unit tests.\n- Tests emit structured JSON logs.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:08:33.053684124-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:08:33.053684124-05:00","labels":["connectors","fcp2","testing","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.8.3","depends_on_id":"flywheel_connectors-lszk.8","type":"parent-child","created_at":"2026-01-15T06:08:33.055118849-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.8.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T06:08:36.985026456-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.8.4","title":"E2E: Intercom Connector Compliance Run","description":"# E2E: Intercom Connector Compliance Run\n\n## Goal\nRun the shared connector compliance framework against `fcp.intercom`.\n\n## Acceptance Criteria\n- Evidence bundle produced.\n- Default deny, NetworkConstraints, taint/approval flows for dangerous actions, receipts/audit, and structured logs are validated.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:08:42.71684224-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:08:42.71684224-05:00","labels":["connectors","e2e","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.8.4","depends_on_id":"flywheel_connectors-lszk.8","type":"parent-child","created_at":"2026-01-15T06:08:42.718406018-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.8.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T06:08:46.58230461-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.9","title":"fcp.bitwarden — Credential Management Connector","description":"# fcp.bitwarden — Credential Management Connector\n\n## Overview\nThe **fcp.bitwarden** connector allows agents to access Bitwarden vault items through FCP2 in a way that is **fail-closed and auditable**.\n\nThis connector is **extremely sensitive**:\n- it is literally a secret store\n- compromise here is catastrophic\n\nTherefore:\n- it should default to running in a high-trust zone (e.g., `z:owner` / `z:private`)\n- it should use the strictest sandbox profile (WASI strongly preferred)\n- all reads/writes must be capability-gated and audited\n\n## Manifest archetypes (closed set)\n- `storage`\n- `operational`\n\n\u003e Interaction patterns (non-archetype): Request/Response\n\n## Operations (initial)\n### Read (still risky)\n- `vault.item.list` (filtered)\n- `vault.item.get` (dangerous-by-default unless policy explicitly allows)\n\n### Write (dangerous)\n- `vault.item.create`\n- `vault.item.update`\n- `vault.item.delete` (dangerous; multi-approval recommended)\n\n## Zone Architecture\n\n\u003c!-- fcp2-single-zone-note --\u003e\n**FCP2 single-zone binding note:** A connector instance binds to exactly one `ZoneId` for its entire lifetime.\nThe *\"zones\"* described in this section are a **recommended deployment pattern** (run separate connector instances in separate zones with different capability grants/policies) and/or conceptual risk tiers.\nThe connector MUST NOT multiplex multiple zones internally.\n\nRecommended zones:\n- `z:secrets:bitwarden:read`\n- `z:secrets:bitwarden:write`\n\n## FCP2 Hard Requirements\n- Single-zone binding.\n- Default deny via capabilities.\n- Strict NetworkConstraints pinned to Bitwarden hosts.\n- **Never log secrets. Never write secrets to disk.**\n- Consider “secretless connector” mode:\n  - secrets delivered via ``CredentialId`` / injection protocol\n  - connector does not persist master credentials\n\n## Tests\n- Mock-only tests for API flows.\n- Redaction tests are mandatory.\n- E2E compliance run verifies default deny + log redaction + receipts/audit.\n\n## Success Criteria\n- Base beads `.1`..`.4` exist (manifest, provisioning, tests, E2E) per `flywheel_connectors-lszk.5`.\n- Passes mechanical connector compliance runner and E2E framework.\n","status":"open","priority":2,"issue_type":"epic","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:09:01.11713906-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:56.001662937-05:00","labels":["connector","connectors","fcp2","safety-critical","secrets","security","tier-3","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.9","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T06:09:01.118445182-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.9","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T06:09:01.37081213-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.9","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:09:01.589063231-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.9","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T06:09:01.798894386-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.9","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:09:02.01517956-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.9","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T06:09:02.241822154-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.9","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:09:02.464535068-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.9","depends_on_id":"flywheel_connectors-kt9r","type":"blocks","created_at":"2026-01-15T06:09:02.698122245-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.9","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-15T06:09:02.914693749-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.9","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-15T06:09:03.130067375-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.9.1","title":"fcp.bitwarden: Manifest + Capability Map (FCP2)","description":"# fcp.bitwarden: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the manifest surface for a high-risk secret-store connector:\n- operation list + schemas\n- capability families (read/write/delete)\n- sandbox requirements (WASI recommended)\n- NetworkConstraints pinned to Bitwarden hosts\n\n## Acceptance Criteria\n- Manifest validates strictly and is accepted by compliance runner.\n- Dangerous operations are correctly labeled and auditable.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:09:10.672212595-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:09:10.672212595-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.9.1","depends_on_id":"flywheel_connectors-lszk.9","type":"parent-child","created_at":"2026-01-15T06:09:10.673747018-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.9.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T06:09:14.385188045-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.9.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T06:09:14.65521418-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.9.2","title":"fcp.bitwarden: Provisioning Automation (login/session, secret injection)","description":"# fcp.bitwarden: Provisioning Automation (login/session, secret injection)\n\n## Goal\nAutomate authentication and session bootstrap as safely as possible.\n\n## Requirements\n- Prefer secret injection model (`flywheel_connectors-kt9r`) so the connector does not persist master credentials.\n- Any interactive auth steps must be minimal and must never print secrets.\n- Provisioning must be mockable.\n\n## Acceptance Criteria\n- Provisioning produces a deterministic “ready” state and clear failure diagnostics.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:09:21.460177575-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:09:21.460177575-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.9.2","depends_on_id":"flywheel_connectors-lszk.9","type":"parent-child","created_at":"2026-01-15T06:09:21.461713531-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.9.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T06:09:24.897956331-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.9.3","title":"TEST: Bitwarden Connector Unit/Integration Tests (mock-only, redaction)","description":"# TEST: Bitwarden Connector Unit/Integration Tests (mock-only, redaction)\n\n## Goal\nMock-only tests for `fcp.bitwarden` with heavy emphasis on security:\n- strict log redaction: secrets never appear (even on errors)\n- no secrets on disk (guarded by tests)\n- capability/approval gating for any dangerous reads/writes\n- bounded response sizes and timeouts\n\n## Acceptance Criteria\n- Tests emit structured JSON logs and include negative cases.\n- No real Bitwarden calls in unit tests.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:09:31.572016643-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:09:31.572016643-05:00","labels":["connectors","fcp2","testing","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.9.3","depends_on_id":"flywheel_connectors-lszk.9","type":"parent-child","created_at":"2026-01-15T06:09:31.573391425-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.9.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T06:09:36.349238041-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lszk.9.4","title":"E2E: Bitwarden Connector Compliance Run","description":"# E2E: Bitwarden Connector Compliance Run\n\n## Goal\nRun the shared connector compliance framework against `fcp.bitwarden`.\n\n## Coverage\n- default deny\n- NetworkConstraints\n- strict sandbox profile\n- log redaction\n- receipts/audit for any side effects\n\n## Acceptance Criteria\n- Evidence bundle produced and passes in CI.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T06:09:42.626654014-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T06:09:42.626654014-05:00","labels":["connectors","e2e","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-lszk.9.4","depends_on_id":"flywheel_connectors-lszk.9","type":"parent-child","created_at":"2026-01-15T06:09:42.627885697-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lszk.9.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T06:09:47.269389273-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-lte5","title":"TEST: fcp-webhook Unit Test Suite","description":"# TEST: fcp-webhook Unit Test Suite\n\n## Scope\nComprehensive unit tests for webhook handling library.\n\n## Test Categories\n\n### Signature Verification\n- [ ] HMAC-SHA256 verification (Stripe, GitHub, etc.)\n- [ ] Ed25519 signature verification\n- [ ] Timestamp validation (replay attack prevention)\n- [ ] Multiple signature schemes\n- [ ] Invalid signature rejection\n\n### Webhook Parsing\n- [ ] JSON payload parsing\n- [ ] Form-encoded payload parsing\n- [ ] Content-Type handling\n- [ ] Charset handling\n\n### Event Routing\n- [ ] Event type dispatch\n- [ ] Wildcard subscriptions\n- [ ] Event filtering\n\n### Delivery Management\n- [ ] Idempotency handling (deduplication)\n- [ ] Event ordering guarantees\n- [ ] Retry scheduling for failed processing\n- [ ] Dead letter queue handling\n\n### Security\n- [ ] IP allowlist verification\n- [ ] TLS certificate validation\n- [ ] Request size limits\n- [ ] Timeout enforcement\n\n## Mocking Strategy\n- Generate valid/invalid webhook payloads\n- Mock signature generation with known keys\n- Test various provider formats (GitHub, Stripe, Slack, etc.)\n\n## Coverage Target: \u003e95%","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-11T12:12:36.431123151-05:00","created_by":"ubuntu","updated_at":"2026-01-15T03:22:37.21072446-05:00","closed_at":"2026-01-15T03:22:37.21072446-05:00","close_reason":"Webhook functionality is connector-specific, not a platform crate. Webhook testing belongs in individual connector test suites.","dependencies":[{"issue_id":"flywheel_connectors-lte5","depends_on_id":"flywheel_connectors-vi7","type":"blocks","created_at":"2026-01-11T12:21:14.23447823-05:00","created_by":"ubuntu"}]}
{"id":"flywheel_connectors-lv8h","title":"TEST: InvokeRequest/Response Unit Tests (Schema Validation, Holder Proof, Binding)","description":"# TEST: InvokeRequest/Response Unit Tests\n\n## Scope\nComprehensive unit tests for the InvokeRequest/InvokeResponse types and their validation logic.\n\n## Test Categories\n\n### Schema Validation\n- [ ] Valid InvokeRequest with all required fields\n- [ ] Invalid InvokeRequest (missing operation_id) → rejection\n- [ ] Invalid InvokeRequest (malformed arguments) → rejection\n- [ ] Schema hash mismatch detection\n- [ ] Argument type validation against operation schema\n\n### Holder Proof Verification\n- [ ] Valid holder_proof verifies correctly\n- [ ] Missing holder_proof for risky operation → rejection\n- [ ] Holder proof with wrong session key → rejection\n- [ ] Holder proof replay detection\n- [ ] Holder proof binding to request_id\n\n### Binding Rules\n- [ ] capability_token_id binding is enforced\n- [ ] zone_id binding is checked\n- [ ] connector_id binding is validated\n- [ ] aud_binary binding for risky operations\n\n### Response Validation\n- [ ] Success response with valid result\n- [ ] Error response with proper error taxonomy\n- [ ] DecisionReceipt attached for denials\n- [ ] Streaming response envelope handling\n\n## Golden Vectors\nLocation: `tests/vectors/invoke/`\n- `invoke_request_valid.cbor`\n- `invoke_request_invalid_schema.cbor`\n- `invoke_response_success.cbor`\n- `invoke_response_denial.cbor`\n\n## Logging Requirements\nAll tests emit structured JSON logs:\n```json\n{\n  \"timestamp\": \"RFC3339\",\n  \"test_name\": \"test_invoke_schema_validation\",\n  \"phase\": \"setup|execute|verify\",\n  \"correlation_id\": \"uuid\",\n  \"operation_id\": \"...\",\n  \"result\": \"pass|fail\",\n  \"evidence\": {...}\n}\n```\n\n## Acceptance Criteria\n- All InvokeRequest/Response validations are covered\n- Golden vectors exist and match\n- No panics on malformed inputs\n- Fuzz target for request parsing exists\n\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:24:24.256035062-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:24:24.256035062-05:00","labels":["fcp2","mvp","protocol","testing"],"dependencies":[{"issue_id":"flywheel_connectors-lv8h","depends_on_id":"flywheel_connectors-2vvy","type":"blocks","created_at":"2026-01-15T03:24:38.04244285-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-lv8h","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:24:38.126541451-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-m2v","title":"fcp.salesforce: Contact, Lead, Account, Opportunity management","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:17:38.549451016-05:00","created_by":"ubuntu","updated_at":"2026-01-11T12:09:27.370743778-05:00","closed_at":"2026-01-11T12:09:27.370743778-05:00","close_reason":"CONSOLIDATED: All Salesforce sub-features merged into comprehensive parent connector bead flywheel_connectors-4m0 (fcp.salesforce: Salesforce CRM Platform Connector)"}
{"id":"flywheel_connectors-m6u7","title":"fcp.microsoft365: Microsoft 365 Suite Integration Connector","description":"# (EPIC) fcp.microsoft365 - Microsoft 365 / Graph Connector (FCP2)\n\n## Goal\nProvide an FCP2-compliant Microsoft 365 connector backed by Microsoft Graph.\n\nThis is an **epic** because Microsoft 365 spans multiple domains (mail, files, calendar, tasks) that should be implemented as phased, testable slices.\n\n## Manifest archetypes (closed set)\n- `operational` (Graph CRUD)\n- `streaming` (webhook/event ingestion, optional)\n- `storage` (files)\n- `knowledge` (search/content extraction)\n\n## Zone model (mechanical)\n- Single-zone bound: one connector instance ↔ one `ZoneId`.\n- Recommended: one instance per tenant/account boundary per zone.\n\n**Important:** The connector must NOT model “internal sub-zones” (mail vs files vs calendar). All trust boundaries are zones owned by policy.\n\n## External surface\n### NetworkConstraints\nDefault-deny; allow only:\n- `graph.microsoft.com:443` (and any explicitly required auth endpoints for OAuth token refresh)\n\n### Credential injection\n- OAuth2 delegated tokens and/or app credentials via `CredentialId`.\n- Never persist tokens to disk.\n\n## Capability model (illustrative)\nCapability IDs MUST NOT encode hosts/ports.\n\nCapability families (finalize in manifest bead):\n- `m365.mail.read` / `m365.mail.send` (Dangerous)\n- `m365.calendar.read` / `m365.calendar.write` (Dangerous)\n- `m365.files.read` / `m365.files.write`\n- `m365.sharepoint.read` / `m365.sharepoint.write` (Dangerous)\n- `m365.planner.read` / `m365.planner.write`\n- `m365.webhooks.manage` (Dangerous)\n\n## State model\n- Stateless for simple reads.\n- Stateful where Graph requires it:\n  - delta tokens for sync\n  - webhook subscription renewal\n  - cursor/state advancement must use singleton-writer leases\n\n## Hard requirements\n- Default deny for all operations.\n- Timeouts bounded.\n- Throttling (429 + Retry-After) enforced mechanically.\n- Strong redaction (never log tokens, message bodies, file contents by default).\n- Writes emit receipts/audit.\n\n## Test plan\n- Mock-only unit/integration tests using wiremock.\n- Deterministic delta-token and webhook simulation.\n- E2E compliance runs for each sub-domain slice.\n\n## Acceptance Criteria\n- Each child slice passes connector compliance runner.\n- Deterministic tests; no live Graph calls in unit tests.\n\n## Success Criteria\n- The epic includes (or references) the standard base beads `.1`..`.4` per `flywheel_connectors-lszk.5`.\n- The connector passes `flywheel_connectors-1n78.21.5` (static + dynamic) and has an E2E compliance run wired through `flywheel_connectors-e3i9`.\n- Unit/integration tests are mock-only (no real external calls) and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-11T21:38:05.958905182-05:00","created_by":"ubuntu","updated_at":"2026-01-15T08:37:56.065982475-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-m6u7","depends_on_id":"flywheel_connectors-lj2","type":"blocks","created_at":"2026-01-11T22:07:51.51899081-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-m6u7","depends_on_id":"flywheel_connectors-vi7","type":"blocks","created_at":"2026-01-11T22:07:51.546024053-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-m6u7","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T22:07:51.573316413-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-m6u7","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T22:07:51.600645222-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-m6u7","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:28:03.643942239-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-m6u7","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:44:52.865405421-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-m6u7","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:44:53.020305793-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-m6u7","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T03:44:53.20106467-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-m6u7","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:44:53.368706256-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-m6u7","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T03:44:53.535685844-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-m6u7","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T03:44:53.68678709-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-m6u7","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T03:44:53.853173741-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-m6u7.1","title":"fcp.microsoft365: Manifest + Capability Map (FCP2)","description":"# fcp.microsoft365: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the Microsoft 365 connector manifest contract:\n- archetypes (`operational`, `streaming`, `storage`, `knowledge`)\n- operations + schema IDs by domain (mail/files/calendar/tasks)\n- capability families + per-operation caps\n- NetworkConstraints allowlist\n- state model for delta tokens and webhook renewals\n\n## Acceptance Criteria\n- Complete manifest spec stored here.\n- Good/bad manifest examples exist for static compliance.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:45:03.815604649-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:45:03.815604649-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-m6u7.1","depends_on_id":"flywheel_connectors-m6u7","type":"parent-child","created_at":"2026-01-15T03:45:03.816957918-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-m6u7.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:46:05.337686798-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-m6u7.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:46:05.522351743-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-m6u7.10","title":"E2E: Microsoft365 Connector Compliance Run","description":"# E2E: Microsoft365 Connector Compliance Run\n\n## Goal\nAdd Microsoft Graph scenarios to the shared compliance harness.\n\n## Scenarios\n- Default deny.\n- Allow with valid token.\n- Network guard allow/deny.\n- Dangerous action gating (mail send, calendar write, file delete).\n\n## Acceptance Criteria\n- `cargo test --package fcp-e2e --features microsoft365` passes deterministically.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:45:55.559036199-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:45:55.559036199-05:00","labels":["conformance","connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-m6u7.10","depends_on_id":"flywheel_connectors-m6u7","type":"parent-child","created_at":"2026-01-15T03:45:55.560309948-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-m6u7.10","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T03:46:06.843449664-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-m6u7.11","title":"fcp.excel-online (via fcp.microsoft365): Spreadsheets","description":"# fcp.excel-online (via fcp.microsoft365): Spreadsheets\n\n## Goal\nExpose a safe, capability-gated subset of Excel Online functionality via Microsoft Graph:\n- read workbook metadata\n- read/write ranges and tables (Dangerous)\n- formula evaluation results (sensitive)\n\n## Scope (initial)\n- Workbooks: list/get\n- Worksheets: list/get\n- Ranges: get/set values, get/set formulas (Dangerous)\n- Tables: list/get rows, append rows (Dangerous)\n\n## FCP2 Requirements\n- Capability gated per operation family.\n- Single-zone binding.\n- Default deny.\n- Strong bounds on payload sizes (spreadsheets can be large).\n- Writes emit receipts/audit and fail closed on uncertain outcomes.\n\n## NetworkConstraints\n- Default deny; Graph + required OAuth endpoints as declared in `flywheel_connectors-m6u7.1`.\n\n## State model\n- Prefer stateless operations.\n- If implementing incremental sync, use delta tokens with singleton-writer lease semantics.\n\n## Test strategy\n- Mock-only tests: pagination, throttling, range bounds, redaction.\n\n## Acceptance Criteria\n- Typed schemas + validation.\n- Error taxonomy mapping + no secret/PII leakage.\n- Structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:01:33.984460506-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:01:33.984460506-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-m6u7.11","depends_on_id":"flywheel_connectors-m6u7","type":"parent-child","created_at":"2026-01-15T07:01:34.039149163-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-m6u7.11","depends_on_id":"flywheel_connectors-m6u7.1","type":"blocks","created_at":"2026-01-15T07:01:34.501225975-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-m6u7.11","depends_on_id":"flywheel_connectors-m6u7.2","type":"blocks","created_at":"2026-01-15T07:01:34.979764259-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-m6u7.12","title":"fcp.word-online (via fcp.microsoft365): Documents","description":"# fcp.word-online (via fcp.microsoft365): Documents\n\n## Goal\nExpose a safe, capability-gated subset of Word Online document operations:\n- read document metadata and content extracts\n- create/update documents (Dangerous)\n- export/convert (e.g., docx → pdf) with strict bounds\n\n## Scope (initial)\n- Documents: list/get\n- Content extraction: text-only extracts (policy-gated if sensitive)\n- Write/update: upload new doc, replace content (Dangerous)\n- Export: docx → pdf (bounded)\n\n## FCP2 Requirements\n- Capability gated.\n- Single-zone binding.\n- Default deny.\n- Strong redaction: documents may contain PII.\n- Writes emit receipts/audit and fail closed.\n\n## NetworkConstraints\n- Default deny; Graph + required OAuth endpoints as declared in `flywheel_connectors-m6u7.1`.\n\n## Test strategy\n- Mock-only tests: large document bounds, throttling, redaction, retry semantics.\n\n## Acceptance Criteria\n- Typed schemas + validation.\n- Error taxonomy mapping + no secret/PII leakage.\n- Structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:01:39.713591121-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:01:39.713591121-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-m6u7.12","depends_on_id":"flywheel_connectors-m6u7","type":"parent-child","created_at":"2026-01-15T07:01:39.770607857-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-m6u7.12","depends_on_id":"flywheel_connectors-m6u7.1","type":"blocks","created_at":"2026-01-15T07:01:40.230069499-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-m6u7.12","depends_on_id":"flywheel_connectors-m6u7.2","type":"blocks","created_at":"2026-01-15T07:01:40.708103592-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-m6u7.13","title":"fcp.onenote (via fcp.microsoft365): Notes","description":"# fcp.onenote (via fcp.microsoft365): Notes\n\n## Goal\nExpose a safe, capability-gated subset of OneNote operations:\n- notebooks/sections/pages list/get\n- page content extraction (policy-gated if sensitive)\n- create/update pages (Dangerous)\n\n## Scope (initial)\n- Read: list notebooks/sections/pages; get page content (bounded)\n- Write: create page, append content, update title/tags (Dangerous)\n\n## FCP2 Requirements\n- Capability gated.\n- Single-zone binding.\n- Default deny.\n- Strong bounds: page content may be large.\n- Writes emit receipts/audit and fail closed.\n\n## NetworkConstraints\n- Default deny; Graph + required OAuth endpoints as declared in `flywheel_connectors-m6u7.1`.\n\n## Test strategy\n- Mock-only tests: payload bounds, throttling, redaction, retry semantics.\n\n## Acceptance Criteria\n- Typed schemas + validation.\n- Error taxonomy mapping + no secret/PII leakage.\n- Structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:01:46.098407573-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:01:46.098407573-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-m6u7.13","depends_on_id":"flywheel_connectors-m6u7","type":"parent-child","created_at":"2026-01-15T07:01:46.156238794-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-m6u7.13","depends_on_id":"flywheel_connectors-m6u7.1","type":"blocks","created_at":"2026-01-15T07:01:46.606846575-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-m6u7.13","depends_on_id":"flywheel_connectors-m6u7.2","type":"blocks","created_at":"2026-01-15T07:01:47.079319515-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-m6u7.2","title":"fcp.microsoft365: Provisioning Automation (OAuth/app creds)","description":"# fcp.microsoft365: Provisioning Automation (OAuth/app creds)\n\n## Goal\nAutomate onboarding:\n- delegated OAuth2 (PKCE) and/or app credentials\n- validate permissions/scopes\n- validate NetworkConstraints\n\n## Acceptance Criteria\n- `fcp doctor` validates readiness.\n- Mockable.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:45:09.899650761-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:45:09.899650761-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-m6u7.2","depends_on_id":"flywheel_connectors-m6u7","type":"parent-child","created_at":"2026-01-15T03:45:09.900843768-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-m6u7.3","title":"fcp.outlook (via fcp.microsoft365): Mail (read/send)","description":"# fcp.outlook (via fcp.microsoft365): Mail (read/send)\n\n## Goal\nImplement Outlook mail operations via Microsoft Graph:\n- list/get/search messages and threads\n- draft/create/send/reply/forward (Dangerous)\n- attachments read/write (Dangerous if exfiltration risk)\n\n## FCP2 Requirements (non-negotiable)\n- Capability gated per operation family.\n- Single-zone binding (inherited from `flywheel_connectors-m6u7`).\n- Default deny: no CapabilityToken → deny with DecisionReceipt.\n- Strong redaction: email bodies/headers/attachments can contain PII.\n- Writes emit OperationIntent/Receipt + audit events; fail closed on uncertain outcomes.\n\n## External surface / NetworkConstraints\n- Default deny; allow only Microsoft Graph + required OAuth endpoints declared by `flywheel_connectors-m6u7.1`.\n- Enforce per-operation `NetworkConstraints` (no hidden host expansion).\n\n## State model\n- Stateless reads.\n- If delta sync/cursors are used, persist via connector state objects and require singleton-writer lease semantics.\n\n## Test strategy\n- Mock-only unit/integration tests (wiremock): pagination, throttling (429 + Retry-After), retry semantics, redaction.\n- E2E compliance run is covered at the epic level.\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP2 error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:45:15.015738933-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:00:27.452466183-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-m6u7.3","depends_on_id":"flywheel_connectors-m6u7","type":"parent-child","created_at":"2026-01-15T03:45:15.016988818-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-m6u7.3","depends_on_id":"flywheel_connectors-m6u7.1","type":"blocks","created_at":"2026-01-15T03:46:05.695851044-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-m6u7.3","depends_on_id":"flywheel_connectors-m6u7.2","type":"blocks","created_at":"2026-01-15T07:00:55.228931904-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-m6u7.4","title":"fcp.onedrive (via fcp.microsoft365): Files (read/write)","description":"# fcp.onedrive (via fcp.microsoft365): Files (read/write)\n\n## Goal\nImplement OneDrive file operations via Microsoft Graph:\n- list/get/search files/folders\n- download/upload (Dangerous; data exfil / data loss)\n- share links and permissions (Dangerous)\n\n## FCP2 Requirements (non-negotiable)\n- Capability gated per operation family.\n- Single-zone binding (inherited from `flywheel_connectors-m6u7`).\n- Default deny: no CapabilityToken → deny with DecisionReceipt.\n- Strict size limits and timeouts; streaming download/upload must be bounded.\n- Writes emit OperationIntent/Receipt + audit events; fail closed on uncertain outcomes.\n\n## External surface / NetworkConstraints\n- Default deny; allow only Microsoft Graph + required OAuth endpoints declared by `flywheel_connectors-m6u7.1`.\n\n## State model\n- Stateless for most reads.\n- If resumable upload sessions or sync cursors are used, persist state via connector state objects with singleton-writer lease.\n\n## Test strategy\n- Mock-only unit/integration tests (wiremock): chunked uploads, range downloads, throttling, retries, redaction.\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation.\n- Errors map to the FCP2 error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:45:20.178269366-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:00:36.282609593-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-m6u7.4","depends_on_id":"flywheel_connectors-m6u7","type":"parent-child","created_at":"2026-01-15T03:45:20.179926037-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-m6u7.4","depends_on_id":"flywheel_connectors-m6u7.1","type":"blocks","created_at":"2026-01-15T03:46:05.949114009-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-m6u7.4","depends_on_id":"flywheel_connectors-m6u7.2","type":"blocks","created_at":"2026-01-15T07:00:55.687319311-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-m6u7.5","title":"m365.calendar: Events/FreeBusy","description":"# m365.calendar: Events/FreeBusy\n\n## Goal\nImplement calendar operations:\n- events list/get/create/update/delete (writes are Dangerous)\n- free/busy queries\n\n## Requirements\n- Capability gated.\n- Strong redaction.\n- Writes emit receipts/audit.\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:45:25.489433988-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:28:12.008020922-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-m6u7.5","depends_on_id":"flywheel_connectors-m6u7","type":"parent-child","created_at":"2026-01-15T03:45:25.490960864-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-m6u7.5","depends_on_id":"flywheel_connectors-m6u7.1","type":"blocks","created_at":"2026-01-15T03:46:06.210132625-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-m6u7.5","depends_on_id":"flywheel_connectors-m6u7.2","type":"blocks","created_at":"2026-01-15T07:00:56.140497146-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-m6u7.6","title":"fcp.msplanner (via fcp.microsoft365): Tasks","description":"# fcp.msplanner (via fcp.microsoft365): Tasks\n\n## Goal\nImplement Microsoft Planner task operations via Graph:\n- list/get plans, buckets, tasks\n- create/update tasks (Dangerous)\n- comments/checklists/assignments (Dangerous)\n\n## FCP2 Requirements\n- Capability gated.\n- Single-zone binding.\n- Default deny.\n- Writes emit receipts/audit and fail closed.\n\n## NetworkConstraints\n- Default deny; Graph + required OAuth endpoints as declared in `flywheel_connectors-m6u7.1`.\n\n## State model\n- Generally stateless.\n- If syncing tasks incrementally, use delta tokens stored in connector state objects with singleton-writer lease.\n\n## Test strategy\n- Mock-only tests: pagination, ETags, throttling, retry semantics, redaction.\n\n## Acceptance Criteria\n- Typed schemas + validation.\n- Error taxonomy mapping + no secret/PII leakage.\n- Structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:45:31.382935127-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:00:42.575718832-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-m6u7.6","depends_on_id":"flywheel_connectors-m6u7","type":"parent-child","created_at":"2026-01-15T03:45:31.384521275-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-m6u7.6","depends_on_id":"flywheel_connectors-m6u7.2","type":"blocks","created_at":"2026-01-15T07:00:56.59215698-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-m6u7.7","title":"fcp.sharepoint (via fcp.microsoft365): Sites/Docs/Search","description":"# fcp.sharepoint (via fcp.microsoft365): Sites/Docs/Search\n\n## Goal\nImplement SharePoint site/document operations via Microsoft Graph:\n- enumerate sites/drives/lists\n- read/write documents (Dangerous)\n- search (potentially sensitive; policy-gated)\n- permissions and sharing links (Dangerous)\n\n## FCP2 Requirements\n- Capability gated.\n- Single-zone binding.\n- Default deny.\n- Writes emit receipts/audit and fail closed.\n\n## NetworkConstraints\n- Default deny; Graph + required OAuth endpoints as declared in `flywheel_connectors-m6u7.1`.\n\n## State model\n- Stateless for simple reads.\n- Stateful where webhook subscriptions or delta tokens are used (singleton-writer lease).\n\n## Test strategy\n- Mock-only tests: large file streaming bounds, throttling, retry semantics, redaction.\n\n## Acceptance Criteria\n- Typed schemas + validation.\n- Error taxonomy mapping + no secret/PII leakage.\n- Structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:45:37.597502906-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:00:50.578851338-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-m6u7.7","depends_on_id":"flywheel_connectors-m6u7","type":"parent-child","created_at":"2026-01-15T03:45:37.598718115-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-m6u7.7","depends_on_id":"flywheel_connectors-m6u7.2","type":"blocks","created_at":"2026-01-15T07:00:57.044353596-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-m6u7.8","title":"m365.sync: Delta Tokens + Webhook Subscriptions","description":"# m365.sync: Delta Tokens + Webhook Subscriptions\n\n## Goal\nSupport incremental sync and webhook subscriptions.\n\n## Requirements\n- Persist delta tokens/subscription state in mesh state objects.\n- Singleton-writer lease for cursor advancement and renewal.\n- Connector does not expose inbound ports; `fcp-host` owns ingress.\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:45:43.953509186-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:28:13.734940862-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-m6u7.8","depends_on_id":"flywheel_connectors-m6u7","type":"parent-child","created_at":"2026-01-15T03:45:43.954878366-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-m6u7.8","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T03:46:06.460444-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-m6u7.8","depends_on_id":"flywheel_connectors-m6u7.2","type":"blocks","created_at":"2026-01-15T07:00:57.500410409-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-m6u7.9","title":"TEST: Microsoft365 Connector Unit/Integration Tests (mock-only)","description":"# TEST: Microsoft365 Connector Unit/Integration Tests (mock-only)\n\n## Must cover\n- Manifest determinism + interface_hash.\n- Graph request/response parsing.\n- Delta token + subscription renewal logic.\n- Error taxonomy mapping.\n- Redaction.\n\n## Acceptance Criteria\n- Deterministic.\n- Structured JSON logs.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:45:49.376539799-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:45:49.376539799-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-m6u7.9","depends_on_id":"flywheel_connectors-m6u7","type":"parent-child","created_at":"2026-01-15T03:45:49.377930699-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-m6u7.9","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T03:46:06.616310122-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-m9n","title":"fcp.airtable: Webhook automation for real-time sync","description":"# fcp.airtable: Webhook Automation for Real-Time Sync\n\n## Goal\nSupport real-time Airtable change ingestion as an FCP2 streaming source.\n\n## Scope\n- Webhook lifecycle:\n  - `airtable.webhook.create`\n  - `airtable.webhook.list`\n  - `airtable.webhook.delete`\n  - optional payload history APIs\n- Event emission:\n  - translate webhook payloads into EventEnvelopes\n\n## Key requirements\n- Connector must NOT expose inbound ports.\n  - `fcp-host` owns ingress and forwards verified webhook payloads over FCPC.\n- Capability gated (`airtable.webhooks.manage` is Dangerous).\n- State model:\n  - persist subscription identifiers / cursors if required\n  - singleton-writer lease for renewals/cursor advancement\n- Security:\n  - validate webhook authenticity if Airtable provides signatures/secrets\n  - replay protection if the platform provides it\n\n## Tests\n- Deterministic webhook payload simulation.\n- Deny-by-default scenarios (no token).\n- E2E: verify events are emitted with correct taints/provenance.\n\n## Acceptance Criteria\n- Webhook ingestion is deterministic and safe.\n- Events integrate with the shared compliance harness.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:14:37.706442867-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:03:53.405069489-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-m9n","depends_on_id":"flywheel_connectors-soft","type":"parent-child","created_at":"2026-01-15T02:29:57.362234105-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-m9n","depends_on_id":"flywheel_connectors-soft.1","type":"blocks","created_at":"2026-01-15T04:03:59.767737403-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-m9n","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T04:03:59.990101202-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-mbe","title":"fcp.kubernetes: Event watching and subscription system","description":"# fcp.kubernetes: Event watching and subscription system (FCP2)\n\n## Goal\nProvide streaming access to Kubernetes watch APIs and events so agents can:\n- monitor resource changes\n- detect failures and rollouts\n- build alerting pipelines\n\n## Scope\n- Watch resources (pods/deployments/services) with label/namespace filters.\n- Watch cluster events (bounded).\n\n## Capability model (illustrative)\n- `k8s.watch` (sensitive)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- Streaming must be bounded/backpressured:\n  - cap queue depth\n  - explicit drop/deny reason codes when overloaded\n- Taint:\n  - event payloads are tainted external input\n\n## Deliverables\n- Operation schemas:\n  - `k8s.watch.resource`\n  - `k8s.watch.events`\n- Event envelopes with stable event IDs and correlation IDs.\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - watch stream parsing\n  - reconnect behavior\n  - bounds/backpressure\n\n## Acceptance criteria\n- Watch streams are reliable and never cause unbounded memory growth.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:14:49.308037512-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:47:51.485119164-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-mbe","depends_on_id":"flywheel_connectors-gxx2","type":"parent-child","created_at":"2026-01-15T02:32:42.838793048-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-mbe","depends_on_id":"flywheel_connectors-gxx2.1","type":"blocks","created_at":"2026-01-15T04:47:57.696634281-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-mbe","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T04:47:58.034887115-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-mhiv","title":"[FCP2] Computation Migration: MigratableComputation, Checkpoint Transfer, Execution Lease Handoff","description":"# [FCP2] Computation Migration (SUPERSEDED)\n\nThis bead is **superseded** by `flywheel_connectors-6o25.4`, which is the canonical Full Profile Computation Migration plan.\n\n---\n\n## Original Content (kept for history)\n\n## Goal\nImplement the computation migration protocol from V2 spec section 16, enabling:\n- MigratableComputation state management\n- Checkpoint creation and transfer as symbols\n- Execution lease ownership transfer during migration\n- Resume on target device from checkpoint\n\n## Normative Requirements (from FCP Specification V2 section 16)\n- Checkpoints MUST be content-addressed objects distributed via symbols\n- Execution leases MUST be transferred before resumption to prevent duplicate execution\n- Migration state transitions: Running -\u003e Suspended -\u003e (transfer) -\u003e Running\n\n## Implementation Details\n\n### MigratableComputation Schema\n- computation_id: ObjectId\n- capability: MeshCapability\n- state: ComputationState (Running/Suspended/Completed/Failed)\n- current_device: TailscaleNodeId\n\n### Migration Protocol\n1. Checkpoint current state (serialize + store)\n2. Distribute checkpoint as symbols to target\n3. Send migration request to target node\n4. Transfer execution lease ownership (prevents duplicate execution)\n5. Target reconstructs checkpoint and resumes\n\n## Dependencies\n- Requires Leases (1n78.34) for execution lease transfer\n- Requires Stores (1n78.15) for checkpoint storage\n- Requires MeshNode (1n78.17) for migration request routing\n\n## Tests\n- Unit tests: checkpoint creation/restoration, state transitions\n- Integration tests: full migration cycle between nodes\n- Adversarial tests: migration during network partition, duplicate execution prevention\n\n## Acceptance Criteria\n- Computation can migrate between devices without duplicate execution\n- Checkpoint includes all necessary state for resume\n- Migration is audited and produces audit events\n","status":"closed","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:40:18.353523587-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:21:57.724673353-05:00","closed_at":"2026-01-15T05:21:57.724673353-05:00","close_reason":"Superseded by flywheel_connectors-6o25.4 (canonical Full Profile computation migration plan).","labels":["fcp2","mesh","mvp"],"dependencies":[{"issue_id":"flywheel_connectors-mhiv","depends_on_id":"flywheel_connectors-1n78.34","type":"blocks","created_at":"2026-01-15T03:40:40.313316971-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-mhiv","depends_on_id":"flywheel_connectors-1n78.15","type":"blocks","created_at":"2026-01-15T03:40:40.457329104-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-mhiv","depends_on_id":"flywheel_connectors-1n78.17","type":"blocks","created_at":"2026-01-15T03:40:40.596739939-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-mkj","title":"fcp.homeassistant: Automation management (create, edit, enable/disable)","description":"# fcp.homeassistant: Automation management (create, edit, enable/disable) (FCP2)\n\n## Goal\nAllow agents to manage Home Assistant automations safely:\n- list automations\n- enable/disable\n- (optional) create/update/delete automations\n\nAutomation changes can have broad side effects; treat as dangerous.\n\n## Scope\n### Read\n- List automations and their enabled/disabled state.\n\n### Write (dangerous)\n- Enable/disable automation.\n- Optional: create/update/delete automation definitions.\n\n## Capability model (illustrative)\n- `ha.automations.read`\n- `ha.automations.write` (dangerous)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- Approval gating recommended for any automation writes.\n- Receipts + audit events include automation id + action.\n\n## Deliverables\n- Operation schemas:\n  - `ha.automation.list`\n  - `ha.automation.enable`\n  - `ha.automation.disable`\n  - Optional: `ha.automation.create/update/delete`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - enable/disable flows\n  - approval gating\n  - audit/receipt emission\n\n## Acceptance criteria\n- Automation changes are mechanically authorized and auditable.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:16:25.104658993-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:43:07.242519385-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-mkj","depends_on_id":"flywheel_connectors-ortf","type":"parent-child","created_at":"2026-01-15T02:33:22.633583703-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-mkj","depends_on_id":"flywheel_connectors-ortf.1","type":"blocks","created_at":"2026-01-15T04:43:10.890316239-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-n6r","title":"fcp.terraform: Safety-critical design enforcement (Plan=read-only, Apply=approval)","description":"# fcp.terraform: Safety-critical design enforcement (Plan=read-only, Apply=approval) (FCP2)\n\n## Goal\nMake Terraform operations mechanically safe:\n- plan is always read-only\n- apply is always approval-gated and bound to a specific plan hash\n- destroy is forbidden by default\n\nThis bead defines the safety envelope that all other terraform operations must obey.\n\n## Core safety rules (non-negotiable)\n- Never run Terraform with `-auto-approve`.\n- Always run with `-input=false`.\n- Apply requires:\n  - a previously generated plan reference\n  - a matching plan hash\n  - an ApprovalToken when policy requires\n- Explicit denial reason codes for:\n  - missing plan\n  - hash mismatch\n  - drift detected\n  - destroy forbidden\n\n## Capability model (illustrative)\n- `terraform.plan`\n- `terraform.apply` (dangerous; approval required)\n- `terraform.destroy` (critical; disabled unless explicitly enabled)\n\n## FCP2 requirements\n- Single-zone binding.\n- Sandbox profile must:\n  - restrict filesystem to workspace allowlist\n  - restrict process execution to terraform binary\n- Audit:\n  - all state reads are audited\n  - all applies produce receipts + audit events\n\n## Deliverables\n- Safety gate layer used by all terraform operations.\n- Canonical DecisionReceipt reason codes for denials.\n\n## Test strategy (MUST)\n- Unit tests for:\n  - refusal of auto-approve\n  - refusal of apply without plan\n  - hash mismatch denial\n  - destroy forbidden default\n  - audit event emission on state reads\n\n## Acceptance criteria\n- It is mechanically impossible to apply/destroy without explicit authorization.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:15:03.049354185-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:44:24.913713029-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-n6r","depends_on_id":"flywheel_connectors-r6ty","type":"parent-child","created_at":"2026-01-15T02:33:01.454257625-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-n6r","depends_on_id":"flywheel_connectors-r6ty.1","type":"blocks","created_at":"2026-01-15T04:44:30.599421576-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-nlz4","title":"TEST: Capabilities Unit/Adversarial Tests (Token Verification, Grant Enforcement, Holder Proof)","description":"# TEST: Capabilities Unit/Adversarial Tests\n\n## Goal\nProve that the capability system is airtight - no unauthorized operations can execute.\n\n## Test Categories\n\n### COSE_Sign1 Token Parsing\n- [ ] Valid token parses and verifies\n- [ ] Malformed CBOR rejected\n- [ ] Invalid signature rejected\n- [ ] Wrong issuer key rejected\n- [ ] Missing protected headers rejected\n- [ ] KID extraction and lookup works\n\n### Token Field Validation\n- [ ] Missing required fields rejected (jti, sub, iss_zone, iss_node, aud, iat, exp)\n- [ ] Invalid field types rejected\n- [ ] Time validation: expired token rejected\n- [ ] Time validation: future iat beyond skew rejected\n- [ ] aud mismatch rejected (wrong connector_id)\n- [ ] aud_binary required for Risky/Dangerous - rejected if missing\n- [ ] holder_node required for Risky/Dangerous - rejected if missing\n\n### Grant Verification (grant_object_ids)\n- [ ] Empty grant_object_ids rejected\n- [ ] Referenced grant object not found → rejection\n- [ ] Revoked grant object → rejection\n- [ ] Token caps NOT subset of grant union → rejection\n- [ ] Token caps IS subset of grant union → allow\n- [ ] Attenuation that EXPANDS authority → rejection\n- [ ] Attenuation that RESTRICTS authority → allow\n\n### Checkpoint Freshness (chk_id/chk_seq)\n- [ ] Missing chk_id/chk_seq rejected (for Risky/Dangerous)\n- [ ] chk_id mismatch (wrong checkpoint) → rejection\n- [ ] chk_seq \u003e local checkpoint_seq → degraded mode or rejection per policy\n- [ ] chk_seq \u003c= local checkpoint_seq → allow\n\n### Holder Proof Verification\n- [ ] holder_node present but holder_proof missing → rejection\n- [ ] holder_proof with wrong signable bytes → rejection\n- [ ] holder_proof signed by wrong key → rejection\n- [ ] holder_proof valid → allow\n- [ ] Signable bytes include: request_id, operation_id, token.jti\n\n### Issuer Verification\n- [ ] Issuer node has valid NodeKeyAttestation → allow\n- [ ] Issuer attestation expired → rejection\n- [ ] Issuer attestation revoked → rejection\n- [ ] Issuer not authorized for iss_zone → rejection\n\n### Role Resolution\n- [ ] RoleAssignment resolves to effective capabilities\n- [ ] Role inheritance traverses DAG correctly\n- [ ] Cyclic role inheritance detected and rejected\n- [ ] Role attenuation restricts correctly\n\n### Attack Scenarios (Adversarial)\n- [ ] Token replay from different request_id rejected (via holder_proof)\n- [ ] Token from revoked issuer rejected\n- [ ] Token referencing revoked grant rejected\n- [ ] Stale checkpoint attack: old token with old checkpoint accepted/rejected per policy\n- [ ] Audience confusion: token for connector A used against connector B rejected\n- [ ] Binary binding: token without aud_binary used for Dangerous op rejected\n\n## Golden Vectors\n- Valid token bytes with all fields → successful verification\n- Each attack scenario → specific reason_code\n\n## Fuzz Targets\n- COSE_Sign1 parsing\n- Grant subset verification\n- Role inheritance resolution\n\n## Logging Requirements\n```json\n{\n  \"test_name\": \"...\",\n  \"token_jti\": \"...\",\n  \"verification_step\": \"signature|grants|freshness|holder|issuer\",\n  \"result\": \"pass|fail\",\n  \"reason_code\": \"...\",\n  \"evidence_ids\": [...]\n}\n```\n\n## Acceptance Criteria\n- Every verification step has both positive and negative tests\n- Attack scenarios are documented and tested\n- Fuzz targets find no bypasses\n\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:08:10.463694827-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:08:10.463694827-05:00","labels":["capabilities","fcp2","mvp","security","testing"],"dependencies":[{"issue_id":"flywheel_connectors-nlz4","depends_on_id":"flywheel_connectors-1n78.7","type":"blocks","created_at":"2026-01-15T03:23:14.071544932-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-nlz4","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:23:44.737822053-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-nn6","title":"fcp.datadog: Incident response workflow integration","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:18:26.954978053-05:00","created_by":"ubuntu","updated_at":"2026-01-11T12:10:12.739011324-05:00","closed_at":"2026-01-11T12:10:12.739011324-05:00","close_reason":"CONSOLIDATED: All Datadog sub-features merged into comprehensive parent connector bead flywheel_connectors-cu3 (fcp.datadog: Datadog Observability Platform Connector)"}
{"id":"flywheel_connectors-nnja","title":"TEST: Credential Injection Unit Tests (SecretObject, CredentialObject, Egress Injection, Zeroize)","description":"# TEST: Credential Injection Unit Tests (SecretObject, CredentialObject, Egress Injection, Zeroize)\n\n## Goal\nProve (mechanically) that the platform’s credential model is safe and enforceable:\n- secret bytes do not leak\n- credential usage is capability-gated\n- egress proxy injection is correct\n- audits/DecisionReceipts are emitted and actionable\n\nThis bead is the test owner for `flywheel_connectors-kt9r`.\n\n## Scope\nTests cover:\n- `SecretObject` + `SecretAccessToken` semantics (authorization, reconstruction hooks, audit)\n- `CredentialObject` validation + host binding\n- `CapabilityConstraints.credential_allow` enforcement\n- Egress proxy credential injection behavior (HTTP headers, optional TCP/TLS)\n\n## Test Categories\n\n### 1) CredentialObject validation (unit)\n- [ ] `CredentialId` format constraints (canonical, stable)\n- [ ] `CredentialApply` modes validated (HttpHeader/QueryParam) and reject invalid combinations\n- [ ] Optional `host_allow` binding:\n  - accept canonical hostnames only\n  - reject IP literals when policy requires\n  - enforce canonicalization rules consistent with NetworkConstraints\n\n### 2) Capability gating (unit)\n- [ ] Allowed: invoking capability includes `CredentialId` in `credential_allow`\n- [ ] Denied: missing `credential_allow` entry -\u003e DecisionReceipt with reason_code + evidence\n- [ ] Denied: credential present but destination host not allowed by CredentialObject binding\n\n### 3) Egress proxy injection (integration, deterministic)\n- [ ] HTTP header injection:\n  - proxy injects `Authorization` (or configured header) only when allowed\n  - connector never sees secret bytes\n- [ ] Host mismatch deny:\n  - correct denial at the proxy boundary\n  - structured logs include correlation_id + reason_code\n- [ ] Replay/nonce safety when applicable (e.g., timestamped signatures)\n\n### 4) SecretObject access + zeroize discipline (adversarial)\n- [ ] Secret access requires a valid `SecretAccessToken`\n- [ ] Every access emits `AuditEvent` `event_type=\"secret.access\"` with redacted metadata\n- [ ] Verify zeroization discipline:\n  - no secret bytes in logs\n  - no secret bytes in error strings\n  - panic-safe zeroization paths (Drop-based)\n\n## Golden Vectors\nLocation: `tests/vectors/credentials/`\n- `credential_object_valid.cbor`\n- `credential_object_invalid.cbor`\n- `credential_allow_allow.cbor`\n- `credential_allow_deny.cbor`\n\n## Logging Requirements\n- MUST use structured JSON logs per `flywheel_connectors-1n78.35`.\n- MUST NOT log secret bytes; log only stable IDs (`SecretId`, `CredentialId`) and redacted metadata.\n\n## Acceptance Criteria\n- Test suite is deterministic and runs in CI.\n- Denials produce DecisionReceipts with correct reason codes and evidence.\n- Secret bytes never appear in logs, errors, or artifacts.\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:25:09.606885236-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:00.849167027-05:00","labels":["fcp2","mvp","secrets","security","testing"],"dependencies":[{"issue_id":"flywheel_connectors-nnja","depends_on_id":"flywheel_connectors-kt9r","type":"blocks","created_at":"2026-01-15T03:25:16.540583365-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-nnja","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:25:16.632327144-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-nuc","title":"fcp.twilio: Verify 2FA authentication service","description":"# fcp.twilio: Verify 2FA authentication service (FCP2)\n\n## Goal\nExpose Twilio Verify to support 2FA/verification workflows:\n- send verification codes\n- check verification codes\n\nThis surface is security-sensitive and must be tightly capability scoped.\n\n## Scope\n- Create a verification (send code via SMS/call/etc).\n- Check a verification (validate code).\n- Optional: cancel verification.\n\n## Capability model (illustrative)\n- `twilio.verify.send` (dangerous-ish: sends messages)\n- `twilio.verify.check` (auth-sensitive)\n- Optional: `twilio.verify.cancel`\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- PII hygiene:\n  - phone numbers are sensitive (never log)\n  - verification codes are secrets (never log)\n- For sends:\n  - receipts/audit events include verification SID and destination hash only\n\n## Deliverables\n- Operation schemas:\n  - `twilio.verify.send`\n  - `twilio.verify.check`\n  - Optional: `twilio.verify.cancel`\n- Strict validation:\n  - code length/format\n  - channel allowlist\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - send/check flows\n  - redaction (no codes/numbers in logs)\n  - error mapping (invalid code, expired, rate limited)\n\n## Acceptance criteria\n- Verify operations are mechanically authorized, safe, and do not leak secrets.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:14:50.925556327-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:33:02.072699732-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-nuc","depends_on_id":"flywheel_connectors-otqy","type":"parent-child","created_at":"2026-01-15T02:29:05.650839849-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-nuc","depends_on_id":"flywheel_connectors-otqy.1","type":"blocks","created_at":"2026-01-15T04:33:07.32403744-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-nvt","title":"fcp.sentry: Issue assignment and status management","description":"# fcp.sentry: Issue assignment and status management (FCP2)\n\n## Goal\nAllow safe, auditable manipulation of Sentry issue workflow state:\n- assign/unassign\n- resolve/unresolve\n- ignore/unignore\n- set priority (if supported)\n\nThese are write operations that can affect on-call workflows.\n\n## Scope\n### Write operations\n- `sentry.issue.assign`\n- `sentry.issue.resolve`\n- `sentry.issue.ignore`\n- `sentry.issue.update_priority`\n\n### Read support\n- fetch minimal issue metadata required for optimistic concurrency (if available).\n\n## Capability model (illustrative)\n- `sentry.issues.write`\n\nPolicy guidance:\n- Some orgs may require approvals for resolving/ignoring issues.\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- For every write:\n  - emit OperationReceipt + AuditEvent\n  - include issue id + action + correlation id\n  - never include raw issue payloads in logs\n\n## Deliverables\n- Operation schemas:\n  - `sentry.issue.assign`\n  - `sentry.issue.set_status` (resolve/ignore/unresolve)\n  - `sentry.issue.set_priority`\n- Denial reason codes for policy engine.\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - capability gating\n  - approval gating (when policy requires)\n  - error mapping (permission denied, conflict)\n  - audit/receipt emission\n\n## Acceptance criteria\n- Issue workflow actions are safe, explainable, and auditable.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:15:02.782534687-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:29:48.271959477-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-nvt","depends_on_id":"flywheel_connectors-lszk.3","type":"parent-child","created_at":"2026-01-15T02:30:42.108403377-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-nvt","depends_on_id":"flywheel_connectors-lszk.3.1","type":"blocks","created_at":"2026-01-15T04:29:52.087553936-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ofw","title":"fcp.gmail: Google Gmail API Connector","description":"# fcp.gmail - Gmail API Connector (FCP2)\n\n## Goal\nProvide an FCP2-compliant Gmail connector for email automation with strict zone isolation, sandboxing, and mechanical authorization.\n\n## Manifest archetypes (closed set)\n- `operational`\n- `streaming` (optional: watch/push or polling-driven event stream)\n\n## Zone model\n\n\u003c!-- fcp2-single-zone-note --\u003e\n**FCP2 single-zone binding note:** A connector instance binds to exactly one `ZoneId` for its entire lifetime.\nThe *\"zones\"* described in this section are a **recommended deployment pattern** (run separate connector instances in separate zones with different capability grants/policies) and/or conceptual risk tiers.\nThe connector MUST NOT multiplex multiple zones internally.\n\n- Single-zone bound: one connector instance ↔ one `ZoneId`.\n- Recommended: `z:private:gmail:\u003caccount\u003e` (policy-owned naming).\n\n## External surface\n### NetworkConstraints\nDefault-deny; allow only the Gmail/Google API endpoints required by:\n- Gmail API\n- OAuth token refresh (if used by the OAuth library)\n\n### Credential injection\n- OAuth2 refresh/access tokens via `CredentialId`.\n- Never persist tokens to disk.\n\n## Capability model (illustrative)\n- `gmail.messages.read`\n- `gmail.messages.send`\n- `gmail.messages.modify` (labels/trash)\n- `gmail.threads.read` / `gmail.threads.modify`\n- `gmail.labels.manage`\n- `gmail.settings.manage` (Dangerous)\n\n## Operations (representative)\n- messages: get/list/send/reply/forward/modify/trash/delete\n- threads: get/list/modify/trash\n- labels: list/create/update/delete\n- drafts: create/get/list/update/send/delete\n\n## Eventing (optional)\nIf we support push/watch:\n- connector must not expose inbound ports directly\n- integrate through `fcp-host` controlled ingress (or deterministic polling)\n\n## State model\n- Stateless for simple reads.\n- For incremental sync (historyId), persist cursor in connector state and advance under a singleton-writer lease.\n\n## Tests\n- Mock-only unit/integration tests with wiremock.\n- Deterministic historyId/poll simulation.\n- E2E compliance run validates default deny + NetworkConstraints + state/cursor behavior.\n\n## Acceptance Criteria\n- Passes connector compliance runner.\n- Deterministic tests; no live Gmail calls in unit tests.\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-11T10:46:30.058539016-05:00","created_by":"ubuntu","updated_at":"2026-01-15T08:40:34.032476517-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-ofw","depends_on_id":"flywheel_connectors-lj2","type":"blocks","created_at":"2026-01-11T10:53:04.440370177-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-ofw","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T10:53:04.688075449-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-ofw","depends_on_id":"flywheel_connectors-iv7","type":"blocks","created_at":"2026-01-11T10:53:04.906715001-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-ofw","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T12:38:27.514369778-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-ofw","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T01:23:43.847119943-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ofw","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:32:37.95179175-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ofw","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:32:38.056522812-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ofw","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T03:32:38.175278269-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ofw","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:32:38.287958283-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ofw","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T03:32:38.409006139-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ofw","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T03:32:38.515867723-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ofw","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T03:32:38.63774958-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ofw.1","title":"fcp.gmail: Manifest + Capability Map (FCP2)","description":"# fcp.gmail: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the Gmail connector manifest contract:\n- archetypes (`operational`, optional `streaming`)\n- operations + schema IDs\n- capability families + per-operation caps\n- NetworkConstraints for Gmail + OAuth refresh\n- state model for historyId cursor\n\n## Acceptance Criteria\n- Complete manifest spec stored here.\n- Good/bad manifest examples exist for static compliance.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:32:44.740037285-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:32:44.740037285-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-ofw.1","depends_on_id":"flywheel_connectors-ofw","type":"parent-child","created_at":"2026-01-15T03:32:44.741290395-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ofw.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:33:20.057779499-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ofw.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:33:20.166102616-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ofw.2","title":"fcp.gmail: Provisioning Automation (OAuth2)","description":"# fcp.gmail: Provisioning Automation (OAuth2)\n\n## Goal\nAutomate Gmail OAuth2 onboarding:\n- request OAuth client credentials and refresh token via AutomationRecipe\n- store tokens as `CredentialId`s\n- validate scopes and token refresh\n\n## Acceptance Criteria\n- `fcp doctor` can validate readiness.\n- Mockable for unit tests.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:32:49.839584889-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:56.218668371-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-ofw.2","depends_on_id":"flywheel_connectors-ofw","type":"parent-child","created_at":"2026-01-15T03:32:49.840906448-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ofw.3","title":"fcp.gmail: Core Operations (messages/threads/labels)","description":"# fcp.gmail: Core Operations (messages/threads/labels)\n\n## Goal\nImplement the core Gmail operations:\n- messages: get/list/send/reply/modify/trash\n- threads: get/list/modify\n- labels: list/create/update/delete\n\n## Requirements\n- Capability gated.\n- Strong redaction (email bodies/headers can contain PII).\n- Writes emit receipts/audit.\n\n## Acceptance Criteria\n- Mock-only integration tests cover success + 401/403/429.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:32:55.783645577-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:32:55.783645577-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-ofw.3","depends_on_id":"flywheel_connectors-ofw","type":"parent-child","created_at":"2026-01-15T03:32:55.784872388-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ofw.3","depends_on_id":"flywheel_connectors-ofw.1","type":"blocks","created_at":"2026-01-15T03:33:20.288093147-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ofw.4","title":"fcp.gmail: Incremental Sync Cursor + State (historyId)","description":"# fcp.gmail: Incremental Sync Cursor + State (historyId)\n\n## Goal\nSupport incremental message ingestion using Gmail historyId cursor.\n\n## Requirements\n- Persist historyId cursor in connector state.\n- Advance cursor only under a singleton-writer lease.\n- Provide deterministic event emission semantics for downstream consumers.\n\n## Acceptance Criteria\n- Restart resumes from cursor without duplication.\n- Lease conflict behavior is correct.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:33:02.11195699-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:33:02.11195699-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-ofw.4","depends_on_id":"flywheel_connectors-ofw","type":"parent-child","created_at":"2026-01-15T03:33:02.11319367-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ofw.4","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T03:33:20.489330368-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ofw.5","title":"TEST: Gmail Connector Unit/Integration Tests (mock-only)","description":"# TEST: Gmail Connector Unit/Integration Tests (mock-only)\n\n## Must cover\n- Manifest determinism + interface_hash.\n- OAuth refresh handling (mocked).\n- Error taxonomy mapping.\n- Redaction (no tokens; no raw message bodies by default).\n- Cursor advancement logic.\n\n## Acceptance Criteria\n- Deterministic.\n- Structured JSON logs.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:33:07.756465382-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:33:07.756465382-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-ofw.5","depends_on_id":"flywheel_connectors-ofw","type":"parent-child","created_at":"2026-01-15T03:33:07.757845692-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ofw.5","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T03:33:20.600490078-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ofw.6","title":"E2E: Gmail Connector Compliance Run","description":"# E2E: Gmail Connector Compliance Run\n\n## Goal\nAdd Gmail scenarios to the shared compliance harness.\n\n## Scenarios\n- Default deny.\n- Allow with valid token.\n- Network guard allow/deny.\n- historyId cursor + lease behavior.\n\n## Acceptance Criteria\n- `cargo test --package fcp-e2e --features gmail` passes deterministically.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:33:13.933036978-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:33:13.933036978-05:00","labels":["conformance","connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-ofw.6","depends_on_id":"flywheel_connectors-ofw","type":"parent-child","created_at":"2026-01-15T03:33:13.934352857-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ofw.6","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T03:33:20.775760808-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-oip0","title":"[FCP2] fcp-host: Node Gateway/Orchestrator (Supervisor + Agent API)","description":"# [FCP2] fcp-host: Node Gateway/Orchestrator (Supervisor + Agent API)\n\n## Overview\n`fcp-host` is the node-local gateway process that:\n- runs connector binaries in sandboxes\n- exposes an agent-facing API (local or mesh-facing)\n- delegates enforcement decisions to the MeshNode + policy engine\n- manages lifecycle (install/verify, configure, health, restart)\n\nIn FCP2, the *mesh is the hub*, but each node still needs a robust local supervisor.\n\n## Core responsibilities\n\n### Connector Supervisor\n- Spawn/terminate connector processes\n- Health monitoring and restart policies\n- Resource limit enforcement\n- Crash recovery and structured logging\n\n### Control Plane Termination\n- Accept control-plane requests (invoke/subscribe/configure) from local agents or routed mesh requests.\n- Speak FCPC (ordered control-plane framing) to connectors.\n- Ensure all control-plane messages are canonical objects (schema-hash + deterministic CBOR).\n\n### Security Enforcement Boundary\n`fcp-host` must never execute connector side effects unless the request has already passed:\n- zone membership checks\n- capability verification\n- revocation freshness\n- taint/approval checks\n- policy ceilings\n\nAll denials must result in DecisionReceipts with stable reason codes and evidence.\n\n### Sandbox Manager + Egress Proxy\n- Apply sandbox profiles (OS sandbox or WASI runtime)\n- Enforce NetworkConstraints via capability-gated egress proxy\n- Ensure secrets are injected ephemerally and never persist to disk\n\n### Registry Integration\n- Install/update connectors only after verification chain passes:\n  - manifest signature\n  - binary checksum/signature\n  - platform/arch\n  - policy requirements (transparency/attestations when enabled)\n- Support mirroring/pinning connector objects for offline installs\n\n### Observability\n- Structured JSON logs across lifecycle events\n- Metrics for invokes/denials/latency\n- TraceContext propagation into audit events\n\n## Acceptance Criteria\n- Host can run the MVP vertical slice end-to-end in the deterministic harness.\n- Host produces clear logs + DecisionReceipts for denials.\n- Host never logs secrets.\n","status":"open","priority":0,"issue_type":"feature","created_at":"2026-01-11T12:10:58.297553963-05:00","created_by":"ubuntu","updated_at":"2026-01-15T01:57:17.630284931-05:00","labels":["fcp2","host","mvp"],"dependencies":[{"issue_id":"flywheel_connectors-oip0","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T01:57:03.226400419-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-oip0","depends_on_id":"flywheel_connectors-1n78.17","type":"blocks","created_at":"2026-01-15T01:57:03.282191732-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-oip0","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T01:57:03.337817483-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-oip0","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T01:57:03.395369132-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-oip0","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T01:57:03.445381528-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-oip0","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T01:57:03.496652215-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-oip0","depends_on_id":"flywheel_connectors-1n78.27","type":"blocks","created_at":"2026-01-15T01:57:03.548322654-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-oip0","depends_on_id":"flywheel_connectors-1n78.11","type":"blocks","created_at":"2026-01-15T01:57:03.601119666-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-oip0","depends_on_id":"flywheel_connectors-1n78.28","type":"blocks","created_at":"2026-01-15T01:57:03.652326933-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-oip0","depends_on_id":"flywheel_connectors-1n78.29","type":"blocks","created_at":"2026-01-15T01:57:03.701895594-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-oip0","depends_on_id":"flywheel_connectors-1n78.21","type":"blocks","created_at":"2026-01-15T01:57:03.750119681-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ojh","title":"fcp.kubernetes: ConfigMap and Secret management","description":"# fcp.kubernetes: ConfigMap and Secret management (FCP2)\n\n## Goal\nProvide safe management of configuration resources:\n- ConfigMaps\n- Secrets (with strict redaction)\n\n## Scope\n### Read\n- Get/list ConfigMaps.\n- Get/list Secret metadata.\n  - default: do not return secret values unless explicitly requested and authorized\n\n### Write (dangerous)\n- Create/update ConfigMaps.\n- Create/update Secrets (critical).\n- Delete (policy-controlled; often forbidden in prod).\n\n## Capability model (illustrative)\n- `k8s.configmaps.read`\n- `k8s.configmaps.write` (dangerous)\n- `k8s.secrets.read` (sensitive)\n- `k8s.secrets.write` (critical)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- Secret hygiene:\n  - never log secret values\n  - default to returning key names only\n  - require explicit capability and approval for secret value reads/writes\n- Receipts/audit for all mutations.\n\n## Deliverables\n- Operation schemas:\n  - `k8s.configmap.get/list/apply/delete`\n  - `k8s.secret.get_metadata/list`\n  - Optional (policy-gated): `k8s.secret.get_values`\n  - `k8s.secret.apply/delete`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - redaction behavior\n  - approval gating for secret operations\n  - audit/receipt emission\n\n## Acceptance criteria\n- Secrets are protected by default and cannot leak through logs.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:14:47.76987419-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:47:36.614461695-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-ojh","depends_on_id":"flywheel_connectors-gxx2","type":"parent-child","created_at":"2026-01-15T02:32:42.916391969-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ojh","depends_on_id":"flywheel_connectors-gxx2.1","type":"blocks","created_at":"2026-01-15T04:47:42.911023753-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ony","title":"fcp.anthropic: Anthropic Claude API Connector","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-11T10:55:24.027656943-05:00","created_by":"ubuntu","updated_at":"2026-01-11T12:08:12.50924304-05:00","closed_at":"2026-01-11T12:08:12.50924304-05:00","close_reason":"DUPLICATE: Anthropic connector (fcp-anthropic) already fully implemented in codebase. ~1,772 lines of working code exist at connectors/anthropic/. See closed bead ptr for original.","dependencies":[{"issue_id":"flywheel_connectors-ony","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T10:55:34.45018573-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-ony","depends_on_id":"flywheel_connectors-9co","type":"blocks","created_at":"2026-01-11T10:55:34.789780074-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-ony","depends_on_id":"flywheel_connectors-iv7","type":"blocks","created_at":"2026-01-11T10:55:35.105797979-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-ony","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T10:55:35.360632929-05:00","created_by":"ubuntu"}]}
{"id":"flywheel_connectors-orr","title":"Study clawdbot Discord connector implementation","description":"Research and document the existing clawdbot Discord connector implementation. Identify patterns, learnings, reusable components, and anti-patterns to avoid. Document how it handles Gateway WebSocket, REST API, rate limiting, sharding, and message handling. Use findings to inform fcp.discord improvements.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-11T10:27:31.149842283-05:00","created_by":"ubuntu","updated_at":"2026-01-11T12:08:19.397624196-05:00","closed_at":"2026-01-11T12:08:19.397624196-05:00","close_reason":"DUPLICATE: Merged with flywheel_connectors-v6w which has more detailed study plan. Dependencies were incorrect (study tasks don't need code infrastructure).","dependencies":[{"issue_id":"flywheel_connectors-orr","depends_on_id":"flywheel_connectors-9co","type":"blocks","created_at":"2026-01-11T10:41:58.844854304-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-orr","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T10:41:59.510438377-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-orr","depends_on_id":"flywheel_connectors-iv7","type":"blocks","created_at":"2026-01-11T10:42:00.462084871-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-orr","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T10:42:01.129233351-05:00","created_by":"ubuntu"}]}
{"id":"flywheel_connectors-ortf","title":"fcp.homeassistant","description":"# Home Assistant Connector\n\nSmart home central integration providing unified access to 2000+ device integrations through a single connector.\n\n## Value Assessment\n\n**Value Score: 80/100** (Tier 3 Specialized)\n\n### Why Home Assistant?\n\n1. **Integration Multiplier**: Home Assistant aggregates 2000+ device integrations - one connector provides access to virtually all smart home ecosystems (Zigbee, Z-Wave, WiFi, Matter, Thread, proprietary protocols)\n2. **Local Control**: Privacy-first architecture with local processing - no cloud dependency for core operations\n3. **Active Community**: 500K+ installations, rapid integration updates, extensive documentation\n4. **Standardized Interface**: Consistent entity model regardless of underlying device protocol\n5. **Automation Engine**: Built-in automation, scenes, and scripting capabilities\n\n## Manifest archetypes (closed set)\n\n- `operational`\n- `streaming`\n\n\u003e Interaction patterns (non-archetype): Request/Response + Streaming (WebSocket/events)\n\n- **Request-Response**: Entity state queries, service calls, configuration management\n- **Streaming**: Real-time entity state changes via WebSocket subscription, event bus monitoring\n\n## Operations\n\n### Entity Management\n| Operation | Type | Description |\n|-----------|------|-------------|\n| `entity.list` | R-R | List all entities with optional domain/area filtering |\n| `entity.get` | R-R | Get current state and attributes of an entity |\n| `entity.set` | R-R | Update entity state (lights, switches, covers, etc.) |\n| `entity.history` | R-R | Query historical state data with time range |\n| `entity.subscribe` | Stream | Real-time state change notifications |\n\n### Service Calls\n| Operation | Type | Description |\n|-----------|------|-------------|\n| `service.list` | R-R | List available services by domain |\n| `service.call` | R-R | Execute a service (turn_on, turn_off, toggle, etc.) |\n| `service.call_batch` | R-R | Execute multiple service calls atomically |\n\n### Automation \u0026 Scenes\n| Operation | Type | Description |\n|-----------|------|-------------|\n| `automation.list` | R-R | List all automations with status |\n| `automation.trigger` | R-R | Manually trigger an automation |\n| `automation.toggle` | R-R | Enable/disable an automation |\n| `scene.list` | R-R | List available scenes |\n| `scene.activate` | R-R | Activate a scene |\n\n### Events \u0026 Monitoring\n| Operation | Type | Description |\n|-----------|------|-------------|\n| `event.subscribe` | Stream | Subscribe to event bus (state_changed, call_service, etc.) |\n| `event.fire` | R-R | Fire a custom event |\n| `statistics.get` | R-R | Get long-term statistics for sensors |\n\n### Configuration\n| Operation | Type | Description |\n|-----------|------|-------------|\n| `config.get` | R-R | Get Home Assistant configuration |\n| `area.list` | R-R | List areas/rooms |\n| `device.list` | R-R | List devices with manufacturer info |\n\n## Example Use Cases\n\n### Natural Language Mapping\n\n| User Request | Operation Flow |\n|--------------|----------------|\n| \"Turn off all lights\" | `entity.list(domain=light)` → `service.call(light.turn_off, all)` |\n| \"What's the temperature?\" | `entity.get(sensor.temperature)` or area-based query |\n| \"Set up automation when I'm away\" | `automation.create` with presence trigger |\n| \"Check if garage is closed\" | `entity.get(cover.garage_door)` → state check |\n| \"Dim living room to 30%\" | `service.call(light.turn_on, brightness_pct=30)` |\n| \"What happened while I was gone?\" | `entity.history(time_range)` + `event.query` |\n| \"Notify me when motion detected\" | `event.subscribe(state_changed, binary_sensor.motion)` |\n\n## Zone Architecture for IoT Safety\n\n\u003c!-- fcp2-single-zone-note --\u003e\n**FCP2 single-zone binding note:** A connector instance binds to exactly one `ZoneId` for its entire lifetime.\nThe *\"zones\"* described in this section are a **recommended deployment pattern** (run separate connector instances in separate zones with different capability grants/policies) and/or conceptual risk tiers.\nThe connector MUST NOT multiplex multiple zones internally.\n\n\n### Zone Definitions\n\n```\n┌─────────────────────────────────────────────────────────────┐\n│                    ZONE 0: SENSOR ONLY                      │\n│  Read-only access to all sensor entities                    │\n│  - Temperature, humidity, energy sensors                    │\n│  - Binary sensors (motion, door, window)                    │\n│  - Device trackers, sun position                            │\n│  Operations: entity.get, entity.list, entity.history        │\n└─────────────────────────────────────────────────────────────┘\n\n┌─────────────────────────────────────────────────────────────┐\n│                  ZONE 1: COMFORT CONTROL                    │\n│  Control of non-critical comfort devices                    │\n│  - Lights, media players, climate (HVAC)                    │\n│  - Scenes, automations                                      │\n│  Operations: + service.call (limited domains)               │\n└─────────────────────────────────────────────────────────────┘\n\n┌─────────────────────────────────────────────────────────────┐\n│                  ZONE 2: SECURITY ADJACENT                  │\n│  Control of security-adjacent devices                       │\n│  - Covers (blinds, garage doors)                            │\n│  - Cameras (PTZ control)                                    │\n│  Operations: + cover.*, camera.* services                   │\n│  Requires: Confirmation for external-facing devices         │\n└─────────────────────────────────────────────────────────────┘\n\n┌─────────────────────────────────────────────────────────────┐\n│                    ZONE 3: SECURITY                         │\n│  Direct security system control                             │\n│  - Alarm panels, locks, sirens                              │\n│  Operations: + alarm_control_panel.*, lock.*                │\n│  Requires: Explicit user confirmation + audit logging       │\n└─────────────────────────────────────────────────────────────┘\n\n┌─────────────────────────────────────────────────────────────┐\n│                 ZONE 4: ADMINISTRATIVE                      │\n│  System configuration and management                        │\n│  - Reload configurations, restart services                  │\n│  - Create/delete automations                                │\n│  Operations: + homeassistant.*, config.*                    │\n│  Requires: Admin privileges + confirmation                  │\n└─────────────────────────────────────────────────────────────┘\n```\n\n### Zone Enforcement\n\n- Each API token should be scoped to maximum zone level\n- Operations automatically filtered based on zone permissions\n- Audit logging for Zone 2+ operations\n- Rate limiting per zone (stricter for higher zones)\n\n## Dependencies\n\n| Crate | Purpose |\n|-------|---------|\n| `fcp-core` | Base connector traits, operation definitions, error handling |\n| `fcp-streaming` | WebSocket connection management, event stream handling |\n| `fcp-webhook` | Webhook endpoints for Home Assistant event callbacks |\n| `fcp-telemetry` | Metrics, tracing, audit logging for security zones |\n\n## Implementation Notes\n\n### Authentication\n\n- **Long-Lived Access Tokens**: Primary method, created in HA user profile\n- **Token Storage**: Secure credential store via fcp-core\n- **Token Scoping**: Consider HA user permissions for zone mapping\n\n### API Integration\n\n```\nHome Assistant APIs:\n├── REST API (port 8123)\n│   ├── /api/states - Entity state CRUD\n│   ├── /api/services - Service calls\n│   ├── /api/history - Historical data\n│   ├── /api/config - Configuration info\n│   └── /api/events - Event firing\n│\n└── WebSocket API (ws://host:8123/api/websocket)\n    ├── subscribe_events - Real-time event subscription\n    ├── subscribe_trigger - Trigger-based subscriptions\n    ├── get_states - Bulk state retrieval\n    └── call_service - Service execution\n```\n\n### Connection Management\n\n- WebSocket for real-time subscriptions with automatic reconnection\n- REST for one-off queries and commands\n- Connection pooling for concurrent requests\n- Heartbeat/ping-pong for connection health\n\n### Entity Domain Mapping\n\n| HA Domain | Typical Operations | Zone |\n|-----------|-------------------|------|\n| `sensor` | Read only | 0 |\n| `binary_sensor` | Read only | 0 |\n| `light` | on/off, brightness, color | 1 |\n| `switch` | on/off | 1 |\n| `climate` | set_temperature, hvac_mode | 1 |\n| `media_player` | play, pause, volume | 1 |\n| `cover` | open/close, position | 2 |\n| `camera` | snapshot, stream, PTZ | 2 |\n| `lock` | lock/unlock | 3 |\n| `alarm_control_panel` | arm/disarm | 3 |\n\n### Error Handling\n\n- Entity not found → Clear error with discovery suggestion\n- Service unavailable → Retry with backoff, notify on persistent failure\n- WebSocket disconnect → Automatic reconnect with state resync\n- Rate limiting → Queue with priority (security \u003e comfort \u003e monitoring)\n\n### Performance Considerations\n\n- Cache entity registry (refresh on homeassistant_start event)\n- Batch state queries where possible\n- Debounce rapid state changes in subscriptions\n- Consider HA recorder database for heavy history queries\n\n## Testing Strategy\n\n- Mock Home Assistant instance via `hass` test fixtures\n- WebSocket simulation for streaming tests\n- Zone boundary testing (ensure proper isolation)\n- Reconnection and error recovery scenarios\n\n## References\n\n- [Home Assistant REST API](https://developers.home-assistant.io/docs/api/rest/)\n- [Home Assistant WebSocket API](https://developers.home-assistant.io/docs/api/websocket/)\n- [Long-Lived Access Tokens](https://developers.home-assistant.io/docs/auth_api/#long-lived-access-token)\n- [Entity Registry](https://developers.home-assistant.io/docs/entity_registry_index/)\n\n## Success Criteria\n- The epic includes (or references) the standard base beads `.1`..`.4` per `flywheel_connectors-lszk.5`.\n- The connector passes `flywheel_connectors-1n78.21.5` (static + dynamic) and has an E2E compliance run wired through `flywheel_connectors-e3i9`.\n- Unit/integration tests are mock-only (no real external calls) and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-11T21:47:23.753034524-05:00","created_by":"ubuntu","updated_at":"2026-01-15T07:39:56.851663262-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-ortf","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T22:08:10.755440392-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-ortf","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T22:08:10.781430691-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-ortf","depends_on_id":"flywheel_connectors-9co","type":"blocks","created_at":"2026-01-11T22:08:10.941417791-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-ortf","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:33:08.184119911-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ortf","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T04:25:21.771059529-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ortf","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T04:25:21.987697973-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ortf","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T04:25:22.19857324-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ortf","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T04:25:22.410084214-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ortf","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T04:25:22.632010851-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ortf","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T04:25:22.844831703-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ortf.1","title":"fcp.homeassistant: Manifest + Capability Map (FCP2)","description":"# fcp.homeassistant: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the Home Assistant connector’s **mechanical manifest contract** under FCP2.\n\n## Required contents\n- Manifest archetypes (closed set):\n  - `operational` (service calls, entity writes)\n  - `streaming` (websocket event subscriptions)\n  - `knowledge` (entity reads, history/statistics)\n- Operation list + schema IDs.\n- Capability families + per-operation required caps.\n- NetworkConstraints:\n  - pin the configured HA base host (self-hosted)\n  - allow WS + HTTPS to that host only\n- State model declaration:\n  - subscription IDs / cursor state (if persisted)\n  - caching rules (must be bounded)\n\n## Acceptance criteria\n- Another engineer can implement `--manifest` from this bead alone.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:24:38.082714071-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:24:38.082714071-05:00","dependencies":[{"issue_id":"flywheel_connectors-ortf.1","depends_on_id":"flywheel_connectors-ortf","type":"parent-child","created_at":"2026-01-15T04:24:38.084055759-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ortf.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T04:24:42.479275489-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ortf.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T04:24:42.684001684-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ortf.2","title":"fcp.homeassistant: Provisioning Automation (base URL, token, TLS, websocket)","description":"# fcp.homeassistant: Provisioning Automation (base URL, token, TLS, websocket)\n\n## Goal\nAutomate Home Assistant onboarding with minimal human steps while keeping secrets zone-scoped.\n\n## Requirements\n- Configure base URL (local/self-hosted) and validate it is pinned by NetworkConstraints.\n- Auth via `CredentialId` (long-lived access token).\n- Connectivity checks:\n  - REST `/api/` health\n  - WebSocket handshake + auth\n- Optional: discover entity registry snapshot for capability scoping hints (read-only).\n\n## Acceptance criteria\n- `fcp doctor` verifies readiness without leaking secrets.\n- Fully mockable for unit tests.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:24:50.281692535-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:56.284494829-05:00","dependencies":[{"issue_id":"flywheel_connectors-ortf.2","depends_on_id":"flywheel_connectors-ortf","type":"parent-child","created_at":"2026-01-15T04:24:50.283009977-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ortf.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T04:24:55.071327401-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ortf.3","title":"TEST: Home Assistant Connector Unit/Integration Tests (mock-only)","description":"# TEST: Home Assistant Connector Unit/Integration Tests (mock-only)\n\n## Goal\nMock-only tests for fcp.homeassistant across REST + WebSocket surfaces.\n\n## Requirements\n- No real HA instance required in CI.\n- Mock REST endpoints:\n  - states list/get\n  - services list/call\n  - history/statistics\n- Mock WebSocket:\n  - auth handshake\n  - subscribe_events\n  - event stream messages\n- Tests for:\n  - reconnection + resubscribe behavior\n  - capability gating for entity writes/service calls\n  - safety/approval gating for security-adjacent domains (policy-owned)\n\n## Acceptance criteria\n- Deterministic CI suite.\n- Structured JSON logs with correlation_id + reason codes.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:25:02.17703213-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:25:02.17703213-05:00","dependencies":[{"issue_id":"flywheel_connectors-ortf.3","depends_on_id":"flywheel_connectors-ortf","type":"parent-child","created_at":"2026-01-15T04:25:02.178488403-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ortf.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T04:25:05.751058516-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ortf.4","title":"E2E: Home Assistant Connector Compliance Run","description":"# E2E: Home Assistant Connector Compliance Run\n\n## Goal\nRun the shared Mechanical Connector Compliance Runner against fcp.homeassistant.\n\n## Must verify\n- Default deny via CapabilityTokens.\n- NetworkConstraints enforcement (single pinned HA host).\n- Receipts/audit for write operations.\n- Structured JSON logs with correlation_id + reason codes.\n\n## Acceptance criteria\n- Runner output bundle is green for fcp.homeassistant.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:25:11.267317513-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:25:11.267317513-05:00","dependencies":[{"issue_id":"flywheel_connectors-ortf.4","depends_on_id":"flywheel_connectors-ortf","type":"parent-child","created_at":"2026-01-15T04:25:11.268863906-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ortf.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T04:25:16.281972245-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-osp","title":"fcp.kubernetes: Resource CRUD for pods, deployments, and services","description":"# fcp.kubernetes: Resource CRUD for pods, deployments, and services (FCP2)\n\n## Goal\nProvide safe, typed CRUD for core Kubernetes resources:\n- pods\n- deployments\n- services\n\n## Scope\n### Read\n- Get/list resources with namespace scoping and label selectors.\n\n### Write (dangerous)\n- Create/update resources.\n- Delete resources (policy-controlled; often forbidden in prod).\n- Scale deployments.\n\n## Capability model (illustrative)\n- `k8s.read`\n- `k8s.write` (dangerous)\n- `k8s.delete` (critical)\n- `k8s.deploy.scale` (dangerous-ish)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned to the cluster API server host.\n- Namespace isolation:\n  - operations must enforce namespace allowlists\n- For mutations:\n  - receipts + audit events include kind/namespace/name + action\n\n## Deliverables\n- Operation schemas:\n  - `k8s.pod.get/list/create/delete`\n  - `k8s.deployment.get/list/apply/scale/delete`\n  - `k8s.service.get/list/apply/delete`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - namespace allowlist enforcement\n  - apply/patch correctness\n  - deny-by-default deletes in prod policy\n\n## Acceptance criteria\n- CRUD operations are safe-by-default, policy-driven, and auditable.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:14:45.433992765-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:46:28.022700444-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-osp","depends_on_id":"flywheel_connectors-gxx2","type":"parent-child","created_at":"2026-01-15T02:32:42.994947731-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-osp","depends_on_id":"flywheel_connectors-gxx2.1","type":"blocks","created_at":"2026-01-15T04:46:34.136510555-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-otqy","title":"fcp.twilio: Communication Infrastructure Connector (SMS, Voice, WhatsApp)","description":"# fcp.twilio - Communication Infrastructure Connector\n\n## Overview\n\nProduction-grade Twilio integration enabling AI agents to send/receive SMS, make/receive voice calls, integrate WhatsApp Business, and build communication workflows. This is **infrastructure** for building agent-powered communication systems, not just a messaging connector.\n\n## Strategic Importance\n\n**Value Score: 89/100** (from prioritized connector analysis)\n\n### Why This Matters\n- **Communication infrastructure** (not personal messaging)\n- **B2B/transactional use cases** at scale\n- **Phone numbers as identity** (not personal accounts)\n- Enables **voice bots, SMS notifications, WhatsApp automation**\n- **Higher volume, lower friction** than personal messaging connectors\n\n### Flywheel Ecosystem Synergy\n- **Agent Mail**: SMS/WhatsApp as agent communication channel\n- **NTM**: Voice IVR triggering agent workflows\n- **Beads**: Status updates via SMS\n- **ApprovalTokens**: Human approval via SMS/voice (out-of-band issuance of ApprovalToken objects)\n- **Alerts**: Critical notifications via SMS\n\n## Manifest archetypes (closed set)\n\n- `bidirectional`\n- `operational`\n- `streaming`\n\n\u003e Interaction patterns (non-archetype): Request/Response + Webhook + Streaming\n\n| Pattern | Use Case |\n|---------|----------|\n| Request-Response | Send messages, initiate calls |\n| Webhook | Incoming SMS, call events, delivery status |\n| Streaming | Voice call audio, real-time transcription |\n\n## Key Operations\n\n### SMS Operations\n- `twilio.sms.send` - Send SMS message\n- `twilio.sms.send_bulk` - Send to multiple recipients\n- `twilio.sms.schedule` - Schedule SMS for later\n- `twilio.sms.cancel` - Cancel scheduled message\n- `twilio.sms.get` - Get message details\n- `twilio.sms.list` - List sent/received messages\n- `twilio.sms.media` - Get MMS media attachments\n\n### Voice Operations\n- `twilio.voice.call` - Initiate outbound call\n- `twilio.voice.call_status` - Get call status\n- `twilio.voice.hangup` - End active call\n- `twilio.voice.hold` - Place call on hold\n- `twilio.voice.transfer` - Transfer call\n- `twilio.voice.conference.create` - Create conference call\n- `twilio.voice.conference.participants` - Manage participants\n- `twilio.voice.recording.get` - Get call recording\n- `twilio.voice.recording.list` - List recordings\n- `twilio.voice.transcription` - Get transcription\n\n### TwiML (Voice Scripts)\n- `twilio.twiml.say` - Text-to-speech\n- `twilio.twiml.play` - Play audio file\n- `twilio.twiml.gather` - Collect DTMF/speech input\n- `twilio.twiml.record` - Record caller\n- `twilio.twiml.dial` - Connect to number/SIP/client\n- `twilio.twiml.enqueue` - Add to call queue\n- `twilio.twiml.redirect` - Redirect call flow\n\n### WhatsApp Business API\n- `twilio.whatsapp.send` - Send WhatsApp message\n- `twilio.whatsapp.template` - Send template message\n- `twilio.whatsapp.media` - Send image/document/audio\n- `twilio.whatsapp.location` - Send location\n- `twilio.whatsapp.buttons` - Interactive buttons\n- `twilio.whatsapp.list` - Interactive list messages\n- `twilio.whatsapp.status` - Message delivery status\n\n### Verify (2FA)\n- `twilio.verify.send` - Send verification code\n- `twilio.verify.check` - Verify code\n- `twilio.verify.cancel` - Cancel verification\n- `twilio.verify.channels` - Configure channels (SMS, call, email, TOTP)\n\n### Conversations API (Unified Messaging)\n- `twilio.conversations.create` - Create conversation\n- `twilio.conversations.participants.add` - Add participant\n- `twilio.conversations.message.send` - Send in conversation\n- `twilio.conversations.list` - List conversations\n- `twilio.conversations.webhook` - Configure webhooks\n\n### Phone Numbers\n- `twilio.numbers.list` - List owned numbers\n- `twilio.numbers.purchase` - Purchase number\n- `twilio.numbers.configure` - Configure number (webhooks)\n- `twilio.numbers.release` - Release number\n- `twilio.numbers.search` - Search available numbers\n\n### Programmable Video (Future)\n- `twilio.video.room.create` - Create video room\n- `twilio.video.room.end` - End room\n- `twilio.video.recording` - Manage recordings\n\n### Webhook Handlers\n- `twilio.webhook.sms.incoming` - Handle incoming SMS\n- `twilio.webhook.voice.incoming` - Handle incoming call\n- `twilio.webhook.status.update` - Delivery/call status\n- `twilio.webhook.whatsapp.incoming` - Incoming WhatsApp\n\n## Voice Bot Architecture\n\n### TwiML-Based IVR\n```xml\n\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003cResponse\u003e\n    \u003cGather input=\"speech dtmf\" timeout=\"3\" action=\"/handle-input\"\u003e\n        \u003cSay\u003eWelcome to Flywheel Support. \n             Press 1 for sales, 2 for support, \n             or describe your issue.\u003c/Say\u003e\n    \u003c/Gather\u003e\n    \u003cRedirect\u003e/no-input\u003c/Redirect\u003e\n\u003c/Response\u003e\n```\n\n### Agent-Powered Voice Flow\n1. Incoming call triggers webhook\n2. FCP connector handles via TwiML\n3. Speech-to-text (Twilio or Whisper)\n4. Agent processes intent\n5. Agent generates response\n6. Text-to-speech plays response\n7. Loop until resolution\n\n### Real-Time Transcription\n- Stream audio to Whisper connector\n- Real-time agent processing\n- Dynamic TwiML generation\n\n## Zone Architecture\n\n\u003c!-- fcp2-single-zone-note --\u003e\n**FCP2 single-zone binding note:** A connector instance binds to exactly one `ZoneId` for its entire lifetime.\nThe *\"zones\"* described in this section are a **recommended deployment pattern** (run separate connector instances in separate zones with different capability grants/policies) and/or conceptual risk tiers.\nThe connector MUST NOT multiplex multiple zones internally.\n\n\n```\nZone 0 (Public):     Number lookup, pricing info\nZone 1 (Authorized): Send messages to authorized recipients\nZone 2 (Private):    Message content, call recordings\nZone 3 (Sensitive):  Account SID, Auth Token, API keys\n```\n\n### Capability Mapping\n| Capability | Zone | Risk Level | Description |\n|------------|------|------------|-------------|\n| `twilio.sms.send` | 1 | Medium | Send SMS messages |\n| `twilio.sms.read` | 2 | Medium | Read message content |\n| `twilio.voice.call` | 1 | High | Initiate voice calls |\n| `twilio.voice.record` | 2 | High | Access recordings |\n| `twilio.numbers.purchase` | 3 | Critical | Purchase numbers |\n| `twilio.account.read` | 3 | High | Account info |\n\n## Dependencies\n\n### Required FCP Crates\n- `fcp-core`: Base connector traits, zone management\n- `fcp-webhook`: Webhook endpoint handling\n- `fcp-streaming`: Real-time audio streaming\n- `fcp-ratelimit`: Rate limit management\n- `fcp-telemetry`: Metrics and tracing\n\n### Optional Integration\n- `fcp.whisper`: Enhanced transcription\n- `fcp.anthropic`/`fcp.openai`: Voice bot AI\n\n## Implementation Notes\n\n### Authentication\n- Account SID + Auth Token (Basic Auth)\n- API Key + API Secret (for sub-accounts)\n- Webhook request signature validation\n\n### Request Signing\n```rust\n// Validate incoming webhooks\nfn validate_twilio_signature(\n    url: \u0026str,\n    params: \u0026HashMap\u003cString, String\u003e,\n    signature: \u0026str,\n    auth_token: \u0026str,\n) -\u003e bool {\n    // X-Twilio-Signature validation\n}\n```\n\n### Rate Limits\n- 1 message/second per phone number (SMS)\n- Can be increased with toll-free/short codes\n- Respect 429 responses\n\n### Idempotency\n- Use `IdempotencyKey` for critical sends\n- Track message SIDs for deduplication\n\n### Cost Tracking\n- Track per-message/call costs\n- Budget alerting integration\n- Usage analytics\n\n## Error Handling\n\n| Code | Meaning | Recovery |\n|------|---------|----------|\n| 20003 | Permission denied | Check account permissions |\n| 21211 | Invalid phone number | Validate number format |\n| 21608 | Unverified destination | Add to verified numbers (trial) |\n| 30003 | Unreachable | Number invalid or blocked |\n| 30006 | Landline unreachable | Cannot SMS landlines |\n\n## Security Considerations\n\n- **Webhook validation**: Always validate X-Twilio-Signature\n- **Phone number privacy**: Proxy numbers for user privacy\n- **Recording consent**: Handle recording consent legally\n- **Opt-out handling**: Process STOP/unsubscribe\n\n## Testing Strategy\n\n- Use Twilio test credentials\n- Mock webhook callbacks\n- Test TwiML generation\n- Test signature validation\n- Test voice flow with recorded scenarios\n\n## Success Criteria\n- The epic includes (or references) the standard base beads `.1`..`.4` per `flywheel_connectors-lszk.5`.\n- The connector passes `flywheel_connectors-1n78.21.5` (static + dynamic) and has an E2E compliance run wired through `flywheel_connectors-e3i9`.\n- Unit/integration tests are mock-only (no real external calls) and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-11T21:39:29.955038553-05:00","created_by":"ubuntu","updated_at":"2026-01-15T07:39:56.971933859-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-otqy","depends_on_id":"flywheel_connectors-vi7","type":"blocks","created_at":"2026-01-11T22:07:53.455935899-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-otqy","depends_on_id":"flywheel_connectors-9co","type":"blocks","created_at":"2026-01-11T22:07:53.482983088-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-otqy","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T22:07:53.508200521-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-otqy","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T22:07:53.533032158-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-otqy","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:28:52.489300883-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-otqy","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T04:18:38.251433253-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-otqy","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T04:18:38.427097975-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-otqy","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T04:18:38.595363589-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-otqy","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T04:18:38.773568006-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-otqy","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T04:18:38.957962933-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-otqy","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T04:18:39.130890509-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-otqy.1","title":"fcp.twilio: Manifest + Capability Map (FCP2)","description":"# fcp.twilio: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the Twilio connector’s **mechanical manifest contract** so it can be sandboxed, authorized, and tested deterministically under FCP2.\n\n## Required contents\n- Manifest archetypes (closed set):\n  - `operational` (send messages / create calls / manage resources)\n  - `streaming` (webhook/event ingestion; optional media streaming)\n  - `bidirectional` (two-way messaging/voice flows)\n- Operation list + schema IDs.\n- Capability families + per-operation required caps.\n- NetworkConstraints:\n  - allow Twilio API host(s) and webhook signature validation surface\n  - explicitly enumerate/pin any media/recording download hosts\n  - HTTPS-only; deny redirects by default\n- State model declaration:\n  - webhook subscription state (if any)\n  - message/event idempotency keys (if persisted)\n\n## Output artifacts\n- Complete manifest spec stored in this bead.\n- Good/bad manifest examples for static compliance (especially NetworkConstraints + dangerous ops).\n\n## Acceptance criteria\n- Another engineer can implement `--manifest` from this bead alone.\n- Static compliance can reject:\n  - capability IDs that embed hostnames/ports\n  - overly-broad NetworkConstraints\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:17:53.460266427-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:17:53.460266427-05:00","dependencies":[{"issue_id":"flywheel_connectors-otqy.1","depends_on_id":"flywheel_connectors-otqy","type":"parent-child","created_at":"2026-01-15T04:17:53.46198778-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-otqy.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T04:17:57.999862391-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-otqy.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T04:17:58.170970179-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-otqy.2","title":"fcp.twilio: Provisioning Automation (auth, webhooks, numbers)","description":"# fcp.twilio: Provisioning Automation (auth, webhooks, numbers)\n\n## Goal\nAutomate Twilio onboarding with **minimal human steps** while keeping all secrets zone-scoped and never written to disk.\n\n## Requirements\n- Supported auth strategies (policy-owned):\n  - Account SID + Auth Token (`CredentialId`)\n  - API Key + API Secret (`CredentialId`)\n  - Subaccount support (optional)\n- Webhook setup automation:\n  - configure inbound SMS webhook endpoints\n  - configure voice webhook endpoints (TwiML / status callbacks)\n  - validate webhook signature verification configuration\n- Number configuration automation:\n  - list owned numbers\n  - configure number webhook URLs\n  - purchasing numbers is **dangerous** and must be explicitly capability + approval gated\n\n## Safety rules\n- Validate credentials using safe read-only calls.\n- Validate NetworkConstraints pinning before declaring connector “ready”.\n- Never log or echo secrets.\n\n## Acceptance criteria\n- `fcp doctor` can verify readiness (auth + webhook reachability) without leaking secrets.\n- Fully mockable for unit tests (no real Twilio calls in CI).\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:18:06.24113709-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:56.347631367-05:00","dependencies":[{"issue_id":"flywheel_connectors-otqy.2","depends_on_id":"flywheel_connectors-otqy","type":"parent-child","created_at":"2026-01-15T04:18:06.24259657-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-otqy.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T04:18:09.49604615-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-otqy.3","title":"TEST: Twilio Connector Unit/Integration Tests (mock-only)","description":"# TEST: Twilio Connector Unit/Integration Tests (mock-only)\n\n## Goal\nProvide comprehensive mock-only tests for Twilio connector behavior, with structured JSON logs suitable for debugging and compliance evidence.\n\n## Requirements\n- No real external API calls in unit/integration tests.\n- Use mock HTTP servers for Twilio REST API + webhook callbacks.\n- Test coverage must include:\n  - auth header formation (multiple auth modes)\n  - request/response parsing\n  - idempotency behavior for sends\n  - webhook signature validation\n  - rate limit handling + retry/backoff\n  - dangerous operations require ApprovalToken (purchase numbers, delete recordings, etc.)\n\n## Acceptance criteria\n- Tests are deterministic and run in CI.\n- Logs include correlation_id and stable reason codes for denial paths.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:18:15.746878584-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:18:15.746878584-05:00","dependencies":[{"issue_id":"flywheel_connectors-otqy.3","depends_on_id":"flywheel_connectors-otqy","type":"parent-child","created_at":"2026-01-15T04:18:15.7481876-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-otqy.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T04:18:20.94098591-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-otqy.4","title":"E2E: Twilio Connector Compliance Run","description":"# E2E: Twilio Connector Compliance Run\n\n## Goal\nRun the shared Mechanical Connector Compliance Runner against fcp.twilio and capture evidence artifacts.\n\n## What this must verify\n- Default deny: all operations require explicit CapabilityTokens.\n- NetworkConstraints enforcement (deny unexpected egress).\n- Receipts + audit events produced for all writes/dangerous ops.\n- Structured logs:\n  - JSON\n  - correlation IDs\n  - reason codes\n\n## Evidence artifacts\n- Runner output bundle (logs + decision receipts + manifest validation report).\n- A minimal “happy path” scenario set:\n  - send SMS (mock)\n  - receive webhook (mock)\n  - denied send without capability\n  - denied dangerous op without approval\n\n## Acceptance criteria\n- Compliance runner is green for fcp.twilio.\n- Failures are explainable and actionable from logs alone.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:18:27.261387232-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:18:27.261387232-05:00","dependencies":[{"issue_id":"flywheel_connectors-otqy.4","depends_on_id":"flywheel_connectors-otqy","type":"parent-child","created_at":"2026-01-15T04:18:27.262716777-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-otqy.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T04:18:30.949197905-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-oy5","title":"fcp.sentry: Alert rule configuration and management","description":"# fcp.sentry: Alert rule configuration and management (FCP2)\n\n## Goal\nProvide controlled access to Sentry alert rule configuration so agents can help maintain:\n- issue alerts\n- performance alerts\n- notification routing\n\nThis is **dangerous** (high blast radius). Must be approval-gated by policy.\n\n## Scope\n### Read\n- List alert rules (project/org scope where available).\n- Get rule definition + current enabled/disabled state.\n\n### Write (dangerous)\n- Create/update/delete alert rules.\n- Enable/disable rule.\n\n## Capability model (illustrative)\n- `sentry.alerts.read`\n- `sentry.alerts.write` (dangerous; requires approval)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- For any write:\n  - require ApprovalToken when policy dictates (recommended default)\n  - emit OperationReceipt + AuditEvent with:\n    - rule id\n    - structural hash of rule definition\n    - correlation id\n\n## Deliverables\n- Operation schemas:\n  - `sentry.alert.list`\n  - `sentry.alert.get`\n  - `sentry.alert.create`\n  - `sentry.alert.update`\n  - `sentry.alert.enable`\n  - `sentry.alert.disable`\n  - `sentry.alert.delete`\n- Safe rule templates:\n  - avoid arbitrary code/script injection\n  - prefer constrained rule DSL + parameterization\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - CRUD flows\n  - validation failures\n  - approval gating\n  - audit/receipt emission\n\n## Acceptance criteria\n- Alert rule changes are mechanically gated, auditable, and reversible.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:15:16.257803897-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:30:02.052611047-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-oy5","depends_on_id":"flywheel_connectors-lszk.3","type":"parent-child","created_at":"2026-01-15T02:30:42.183745266-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-oy5","depends_on_id":"flywheel_connectors-lszk.3.1","type":"blocks","created_at":"2026-01-15T04:30:05.896812869-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-oz1v","title":"TEST: Rate Limiting Unit Tests (ThrottleViolation, Backpressure, Quota Enforcement)","description":"# TEST: Rate Limiting Unit Tests\n\n## Scope\nComprehensive tests for rate limiting and quota enforcement.\n\n## Test Categories\n\n### ThrottleViolation Detection\n- [ ] Requests exceeding rate produce ThrottleViolation\n- [ ] Violation includes retry_after_ms\n- [ ] Violation includes quota details\n- [ ] Violation is logged to audit\n\n### Backpressure Signals\n- [ ] Backpressure signal sent when approaching limit\n- [ ] Client respects backpressure hint\n- [ ] Gradual backoff before hard rejection\n- [ ] Backpressure clears when load drops\n\n### Quota Enforcement\n- [ ] Per-connector quotas enforced\n- [ ] Per-zone quotas enforced\n- [ ] Per-operation quotas enforced\n- [ ] Quota reset on time window\n- [ ] Quota pooling across operations\n\n### Burst Handling\n- [ ] Token bucket allows bursts\n- [ ] Burst capacity is configurable\n- [ ] Burst doesn't exceed hard limits\n- [ ] Burst refill rate is correct\n\n### Distributed Rate Limiting\n- [ ] Quotas shared across mesh nodes\n- [ ] Quota sync is eventually consistent\n- [ ] No double-spending on quota\n- [ ] Partition handling for quotas\n\n## Golden Vectors\nLocation: `tests/vectors/rate_limiting/`\n- `throttle_violation.cbor`\n- `backpressure_signal.cbor`\n- `quota_state.cbor`\n\n## Logging Requirements\n```json\n{\n  \"timestamp\": \"RFC3339\",\n  \"test_name\": \"test_quota_enforcement\",\n  \"phase\": \"execute\",\n  \"correlation_id\": \"uuid\",\n  \"connector_id\": \"...\",\n  \"quota_used\": 95,\n  \"quota_limit\": 100,\n  \"throttled\": false,\n  \"result\": \"pass\"\n}\n```\n\n## Acceptance Criteria\n- Rate limits are enforced correctly\n- Quotas prevent resource exhaustion\n- Audit trail for all throttle events\n\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:26:20.63587984-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:26:20.63587984-05:00","labels":["fcp2","mvp","rate-limiting","security","testing"],"dependencies":[{"issue_id":"flywheel_connectors-oz1v","depends_on_id":"flywheel_connectors-gqvh","type":"blocks","created_at":"2026-01-15T03:26:29.255972911-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-oz1v","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:26:29.345008859-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-pdgc","title":"TEST: fcp-config Unit Test Suite","description":"# TEST: fcp-config Unit Test Suite\n\n## Scope\nComprehensive unit tests for configuration validation and schema framework.\n\n## Test Categories\n\n### Schema Validation\n- [ ] JSON Schema validation\n- [ ] Required field enforcement\n- [ ] Type validation\n- [ ] Format validation (URL, email, etc.)\n- [ ] Custom validators\n\n### Configuration Loading\n- [ ] TOML parsing\n- [ ] JSON parsing\n- [ ] Environment variable expansion\n- [ ] File path resolution\n- [ ] Default value handling\n\n### Secret Reference Resolution\n- [ ] Secret placeholder parsing\n- [ ] Vault integration mocking\n- [ ] Environment variable secrets\n- [ ] File-based secrets\n\n### Validation Errors\n- [ ] Clear error messages\n- [ ] Path to invalid field\n- [ ] Suggested fixes\n- [ ] Multiple error collection\n\n### Configuration Merging\n- [ ] Override precedence\n- [ ] Deep merge behavior\n- [ ] Array handling\n\n## Coverage Target: \u003e95%","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-11T12:12:48.109383666-05:00","created_by":"ubuntu","updated_at":"2026-01-15T03:22:34.771665015-05:00","closed_at":"2026-01-15T03:22:34.771665015-05:00","close_reason":"Superseded - parent bead fcp-config is closed. Config testing is now part of manifest testing (1n78.27.1).","dependencies":[{"issue_id":"flywheel_connectors-pdgc","depends_on_id":"flywheel_connectors-5y7","type":"blocks","created_at":"2026-01-11T12:21:14.606767351-05:00","created_by":"ubuntu"}]}
{"id":"flywheel_connectors-ptr","title":"fcp.anthropic - Anthropic AI Provider Connector","description":"# FCP Anthropic Connector - Anthropic AI Provider (LEGACY / SUPERSEDED)\n\n\u003e NOTE (2026-01-15): This bead predates the current **FCP2 connector model** and is kept only for historical context of an earlier prototype.\n\u003e \n\u003e The active, FCP2-compliant Anthropic plan is: `flywheel_connectors-lszk.4` (and its child beads). Use that as the source of truth.\n\n## Overview\nA comprehensive connector for Anthropic's Claude API, enabling agents to leverage Claude models for complex reasoning, tool use, vision capabilities, and batch processing with built-in usage tracking and budget enforcement.\n\n## Priority: P1 (Critical Infrastructure)\n\n## Core Capabilities\n\n### 1. Messages API\n- Send messages to Claude models\n- Streaming responses for real-time output\n- Multi-turn conversations\n- System prompts\n- Model selection (claude-opus-4-5-20251101, claude-sonnet-4-20250514, claude-haiku, etc.)\n- Temperature and sampling controls\n- Max tokens configuration\n- Stop sequences\n\n### 2. Tool Use Support\n- Define tools with JSON schema\n- Handle tool_use responses\n- Execute tools and return results\n- Multi-tool conversations\n- Parallel tool execution\n- Tool choice forcing (auto, any, specific)\n\n### 3. Vision Capabilities\n- Images in prompts (base64 or URL)\n- Multiple images per message\n- Image analysis and description\n- Document/screenshot understanding\n- Chart and diagram interpretation\n\n### 4. Prompt Caching\n- Cache system prompts\n- Cache large context documents\n- Cache tool definitions\n- Automatic cache management\n- Cache hit/miss tracking\n- Usage/cost savings can be computed from tracked usage deltas\n\n### 5. Batch API\n- Submit batch requests\n- Track batch status\n- Retrieve batch results\n- Cancel batches\n- Batch pricing can change; treat billing as provider- or policy-owned (do not hardcode discounts)\n\n### 6. Usage Tracking \u0026 Budget Enforcement\n- Per-request usage calculation (tokens, images, audio seconds, etc.)\n- Running total tracking\n- Budget limits per agent/session/day\n- Alerts at thresholds\n- Automatic cutoff at budget limit\n- Usage attribution and reporting\n\n## FCP Integration\n\n### Manifest Structure\n```toml\n[connector]\nname = \"fcp.anthropic\"\nversion = \"0.1.0\"\ndescription = \"Anthropic Claude API integration with usage tracking\"\n\n[capabilities]\nmessages = { risk = \"medium\", description = \"Send messages to Claude\" }\nstreaming = { risk = \"medium\", description = \"Stream responses\" }\ntool_use = { risk = \"medium\", description = \"Use tools in conversations\" }\nvision = { risk = \"medium\", description = \"Process images\" }\nbatch = { risk = \"low\", description = \"Submit batch requests\" }\n\n[trust_zones]\ndefault = \"z:ai:inference\"\n\n[resources]\nrate_limit_rpm = 1000\nrate_limit_tpm = 100000\ndefault_timeout_ms = 120000\n\n[billing]\ntrack_costs = true\nbudget_enforcement = true\n```\n\n### Tool Definitions\n```yaml\ntools:\n  - name: anthropic_message\n    description: Send a message to Claude\n    parameters:\n      model:\n        type: string\n        enum: [claude-opus-4-5-20251101, claude-sonnet-4-20250514, claude-3-5-haiku-20241022]\n        required: true\n      messages:\n        type: array\n        items:\n          type: object\n          properties:\n            role: { type: string, enum: [user, assistant] }\n            content: { type: string }\n        required: true\n      system: { type: string }\n      max_tokens: { type: integer, default: 4096 }\n      temperature: { type: number, default: 1.0, min: 0, max: 1 }\n      stream: { type: boolean, default: false }\n\n  - name: anthropic_message_with_tools\n    description: Send a message with tool definitions\n    parameters:\n      model: { type: string, required: true }\n      messages: { type: array, required: true }\n      tools:\n        type: array\n        items:\n          type: object\n          properties:\n            name: { type: string }\n            description: { type: string }\n            input_schema: { type: object }\n      tool_choice:\n        type: object\n        properties:\n          type: { type: string, enum: [auto, any, tool] }\n          name: { type: string }\n\n  - name: anthropic_message_with_vision\n    description: Send a message with images\n    parameters:\n      model: { type: string, required: true }\n      messages:\n        type: array\n        items:\n          type: object\n          properties:\n            role: { type: string }\n            content:\n              type: array\n              items:\n                oneOf:\n                  - type: object\n                    properties:\n                      type: { const: text }\n                      text: { type: string }\n                  - type: object\n                    properties:\n                      type: { const: image }\n                      source:\n                        type: object\n                        properties:\n                          type: { enum: [base64, url] }\n                          media_type: { type: string }\n                          data: { type: string }\n\n  - name: anthropic_batch_create\n    description: Create a batch request\n    parameters:\n      requests:\n        type: array\n        items:\n          type: object\n          properties:\n            custom_id: { type: string }\n            params: { type: object }\n        required: true\n\n  - name: anthropic_batch_status\n    description: Get batch status\n    parameters:\n      batch_id: { type: string, required: true }\n\n  - name: anthropic_batch_results\n    description: Get batch results\n    parameters:\n      batch_id: { type: string, required: true }\n\n  - name: anthropic_get_usage\n    description: Get current usage metrics (currency cost is policy/ops-owned)\n    parameters:\n      period: { type: string, enum: [session, day, month] }\n```\n\n## Usage / Cost Tracking (NO hard-coded pricing)\n\n### Why we do NOT embed pricing tables\nProvider pricing changes frequently. Hard-coding a “pricing model” table in a connector/spec becomes incorrect quickly.\n\n### What we track instead (stable)\n- provider-reported usage fields (when present)\n- token counts (input/output/cache)\n- image counts/size classes\n- audio seconds\n\n### Budget enforcement\nBudgets can be enforced in two stable ways:\n1. **Usage budgets** (preferred): token/image/second limits per request/session/day.\n2. **Currency budgets** (optional): computed by an external, versioned “pricing catalog” object owned by policy/ops (not embedded in the connector).\n\n### Attribution\n- Track usage per agent\n- Track usage per task/session\n- Track usage per operation/tool\n- Generate reports\n\n## Prompt Caching Strategy\n- System prompts \u003e 1024 tokens: Always cache\n- Tool definitions: Cache when \u003e 5 tools\n- Large documents: Cache with TTL\n- Cache warming on connector init\n\n## Error Handling\n- Rate limit (429): Exponential backoff\n- Overloaded (529): Queue and retry\n- Invalid request (400): Parse and report\n- Auth failure (401): Refresh credentials\n- Context length exceeded: Truncation strategy\n\n## Dependencies\n- anthropic-rs or custom HTTP client\n- reqwest (HTTP)\n- tokio (async)\n- serde (serialization)\n- async-stream (streaming)\n\n## Acceptance Criteria\n- [ ] Send basic message and receive response\n- [ ] Stream response tokens in real-time\n- [ ] Use tools in conversation\n- [ ] Process images in prompts\n- [ ] Submit and retrieve batch jobs\n- [ ] Track usage accurately per request\n- [ ] Enforce budget limits\n- [ ] Handle rate limits gracefully\n- [ ] Utilize prompt caching\n","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-11T10:11:55.294212353-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:55:46.932938692-05:00","closed_at":"2026-01-11T10:42:07.614456761-05:00","close_reason":"Implemented Anthropic Claude API connector with Messages API, streaming support, cost tracking, and unit tests","dependencies":[{"issue_id":"flywheel_connectors-ptr","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T10:43:18.580791794-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-ptr","depends_on_id":"flywheel_connectors-iv7","type":"blocks","created_at":"2026-01-11T10:43:18.616615002-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-ptr","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T10:43:18.65424983-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-ptr","depends_on_id":"flywheel_connectors-9co","type":"blocks","created_at":"2026-01-11T10:43:18.687755696-05:00","created_by":"ubuntu"}]}
{"id":"flywheel_connectors-pvjd","title":"TEST: Automation Recipes Unit/Integration Tests (OAuth, Webhooks, Provisioning)","description":"# TEST: Automation Recipes Unit/Integration Tests\n\n## Goal\nVerify that connectors can be provisioned automatically without manual copy-paste steps.\n\n## Test Categories\n\n### 1. Provisioning Interface Tests\n- Recipe object schema validation\n- Required setup steps declaration\n- Host-mediated setup flow execution\n- Approval flow for privileged setup\n\n### 2. OAuth Flow Tests (Mock Server)\n- Redirect URL registration\n- Authorization code exchange\n- Token refresh flow\n- Token revocation handling\n- Secrets never touch disk\n- Zeroize on completion\n\n### 3. Webhook Flow Tests (Mock Server)\n- Endpoint verification (challenge-response)\n- Webhook registration\n- Event routing to connector\n- Webhook secret rotation\n\n### 4. Polling Schedule Tests\n- Cursor initialization\n- Schedule configuration\n- Backoff on rate limits\n- Cursor persistence as mesh objects\n\n### 5. Audit Integration Tests\n- Privileged setup produces audit events\n- Audit events contain correct evidence\n- Approval flow audit trail\n\n## Logging Requirements\n- Structured JSON with recipe_id, step_name\n- Secrets NEVER logged (verify with grep)\n- Timing for each setup step\n- Error details with recovery paths\n\n## E2E Tests\n- Full OAuth flow with mock provider\n- Full webhook registration with mock server\n- Recipe configures connector without manual steps\n\n## Acceptance Criteria\n- Mock servers are deterministic\n- No real external API calls\n- Secrets handled in memory only\n- Audit trail is complete","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:50:32.916112593-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:50:32.916112593-05:00","labels":["automation","fcp2","mvp","testing"],"dependencies":[{"issue_id":"flywheel_connectors-pvjd","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T03:50:44.445477195-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-pvjd","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:50:44.620192156-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-pwff","title":"fcp.zendesk - Zendesk Support Connector","description":"# fcp.zendesk - Zendesk Support Connector\n\n## Overview\n\nCustomer support platform connector enabling AI-powered ticket management, automated response suggestions, and support workflow optimization. Integrates Zendesk's ticketing system with Flywheel's cognitive capabilities for intelligent support operations.\n\n## Classification\n\n- **Value Score**: 75/100 (Tier 3 - Specialized vertical connector)\n- **Priority**: P2\n- **Interaction patterns**: Request/Response + Webhook\n  - Request-Response: Ticket CRUD, customer lookup, KB queries\n  - Webhook: Real-time ticket events, SLA alerts, satisfaction updates\n- **Domain**: Customer Support / Service Management\n\n## Manifest archetypes (closed set)\n- `operational`\n- `streaming`\n\n\u003e Note: “webhook” and “request/response” are interaction patterns, not manifest archetype values.\n\n\n## Core Operations\n\n### Ticket Management\n- **ticket.create**: Create new support tickets with metadata\n- **ticket.read**: Retrieve ticket details, history, and attachments\n- **ticket.update**: Modify ticket status, priority, assignee, tags\n- **ticket.delete**: Soft-delete/archive resolved tickets\n- **ticket.list**: Query tickets with filters (status, priority, date range)\n- **ticket.merge**: Combine duplicate tickets into single thread\n- **ticket.split**: Separate multi-issue tickets into distinct items\n\n### Customer Operations\n- **customer.lookup**: Find customer by email, phone, or external ID\n- **customer.profile**: Retrieve full customer context and history\n- **customer.tickets**: List all tickets for a customer\n- **customer.satisfaction**: Get/update CSAT scores and feedback\n\n### Knowledge Base\n- **kb.search**: Semantic search across help articles\n- **kb.article.get**: Retrieve specific article content\n- **kb.suggest**: AI-powered article recommendations for tickets\n- **kb.create**: Draft new KB articles from resolved tickets\n\n### Automation Assets\n- **macro.list**: Retrieve available canned responses\n- **macro.apply**: Apply macro to ticket with variable substitution\n- **macro.suggest**: AI-recommended macros based on ticket content\n- **trigger.list**: Get configured automation triggers\n- **trigger.create**: Set up new automation rules\n\n### SLA \u0026 Analytics\n- **sla.status**: Check SLA compliance for ticket/queue\n- **sla.breach.predict**: Forecast potential SLA violations\n- **analytics.queue**: Queue depth and wait time metrics\n- **analytics.agent**: Agent performance and workload stats\n- **analytics.trends**: Ticket volume and category trends\n\n## Support Automation Capabilities\n\n### Intelligent Ticket Processing\n\n```\nWebhook Event --\u003e Parse --\u003e Classify --\u003e Route --\u003e Enrich\n                    |          |          |          |\n                    v          v          v          v\n                Extract    Category    Queue      Context\n                entities   + Priority  assignment + KB\n```\n\n### Auto-Categorization\n- NLP-based ticket classification (billing, technical, general)\n- Priority inference from urgency signals and customer tier\n- Sentiment analysis for escalation triggers\n- Language detection for routing to appropriate teams\n\n### Response Suggestion\n- KB article matching with confidence scores\n- Similar resolved ticket pattern matching\n- Macro recommendation based on ticket type\n- Draft response generation with agent approval workflow\n\n### Escalation Intelligence\n- Complexity scoring (multi-issue, technical depth, emotion)\n- VIP customer auto-escalation rules\n- Repeated contact detection and flagging\n- Manager notification for critical issues\n\n### Ticket Summarization\n- Thread condensation for long conversations\n- Key issue extraction and timeline\n- Resolution summary generation\n- Handoff notes for agent transitions\n\n### Proactive Outreach\n- Known issue broadcast to affected customers\n- Status update automation for pending tickets\n- Follow-up scheduling for resolved issues\n- Churn risk detection and intervention triggers\n\n## Zone Architecture\n\n\u003c!-- fcp2-single-zone-note --\u003e\n**FCP2 single-zone binding note:** A connector instance binds to exactly one `ZoneId` for its entire lifetime.\nThe *\"zones\"* described in this section are a **recommended deployment pattern** (run separate connector instances in separate zones with different capability grants/policies) and/or conceptual risk tiers.\nThe connector MUST NOT multiplex multiple zones internally.\n\n\n```\nz:support\n├── z:support:read      # View tickets, customers, KB\n│   ├── Can: List tickets, read content, search KB\n│   ├── Cannot: Reply, modify, access internal notes\n│   └── Use: Dashboards, reporting, monitoring\n│\n├── z:support:respond   # Agent-level access\n│   ├── Can: All read + reply, add notes, apply macros\n│   ├── Cannot: Delete tickets, modify SLA, admin settings\n│   └── Use: Frontline support agents, AI response drafts\n│\n└── z:support:admin     # Full administrative access\n    ├── Can: All operations including delete, config, analytics\n    ├── Cannot: N/A (full access within connector scope)\n    └── Use: Support managers, system integrations\n```\n\n### Zone Escalation Patterns\n- AI suggestions generated at z:support:read\n- Agent approval/send requires z:support:respond\n- Bulk operations and automation rules need z:support:admin\n\n## Flywheel Synergy\n\n### CASS Integration (Conversation Archive \u0026 Semantic Search)\n```rust\n// Index support conversations for pattern learning\ncass.index(ConversationSource::Zendesk {\n    ticket_id,\n    thread: ticket.conversation,\n    metadata: SupportMetadata {\n        category: ticket.category,\n        resolution: ticket.resolution_type,\n        satisfaction: ticket.csat_score,\n        response_time: ticket.first_response_time,\n    }\n});\n\n// Search similar past tickets\nlet similar = cass.search(SimilarityQuery {\n    content: new_ticket.description,\n    filters: vec\\![\n        Filter::Category(new_ticket.predicted_category),\n        Filter::Resolved(true),\n        Filter::SatisfactionMin(4),\n    ],\n    limit: 5,\n});\n```\n\n### CM Integration (Cognitive Memory)\n- Learn successful resolution patterns per category\n- Track customer preferences and communication style\n- Remember agent expertise areas for smart routing\n- Store effective response templates with performance data\n\n### Beads Integration\n- Create knowledge beads from resolved complex tickets\n- Extract FAQ candidates from repeated questions\n- Generate runbook beads from incident resolutions\n- Link customer context beads to support interactions\n\n## Technical Implementation\n\n### API Integration\n```rust\nuse fcp_core::{Connector, Operation, Result};\nuse fcp_oauth::OAuth2Client;\nuse fcp_webhook::WebhookHandler;\nuse fcp_ratelimit::RateLimiter;\n\npub struct ZendeskConnector {\n    oauth: OAuth2Client,\n    rate_limiter: RateLimiter,\n    webhook_handler: WebhookHandler,\n    subdomain: String,\n}\n\nimpl ZendeskConnector {\n    /// Base URL: https://{subdomain}.zendesk.com/api/v2\n    const API_VERSION: \u0026'static str = \"v2\";\n    \n    pub async fn new(config: ZendeskConfig) -\u003e Result\u003cSelf\u003e {\n        let oauth = OAuth2Client::new(OAuthConfig {\n            auth_url: format\\!(\n                \"https://{}.zendesk.com/oauth/authorizations/new\",\n                config.subdomain\n            ),\n            token_url: format\\!(\n                \"https://{}.zendesk.com/oauth/tokens\",\n                config.subdomain\n            ),\n            scopes: vec\\![\"tickets:read\", \"tickets:write\", \"users:read\"],\n            ..config.oauth\n        })?;\n        \n        let rate_limiter = RateLimiter::new(RateLimitConfig {\n            // Zendesk rate limits vary by plan\n            requests_per_minute: config.plan.rate_limit(), // 200-700 rpm\n            burst_allowance: 10,\n            retry_strategy: RetryStrategy::ExponentialBackoff {\n                initial: Duration::from_secs(1),\n                max: Duration::from_secs(60),\n            },\n        });\n        \n        Ok(Self {\n            oauth,\n            rate_limiter,\n            webhook_handler,\n            subdomain: config.subdomain,\n        })\n    }\n}\n```\n\n### Webhook Configuration\n```rust\nimpl WebhookHandler for ZendeskConnector {\n    fn event_types() -\u003e Vec\u003cEventType\u003e {\n        vec\\![\n            EventType::TicketCreated,\n            EventType::TicketUpdated,\n            EventType::TicketCommentAdded,\n            EventType::SatisfactionRated,\n            EventType::SlaBreachWarning,\n        ]\n    }\n    \n    async fn handle_event(\u0026self, event: WebhookEvent) -\u003e Result\u003c()\u003e {\n        match event.event_type {\n            EventType::TicketCreated =\u003e {\n                let ticket: Ticket = event.parse_payload()?;\n                self.process_new_ticket(ticket).await\n            }\n            EventType::SlaBreachWarning =\u003e {\n                let warning: SlaWarning = event.parse_payload()?;\n                self.escalate_sla_risk(warning).await\n            }\n            _ =\u003e Ok(())\n        }\n    }\n}\n```\n\n### Rate Limiting Details\n| Plan       | Rate Limit | Burst | Notes                    |\n|------------|------------|-------|--------------------------|\n| Team       | 200 rpm    | 10    | Basic tier               |\n| Growth     | 400 rpm    | 20    | Mid-tier                 |\n| Professional| 700 rpm   | 35    | Enterprise               |\n| Enterprise | 700 rpm    | 50    | Custom limits available  |\n\n### Ticket Triggers (Zendesk-side automation)\n```json\n{\n  \"trigger\": {\n    \"title\": \"AI Categorization Webhook\",\n    \"conditions\": {\n      \"all\": [\n        { \"field\": \"status\", \"operator\": \"is\", \"value\": \"new\" }\n      ]\n    },\n    \"actions\": [\n      {\n        \"field\": \"notification_webhook\",\n        \"value\": [\"flywheel_ai_categorize\", \"{ticket.id}\"]\n      }\n    ]\n  }\n}\n```\n\n## Dependencies\n\n```toml\n[dependencies]\nfcp-core = { path = \"../fcp-core\" }          # Core connector traits\nfcp-oauth = { path = \"../fcp-oauth\" }        # OAuth 2.0 flow handling\nfcp-webhook = { path = \"../fcp-webhook\" }    # Webhook processing\nfcp-ratelimit = { path = \"../fcp-ratelimit\" }  # Rate limit management\nfcp-telemetry = { path = \"../fcp-telemetry\" }  # Metrics and tracing\n\n# External\nreqwest = { version = \"0.11\", features = [\"json\"] }\nserde = { version = \"1.0\", features = [\"derive\"] }\ntokio = { version = \"1\", features = [\"full\"] }\n```\n\n## Configuration Schema\n\n```rust\n#[derive(Debug, Clone, Deserialize)]\npub struct ZendeskConfig {\n    /// Zendesk subdomain (e.g., \"acme\" for acme.zendesk.com)\n    pub subdomain: String,\n    \n    /// OAuth credentials\n    pub oauth: OAuthCredentials,\n    \n    /// Zendesk plan for rate limit configuration\n    pub plan: ZendeskPlan,\n    \n    /// Webhook endpoint configuration\n    pub webhook: WebhookConfig,\n    \n    /// Default zone for operations\n    pub default_zone: Zone,\n    \n    /// AI feature toggles\n    pub ai_features: AiFeatures,\n}\n\n#[derive(Debug, Clone, Deserialize)]\npub struct AiFeatures {\n    pub auto_categorize: bool,\n    pub response_suggestions: bool,\n    pub escalation_detection: bool,\n    pub ticket_summarization: bool,\n    pub proactive_outreach: bool,\n}\n```\n\n## Error Handling\n\n| Error Code | Description | Recovery Action |\n|------------|-------------|-----------------|\n| ZD_AUTH_001 | OAuth token expired | Trigger token refresh |\n| ZD_RATE_001 | Rate limit exceeded | Backoff and retry |\n| ZD_TICKET_404 | Ticket not found | Verify ID, check permissions |\n| ZD_PERM_403 | Insufficient permissions | Escalate zone requirement |\n| ZD_HOOK_001 | Webhook signature invalid | Reject, log security event |\n\n## Metrics \u0026 Observability\n\n```rust\n// Key metrics exported via fcp-telemetry\ncounter\\!(\"zendesk.tickets.processed\", labels: [\"operation\", \"status\"]);\nhistogram\\!(\"zendesk.api.latency_ms\", labels: [\"endpoint\"]);\ngauge\\!(\"zendesk.queue.depth\", labels: [\"queue_name\"]);\ncounter\\!(\"zendesk.ai.suggestions.accepted\", labels: [\"suggestion_type\"]);\ncounter\\!(\"zendesk.sla.breaches\", labels: [\"priority\", \"queue\"]);\n```\n\n## Security Considerations\n\n- OAuth tokens stored encrypted at rest\n- Webhook payloads validated via HMAC signature\n- PII handling compliant with data retention policies\n- Audit logging for all ticket access operations\n- Zone-based access prevents unauthorized escalation\n\n## Example Workflows\n\n### AI-Assisted Ticket Resolution\n```\n1. Webhook: New ticket created\n2. Auto-categorize: Billing inquiry, priority normal\n3. KB search: Find 3 relevant articles (confidence \u003e 0.8)\n4. Macro suggest: \"Billing FAQ Response\" macro\n5. Draft response: Combine KB + macro with personalization\n6. Queue for agent: Present draft with one-click send\n7. Track: Resolution time, CSAT, suggestion acceptance\n```\n\n### Escalation Detection\n```\n1. Sentiment analysis: Negative (-0.7)\n2. Keyword detection: \"cancel\", \"frustrated\", \"manager\"\n3. Customer tier: VIP (top 10% spend)\n4. Repeat contact: 3rd ticket in 7 days\n5. Decision: Auto-escalate to senior agent queue\n6. Notify: Slack alert to support lead\n7. Context: Attach customer history and previous resolutions\n```\n\n## Roadmap\n\n- [ ] Voice ticket transcription integration\n- [ ] Multi-channel unification (chat, email, social)\n- [ ] Predictive ticket volume forecasting\n- [ ] Agent coaching recommendations\n- [ ] Custom field mapping for industry verticals\n\n---\n*Connector ID: fcp.zendesk | Version: 0.1.0 | Status: Planning*\n\n## Success Criteria\n- The epic includes (or references) the standard base beads `.1`..`.4` per `flywheel_connectors-lszk.5`.\n- The connector passes `flywheel_connectors-1n78.21.5` (static + dynamic) and has an E2E compliance run wired through `flywheel_connectors-e3i9`.\n- Unit/integration tests are mock-only (no real external calls) and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-11T21:59:30.709052075-05:00","created_by":"ubuntu","updated_at":"2026-01-15T08:35:11.091119509-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-pwff","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T22:08:21.591246531-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-pwff","depends_on_id":"flywheel_connectors-lj2","type":"blocks","created_at":"2026-01-11T22:08:21.693270759-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-pwff","depends_on_id":"flywheel_connectors-vi7","type":"blocks","created_at":"2026-01-11T22:08:21.72114213-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-pwff","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T22:08:21.748091144-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-pwff","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:34:26.979033755-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-pwff","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T04:21:58.323449401-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-pwff","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T04:21:58.517581982-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-pwff","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T04:21:58.707152809-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-pwff","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T04:21:58.90374914-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-pwff","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T04:21:59.108738622-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-pwff","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T04:21:59.332645228-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-pwff.1","title":"fcp.zendesk: Manifest + Capability Map (FCP2)","description":"# fcp.zendesk: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the Zendesk connector’s **mechanical manifest contract** under FCP2.\n\n## Required contents\n- Manifest archetypes (closed set):\n  - `operational` (ticket CRUD, macros)\n  - `streaming` (webhooks/events)\n  - `knowledge` (KB reads/search)\n- Operation list + schema IDs.\n- Capability families + per-operation required caps.\n- NetworkConstraints:\n  - pin Zendesk subdomain hostname\n  - explicitly pin attachment download hosts if distinct\n- State model declaration:\n  - webhook cursor/idempotency\n  - optional ticket sync cursors\n\n## Acceptance criteria\n- Another engineer can implement `--manifest` from this bead alone.\n- Static compliance can reject overly-broad egress and host-encoded capability IDs.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:21:15.842391502-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:21:15.842391502-05:00","dependencies":[{"issue_id":"flywheel_connectors-pwff.1","depends_on_id":"flywheel_connectors-pwff","type":"parent-child","created_at":"2026-01-15T04:21:15.843581354-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-pwff.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T04:21:20.424903317-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-pwff.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T04:21:20.609477702-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-pwff.2","title":"fcp.zendesk: Provisioning Automation (OAuth/API token, webhooks)","description":"# fcp.zendesk: Provisioning Automation (OAuth/API token, webhooks)\n\n## Goal\nAutomate Zendesk onboarding with minimal human steps while keeping secrets zone-scoped.\n\n## Requirements\n- Support auth via `CredentialId`:\n  - OAuth2 (preferred)\n  - API token (policy-gated)\n- Subdomain binding and validation.\n- Webhook setup automation:\n  - register event webhooks (ticket created/updated, SLA warnings)\n  - validate webhook secret/signature configuration\n- Validate NetworkConstraints pinning.\n\n## Acceptance criteria\n- `fcp doctor` verifies readiness without leaking secrets.\n- Fully mockable for unit tests.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:21:27.113443928-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:56.407361643-05:00","dependencies":[{"issue_id":"flywheel_connectors-pwff.2","depends_on_id":"flywheel_connectors-pwff","type":"parent-child","created_at":"2026-01-15T04:21:27.114749017-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-pwff.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T04:21:30.949893304-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-pwff.3","title":"TEST: Zendesk Connector Unit/Integration Tests (mock-only)","description":"# TEST: Zendesk Connector Unit/Integration Tests (mock-only)\n\n## Goal\nMock-only tests for fcp.zendesk (ticket CRUD, customer lookup, KB access, macros, webhooks).\n\n## Requirements\n- No real Zendesk calls in CI.\n- Mock endpoints for:\n  - ticket CRUD + search\n  - user/customer lookup\n  - KB search/article fetch\n  - macro list/apply\n  - webhook ingestion\n- Tests for:\n  - attachment host pinning and size limits\n  - rate limiting + retry/backoff\n  - capability gating for writes and admin ops\n  - taint handling for incoming webhooks\n\n## Acceptance criteria\n- Deterministic CI suite.\n- Structured JSON logs with correlation_id + reason codes.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:21:38.465708485-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:21:38.465708485-05:00","dependencies":[{"issue_id":"flywheel_connectors-pwff.3","depends_on_id":"flywheel_connectors-pwff","type":"parent-child","created_at":"2026-01-15T04:21:38.46699067-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-pwff.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T04:21:42.605014175-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-pwff.4","title":"E2E: Zendesk Connector Compliance Run","description":"# E2E: Zendesk Connector Compliance Run\n\n## Goal\nRun the shared Mechanical Connector Compliance Runner against fcp.zendesk.\n\n## Must verify\n- Default deny via CapabilityTokens.\n- NetworkConstraints enforcement.\n- Receipts/audit for write/dangerous ops (ticket updates, macro applies if policy treats as write).\n- Taint-aware webhook ingestion.\n\n## Acceptance criteria\n- Runner output bundle is green for fcp.zendesk.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:21:49.131996267-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:21:49.131996267-05:00","dependencies":[{"issue_id":"flywheel_connectors-pwff.4","depends_on_id":"flywheel_connectors-pwff","type":"parent-child","created_at":"2026-01-15T04:21:49.133340058-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-pwff.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T04:21:52.156398167-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-q10z","title":"TEST: Trust/Quorum Model Unit Tests (n/f Assumptions, Threshold Rules, Degraded Mode)","description":"# TEST: Trust/Quorum Model Unit Tests\n\n## Scope\nComprehensive tests for Byzantine fault tolerance model and quorum rules.\n\n## Test Categories\n\n### n/f Assumptions\n- [ ] 3-node mesh tolerates 0 Byzantine faults\n- [ ] 4-node mesh tolerates 1 Byzantine fault\n- [ ] 7-node mesh tolerates 2 Byzantine faults\n- [ ] f \u003c n/3 invariant enforced\n- [ ] Quorum size = n - f calculated correctly\n\n### Threshold Rules\n- [ ] Zone operations require 2f+1 signatures\n- [ ] Checkpoint advancement requires quorum\n- [ ] Key rotation requires quorum\n- [ ] Revocation propagation requires quorum\n- [ ] Threshold signature verification\n\n### Degraded Mode Semantics\n- [ ] Degraded mode triggers at f failures\n- [ ] Operations pause when quorum lost\n- [ ] Clear error codes for degraded state\n- [ ] Recovery path when nodes return\n- [ ] Degraded mode logged/alerted\n\n### Safety Tier Quorums\n- [ ] Safe operations: single node\n- [ ] Risky operations: 2f+1 quorum\n- [ ] Dangerous operations: higher quorum\n- [ ] Critical operations: owner quorum\n\n### Split-Brain Prevention\n- [ ] Only one partition can make progress\n- [ ] Minority partition refuses writes\n- [ ] Majority partition continues\n- [ ] Merge after heal\n\n## Golden Vectors\nLocation: `tests/vectors/quorum/`\n- `quorum_3_of_3.cbor`\n- `quorum_3_of_5.cbor`\n- `degraded_state.cbor`\n\n## Logging Requirements\n```json\n{\n  \"timestamp\": \"RFC3339\",\n  \"test_name\": \"test_quorum_threshold\",\n  \"phase\": \"execute\",\n  \"correlation_id\": \"uuid\",\n  \"n\": 5,\n  \"f\": 1,\n  \"quorum_size\": 4,\n  \"signatures_collected\": 4,\n  \"result\": \"pass\"\n}\n```\n\n## Acceptance Criteria\n- Quorum calculations are correct\n- Degraded mode is reliable\n- Split-brain is prevented\n\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:27:29.880535042-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:27:29.880535042-05:00","labels":["fcp2","mvp","security","testing"],"dependencies":[{"issue_id":"flywheel_connectors-q10z","depends_on_id":"flywheel_connectors-1n78.25","type":"blocks","created_at":"2026-01-15T03:27:38.861868836-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-q10z","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:27:38.954071228-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-qtu","title":"fcp.grafana: Open-Source Observability Connector","description":"## Overview\nComprehensive observability connector for Grafana ecosystem, enabling AI agents to query metrics, analyze logs, inspect traces, and manage dashboards.\n\n## Core Capabilities\n\n### Metrics Querying (PromQL)\n- Execute PromQL queries against Prometheus datasources\n- Time range selection with relative and absolute times\n- Aggregation and transformation functions\n- Multi-datasource queries\n- Query result formatting (tables, time series)\n\n### Dashboard Access and Rendering\n- List available dashboards by folder/tag\n- Retrieve dashboard JSON definitions\n- Render dashboard panels as images\n- Variable interpolation for dynamic dashboards\n- Export dashboards for backup/migration\n\n### Alert Management\n- List active and silenced alerts\n- Query alert history and state transitions\n- Create and modify alert rules\n- Manage silence rules\n- Acknowledge and annotate alerts\n\n### Log Search (Loki Integration)\n- LogQL query execution\n- Log stream discovery\n- Label-based filtering\n- Pattern matching and parsing\n- Log context retrieval around events\n\n### Trace Inspection (Tempo Integration)\n- Trace ID lookup and visualization\n- Service map generation\n- Span analysis and timing breakdown\n- Cross-service correlation\n- Trace-to-log linking\n\n## Deployment Support\n\n### Self-Hosted\n- Direct API authentication\n- Custom SSL/TLS configuration\n- On-premise datasource access\n- Air-gapped environment support\n\n### Grafana Cloud\n- Cloud API token authentication\n- Stack management\n- Usage metrics and billing info\n- Multi-tenant organization support\n\n## Implementation Notes\n- Use Grafana HTTP API\n- Support API key and OAuth authentication\n- Handle rate limiting gracefully\n- Cache frequently accessed dashboards\n\n## Testing Requirements\n- Mock Grafana server for unit tests\n- Integration tests with test instance\n- Performance tests for large queries\n- Compatibility tests across Grafana versions","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:21:49.552569516-05:00","created_by":"ubuntu","updated_at":"2026-01-15T02:31:19.258883993-05:00","closed_at":"2026-01-15T02:31:19.258883993-05:00","close_reason":"Duplicate/overlaps with flywheel_connectors-dcgw"}
{"id":"flywheel_connectors-quo","title":"fcp.youtube - YouTube Data \u0026 Studio API Connector","description":"# fcp.youtube - YouTube Data \u0026 Studio API Connector (FCP2)\n\n## Goal\nProvide an FCP2-compliant YouTube connector for video discovery, transcript extraction, analytics, and content management under strict zone isolation.\n\n## Manifest archetypes (closed set)\n- `operational`\n- `streaming` (optional: live chat / event ingestion)\n\n## Zone model\n- Single-zone bound: one connector instance ↔ one `ZoneId`.\n- Recommended: one instance per YouTube account/channel per zone.\n\n## External surface\n### NetworkConstraints\nDefault-deny; allow only YouTube/Google API endpoints required by enabled operations:\n- Data API\n- Analytics API\n- OAuth refresh\n\n### Credential injection\n- OAuth2 tokens via `CredentialId`.\n\n## Capability model (illustrative)\n- `youtube.videos.read`\n- `youtube.videos.write` (Dangerous)\n- `youtube.transcripts.read`\n- `youtube.analytics.read` (sensitive)\n- `youtube.comments.write` (Dangerous)\n- `youtube.uploads.write` (Dangerous)\n\n## Operations (representative)\n- videos: get/list/search/update/delete/rate\n- transcripts/captions: list/get/upload/update/delete\n- playlists: CRUD\n- comments: list/create/reply/moderate\n- analytics: query/report\n- uploads: resumable upload\n- live: live chat read/send (optional)\n\n## Data handling\n- Comments/live chat are external input and must be tainted accordingly.\n- Transcripts are derived data and must include provenance.\n\n## Tests\n- Mock-only unit/integration tests with wiremock.\n- Deterministic “quota error” simulation.\n- E2E compliance run validates default deny + NetworkConstraints + dangerous action gating.\n\n## Acceptance Criteria\n- Passes connector compliance runner.\n- Deterministic tests; no live YouTube calls in unit tests.\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-11T10:12:42.750344186-05:00","created_by":"ubuntu","updated_at":"2026-01-15T08:37:56.470016643-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-quo","depends_on_id":"flywheel_connectors-lj2","type":"blocks","created_at":"2026-01-11T12:38:14.808711852-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-quo","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T12:38:14.841162305-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-quo","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T12:38:14.872945622-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-quo","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T01:23:43.693622126-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-quo","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:37:20.980071685-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-quo","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:37:21.106205199-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-quo","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T03:37:21.25141117-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-quo","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:37:21.385945309-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-quo","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T03:37:21.525601186-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-quo","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T03:37:21.657883743-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-quo","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T03:37:21.800610605-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-quo.1","title":"fcp.youtube: Manifest + Capability Map (FCP2)","description":"# fcp.youtube: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the YouTube connector manifest contract:\n- archetypes (`operational`, optional `streaming`)\n- operations + schema IDs\n- capability families + per-operation caps\n- NetworkConstraints allowlist for Google APIs\n\n## Acceptance Criteria\n- Complete manifest spec stored here.\n- Good/bad manifest examples exist for static compliance.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:37:28.084078392-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:37:28.084078392-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-quo.1","depends_on_id":"flywheel_connectors-quo","type":"parent-child","created_at":"2026-01-15T03:37:28.085320742-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-quo.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:38:14.752750266-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-quo.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:38:14.881775888-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-quo.2","title":"fcp.youtube: Provisioning Automation (OAuth2)","description":"# fcp.youtube: Provisioning Automation (OAuth2)\n\n## Goal\nAutomate OAuth2 onboarding and scope validation.\n\n## Acceptance Criteria\n- `fcp doctor` validates readiness.\n- Mockable.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:37:32.529211999-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:37:32.529211999-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-quo.2","depends_on_id":"flywheel_connectors-quo","type":"parent-child","created_at":"2026-01-15T03:37:32.530493974-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-quo.3","title":"fcp.youtube: Video Discovery + Metadata","description":"# fcp.youtube: Video Discovery + Metadata\n\n## Goal\nImplement search + metadata retrieval:\n- video.search\n- video.get/list\n- channel.get\n- playlist list/items\n\n## Requirements\n- Capability gated.\n- Strong redaction.\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:37:36.995878559-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:28:13.11958006-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-quo.3","depends_on_id":"flywheel_connectors-quo","type":"parent-child","created_at":"2026-01-15T03:37:36.997115759-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-quo.3","depends_on_id":"flywheel_connectors-quo.1","type":"blocks","created_at":"2026-01-15T03:38:15.028699335-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-quo.4","title":"fcp.youtube: Transcripts/Captions","description":"# fcp.youtube: Transcripts/Captions\n\n## Goal\nImplement transcript/caption retrieval and (optionally) upload.\n\n## Requirements\n- Inbound transcripts are external/derived data and must include provenance/taint metadata.\n- Upload actions are Dangerous and policy-gated.\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:37:45.576818878-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:28:13.020577726-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-quo.4","depends_on_id":"flywheel_connectors-quo","type":"parent-child","created_at":"2026-01-15T03:37:45.57793961-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-quo.5","title":"fcp.youtube: Analytics","description":"# fcp.youtube: Analytics\n\n## Goal\nSupport YouTube Analytics API queries.\n\n## Requirements\n- Capability gated.\n- Treat analytics as sensitive.\n- Strong redaction.\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:37:50.40061454-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:28:14.340580565-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-quo.5","depends_on_id":"flywheel_connectors-quo","type":"parent-child","created_at":"2026-01-15T03:37:50.40225514-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-quo.6","title":"fcp.youtube: Uploads (resumable)","description":"# fcp.youtube: Uploads (resumable)\n\n## Goal\nSupport resumable uploads for videos/captions.\n\n## Requirements\n- Dangerous and policy-gated.\n- Inputs are ObjectId references; never write to local disk.\n- Emits receipts/audit.\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:37:55.219579922-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:28:14.237436552-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-quo.6","depends_on_id":"flywheel_connectors-quo","type":"parent-child","created_at":"2026-01-15T03:37:55.251177283-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-quo.7","title":"TEST: YouTube Connector Unit/Integration Tests (mock-only)","description":"# TEST: YouTube Connector Unit/Integration Tests (mock-only)\n\n## Must cover\n- Manifest determinism + interface_hash.\n- OAuth refresh handling (mocked).\n- Error taxonomy mapping.\n- Redaction.\n\n## Acceptance Criteria\n- Deterministic.\n- Structured JSON logs.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:38:02.291871175-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:38:02.291871175-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-quo.7","depends_on_id":"flywheel_connectors-quo","type":"parent-child","created_at":"2026-01-15T03:38:02.293477702-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-quo.7","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T03:38:15.261966272-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-quo.8","title":"E2E: YouTube Connector Compliance Run","description":"# E2E: YouTube Connector Compliance Run\n\n## Goal\nAdd YouTube scenarios to the shared compliance harness.\n\n## Scenarios\n- Default deny.\n- Allow with valid token.\n- Network guard allow/deny.\n- Dangerous action gating (uploads/comments).\n\n## Acceptance Criteria\n- `cargo test --package fcp-e2e --features youtube` passes deterministically.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:38:09.29849634-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:38:09.29849634-05:00","labels":["conformance","connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-quo.8","depends_on_id":"flywheel_connectors-quo","type":"parent-child","created_at":"2026-01-15T03:38:09.299698044-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-quo.8","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T03:38:15.464682538-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-r1sl","title":"TEST: Connector SDK Unit Tests (Standard Methods, Typed Schemas, State Model)","description":"# TEST: Connector SDK Unit Tests\n\n## Scope\nComprehensive tests for connector SDK APIs and patterns.\n\n## Test Categories\n\n### Standard Methods\n- [ ] invoke() method signature correct\n- [ ] simulate() method signature correct (preflight; no side effects)\n- [ ] subscribe() method signature correct\n- [ ] get_state() method signature correct\n- [ ] set_state() method signature correct\n- [ ] introspect() returns correct schema\n\n### Simulate / CostEstimate / Availability (Spec-aligned)\n- [ ] SimulateRequest/SimulateResponse canonical encoding round-trip\n- [ ] `estimate_cost=true` populates `CostEstimate` deterministically when supported\n- [ ] `check_availability=true` populates `ResourceAvailability` deterministically when supported\n- [ ] missing capability reporting is stable (ordering + content)\n- [ ] simulate MUST NOT call write paths in the test connector (mock-enforced)\n- [ ] simulate timeouts are enforced and do not leak secrets in error strings/logs\n\n### Typed Schemas\n- [ ] Operation schema generation\n- [ ] Event schema generation\n- [ ] State schema generation\n- [ ] Schema validation at runtime\n- [ ] Schema evolution rules (V2-only; fail-closed + explicit migration)\n  - unknown schema hashes rejected deterministically\n  - interface_hash changes are detectable and surfaced via introspection\n  - migrations (if any) are explicit and produce new content-addressed objects\n\n### State Model\n- [ ] State read/write round-trip\n- [ ] State versioning works\n- [ ] State conflict detection\n- [ ] State snapshot creation\n- [ ] State restore from snapshot\n\n### Error Handling\n- [ ] SDK errors use error taxonomy\n- [ ] Errors include ai_recovery_hint\n- [ ] Panic recovery in connector code\n- [ ] Timeout handling\n\n### Trait Implementations\n- [ ] FcpConnector trait defaults work\n- [ ] Capability checking helpers\n- [ ] Audit event helpers\n- [ ] Receipt creation helpers\n\n## Golden Vectors\nLocation: `tests/vectors/sdk/`\n- `operation_schema.json`\n- `event_schema.json`\n- `state_snapshot.cbor`\n- `simulate_request.cbor`\n- `simulate_response.cbor`\n\n## Logging Requirements\n```json\n{\n  \"timestamp\": \"RFC3339\",\n  \"test_name\": \"test_sdk_invoke\",\n  \"phase\": \"execute\",\n  \"correlation_id\": \"uuid\",\n  \"operation_id\": \"...\",\n  \"connector_id\": \"...\",\n  \"result\": \"pass\"\n}\n```\n\n## Acceptance Criteria\n- All SDK methods tested\n- State model is reliable\n- Error handling is consistent\n\n\nLABELS: fcp2, mvp, sdk, testing\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:26:53.201451606-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:57:38.799658691-05:00","labels":["fcp2","mvp","sdk","testing"],"dependencies":[{"issue_id":"flywheel_connectors-r1sl","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:27:03.374406827-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-r1sl","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:27:03.469692568-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-r6ty","title":"fcp.terraform — Infrastructure as Code Connector","description":"# fcp.terraform — Infrastructure as Code Connector\n\n## Overview\n\nThe **fcp.terraform** connector provides a safety-critical interface between Agent and Terraform infrastructure management. It wraps the Terraform CLI to enable infrastructure inspection, planning, and controlled modification through the Flywheel Connector Protocol.\n\n**Value Score:** 81/100 (Tier 3 — Specialized/Strategic)\n\nThis connector treats infrastructure operations with appropriate gravity: read operations flow freely, mutations require approval, and destructive operations face multiple safety gates.\n\n---\n\n## Manifest archetypes (closed set)\n\n- `operational`\n\n\u003e Interaction patterns (non-archetype): Request/Response (CLI-based)\n\n```\n┌─────────────────────────────────────────────────────────────────┐\n│                    fcp.terraform Architecture                   │\n├─────────────────────────────────────────────────────────────────┤\n│                                                                 │\n│   Agent ──────► fcp.terraform ──────► Terraform CLI            │\n│      │                 │                     │                  │\n│      │                 ▼                     ▼                  │\n│      │           ┌─────────┐          ┌──────────┐              │\n│      │           │ Command │          │ Backend  │              │\n│      │           │ Builder │          │ (S3/GCS/ │              │\n│      │           └────┬────┘          │ local)   │              │\n│      │                │               └──────────┘              │\n│      │                ▼                                         │\n│      │    ┌───────────────────────┐                             │\n│      │    │   Safety Gate Layer   │                             │\n│      │    │  ┌─────┬──────┬────┐  │                             │\n│      │    │  │Plan │Apply │Dest│  │                             │\n│      │    │  │ ✓   │ ApprovalToken  │ !! │  │                             │\n│      │    └──┴─────┴──────┴────┴──┘                             │\n│      │                │                                         │\n│      ▼                ▼                                         │\n│   ┌────────────────────────────────┐                            │\n│   │         Audit Logger           │                            │\n│   │  (all state access tracked)    │                            │\n│   └────────────────────────────────┘                            │\n│                                                                 │\n└─────────────────────────────────────────────────────────────────┘\n```\n\n---\n\n## Operations\n\n### Safe Operations (z:terraform:plan)\n\n| Operation | Description | Zone | Approval |\n|-----------|-------------|------|----------|\n| `state.list` | List resources in current state | plan | None |\n| `state.show` | Show details of specific resource | plan | None |\n| `state.pull` | Download remote state for inspection | plan | None |\n| `plan.generate` | Create execution plan (read-only) | plan | None |\n| `plan.show` | Display existing plan file | plan | None |\n| `validate` | Validate configuration syntax | plan | None |\n| `fmt.check` | Check formatting without changes | plan | None |\n| `providers.list` | List required providers | plan | None |\n| `output.read` | Read output values | plan | None |\n| `workspace.list` | List available workspaces | plan | None |\n| `drift.detect` | Compare state vs actual infrastructure | plan | None |\n\n### Risky Operations (z:terraform:apply)\n\n| Operation | Description | Zone | Approval |\n|-----------|-------------|------|----------|\n| `apply` | Apply planned changes | apply | ApprovalToken Required |\n| `state.mv` | Move resource in state | apply | ApprovalToken Required |\n| `state.rm` | Remove resource from state (not infra) | apply | ApprovalToken Required |\n| `import` | Import existing resource to state | apply | ApprovalToken Required |\n| `taint` | Mark resource for recreation | apply | ApprovalToken Required |\n| `untaint` | Remove taint from resource | apply | ApprovalToken Required |\n| `workspace.new` | Create new workspace | apply | ApprovalToken Required |\n| `workspace.select` | Switch workspace | apply | ApprovalToken Required |\n| `fmt.write` | Format and overwrite files | apply | ApprovalToken Required |\n\n### Critical Operations (z:terraform:destroy)\n\n| Operation | Description | Zone | Approval |\n|-----------|-------------|------|----------|\n| `destroy` | Destroy managed infrastructure | destroy | Multi-Approval |\n| `state.replace-provider` | Replace provider in state | destroy | Multi-Approval |\n| `force-unlock` | Force release state lock | destroy | Multi-Approval |\n| `workspace.delete` | Delete workspace and state | destroy | Multi-Approval |\n\n---\n\n## Zone Architecture\n\n\u003c!-- fcp2-single-zone-note --\u003e\n**FCP2 single-zone binding note:** A connector instance binds to exactly one `ZoneId` for its entire lifetime.\nThe *\"zones\"* described in this section are a **recommended deployment pattern** (run separate connector instances in separate zones with different capability grants/policies) and/or conceptual risk tiers.\nThe connector MUST NOT multiplex multiple zones internally.\n\n\n```\n┌─────────────────────────────────────────────────────────────────┐\n│                     Zone Safety Levels                          │\n├─────────────────────────────────────────────────────────────────┤\n│                                                                 │\n│  z:terraform:plan     ████████████████████████  SAFE            │\n│  ────────────────────────────────────────────────────────────   │\n│  • All read operations                                          │\n│  • Plan generation (no mutations)                               │\n│  • State inspection                                             │\n│  • Drift detection                                              │\n│  • No approval required                                         │\n│  • Full audit logging                                           │\n│                                                                 │\n│  z:terraform:apply    ████████████░░░░░░░░░░░░  RISKY           │\n│  ────────────────────────────────────────────────────────────   │\n│  • Infrastructure mutations                                     │\n│  • State modifications                                          │\n│  • Resource imports                                             │\n│  • ApprovalToken approval required                                        │\n│  • Plan must precede apply                                      │\n│  • Detailed diff shown to approver                              │\n│                                                                 │\n│  z:terraform:destroy  ████░░░░░░░░░░░░░░░░░░░░  CRITICAL        │\n│  ────────────────────────────────────────────────────────────   │\n│  • Destructive operations                                       │\n│  • State deletion                                               │\n│  • Multi-approval or forbidden                                  │\n│  • Mandatory waiting period option                              │\n│  • Cannot be batched with other operations                      │\n│                                                                 │\n└─────────────────────────────────────────────────────────────────┘\n```\n\n---\n\n## Safety-Critical Design\n\n### Core Safety Principles\n\n```rust\n/// Safety classification for Terraform operations\npub enum OperationSafety {\n    /// Read-only, always allowed\n    Safe,\n    /// Mutations require ApprovalToken approval\n    Risky { requires_plan: bool },\n    /// Destructive, multi-approval or forbidden\n    Critical { allow_with_multi_approval: bool },\n}\n\nimpl TerraformOperation {\n    pub fn safety(\u0026self) -\u003e OperationSafety {\n        match self {\n            // Safe operations - pure reads\n            Self::Plan { .. } =\u003e OperationSafety::Safe,\n            Self::StateShow { .. } =\u003e OperationSafety::Safe,\n            Self::Validate =\u003e OperationSafety::Safe,\n            Self::DriftDetect =\u003e OperationSafety::Safe,\n            \n            // Risky operations - require prior plan\n            Self::Apply { .. } =\u003e OperationSafety::Risky { \n                requires_plan: true \n            },\n            Self::Import { .. } =\u003e OperationSafety::Risky { \n                requires_plan: false \n            },\n            \n            // Critical operations - multi-gate\n            Self::Destroy { .. } =\u003e OperationSafety::Critical {\n                allow_with_multi_approval: true,\n            },\n            Self::ForceUnlock { .. } =\u003e OperationSafety::Critical {\n                allow_with_multi_approval: false, // Forbidden in automation\n            },\n        }\n    }\n}\n```\n\n### The Plan-Before-Apply Invariant\n\n```rust\n/// Apply operations MUST reference a prior plan\npub struct ApplyRequest {\n    /// Reference to previously generated plan\n    pub plan_ref: PlanReference,\n    /// SHA256 of the plan file for verification\n    pub plan_hash: String,\n    /// Approval ticket from ApprovalToken\n    pub approval: ApprovalToken,\n}\n\nimpl ApplyRequest {\n    pub async fn validate(\u0026self, ctx: \u0026Context) -\u003e Result\u003c(), ApplyError\u003e {\n        // 1. Plan must exist\n        let plan = ctx.state.get_plan(\u0026self.plan_ref)\n            .ok_or(ApplyError::PlanNotFound)?;\n        \n        // 2. Plan hash must match (no tampering)\n        if plan.hash() != self.plan_hash {\n            return Err(ApplyError::PlanHashMismatch);\n        }\n        \n        // 3. Plan must not be stale (configurable, default 1 hour)\n        if plan.age() \u003e ctx.config.max_plan_age {\n            return Err(ApplyError::PlanStale { \n                age: plan.age(),\n                max: ctx.config.max_plan_age,\n            });\n        }\n        \n        // 4. State must not have changed since plan\n        let current_serial = ctx.terraform.state_serial().await?;\n        if current_serial != plan.state_serial {\n            return Err(ApplyError::StateDrifted);\n        }\n        \n        // 5. Approval must be valid\n        ctx.approvals.verify_token(\u0026self.approval).await?;\n        \n        Ok(())\n    }\n}\n```\n\n### Audit Trail\n\n```rust\n/// All state access is audited\n#[derive(Serialize)]\npub struct TerraformAuditEvent {\n    pub timestamp: DateTime\u003cUtc\u003e,\n    pub operation: String,\n    pub zone: TerraformZone,\n    pub workspace: String,\n    pub backend: BackendInfo,\n    pub actor: ActorInfo,\n    pub resources_affected: Vec\u003cResourceAddress\u003e,\n    pub plan_ref: Option\u003cPlanReference\u003e,\n    pub approval_ref: Option\u003cApprovalReference\u003e,\n    pub outcome: OperationOutcome,\n    pub duration: Duration,\n}\n\nimpl TerraformConnector {\n    async fn audit\u003cT, F\u003e(\u0026self, op: \u0026str, f: F) -\u003e Result\u003cT\u003e\n    where\n        F: Future\u003cOutput = Result\u003cT\u003e\u003e,\n    {\n        let start = Instant::now();\n        let event_builder = AuditEventBuilder::new(op, \u0026self.context);\n        \n        let result = f.await;\n        \n        let event = event_builder\n            .with_outcome(\u0026result)\n            .with_duration(start.elapsed())\n            .build();\n        \n        self.telemetry.emit_audit(event).await;\n        \n        result\n    }\n}\n```\n\n---\n\n## Natural Language Interface\n\n### Conversational Queries\n\n| User Says | Maps To | Zone |\n|-----------|---------|------|\n| \"What infrastructure do we have?\" | `state.list` + summarize | plan |\n| \"Show me the database resources\" | `state.list --filter=aws_db*` | plan |\n| \"Is our infrastructure drifted?\" | `drift.detect` | plan |\n| \"Generate Terraform for a VPC with 3 subnets\" | Code generation (no TF CLI) | — |\n| \"Plan deploying the new config\" | `plan.generate` | plan |\n| \"Show me what would change\" | `plan.show` (last plan) | plan |\n| \"Apply the changes\" | `apply` (requires ApprovalToken) | apply |\n| \"Import this existing S3 bucket\" | `import` (requires ApprovalToken) | apply |\n| \"Destroy the staging environment\" | `destroy` (multi-approval) | destroy |\n\n### Example Interaction Flow\n\n```\nUser: \"What infrastructure do we have in staging?\"\n\nAgent: I will list the Terraform state for the staging workspace.\n\n[Executes: terraform workspace select staging \u0026\u0026 terraform state list]\n\nHere is the staging infrastructure:\n\n**Compute (12 resources)**\n- aws_instance.api_server[0-2] — t3.medium instances\n- aws_autoscaling_group.workers — 3-10 instances\n\n**Database (4 resources)**  \n- aws_rds_instance.primary — db.r5.large PostgreSQL\n- aws_rds_instance.replica — db.r5.large (read replica)\n- aws_elasticache_cluster.sessions — 2-node Redis\n\n**Networking (8 resources)**\n- aws_vpc.main — 10.0.0.0/16\n- aws_subnet.private[0-2] — private subnets\n- aws_subnet.public[0-2] — public subnets\n...\n\nUser: \"Is there any drift?\"\n\nAgent: Checking for configuration drift...\n\n[Executes: terraform plan -detailed-exitcode]\n\nDrift detected in 2 resources:\n\n1. **aws_security_group.api** — Rule added outside Terraform\n   - Ingress rule: 0.0.0.0/0:22 (SSH from anywhere)\n   - This is a security concern\n   \n2. **aws_instance.api_server[1]** — Instance type changed\n   - Expected: t3.medium\n   - Actual: t3.large\n   - Likely manual scaling\n\nRecommendation: Review and either:\n- Update Terraform to match reality\n- Apply Terraform to enforce expected state\n\nUser: \"Plan fixing the drift\"\n\nAgent: Generating plan to resolve drift...\n\n[Executes: terraform plan -out=drift-fix.plan]\n\n**Terraform Plan Summary:**\n\nChanges: 2 to change, 0 to add, 0 to destroy\n\n1. ~ aws_security_group.api\n   - Remove unauthorized SSH rule\n   \n2. ~ aws_instance.api_server[1]  \n   - Downsize t3.large → t3.medium\n\nThis will enforce your Terraform configuration.\nShould I apply these changes? (Requires ApprovalToken approval)\n\nUser: \"Yes, apply it\"\n\nAgent: Requesting ApprovalToken approval for apply operation...\n\n[ApprovalToken Approval Flow]\nOperation: terraform apply drift-fix.plan\nResources: 2 changes\nRisk: LOW (no destroys, known drift fix)\nRequested by: claude-session-abc123\n\n[Approval granted by: ops-team]\n\nApplying changes...\n\n[Executes: terraform apply drift-fix.plan]\n\nApply complete. 2 resources changed.\nState serial: 847 → 848\n```\n\n---\n\n## Implementation Architecture\n\n### Crate Structure\n\n```\ncrates/fcp-terraform/\n├── Cargo.toml\n├── src/\n│   ├── lib.rs              # Public API\n│   ├── connector.rs        # FCP connector impl\n│   ├── cli/\n│   │   ├── mod.rs          # CLI wrapper\n│   │   ├── executor.rs     # Command execution\n│   │   ├── parser.rs       # Output parsing\n│   │   └── version.rs      # Version detection\n│   ├── operations/\n│   │   ├── mod.rs\n│   │   ├── plan.rs         # Plan operations\n│   │   ├── apply.rs        # Apply operations\n│   │   ├── state.rs        # State operations\n│   │   ├── import.rs       # Import operations\n│   │   └── workspace.rs    # Workspace ops\n│   ├── safety/\n│   │   ├── mod.rs\n│   │   ├── gates.rs        # Safety gates\n│   │   ├── approval.rs     # ApprovalToken integration\n│   │   └── audit.rs        # Audit logging\n│   ├── backend/\n│   │   ├── mod.rs\n│   │   ├── s3.rs           # S3 backend\n│   │   ├── gcs.rs          # GCS backend\n│   │   ├── azurerm.rs      # Azure backend\n│   │   └── local.rs        # Local backend\n│   └── workspace.rs        # Workspace management\n└── tests/\n    ├── integration/\n    └── fixtures/\n```\n\n### Core Types\n\n```rust\n//! Core types for fcp-terraform\n\nuse fcp_core::{Connector, Operation, Zone};\nuse serde::{Deserialize, Serialize};\n\n/// Terraform connector configuration\n#[derive(Debug, Clone, Deserialize)]\npub struct TerraformConfig {\n    /// Path to terraform binary\n    pub terraform_path: PathBuf,\n    /// Working directory for terraform operations\n    pub working_dir: PathBuf,\n    /// Backend configuration\n    pub backend: BackendConfig,\n    /// Default workspace\n    pub default_workspace: String,\n    /// Maximum plan age before requiring regeneration\n    pub max_plan_age: Duration,\n    /// Safety settings\n    pub safety: SafetyConfig,\n}\n\n/// Backend configuration variants\n#[derive(Debug, Clone, Deserialize)]\n#[serde(tag = \"type\")]\npub enum BackendConfig {\n    #[serde(rename = \"s3\")]\n    S3 {\n        bucket: String,\n        key: String,\n        region: String,\n        encrypt: bool,\n        dynamodb_table: Option\u003cString\u003e,\n    },\n    #[serde(rename = \"gcs\")]\n    Gcs {\n        bucket: String,\n        prefix: String,\n    },\n    #[serde(rename = \"azurerm\")]\n    AzureRm {\n        storage_account_name: String,\n        container_name: String,\n        key: String,\n    },\n    #[serde(rename = \"local\")]\n    Local {\n        path: PathBuf,\n    },\n}\n\n/// Safety configuration\n#[derive(Debug, Clone, Deserialize)]\npub struct SafetyConfig {\n    /// Allow destroy operations at all\n    pub allow_destroy: bool,\n    /// Require multi-approval for destroy\n    pub destroy_multi_approval: bool,\n    /// Minimum approvers for destroy\n    pub destroy_min_approvers: u32,\n    /// Mandatory waiting period before destroy (seconds)\n    pub destroy_wait_period: Option\u003cu64\u003e,\n    /// Resources that can never be destroyed\n    pub protected_resources: Vec\u003cString\u003e,\n}\n```\n\n### Terraform CLI Wrapper\n\n```rust\n//! Safe Terraform CLI wrapper\n\nuse tokio::process::Command;\nuse std::process::Stdio;\n\npub struct TerraformCli {\n    path: PathBuf,\n    working_dir: PathBuf,\n    env: HashMap\u003cString, String\u003e,\n}\n\nimpl TerraformCli {\n    /// Execute a terraform command with safety checks\n    pub async fn execute(\u0026self, args: \u0026[\u0026str]) -\u003e Result\u003cTerraformOutput\u003e {\n        // Validate command is allowed\n        self.validate_command(args)?;\n        \n        let mut cmd = Command::new(\u0026self.path);\n        cmd.args(args)\n           .current_dir(\u0026self.working_dir)\n           .envs(\u0026self.env)\n           .stdin(Stdio::null())  // Never interactive\n           .stdout(Stdio::piped())\n           .stderr(Stdio::piped());\n        \n        // Add -no-color for parseable output\n        // Add -input=false for non-interactive\n        \n        let output = cmd.output().await?;\n        \n        TerraformOutput::from_process_output(output)\n    }\n    \n    /// Validate command against safety rules\n    fn validate_command(\u0026self, args: \u0026[\u0026str]) -\u003e Result\u003c()\u003e {\n        let cmd = args.first().ok_or(Error::EmptyCommand)?;\n        \n        // Block dangerous flags\n        for arg in args {\n            if *arg == \"-force\" || *arg == \"--force\" {\n                return Err(Error::ForbiddenFlag(\"-force\"));\n            }\n            if *arg == \"-auto-approve\" {\n                return Err(Error::ForbiddenFlag(\"-auto-approve\"));\n            }\n        }\n        \n        Ok(())\n    }\n}\n```\n\n---\n\n## Dependencies\n\n```toml\n[package]\nname = \"fcp-terraform\"\nversion = \"0.1.0\"\nedition = \"2021\"\ndescription = \"Terraform connector for Flywheel Connector Protocol\"\nlicense = \"Apache-2.0\"\n\n[dependencies]\n# Core FCP\nfcp-core = { path = \"../fcp-core\" }\nfcp-telemetry = { path = \"../fcp-telemetry\" }\n\n# Async runtime\ntokio = { version = \"1\", features = [\"process\", \"fs\", \"sync\"] }\n\n# Serialization\nserde = { version = \"1\", features = [\"derive\"] }\nserde_json = \"1\"\n\n# HCL parsing for Terraform files\nhcl-rs = \"0.16\"\n\n# Error handling\nthiserror = \"1\"\nanyhow = \"1\"\n\n# Logging and tracing\ntracing = \"0.1\"\n\n# Crypto for plan verification\nsha2 = \"0.10\"\n\n# Regex for output parsing\nregex = \"1\"\n\n[dev-dependencies]\ntempfile = \"3\"\ntokio-test = \"0.4\"\nassert_cmd = \"2\"\n```\n\n---\n\n## Flywheel Synergy\n\n### ApprovalToken Integration for Approvals\n\n```rust\n/// ApprovalToken approval flow for risky operations\npub struct ApplyApprovalRequest {\n    /// The generated plan\n    pub plan: Plan,\n    /// Human-readable summary\n    pub summary: String,\n    /// Resources to be modified\n    pub changes: Vec\u003cResourceChange\u003e,\n    /// Risk assessment\n    pub risk: RiskLevel,\n}\n\nimpl TerraformConnector {\n    async fn request_apply_approval(\u0026self, plan: \u0026Plan) -\u003e Result\u003cApprovalToken\u003e {\n        let request = ApplyApprovalRequest {\n            plan: plan.clone(),\n            summary: self.summarize_plan(plan),\n            changes: plan.resource_changes.clone(),\n            risk: self.assess_risk(plan),\n        };\n        \n        // Send to ApprovalToken for human approval\n        let approval = self.approvals.request_token(\n            \"terraform:apply\",\n            request,\n            ApprovalRequirements {\n                min_approvers: 1,\n                required_roles: vec![\"ops\", \"platform\"],\n                timeout: Duration::from_secs(3600),\n            },\n        ).await?;\n        \n        Ok(approval)\n    }\n}\n```\n\n### Beads for Infrastructure Tasks\n\n```\n┌─────────────────────────────────────────────────────────────────┐\n│              Infrastructure Task Beads                          │\n├─────────────────────────────────────────────────────────────────┤\n│                                                                 │\n│  bead:provision-environment                                     │\n│  ├── fcp.terraform (plan + apply)                               │\n│  ├── fcp.vault (secrets provisioning)                           │\n│  └── fcp.kubernetes (deploy workloads)                          │\n│                                                                 │\n│  bead:infrastructure-audit                                      │\n│  ├── fcp.terraform (drift detection)                            │\n│  ├── fcp.aws (cost analysis)                                    │\n│  └── fcp.security (compliance check)                            │\n│                                                                 │\n│  bead:disaster-recovery                                         │\n│  ├── fcp.terraform (state backup/restore)                       │\n│  ├── fcp.database (snapshot/restore)                            │\n│  └── fcp.dns (failover)                                         │\n│                                                                 │\n└─────────────────────────────────────────────────────────────────┘\n```\n\n---\n\n## Configuration Examples\n\n### Basic Configuration\n\n```toml\n# fcp-terraform.toml\n\n[terraform]\npath = \"/usr/local/bin/terraform\"\nworking_dir = \"/infrastructure/terraform\"\ndefault_workspace = \"default\"\nmax_plan_age = \"1h\"\n\n[backend]\ntype = \"s3\"\nbucket = \"company-terraform-state\"\nkey = \"infrastructure/terraform.tfstate\"\nregion = \"us-west-2\"\nencrypt = true\ndynamodb_table = \"terraform-locks\"\n\n[safety]\nallow_destroy = true\ndestroy_multi_approval = true\ndestroy_min_approvers = 2\ndestroy_wait_period = 300  # 5 minutes\nprotected_resources = [\n    \"aws_rds_instance.production\",\n    \"aws_s3_bucket.critical_data\",\n]\n\n[telemetry]\naudit_destination = \"s3://audit-logs/terraform/\"\n```\n\n### Environment-Specific Config\n\n```toml\n# Production - maximum safety\n[safety]\nallow_destroy = false  # Destroy forbidden in prod\nprotected_resources = [\"*\"]  # Everything protected\n\n# Staging - balanced\n[safety]\nallow_destroy = true\ndestroy_multi_approval = true\ndestroy_min_approvers = 2\n\n# Development - permissive\n[safety]\nallow_destroy = true\ndestroy_multi_approval = false\ndestroy_min_approvers = 1\n```\n\n---\n\n## Error Handling\n\n```rust\n#[derive(Debug, thiserror::Error)]\npub enum TerraformError {\n    #[error(\"Terraform not found at {path}\")]\n    TerraformNotFound { path: PathBuf },\n    \n    #[error(\"Terraform version {found} \u003c required {required}\")]\n    VersionTooOld { found: String, required: String },\n    \n    #[error(\"State locked by {lock_id} since {since}\")]\n    StateLocked { lock_id: String, since: DateTime\u003cUtc\u003e },\n    \n    #[error(\"Plan {plan_ref} not found or expired\")]\n    PlanNotFound { plan_ref: String },\n    \n    #[error(\"Plan hash mismatch: expected {expected}, got {actual}\")]\n    PlanHashMismatch { expected: String, actual: String },\n    \n    #[error(\"State drifted since plan was generated\")]\n    StateDrifted,\n    \n    #[error(\"Operation requires approval: {operation}\")]\n    ApprovalRequired { operation: String },\n    \n    #[error(\"Approval denied: {reason}\")]\n    ApprovalDenied { reason: String },\n    \n    #[error(\"Protected resource cannot be modified: {resource}\")]\n    ProtectedResource { resource: String },\n    \n    #[error(\"Destroy operations are forbidden in this environment\")]\n    DestroyForbidden,\n    \n    #[error(\"Backend error: {message}\")]\n    BackendError { message: String },\n    \n    #[error(\"Terraform execution failed: {stderr}\")]\n    ExecutionFailed { exit_code: i32, stderr: String },\n}\n```\n\n---\n\n## Testing Strategy\n\n```rust\n#[cfg(test)]\nmod tests {\n    use super::*;\n    use tempfile::TempDir;\n    \n    /// Test that plan operations are always safe\n    #[tokio::test]\n    async fn plan_operations_are_safe() {\n        let connector = test_connector().await;\n        \n        let ops = [\n            TerraformOp::Plan { target: None },\n            TerraformOp::StateList,\n            TerraformOp::StateShow { address: \"aws_instance.test\".into() },\n            TerraformOp::Validate,\n        ];\n        \n        for op in ops {\n            assert_eq!(\n                op.safety(), \n                OperationSafety::Safe,\n                \"{:?} should be safe\", op\n            );\n        }\n    }\n    \n    /// Test that apply requires a valid plan\n    #[tokio::test]\n    async fn apply_requires_valid_plan() {\n        let connector = test_connector().await;\n        \n        let result = connector.apply(ApplyRequest {\n            plan_ref: \"nonexistent\".into(),\n            plan_hash: \"abc123\".into(),\n            approval: fake_approval(),\n        }).await;\n        \n        assert!(matches!(\n            result,\n            Err(TerraformError::PlanNotFound { .. })\n        ));\n    }\n    \n    /// Test that destroy is blocked in forbidden mode\n    #[tokio::test]\n    async fn destroy_forbidden_when_configured() {\n        let mut config = test_config();\n        config.safety.allow_destroy = false;\n        \n        let connector = TerraformConnector::new(config).await.unwrap();\n        \n        let result = connector.destroy(DestroyRequest {\n            targets: vec![\"aws_instance.test\".into()],\n            approval: multi_approval(3),\n        }).await;\n        \n        assert!(matches!(\n            result,\n            Err(TerraformError::DestroyForbidden)\n        ));\n    }\n    \n    /// Test audit logging for state access\n    #[tokio::test]\n    async fn state_access_is_audited() {\n        let (connector, audit_rx) = test_connector_with_audit().await;\n        \n        connector.state_list().await.unwrap();\n        \n        let event = audit_rx.recv().await.unwrap();\n        assert_eq!(event.operation, \"state.list\");\n        assert!(event.timestamp \u003c= Utc::now());\n    }\n}\n```\n\n---\n\n## Security Considerations\n\n1. **No Auto-Approve**: The connector never passes `-auto-approve` to Terraform\n2. **No Interactive Mode**: All commands run with `-input=false`\n3. **Credential Isolation**: Backend credentials via environment, not config files\n4. **Plan Verification**: SHA256 hash ensures plans are not tampered with\n5. **Audit Everything**: All state access logged for compliance\n6. **Protected Resources**: Critical infrastructure cannot be accidentally destroyed\n7. **Time-Limited Plans**: Stale plans must be regenerated\n\n---\n\n## Roadmap\n\n- [ ] **v0.1**: Core operations (plan, apply, state inspection)\n- [ ] **v0.2**: Multi-workspace support, drift detection\n- [ ] **v0.3**: Resource import, module management\n- [ ] **v0.4**: Cost estimation integration (Infracost)\n- [ ] **v0.5**: Policy as Code (OPA/Sentinel integration)\n- [ ] **v1.0**: Production ready with full audit compliance\n\n---\n\n## References\n\n- [Terraform CLI Documentation](https://developer.hashicorp.com/terraform/cli)\n- [Terraform State Management](https://developer.hashicorp.com/terraform/language/state)\n- [FCP Core Specification](../fcp-core/README.md)\n- ApprovalToken (execution-scope approvals) — see `FCP_Specification_V2.md` §6/§7 and `docs/fcp_model_connectors_rust.md` §5.\n\n---\n\n*Generated: 2026-01-11 | Priority: P2 | Value Score: 81/100*\n\n## Success Criteria\n- The epic includes (or references) the standard base beads `.1`..`.4` per `flywheel_connectors-lszk.5`.\n- The connector passes `flywheel_connectors-1n78.21.5` (static + dynamic) and has an E2E compliance run wired through `flywheel_connectors-e3i9`.\n- Unit/integration tests are mock-only (no real external calls) and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-11T21:45:57.070997596-05:00","created_by":"ubuntu","updated_at":"2026-01-15T07:39:57.092137921-05:00","labels":["connector","connectors","fcp2","infrastructure","safety-critical","tier-3","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-r6ty","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T22:08:10.704602717-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-r6ty","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T22:08:10.7294325-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-r6ty","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:32:49.430009505-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-r6ty","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T04:26:14.436849515-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-r6ty","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T04:26:14.666836246-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-r6ty","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T04:26:14.883753174-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-r6ty","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T04:26:15.106967296-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-r6ty","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T04:26:15.336672737-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-r6ty","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T04:26:15.551996745-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-r6ty.1","title":"fcp.terraform: Manifest + Capability Map (FCP2)","description":"# fcp.terraform: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the Terraform connector’s **mechanical manifest contract** under FCP2.\n\nTerraform is safety-critical; the manifest must make dangerous operations mechanically obvious.\n\n## Required contents\n- Manifest archetypes (closed set):\n  - `operational` (CLI invocation; plan/apply/state)\n- Operation list + schema IDs.\n- Capability families + per-operation required caps.\n- NetworkConstraints:\n  - default deny\n  - explicitly allow only the minimal outbound hosts required for the configured backends/providers\n  - optionally require “offline mode” for plan-only environments\n- Sandbox profile:\n  - strict filesystem allowlist\n  - explicit binary allowlist (terraform + minimal helpers)\n- State model declaration:\n  - plan artifact references + hashes (if persisted)\n  - drift checkpoints (if persisted)\n\n## Acceptance criteria\n- Another engineer can implement `--manifest` from this bead alone.\n- Static compliance can reject:\n  - overly-broad egress\n  - unsafe filesystem profiles\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:25:32.247843209-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:25:32.247843209-05:00","dependencies":[{"issue_id":"flywheel_connectors-r6ty.1","depends_on_id":"flywheel_connectors-r6ty","type":"parent-child","created_at":"2026-01-15T04:25:32.249379042-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-r6ty.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T04:25:36.47471964-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-r6ty.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T04:25:36.687243713-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-r6ty.2","title":"fcp.terraform: Provisioning Automation (terraform binary, backend creds, safety mode)","description":"# fcp.terraform: Provisioning Automation (terraform binary, backend creds, safety mode)\n\n## Goal\nAutomate Terraform connector onboarding with minimal human steps while keeping all credentials zone-scoped and never written to disk.\n\n## Requirements\n- Detect/verify Terraform binary:\n  - version constraints\n  - hash/publisher verification if required by policy\n- Backend credential injection via `CredentialId`:\n  - AWS creds for S3 backend\n  - GCP creds for GCS backend\n  - etc.\n- Safety mode configuration:\n  - default: plan-only\n  - apply requires explicit approval gating\n  - destroy is disabled unless explicitly enabled by policy\n- Validate sandbox filesystem constraints:\n  - only allow configured workspace paths\n\n## Acceptance criteria\n- `fcp doctor` verifies readiness without leaking secrets.\n- Mockable in CI (no real terraform needed for unit tests).\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:25:43.751842525-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:56.531657622-05:00","dependencies":[{"issue_id":"flywheel_connectors-r6ty.2","depends_on_id":"flywheel_connectors-r6ty","type":"parent-child","created_at":"2026-01-15T04:25:43.752953568-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-r6ty.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T04:25:47.025813613-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-r6ty.3","title":"TEST: Terraform Connector Unit/Integration Tests (mock-only)","description":"# TEST: Terraform Connector Unit/Integration Tests (mock-only)\n\n## Goal\nMock-only tests for fcp.terraform focusing on safety gating, argument construction, and audit/receipt behavior.\n\n## Requirements\n- No real infrastructure changes in CI.\n- Unit tests:\n  - command builder correctness (`-input=false`, no `-auto-approve`)\n  - plan hash validation\n  - approval gating for apply/destroy\n  - protected resource policies\n  - audit event emission for any state access\n- Integration tests:\n  - use a fake terraform shim binary or a controlled fixture (no network)\n  - verify stdout/stderr parsing and error mapping\n\n## Acceptance criteria\n- Deterministic CI suite.\n- Structured JSON logs with correlation_id + reason codes.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:25:53.434949572-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:25:53.434949572-05:00","dependencies":[{"issue_id":"flywheel_connectors-r6ty.3","depends_on_id":"flywheel_connectors-r6ty","type":"parent-child","created_at":"2026-01-15T04:25:53.436149282-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-r6ty.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T04:25:57.394984682-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-r6ty.4","title":"E2E: Terraform Connector Compliance Run","description":"# E2E: Terraform Connector Compliance Run\n\n## Goal\nRun the shared Mechanical Connector Compliance Runner against fcp.terraform.\n\n## Must verify\n- Default deny via CapabilityTokens.\n- Sandbox profile correctness:\n  - filesystem allowlist enforced\n  - only approved binaries executable\n- NetworkConstraints enforcement (default deny unless backend explicitly allowed).\n- Receipts/audit for apply/destroy attempts (including denials).\n\n## Acceptance criteria\n- Runner output bundle is green for fcp.terraform.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:26:04.535618997-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:26:04.535618997-05:00","dependencies":[{"issue_id":"flywheel_connectors-r6ty.4","depends_on_id":"flywheel_connectors-r6ty","type":"parent-child","created_at":"2026-01-15T04:26:04.536930938-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-r6ty.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T04:26:08.61143207-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ro9b","title":"fcp.dropbox: Dropbox file storage connector","description":"## Overview\n\nImplement the Flywheel Connector Platform (FCP) connector for Dropbox, a leading file storage and collaboration platform. This connector enables file CRUD operations, folder management, sharing capabilities, search functionality, Paper document handling, and team administration through Dropbox API v2.\n\n## Value Assessment\n\n- **Value Score**: 70/100 (Tier 4)\n- **Priority**: P3\n- **Archetype**: Request-Response + Webhook\n\nDropbox serves as a critical file storage connector alongside fcp.s3 and fcp.onedrive, providing cloud file storage capabilities for the FCP ecosystem.\n\n## Technical Architecture\n\n### API Integration\n- **API Version**: Dropbox API v2\n- **Authentication**: OAuth 2.0 with PKCE\n- **Base URL**: https://api.dropboxapi.com/2/\n- **Content URL**: https://content.dropboxapi.com/2/\n\n### Zone Architecture\n\n\u003c!-- fcp2-single-zone-note --\u003e\n**FCP2 single-zone binding note:** A connector instance binds to exactly one `ZoneId` for its entire lifetime.\nThe *\"zones\"* described in this section are a **recommended deployment pattern** (run separate connector instances in separate zones with different capability grants/policies) and/or conceptual risk tiers.\nThe connector MUST NOT multiplex multiple zones internally.\n\nThe connector operates across three distinct zones:\n\n1. **Personal Files Zone**\n   - User's personal file storage\n   - Individual file/folder operations\n   - Personal sharing settings\n\n2. **Shared Files Zone**\n   - Team shared folders\n   - Collaborative workspaces\n   - Shared links management\n\n3. **Team Admin Zone**\n   - Team member management\n   - Group administration\n   - Team-wide policies and settings\n   - Storage quota management\n\n### Dependencies\n- `fcp-core`: Core connector traits and types\n- `fcp-oauth`: OAuth 2.0 authentication flow\n- `fcp-webhook`: Webhook handling for file change notifications\n- `fcp-ratelimit`: Rate limiting (Dropbox uses sliding window limits)\n- `fcp-telemetry`: Observability and metrics\n\n## Operations\n\n### File Operations\n- `files.upload` - Upload files (chunked for large files)\n- `files.download` - Download file content\n- `files.get_metadata` - Get file/folder metadata\n- `files.delete` - Delete files/folders\n- `files.copy` - Copy files/folders\n- `files.move` - Move/rename files/folders\n- `files.search` - Search for files by name/content\n- `files.list_folder` - List folder contents\n- `files.get_thumbnail` - Get image thumbnails\n- `files.get_preview` - Get file previews\n\n### Folder Operations\n- `folders.create` - Create new folders\n- `folders.delete` - Delete folders recursively\n- `folders.copy` - Copy folder structure\n- `folders.move` - Move/rename folders\n\n### Sharing Operations\n- `sharing.create_shared_link` - Create shareable links\n- `sharing.list_shared_links` - List existing shared links\n- `sharing.revoke_shared_link` - Revoke shared links\n- `sharing.add_folder_member` - Add members to shared folders\n- `sharing.remove_folder_member` - Remove folder members\n- `sharing.list_folder_members` - List shared folder members\n- `sharing.update_folder_member` - Update member permissions\n\n### Paper Documents\n- `paper.docs.create` - Create Paper documents\n- `paper.docs.update` - Update Paper content\n- `paper.docs.download` - Export Paper documents\n- `paper.docs.list` - List Paper documents\n- `paper.docs.archive` - Archive Paper documents\n\n### Team Administration\n- `team.members.list` - List team members\n- `team.members.add` - Add team members\n- `team.members.remove` - Remove team members\n- `team.members.suspend` - Suspend team members\n- `team.groups.list` - List team groups\n- `team.groups.create` - Create groups\n- `team.groups.members.add` - Add members to groups\n- `team.info` - Get team information\n- `team.features` - Get team features/quotas\n\n### Webhook Events\n- `file.change` - File added/modified/deleted\n- `folder.change` - Folder structure changes\n- `sharing.change` - Sharing settings modified\n- `team.member.change` - Team membership changes\n\n## Implementation Notes\n\n### Rate Limiting\nDropbox uses per-app and per-user rate limits:\n- Standard endpoints: 1000 requests/minute\n- Content endpoints: Variable based on operation\n- Implement exponential backoff with jitter\n\n### Large File Handling\n- Files \u003e 150MB require chunked upload sessions\n- Session-based uploads with `upload_session/start`, `append`, `finish`\n- Support for resumable uploads\n\n### Cursor-Based Pagination\n- Use cursors for `list_folder` continuation\n- Implement `list_folder/continue` for large directories\n- Handle cursor expiration (reset after ~4 hours)\n\n### Namespace Handling\n- Support both root namespace (team) and member namespaces\n- Handle namespace routing via `Dropbox-API-Path-Root` header\n\n## Acceptance Criteria\n\n- [ ] OAuth 2.0 flow with refresh token support\n- [ ] Full file CRUD operations\n- [ ] Folder management with recursive operations\n- [ ] Sharing link creation and management\n- [ ] Team member and group administration\n- [ ] Paper document support\n- [ ] Search functionality across files\n- [ ] Webhook integration for change notifications\n- [ ] Chunked upload for large files (\u003e150MB)\n- [ ] Proper rate limit handling with backoff\n- [ ] Cursor-based pagination for large result sets\n- [ ] Comprehensive error handling for Dropbox error codes\n- [ ] Unit and integration tests\n\n## Similar Connectors\n\nReference implementations for patterns:\n- `fcp.s3` - File storage operations, chunked uploads\n- `fcp.onedrive` - Microsoft Graph patterns, sharing model\n- `fcp.google-drive` - OAuth patterns, folder hierarchy\n\n## Resources\n\n- [Dropbox API v2 Documentation](https://www.dropbox.com/developers/documentation/http/documentation)\n- [Dropbox OAuth Guide](https://www.dropbox.com/developers/reference/oauth-guide)\n- [Dropbox Webhooks](https://www.dropbox.com/developers/reference/webhooks)\n","status":"open","priority":3,"issue_type":"feature","estimated_minutes":2400,"created_at":"2026-01-11T22:01:35.697418159-05:00","created_by":"ubuntu","updated_at":"2026-01-15T07:23:29.981529859-05:00","labels":["connector","file-storage","oauth","tier-4","webhook"],"dependencies":[{"issue_id":"flywheel_connectors-ro9b","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T22:08:21.873358418-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-ro9b","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T22:08:21.922320692-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-ro9b","depends_on_id":"flywheel_connectors-lj2","type":"blocks","created_at":"2026-01-11T22:08:32.451554977-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-ro9b","depends_on_id":"flywheel_connectors-vi7","type":"blocks","created_at":"2026-01-11T22:08:32.698238723-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-ro9b","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:36:52.086525269-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ro9b","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T07:07:28.263300135-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ro9b","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T07:09:20.306743946-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ro9b","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T07:09:20.720130314-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ro9b","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T07:09:21.13053449-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ro9b","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T07:09:21.557185153-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ro9b","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T07:09:21.9742371-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ro9b","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:09:22.403684325-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ro9b.1","title":"fcp.dropbox: Manifest + Capability Map (FCP2)","description":"## Goal\nProduce the full FCP2 manifest and capability map for this connector.\n\nThis bead is where we translate the connector’s functional surface (operations) into a **mechanically checkable** contract:\n- operation schemas + schema IDs\n- capability families per operation\n- per-operation NetworkConstraints (default deny)\n- sandbox profile requirements\n- declared state model (stateless / singleton_writer / crdt)\n\n## Required content (must be explicit)\n- Operation list is exhaustive and stable for the current phase.\n- Capability IDs DO NOT encode hostnames/ports.\n- NetworkConstraints are minimal and per-operation.\n- Risk tier for each operation (Safe / Dangerous).\n- Explicit bounds: timeouts, max response sizes, pagination limits.\n\n## Tests\n- Add good/bad manifest examples for the compliance runner.\n\n## Acceptance Criteria\n- Passes static checks in `flywheel_connectors-1n78.21.5`.\n- Default-deny is enforced by manifest + capability requirements.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:41.302393143-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:12:41.302393143-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-ro9b.1","depends_on_id":"flywheel_connectors-ro9b","type":"parent-child","created_at":"2026-01-15T07:12:41.359965055-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ro9b.2","title":"fcp.dropbox: Provisioning Automation","description":"## Goal\nAutomate provisioning and configuration with minimal human steps.\n\nThis bead owns:\n- auth setup (OAuth / API keys / webhook secrets) via `CredentialObject`/`CredentialId` (egress proxy injection preferred)\n- endpoint configuration\n- `fcp doctor` readiness checks\n- deterministic, mockable provisioning flows\n\n## FCP2 requirements\n- Secrets never touch disk.\n- Provisioning is deterministic and testable.\n- Error messages are actionable and do not leak secrets/PII.\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Provisioning emits structured logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:41.888760657-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:56.594127793-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-ro9b.2","depends_on_id":"flywheel_connectors-ro9b","type":"parent-child","created_at":"2026-01-15T07:12:41.946104009-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ro9b.2","depends_on_id":"flywheel_connectors-ro9b.1","type":"blocks","created_at":"2026-01-15T07:12:42.481733694-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ro9b.3","title":"TEST: fcp.dropbox Unit/Integration Tests (mock-only)","description":"## Goal\nMock-only unit/integration tests for this connector.\n\n## Required coverage\n- schema validation (inputs + outputs)\n- error taxonomy mapping (retry semantics)\n- pagination and bounds\n- rate limit behavior\n- redaction (no token/secret/PII leakage)\n- idempotency + receipts for Dangerous operations\n\n## Logging\nAll tests emit structured JSON logs per `flywheel_connectors-1n78.35`.\n\n## Acceptance Criteria\n- Deterministic tests; no live external calls.\n- Includes adversarial cases (timeouts, malformed responses, partial failures).\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:43.0256181-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:12:43.0256181-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-ro9b.3","depends_on_id":"flywheel_connectors-ro9b","type":"parent-child","created_at":"2026-01-15T07:12:43.122934717-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ro9b.3","depends_on_id":"flywheel_connectors-ro9b.1","type":"blocks","created_at":"2026-01-15T07:12:43.661914929-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ro9b.3","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:12:44.188844623-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ro9b.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T07:32:19.538686457-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ro9b.4","title":"E2E: fcp.dropbox Connector Compliance Run","description":"## Goal\nRun the shared connector compliance runner and capture an evidence bundle.\n\n## Must validate\n- handshake + introspection correctness\n- default deny (no CapabilityToken → deny + DecisionReceipt)\n- NetworkConstraints enforcement\n- receipts/audit for Dangerous operations\n- structured logs\n\n## Acceptance Criteria\n- E2E run is deterministic and produces a stable artifact bundle.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:44.646929274-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:12:44.646929274-05:00","labels":["connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-ro9b.4","depends_on_id":"flywheel_connectors-ro9b","type":"parent-child","created_at":"2026-01-15T07:12:44.704608849-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ro9b.4","depends_on_id":"flywheel_connectors-ro9b.1","type":"blocks","created_at":"2026-01-15T07:12:45.231426182-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ro9b.4","depends_on_id":"flywheel_connectors-ro9b.2","type":"blocks","created_at":"2026-01-15T07:12:45.772649101-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ro9b.4","depends_on_id":"flywheel_connectors-ro9b.3","type":"blocks","created_at":"2026-01-15T07:12:46.378098097-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ro9b.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T07:12:46.984368591-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-s4c4","title":"TEST: Telegram Connector Integration Tests","description":"# TEST: Telegram Connector Integration Tests (Deterministic)\n\n## Purpose\nIntegration tests for `fcp.telegram` that validate **real connector behavior** against a **deterministic fake Telegram Bot API** (wiremock or a purpose-built in-process server).\n\nThese tests are NOT allowed to call the real Telegram API.\n\n## What this test suite must prove\n### 1) Bot API correctness (request/response)\n- getUpdates long-poll semantics (timeout handling is bounded)\n- update offset advancement and persistence\n- sendMessage / sendMedia request formation\n- file download URL handling (if supported)\n\n### 2) Cursor + singleton-writer correctness\n- only the lease-holder advances the update cursor\n- restart behavior: resume from persisted cursor\n- duplicate update defense (idempotent event emission)\n\n### 3) FCP2 connector contract (integration-level)\n- standard method surface works end-to-end (handshake/describe/introspect/capabilities/configure/invoke/health/shutdown)\n- capability gating is mechanical:\n  - no token → deny + DecisionReceipt\n  - valid token → allow\n- streaming/event emission:\n  - events emitted as EventEnvelopes with correct topic\n  - inbound data is tainted as external input\n\n### 4) Error and adversity handling\n- rate limits (429) and Retry-After\n- invalid token (401) fail-closed\n- network timeouts and bounded retries\n- malformed update payloads (reject + audit, never panic)\n\n## Required scenarios (minimum)\n- scripted update stream: new message → edit → member join → member leave\n- concurrent start attempt:\n  - second instance denied/fenced by lease\n- send operation with simulated timeout-after-send:\n  - verify fail-closed behavior to avoid duplicate messages\n\n## Logging requirements\n- Structured JSON logs with: `test_name`, `phase`, `correlation_id`, `duration_ms`.\n- For denials: `decision=deny`, `reason_code`, `evidence` (object IDs).\n- Never log bot tokens or raw message bodies by default.\n\n## Acceptance Criteria\n- Runs deterministically in CI.\n- Produces a clear, searchable log trail on failure.\n- Integrates cleanly with the shared E2E/compliance framework (no bespoke harness logic that can’t be reused).\n","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-11T12:31:51.577185727-05:00","created_by":"ubuntu","updated_at":"2026-01-15T03:19:08.59219876-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-s4c4","depends_on_id":"flywheel_connectors-iv7","type":"blocks","created_at":"2026-01-11T12:47:48.871733462-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-s4c4","depends_on_id":"flywheel_connectors-lszk.1","type":"parent-child","created_at":"2026-01-15T01:24:16.465387137-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-s4c4","depends_on_id":"flywheel_connectors-lszk.1","type":"blocks","created_at":"2026-01-15T01:24:16.545848531-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-s4c4","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T03:19:14.513667274-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-s6b","title":"fcp.datadog: Log search and analysis","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:17:27.454531935-05:00","created_by":"ubuntu","updated_at":"2026-01-11T12:10:12.962861393-05:00","closed_at":"2026-01-11T12:10:12.962861393-05:00","close_reason":"CONSOLIDATED: All Datadog sub-features merged into comprehensive parent connector bead flywheel_connectors-cu3 (fcp.datadog: Datadog Observability Platform Connector)"}
{"id":"flywheel_connectors-s73","title":"fcp.github: GitHub API Connector","description":"# fcp.github - GitHub API Connector (FCP2)\n\n## Goal\nProvide an FCP2-compliant GitHub connector for repo automation with strict zone isolation, mechanical authorization, and strong sandboxing.\n\n## Manifest archetypes (closed set)\n- `operational` (REST/GraphQL actions)\n- `streaming` (webhook/event ingestion where supported)\n\n## Zone model (mechanical)\n- Single-zone bound: one connector instance ↔ one `ZoneId`.\n- Recommended zones (policy-owned):\n  - `z:work:github:\u003corg\u003e`\n  - `z:project:\u003cname\u003e:github` (repo-scoped)\n\n## External surface\n### NetworkConstraints\nDefault-deny; allow only the configured GitHub API host(s):\n- GitHub.com: `api.github.com:443`\n- Enterprise: explicit configured hostname\n\n### Auth / credential injection\nSupport one auth mode per instance (still single-zone):\n- GitHub App (preferred)\n- OAuth token\n- PAT (discouraged)\n\nSecrets via `CredentialId`; never persisted.\n\n## Capability model (illustrative)\nCapability IDs MUST NOT encode hosts/ports.\n\nExample families:\n- `github.repos.read`\n- `github.repos.write` (Dangerous for deletes)\n- `github.issues.read` / `github.issues.write`\n- `github.pulls.read` / `github.pulls.write`\n- `github.actions.read` / `github.actions.write` (workflow dispatch is Dangerous)\n- `github.search.read` (sensitive)\n- `github.webhooks.manage` (Dangerous)\n\n## Operations (representative; implement by phases)\n- repos: get/list/create/update/delete, contents CRUD\n- issues: create/update/close, comments, labels, assignees\n- pulls: create/update/merge, reviews, checks\n- actions: workflows list/dispatch, runs get/cancel/rerun\n- search: code/issues/repos\n\n## Events (streaming)\nIf webhook ingestion is supported:\n- connector must not expose inbound ports directly\n- `fcp-host` owns public endpoints and forwards verified payloads over FCPC\n\n## Safety + retries\n- Timeouts bounded.\n- Rate limits enforced.\n- Dangerous actions require ApprovalToken `Execution` scope + AuditEvents.\n\n## Tests\n- Mock-only unit tests with wiremock.\n- Deterministic webhook payload simulation.\n- E2E compliance run validates default deny + NetworkConstraints + receipts for writes.\n\n## Acceptance Criteria\n- Passes connector compliance runner.\n- Deterministic tests; no live GitHub calls in unit tests.\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-11T10:55:27.085625247-05:00","created_by":"ubuntu","updated_at":"2026-01-15T08:37:56.655697998-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-s73","depends_on_id":"flywheel_connectors-lj2","type":"blocks","created_at":"2026-01-11T10:55:38.855121869-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-s73","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T10:55:39.111456972-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-s73","depends_on_id":"flywheel_connectors-vi7","type":"blocks","created_at":"2026-01-11T10:55:39.356814226-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-s73","depends_on_id":"flywheel_connectors-iv7","type":"blocks","created_at":"2026-01-11T10:55:39.642260144-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-s73","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T10:55:39.909275648-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-s73","depends_on_id":"flywheel_connectors-k4ka","type":"blocks","created_at":"2026-01-11T12:12:02.902007028-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-s73","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T01:23:43.795861183-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-s73","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:31:28.232092335-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-s73","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:31:28.334326343-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-s73","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T03:31:28.447447277-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-s73","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:31:28.555368207-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-s73","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T03:31:28.676501454-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-s73","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T03:31:28.778695957-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-s73.1","title":"fcp.github: Manifest + Capability Map (FCP2)","description":"# fcp.github: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the GitHub connector manifest contract:\n- archetypes (`operational`, `streaming`)\n- operations + schema IDs\n- capability families + per-operation caps\n- NetworkConstraints allowlist for GitHub API host(s)\n\n## Acceptance Criteria\n- Complete manifest spec stored here.\n- Good/bad manifest examples exist for static compliance.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:31:35.689406607-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:31:35.689406607-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-s73.1","depends_on_id":"flywheel_connectors-s73","type":"parent-child","created_at":"2026-01-15T03:31:35.690683312-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-s73.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:32:14.464981802-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-s73.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:32:14.564753392-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-s73.2","title":"fcp.github: Provisioning Automation (GitHub App/OAuth)","description":"# fcp.github: Provisioning Automation (GitHub App/OAuth)\n\n## Goal\nAutomate GitHub auth onboarding:\n- GitHub App (preferred): generate/store app credentials, install, obtain installation token\n- OAuth/PAT fallback only if policy allows\n\n## Requirements\n- Secrets via `CredentialId`.\n- Validate scopes/permissions.\n- Validate NetworkConstraints.\n\n## Acceptance Criteria\n- `fcp doctor` can validate readiness.\n- Mockable for unit tests.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:31:40.756105658-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:56.717061674-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-s73.2","depends_on_id":"flywheel_connectors-s73","type":"parent-child","created_at":"2026-01-15T03:31:40.782352406-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-s73.3","title":"fcp.github: Core Repo/Issue/PR Operations","description":"# fcp.github: Core Repo/Issue/PR Operations\n\n## Goal\nImplement the initial GitHub automation surface:\n- repos: get/list, contents read/write (policy-gated)\n- issues: create/update/close, comments\n- pulls: create/update/merge (merge is Dangerous)\n\n## Requirements\n- Capability gated.\n- Rate limits enforced.\n- Dangerous actions require ApprovalToken `Execution` scope + AuditEvents.\n\n## Acceptance Criteria\n- Mock-only tests cover success + 401/403/429.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:31:45.999591554-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:31:45.999591554-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-s73.3","depends_on_id":"flywheel_connectors-s73","type":"parent-child","created_at":"2026-01-15T03:31:46.000941026-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-s73.3","depends_on_id":"flywheel_connectors-s73.1","type":"blocks","created_at":"2026-01-15T03:32:14.682015317-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-s73.4","title":"fcp.github: Actions/Workflows (policy-gated)","description":"# fcp.github: Actions/Workflows (policy-gated)\n\n## Goal\nSupport workflow dispatch and run inspection under strict policy.\n\n## Requirements\n- Dispatch/cancel/rerun are Dangerous and require ApprovalToken `Execution` scope.\n- AuditEvents for all workflow actions.\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:31:51.032224688-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:28:14.955255864-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-s73.4","depends_on_id":"flywheel_connectors-s73","type":"parent-child","created_at":"2026-01-15T03:31:51.043421168-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-s73.5","title":"fcp.github: Webhook Event Ingestion (optional)","description":"# fcp.github: Webhook Event Ingestion (optional)\n\n## Goal\nIf enabled, ingest GitHub webhook events as an FCP2 streaming source.\n\n## Requirements\n- Connector must not expose inbound ports directly.\n- `fcp-host` receives webhooks and forwards verified payloads over FCPC.\n- Events emitted as EventEnvelopes with correct topics and taints.\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:31:55.873362973-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:28:14.852887313-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-s73.5","depends_on_id":"flywheel_connectors-s73","type":"parent-child","created_at":"2026-01-15T03:31:55.874783649-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-s73.6","title":"TEST: GitHub Connector Unit/Integration Tests (mock-only)","description":"# TEST: GitHub Connector Unit/Integration Tests (mock-only)\n\n## Must cover\n- Manifest determinism + interface_hash.\n- REST + GraphQL request/response parsing.\n- Webhook signature verification (if supported).\n- Error taxonomy mapping.\n- Redaction.\n\n## Acceptance Criteria\n- Deterministic.\n- Structured JSON logs.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:32:02.341630216-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:32:02.341630216-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-s73.6","depends_on_id":"flywheel_connectors-s73","type":"parent-child","created_at":"2026-01-15T03:32:02.342903575-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-s73.6","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T03:32:14.887317904-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-s73.7","title":"E2E: GitHub Connector Compliance Run","description":"# E2E: GitHub Connector Compliance Run\n\n## Goal\nAdd GitHub scenarios to the shared compliance harness.\n\n## Scenarios\n- Default deny.\n- Allow with valid token.\n- Network guard allow/deny.\n- Dangerous action gating (merge PR, dispatch workflow).\n\n## Acceptance Criteria\n- `cargo test --package fcp-e2e --features github` passes deterministically.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:32:07.945063559-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:32:07.945063559-05:00","labels":["conformance","connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-s73.7","depends_on_id":"flywheel_connectors-s73","type":"parent-child","created_at":"2026-01-15T03:32:07.946439481-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-s73.7","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T03:32:15.064596246-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-s7j5","title":"TEST: Anthropic Connector Integration Tests","description":"# TEST: Anthropic Connector Integration Tests (Deterministic)\n\n## Purpose\nIntegration tests for `fcp.anthropic` using a deterministic mock Anthropic API (wiremock + SSE simulation).\n\nNo real Anthropic calls are allowed.\n\n## Must cover\n- Non-streaming generation.\n- Streaming SSE generation:\n  - chunk parsing\n  - cancellation\n  - error mid-stream\n- Tool/function calling request/response shapes.\n- Error taxonomy mapping (401/429/5xx).\n- Usage metrics extraction (tokens, latencies) — **not hard-coded currency pricing**.\n- FCP2 contract: default deny / allow + DecisionReceipt reason codes.\n\n## Logging\n- Structured JSON logs with correlation IDs.\n- No API key leakage; no raw prompts/responses by default.\n\n## Acceptance Criteria\n- Deterministic in CI.\n- Failures are actionable and include reason_code + evidence.\n","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-11T12:31:52.26135795-05:00","created_by":"ubuntu","updated_at":"2026-01-15T03:25:08.76598661-05:00","labels":["connectors","fcp2","testing","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-s7j5","depends_on_id":"flywheel_connectors-iv7","type":"blocks","created_at":"2026-01-11T12:47:48.905121162-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-s7j5","depends_on_id":"flywheel_connectors-lszk.4","type":"parent-child","created_at":"2026-01-15T02:35:16.156281829-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-s7j5","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T03:25:12.970677243-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-s9v","title":"fcp.docusign: Download Signed Documents","description":"# fcp.docusign: Download Signed Documents (FCP2)\n\n## Goal\nAllow retrieval of completed, signed documents safely:\n- list documents in an envelope\n- download document bytes (streamed, bounded)\n\nSigned documents may contain highly sensitive data.\n\n## Scope\n- List envelope documents (metadata).\n- Download a document.\n- Optional: download combined document bundle.\n\n## Capability model (illustrative)\n- `docusign.documents.read` (dangerous; sensitive content)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- Strict IO bounds:\n  - max bytes\n  - streaming download\n  - hash computation for evidence\n- Never log document contents.\n\n## Deliverables\n- Operation schemas:\n  - `docusign.document.list`\n  - `docusign.document.download`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - download bounds\n  - host pinning\n  - hash correctness\n\n## Acceptance criteria\n- Document downloads are safe-by-default and do not allow unbounded memory usage.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:21:34.267611256-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:38:15.228087283-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-s9v","depends_on_id":"flywheel_connectors-bijm","type":"parent-child","created_at":"2026-01-15T02:34:17.556956023-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-s9v","depends_on_id":"flywheel_connectors-bijm.1","type":"blocks","created_at":"2026-01-15T04:38:19.393940775-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-shj4","title":"TEST: fcp-oauth Unit Test Suite","description":"# TEST: fcp-oauth Unit Test Suite\n\n## Scope\nComprehensive unit tests for the OAuth2/OAuth1 authentication library.\n\n## Test Categories\n\n### OAuth 2.0 Authorization Code Flow\n- [ ] Authorization URL generation with state/PKCE\n- [ ] Token exchange with valid/invalid codes\n- [ ] Refresh token flow\n- [ ] Token expiration handling\n- [ ] Scope validation\n\n### OAuth 2.0 Client Credentials Flow\n- [ ] Token acquisition\n- [ ] Caching and refresh\n\n### OAuth 1.0a Flow (Twitter/legacy)\n- [ ] Request token acquisition\n- [ ] User authorization redirect\n- [ ] Access token exchange\n- [ ] Signature generation (HMAC-SHA1)\n\n### Token Management\n- [ ] Token storage/retrieval\n- [ ] Token validation\n- [ ] Secure token handling (no disk writes)\n\n### Error Handling\n- [ ] Invalid client credentials\n- [ ] Expired tokens\n- [ ] Revoked tokens\n- [ ] Network failures\n- [ ] Rate limits\n\n## Mocking Strategy\n- Use wiremock to mock OAuth provider endpoints\n- Test against mock Google, GitHub, Twitter, Slack endpoints\n- Inject errors at each stage of flows\n\n## Coverage Target: \u003e90%","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-11T12:12:33.654746783-05:00","created_by":"ubuntu","updated_at":"2026-01-15T03:22:36.61585799-05:00","closed_at":"2026-01-15T03:22:36.61585799-05:00","close_reason":"OAuth functionality is connector-specific, not a platform crate. OAuth testing belongs in individual connector test suites.","dependencies":[{"issue_id":"flywheel_connectors-shj4","depends_on_id":"flywheel_connectors-lj2","type":"blocks","created_at":"2026-01-11T12:20:56.127521871-05:00","created_by":"ubuntu"}]}
{"id":"flywheel_connectors-soft","title":"fcp.airtable: Flexible Database and Spreadsheet Connector","description":"# fcp.airtable - Airtable Connector (FCP2)\n\n## Goal\nBuild a production-grade Airtable connector that is **fully FCP2-compliant** and safe for ops/workflow automation.\n\nHard requirements:\n- **Single-zone binding**: one connector instance ↔ exactly one `ZoneId`.\n- **Default deny**: every operation requires explicit CapabilityTokens.\n- **Sandbox + NetworkConstraints** enforced mechanically (egress proxy; no raw sockets in strict/moderate).\n- **Secrets never touch disk**; never appear in logs.\n\n## Manifest archetypes (closed set)\n- `storage` (records as structured data)\n- `operational` (schema discovery, queries, view operations)\n- `streaming` (webhook/event ingestion)\n\n\u003e Note: “request-response” and “webhook” are interaction patterns, not manifest archetype values.\n\n## Threat model / safety notes\nAirtable is a \"semi-structured database\" for real business data:\n- attachments can contain sensitive content\n- collaborator/user info can be PII\n- schema changes and deletes are high risk\n\nDesign requirements:\n- capability tiers separate **read**, **write**, and **dangerous** operations\n- redaction defaults must prevent leaking record bodies/attachments into logs\n\n---\n\n## Overview\nFull-featured Airtable connector enabling agents to work with flexible databases that combine the simplicity of spreadsheets with the power of relational databases.\n\nPrimary use cases:\n- ops tracking / project management\n- CRM-like workflows\n- ad-hoc data storage\n\n## Interaction patterns (non-archetype)\n**Request/Response + Webhook**\n| Pattern | Use Case |\n|---------|----------|\n| Request-Response | CRUD operations on bases, tables, records |\n| Webhook | Record created/updated/deleted events |\n\n## Key Operations\n\n### Base Operations\n- `airtable.bases.list` - List accessible bases\n- `airtable.bases.get` - Get base schema\n- `airtable.bases.create` - Create new base (Enterprise only)\n\n### Table Operations\n- `airtable.tables.list` - List tables in base\n- `airtable.tables.get` - Get table schema\n- `airtable.tables.create` - Create table\n- `airtable.tables.update` - Update table (rename, description)\n\n### Field Operations\n- `airtable.fields.list` - List table fields\n- `airtable.fields.create` - Add field to table\n- `airtable.fields.update` - Update field options\n\n### Record Operations\n- `airtable.records.list` - List records with filters/sort\n- `airtable.records.get` - Get record by ID\n- `airtable.records.create` - Create single record\n- `airtable.records.create_batch` - Create up to 10 records\n- `airtable.records.update` - Update single record\n- `airtable.records.update_batch` - Update up to 10 records\n- `airtable.records.upsert` - Create or update by key field\n- `airtable.records.delete` - Delete record\n- `airtable.records.delete_batch` - Delete up to 10 records\n\n### View Operations\n- `airtable.views.list` - List table views\n- `airtable.views.get` - Get view configuration\n- `airtable.views.records` - Get records through view (pre-filtered)\n\n### Attachment Operations\n- `airtable.attachments.upload` - Upload file to attachment field\n- `airtable.attachments.get` - Get attachment URL\n\n### Formula \u0026 Computation\n- `airtable.formula.validate` - Validate formula syntax\n- `airtable.rollup.compute` - Compute rollup values\n- `airtable.lookup.resolve` - Resolve lookup values\n\n### Webhook Operations\n- `airtable.webhook.create` - Register webhook\n- `airtable.webhook.list` - List webhooks\n- `airtable.webhook.delete` - Remove webhook\n- `airtable.webhook.payloads` - Get webhook payload history\n\n### Automation Operations (Enterprise)\n- `airtable.automations.list` - List automations\n- `airtable.automations.runs` - Get automation run history\n\n## Field Type Support\n\n### Standard Fields\n| Type | Read | Write | Notes |\n|------|------|-------|-------|\n| Single line text | ✓ | ✓ | |\n| Long text | ✓ | ✓ | Markdown support |\n| Attachment | ✓ | ✓ | Upload via URL |\n| Checkbox | ✓ | ✓ | Boolean |\n| Multiple select | ✓ | ✓ | Array of options |\n| Single select | ✓ | ✓ | Single option |\n| Date | ✓ | ✓ | ISO format |\n| Phone number | ✓ | ✓ | |\n| Email | ✓ | ✓ | |\n| URL | ✓ | ✓ | |\n| Number | ✓ | ✓ | Integer or decimal |\n| Currency | ✓ | ✓ | With currency symbol |\n| Percent | ✓ | ✓ | 0-100 or decimal |\n| Duration | ✓ | ✓ | In seconds |\n| Rating | ✓ | ✓ | 1-5 or 1-10 |\n| Barcode | ✓ | ✓ | Text with barcode display |\n\n### Linked Fields\n| Type | Read | Write | Notes |\n|------|------|-------|-------|\n| Link to another record | ✓ | ✓ | Array of record IDs |\n| Lookup | ✓ | ✗ | Computed from linked |\n| Rollup | ✓ | ✗ | Aggregation of linked |\n| Count | ✓ | ✗ | Count of linked |\n\n### Computed Fields\n| Type | Read | Write | Notes |\n|------|------|-------|-------|\n| Formula | ✓ | ✗ | Computed value |\n| Auto number | ✓ | ✗ | Sequential |\n| Created time | ✓ | ✗ | Automatic |\n| Last modified time | ✓ | ✗ | Automatic |\n| Created by | ✓ | ✗ | Automatic |\n| Last modified by | ✓ | ✗ | Automatic |\n\n## Query Language\n\n### Filter Formulas\n```\n// Find all records where Status is \"Active\"\n{Status} = \"Active\"\n\n// Find records with Due Date in next 7 days\nIS_BEFORE({Due Date}, DATEADD(TODAY(), 7, \"days\"))\n\n// Find records where Priority \u003e 3\n{Priority} \u003e 3\n\n// Complex filter\nAND({Status} = \"Open\", {Assignee} = BLANK())\n```\n\n### Sorting\n```rust\nAirtableQuery::new()\n    .filter(\"{Status} = Active\")\n    .sort(\"Priority\", Desc)\n    .sort(\"Created\", Asc)\n    .page_size(100)\n```\n\n## Zone model (single-zone; policy-owned naming)\nThis connector is **single-zone bound**. Any “zone architecture” below is informational guidance about typical data sensitivity, not a multi-zone runtime model.\n\nRecommended zone patterns (policy-owned):\n- `z:work:airtable:\u003cworkspace\u003e`\n- `z:project:\u003cname\u003e:airtable`\n\n## External surface (mechanical)\n### NetworkConstraints\nDefault-deny; allow only the explicit Airtable endpoints required:\n- Airtable API host(s) (HTTPS)\n- Attachment download hosts (must be enumerated/pinned; attachment URLs must be validated as HTTPS and bounded)\n\n### Credential injection\n- Personal access token or OAuth token via `CredentialId`.\n- Never persist tokens.\n\n## Capability mapping (illustrative)\nCapability IDs MUST NOT encode hosts/ports.\n\nSuggested families:\n- `airtable.schema.read` / `airtable.schema.write` (Dangerous)\n- `airtable.records.read` / `airtable.records.write`\n- `airtable.records.delete` (Dangerous)\n- `airtable.attachments.read` / `airtable.attachments.write` (Dangerous)\n- `airtable.webhooks.manage` (Dangerous)\n\n## Rate limiting\n- Enforce Airtable limits mechanically.\n- Use batching and backpressure; never retry blindly.\n\n## Integration patterns\n### Beads ↔ Airtable Sync (optional)\n```\nAirtable Table \"Tasks\" \u003c-----\u003e Flywheel Beads\n    |                              |\n    +-- Name ---------------\u003e title\n    +-- Notes --------------\u003e description\n    +-- Status -------------\u003e status (mapped)\n    +-- Priority -----------\u003e priority\n    +-- Assignee -----------\u003e assignee\n    +-- Due Date -----------\u003e due_date\n```\n\n## Testing strategy (MUST)\n- Mock-only unit/integration tests (wiremock or deterministic fake API).\n- E2E compliance run through the shared Mechanical Connector Compliance Runner:\n  - default deny\n  - NetworkConstraints enforcement\n  - receipts/audit for writes/dangerous ops\n  - structured JSON logs with correlation IDs\n\n## Success Criteria\n- The epic includes (or references) the standard base beads `.1`..`.4` per `flywheel_connectors-lszk.5`.\n- The connector passes `flywheel_connectors-1n78.21.5` (static + dynamic) and has an E2E compliance run wired through `flywheel_connectors-e3i9`.\n- Unit/integration tests are mock-only (no real external calls) and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-11T21:40:08.386425235-05:00","created_by":"ubuntu","updated_at":"2026-01-15T08:37:56.778554363-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-soft","depends_on_id":"flywheel_connectors-lj2","type":"blocks","created_at":"2026-01-11T22:08:01.937211059-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-soft","depends_on_id":"flywheel_connectors-vi7","type":"blocks","created_at":"2026-01-11T22:08:01.963620477-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-soft","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T22:08:01.98856127-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-soft","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T22:08:02.015881373-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-soft","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:29:38.648751945-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-soft","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T04:04:14.526050953-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-soft","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T04:04:14.725222222-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-soft","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T04:04:14.920579055-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-soft","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T04:04:15.089418565-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-soft","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T04:04:15.27145206-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-soft","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T04:04:15.433782919-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-soft.1","title":"fcp.airtable: Manifest + Capability Map (FCP2)","description":"# fcp.airtable: Manifest + Capability Map (FCP2)\n\n## Goal\nLock down the Airtable connector’s **mechanical contract** so the platform can sandbox, authorize, and test it deterministically.\n\n## Required contents\n- Manifest archetypes: `storage`, `operational`, `streaming`.\n- Operation list + schema IDs.\n- Capability families + per-operation required caps.\n- NetworkConstraints:\n  - allow Airtable API host(s)\n  - explicitly handle attachment download hosts (enumerate/pin; HTTPS-only; bounded)\n- State model declaration for webhooks (if webhook cursors/subscription state is persisted).\n\n## Outputs\n- Complete manifest spec stored in this bead.\n- Good/bad manifest examples for static compliance.\n\n## Acceptance Criteria\n- Another engineer can implement `--manifest` from this bead alone.\n- Static compliance runner has enough detail to reject unsafe NetworkConstraints.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:01:31.248159569-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:01:31.248159569-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-soft.1","depends_on_id":"flywheel_connectors-soft","type":"parent-child","created_at":"2026-01-15T04:01:31.249501618-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-soft.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T04:02:04.610296121-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-soft.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T04:02:04.772647549-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-soft.2","title":"fcp.airtable: Provisioning Automation (token/OAuth)","description":"# fcp.airtable: Provisioning Automation (token/OAuth)\n\n## Goal\nAutomate Airtable onboarding with minimal human steps while keeping secrets zone-scoped.\n\n## Requirements\n- Accept either:\n  - personal access token, or\n  - OAuth2 flow (if enabled by platform)\n- All secrets via `CredentialObject`/`CredentialId` (egress proxy injection preferred).\n- Validate credentials with safe read-only calls.\n- Validate NetworkConstraints.\n\n## Acceptance Criteria\n- `fcp doctor` can verify readiness without leaking secrets.\n- Fully mockable for unit tests.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:01:38.49759713-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:56.841777834-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-soft.2","depends_on_id":"flywheel_connectors-soft","type":"parent-child","created_at":"2026-01-15T04:01:38.49882339-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-soft.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T04:02:04.952090543-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-soft.3","title":"TEST: Airtable Connector Unit/Integration Tests (mock-only)","description":"# TEST: Airtable Connector Unit/Integration Tests (mock-only)\n\n## Must cover\n- Manifest determinism + interface_hash.\n- Pagination and batch operations.\n- Filter formula encoding.\n- Rate limit behavior (429 + Retry-After).\n- Attachment handling:\n  - URL validation\n  - bounded downloads\n  - NetworkConstraints allow/deny matrix\n- Redaction (no tokens, no record bodies by default).\n\n## Logging\nStructured JSON logs with correlation IDs; include request/response metadata (redacted) and latency.\n\n## Acceptance Criteria\n- Deterministic in CI.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:01:45.908184554-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:01:45.908184554-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-soft.3","depends_on_id":"flywheel_connectors-soft","type":"parent-child","created_at":"2026-01-15T04:01:45.909405684-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-soft.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T04:02:05.125974766-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-soft.4","title":"E2E: Airtable Connector Compliance Run","description":"# E2E: Airtable Connector Compliance Run\n\n## Goal\nAdd Airtable scenarios to the shared connector compliance runner.\n\n## Scenarios\n- Default deny.\n- Allow with valid token.\n- Network guard allow/deny (including attachment host allowlist).\n- Writes emit receipts/audit.\n\n## Acceptance Criteria\n- `cargo test --package fcp-e2e --features airtable` passes deterministically.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:01:52.779401863-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:01:52.779401863-05:00","labels":["conformance","connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-soft.4","depends_on_id":"flywheel_connectors-soft","type":"parent-child","created_at":"2026-01-15T04:01:52.780973113-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-soft.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T04:02:05.352908534-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ssb","title":"fcp.homeassistant: Integration aggregation layer for 2000+ device types","description":"# fcp.homeassistant: Integration aggregation layer for 2000+ device types (FCP2)\n\n## Goal\nProvide a unified, typed abstraction over Home Assistant’s entity/service model so the connector can support thousands of device integrations without bespoke code for each.\n\n## Scope\n- Entity registry discovery:\n  - list entities with domain/area/device metadata\n  - expose stable identifiers\n- Domain capability mapping:\n  - map entity domains to capability families (read vs write vs security-adjacent)\n- Normalized “device control” schema:\n  - a small set of generic operations covers most integrations\n\n## Capability model (illustrative)\n- `ha.entities.read`\n- `ha.entities.write` (dangerous-ish)\n- `ha.services.call` (dangerous-ish)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned to configured HA host.\n- Strict safety for security-adjacent domains (locks, alarms) must be policy-owned and approval gated.\n\n## Deliverables\n- Canonical types:\n  - `HaEntityRef`, `HaEntityState`, `HaServiceCall`\n- Operation schemas:\n  - `ha.entity.list`\n  - `ha.entity.get`\n  - `ha.entity.capabilities.get`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - entity registry parsing\n  - domain mapping correctness\n  - redaction of sensitive attributes\n\n## Acceptance criteria\n- The connector can support new HA integrations without adding new per-device code paths.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:17:53.264332972-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:42:22.862267534-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-ssb","depends_on_id":"flywheel_connectors-ortf","type":"parent-child","created_at":"2026-01-15T02:33:22.714935015-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ssb","depends_on_id":"flywheel_connectors-ortf.1","type":"blocks","created_at":"2026-01-15T04:42:26.816508516-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-sy4","title":"fcp.sentry: Auto-create Beads from Sentry issues","description":"# fcp.sentry: Auto-create Beads from Sentry issues (FCP2)\n\n## Goal\nAutomatically translate Sentry signals into actionable Flywheel Beads so:\n- new high-severity issues become tracked work\n- alerts create structured tasks with context\n- the system can route work to agents/humans with auditability\n\n## Trigger sources\n- Sentry webhooks:\n  - issue created / regressed\n  - alert triggered\n  - release deployed with elevated error rate\n\n## Core behavior\n- Create a new Bead when:\n  - severity ≥ configured threshold, OR\n  - rule/alert matches configured criteria\n- Deduplicate:\n  - same Sentry issue id should map to a single Bead\n  - repeated webhook deliveries must be idempotent\n- Update existing Bead when:\n  - issue status changes (resolved/regressed)\n  - assignee changes\n  - new release correlation is detected\n\n## Mapping (minimum viable)\n- Bead title: Sentry issue title (tainted)\n- Bead body: sanitized summary + links to Sentry\n- Labels: project/environment/severity\n- Priority: derived from Sentry priority/severity\n- External ref: store Sentry issue id/key\n\n## Connector state model\n- Persist a mapping table:\n  - `sentry_issue_id ↔ bead_id`\n  - last_seen_event_id (for idempotency)\n  - last_sync_fingerprint\n- Use singleton-writer lease semantics if the connector runs in multiple placements.\n\n## Capability model (illustrative)\n- `sentry.webhooks.read` (webhook ingestion)\n- `beads.write` (creating/updating Beads) — **internal platform capability**, still must be explicit\n\n## FCP2 requirements\n- Webhook payloads are tainted by default.\n- No PII/secrets in logs.\n- Any downstream “dangerous action” must NOT be triggered solely by webhook input without ApprovalToken.\n  - This bead is limited to creating/updating Beads (safe), not auto-remediation.\n\n## Deliverables\n- Operation schema:\n  - `sentry.webhook.ingest`\n  - `sentry.beads.upsert_from_issue`\n- Structured logging:\n  - correlation_id per webhook delivery\n  - reason codes for dedupe/skip/deny\n\n## Test strategy (MUST)\n- Mock-only webhook replay tests:\n  - duplicate deliveries are idempotent\n  - out-of-order deliveries do not corrupt state\n- Mapping tests:\n  - severity → priority mapping\n  - sanitization/redaction\n- Lease/state tests:\n  - two-writer conflict prevention\n\n## Acceptance criteria\n- A single Sentry issue reliably results in exactly one Bead.\n- The system remains safe under malicious/unexpected webhook inputs.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:15:37.408005388-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:30:22.042892978-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-sy4","depends_on_id":"flywheel_connectors-lszk.3","type":"parent-child","created_at":"2026-01-15T02:30:42.25871804-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-sy4","depends_on_id":"flywheel_connectors-lszk.3.1","type":"blocks","created_at":"2026-01-15T04:30:30.421060806-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-sy4","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T04:30:30.740079574-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-t11","title":"fcp.arxiv: Author information and publication history","description":"# fcp.arxiv: Author information and publication history (FCP2)\n\n## Goal\nProvide author-centric discovery:\n- list papers by author name\n- fetch author publication history (bounded)\n- optional: infer topics/categories distribution\n\n## Scope\n- Search papers by author filter.\n- Aggregate author stats:\n  - papers per category\n  - publication timeline\n- Optional: disambiguation hints (best-effort).\n\n## Capability model (illustrative)\n- `arxiv.author.read`\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- Output bounded:\n  - max papers returned\n  - stable ordering\n\n## Deliverables\n- Operation schemas:\n  - `arxiv.author.papers.list`\n  - `arxiv.author.stats`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - author query encoding\n  - bounds enforcement\n\n## Acceptance criteria\n- Author history queries are reliable, bounded, and deterministic.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:14:34.491390448-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:49:16.272582538-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-t11","depends_on_id":"flywheel_connectors-8yxg","type":"parent-child","created_at":"2026-01-15T02:32:23.514644007-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-t11","depends_on_id":"flywheel_connectors-8yxg.1","type":"blocks","created_at":"2026-01-15T04:49:21.65417533-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-t690","title":"TEST: fcp-host Unit Test Suite","description":"# TEST: fcp-host Unit Test Suite\n\n## Scope\nUnit tests for the Gateway/Orchestrator implementation.\n\n## Test Categories\n\n### Connector Supervisor\n- [ ] Connector process spawning\n- [ ] Process termination handling\n- [ ] Health monitoring\n- [ ] Restart policy enforcement\n- [ ] Resource limit enforcement\n- [ ] Crash detection and recovery\n\n### IPC Hub\n- [ ] Message routing correctness\n- [ ] Request/response correlation\n- [ ] Timeout handling\n- [ ] Event fan-out\n- [ ] Connection lifecycle\n\n### Zone Enforcer\n- [ ] Zone configuration loading\n- [ ] Request zone validation\n- [ ] Cross-zone policy enforcement\n- [ ] Data flow control\n\n### Capability Verifier\n- [ ] Token parsing\n- [ ] Signature verification\n- [ ] Capability scope checking\n- [ ] Constraint enforcement\n- [ ] Expiration handling\n\n### Sandbox Manager\n- [ ] Filesystem isolation setup\n- [ ] Network filtering rules\n- [ ] Configuration generation\n\n### Agent API\n- [ ] HTTP endpoint routing\n- [ ] WebSocket handling\n- [ ] Request validation\n- [ ] Response formatting\n- [ ] Error handling\n\n### Connector Registry\n- [ ] Manifest parsing\n- [ ] Signature verification\n- [ ] Version comparison\n- [ ] Discovery\n\n## Mocking Strategy\n- Mock connector processes\n- Mock IPC communications\n- Inject various failure modes\n\n## Coverage Target: \u003e90%\n\n## Dependencies\n- fcp-core (must be stable first)\n\n## Acceptance Criteria\n- Runs deterministically in CI (no flake due to timing/network).\n- Uses mocks only (no real external network).\n- Emits structured JSON logs per `flywheel_connectors-1n78.35` with stable `test_name` identifiers.\n","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-11T12:31:49.774217315-05:00","created_by":"ubuntu","updated_at":"2026-01-15T05:28:11.276102425-05:00","labels":["fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-t690","depends_on_id":"flywheel_connectors-oip0","type":"blocks","created_at":"2026-01-11T12:32:11.593968844-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-t690","depends_on_id":"flywheel_connectors-oip0","type":"parent-child","created_at":"2026-01-15T01:57:03.800822868-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-t690","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:23:55.995695538-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-t77","title":"fcp.jira: Comment and attachment handling","description":"# fcp.jira: Comment and attachment handling (FCP2)\n\n## Goal\nAdd first-class support for Jira issue **comments** and **attachments**, including safe upload/download flows that preserve FCP2 security invariants.\n\nComments and attachments are high-leverage for real workflows, but they also carry:\n- PII risk\n- large binary payload risk\n- data exfil risk\n\n## Scope\n### Comments\n- List comments for an issue (pagination).\n- Create/update/delete comments (with visibility rules when supported).\n- Convert between:\n  - Jira Cloud ADF (Atlassian Document Format)\n  - a canonical connector representation (e.g., markdown + structured spans)\n\n### Attachments\n- List attachments for an issue (metadata only).\n- Download attachment content (streamed; size limits; hash).\n- Upload attachment (streamed; content-type allowlist; filename sanitization).\n- Delete attachment (dangerous; approval-gated).\n\n## Capability model (illustrative)\n- `jira.comments.read`\n- `jira.comments.write`\n- `jira.attachments.read`\n- `jira.attachments.write` (dangerous: data egress into Jira)\n- `jira.attachments.delete` (dangerous)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned to Jira base hostname and any attachment host if distinct.\n- No secrets in logs.\n- **Binary safety**:\n  - enforce max download size; abort early\n  - enforce max upload size; abort early\n  - compute content hash for receipts/audit evidence\n- **Taint model**:\n  - comment bodies and attachment filenames are tainted inputs\n  - do not allow tainted text to trigger dangerous operations without approval\n\n## Deliverables\n- Operation schemas:\n  - `jira.comment.list`\n  - `jira.comment.create`\n  - `jira.comment.update`\n  - `jira.comment.delete`\n  - `jira.attachment.list`\n  - `jira.attachment.download`\n  - `jira.attachment.upload`\n  - `jira.attachment.delete`\n- Streaming download/upload helpers compatible with sandboxed IO.\n\n## Test strategy (MUST)\n### Unit/integration (mock-only)\n- ADF ↔ markdown conversion golden tests.\n- Upload tests:\n  - filename normalization\n  - content-type allowlist\n  - size limits\n- Download tests:\n  - streaming behavior\n  - early abort on oversized content\n  - hash correctness\n\n### Compliance\n- Any write/delete emits OperationReceipt + AuditEvent with:\n  - issue key\n  - comment id / attachment id\n  - content hash (never raw content)\n\n## Acceptance criteria\n- Comments round-trip through conversion without losing critical structure.\n- Attachment IO is streaming + bounded (no unbounded buffering).\n- Dangerous operations are capability + (policy) approval gated and audited.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:14:36.945048831-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:14:58.155063119-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-t77","depends_on_id":"flywheel_connectors-x9af","type":"parent-child","created_at":"2026-01-15T02:28:43.504325025-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-t77","depends_on_id":"flywheel_connectors-x9af.1","type":"blocks","created_at":"2026-01-15T04:15:02.617584239-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-thy","title":"fcp.twilio: SMS sending and receiving","description":"# fcp.twilio: SMS sending and receiving (FCP2)\n\n## Goal\nProvide core SMS/MMS capabilities:\n- send outbound SMS (and MMS when enabled)\n- read message status/history\n- support inbound SMS via webhook-driven event flow (ingest handled in `flywheel_connectors-ugp`)\n\n## Scope\n### Outbound\n- Send SMS to a single destination.\n- Optional: bulk send with batching + rate limiting.\n- Support idempotency keys to prevent duplicate sends.\n\n### Status / history\n- Get message details by SID.\n- List messages with filters (date range, to/from).\n\n### Media (MMS)\n- List/download media attachments (bounded + host pinned).\n\n## Capability model (illustrative)\n- `twilio.sms.send`\n- `twilio.sms.read`\n- `twilio.sms.media.read`\n\nPolicy guidance:\n- Outbound send is a real-world side effect; many orgs require approval for certain destinations.\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned to Twilio API host(s) and explicit media hosts.\n- For sends:\n  - receipts + audit events with message SID + to/from hashes (never raw phone numbers in logs)\n  - strict log redaction for phone numbers and message bodies\n- Taint model:\n  - inbound message bodies are tainted by default\n\n## Deliverables\n- Operation schemas:\n  - `twilio.sms.send`\n  - `twilio.sms.get`\n  - `twilio.sms.list`\n  - `twilio.sms.media.list`\n  - `twilio.sms.media.download`\n- Idempotency strategy:\n  - stable client idempotency key → dedupe cache/state\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - send request formation\n  - idempotency behavior\n  - status polling\n  - media download size limits\n  - secret/PII redaction in logs\n\n## Acceptance criteria\n- Duplicate sends are mechanically prevented via idempotency.\n- Logs and receipts never leak phone numbers or message bodies.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:14:47.703226105-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:31:34.345717153-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-thy","depends_on_id":"flywheel_connectors-otqy","type":"parent-child","created_at":"2026-01-15T02:29:05.730055255-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-thy","depends_on_id":"flywheel_connectors-otqy.1","type":"blocks","created_at":"2026-01-15T04:31:39.59406575-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-thy","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T04:31:39.914268509-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-u133","title":"TEST: Revocation System Unit/Integration Tests","description":"## Overview\n\nComprehensive test suite for Revocation System (i4zm). This is CRITICAL security testing.\n\n## Test Categories\n\n### 1. RevocationObject Tests\n- **Creation**: Valid revocation with owner signature\n- **Signature validation**: Only owner can sign revocations\n- **Scope variants**: Test all RevocationScope types\n- **Effective timing**: effective_at in past/present/future\n- **Expiry handling**: Temporary vs permanent revocations\n\n### 2. RevocationEvent Chain Tests\n- **Chain integrity**: Hash links verified\n- **Monotonic seq**: seq always increases\n- **Chain traversal**: Full history retrievable\n- **Concurrent additions**: No forks in chain\n\n### 3. RevocationHead Tests\n- **Quorum validation**: Requires N-of-M signatures\n- **Freshness comparison**: head_seq comparison works\n- **Head updates**: New events create new heads\n- **Cross-zone heads**: Separate chains per zone\n\n### 4. RevocationRegistry Tests\n- **Bloom filter accuracy**: No false negatives\n- **is_revoked() correctness**: True positives work\n- **Fast path performance**: Bloom filter ~O(1)\n- **Registry persistence**: Survives restart\n- **Registry rebuild**: Reconstruct from chain\n\n### 5. Enforcement Point Tests\n- **Capability verification**: Revoked tokens rejected\n- **Freshness check**: Stale revocation state detected\n- **All scopes enforced**: Each scope type enforced correctly\n- **Timing edge cases**: effective_at boundary conditions\n\n### 6. Propagation Tests\n- **Gossip priority**: Revocations propagate quickly\n- **Network partition**: Revocations merge after heal\n- **Duplicate handling**: Same revocation received twice\n- **Order independence**: Out-of-order delivery handled\n\n### 7. Use Case Tests\n- **Capability revocation**: Token revoke → immediate rejection\n- **IssuerKey revocation**: Node can't mint new tokens\n- **NodeAttestation revocation**: Complete device removal\n- **ZoneKey revocation**: Forces key rotation\n- **ConnectorBinary revocation**: Binary hash blocked\n\n## Logging Requirements\n\nAll tests emit structured JSON:\n```json\n{\n  \"test\": \"test_revocation_enforcement\",\n  \"scope\": \"Capability\",\n  \"revoked_object_id\": \"objectid:...\",\n  \"enforcement_point\": \"verify_capability_token\",\n  \"result\": \"rejected_as_expected\",\n  \"timing_us\": 45\n}\n```\n\n## Security-Focused Tests\n\n- **Replay attacks**: Old revocation can't un-revoke\n- **Signature bypass**: Unsigned revocations rejected\n- **Scope escalation**: Capability scope can't revoke zone key\n- **Clock attacks**: Manipulated timestamps detected\n\n## Acceptance Criteria\n\n- [ ] All RevocationScope variants tested\n- [ ] Chain integrity verified\n- [ ] Quorum signatures tested\n- [ ] All enforcement points verified\n- [ ] Propagation tested\n- [ ] Use cases validated\n- [ ] Security tests comprehensive\n- [ ] Structured JSON logging in all tests","status":"closed","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:45:10.987703687-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:47:44.198369215-05:00","closed_at":"2026-01-15T04:47:44.198369215-05:00","close_reason":"Duplicate of 36x3 which is already comprehensive","dependencies":[{"issue_id":"flywheel_connectors-u133","depends_on_id":"flywheel_connectors-i4zm","type":"blocks","created_at":"2026-01-15T04:45:18.043148479-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-u133","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T04:45:18.301820265-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-u4ej","title":"TEST: DeviceProfile Unit Tests (Capability Reporting, Resource Constraints, Fitness)","description":"# TEST: DeviceProfile Unit Tests\n\n## Scope\nComprehensive unit tests for DeviceProfile type and execution fitness calculations.\n\n## Test Categories\n\n### Capability Reporting\n- [ ] Profile correctly reports CPU cores\n- [ ] Profile correctly reports memory\n- [ ] Profile correctly reports storage\n- [ ] Profile correctly reports network capability\n- [ ] Profile correctly reports sandbox support (OS/WASI)\n\n### Resource Constraints\n- [ ] Constraint checking for CPU-bound connectors\n- [ ] Constraint checking for memory-bound connectors\n- [ ] Constraint checking for storage-bound connectors\n- [ ] Constraint checking for network-dependent connectors\n- [ ] Combined constraint validation\n\n### Execution Fitness\n- [ ] Fitness score calculation is deterministic\n- [ ] Higher-spec device scores higher\n- [ ] Missing capabilities result in zero fitness\n- [ ] Fitness ranking orders devices correctly\n- [ ] Tie-breaking uses node_id for determinism\n\n### Profile Serialization\n- [ ] Round-trip serialization preserves all fields\n- [ ] Schema hash is stable\n- [ ] Malformed profile data is rejected\n\n## Golden Vectors\nLocation: `tests/vectors/device_profile/`\n- `device_profile_full.cbor`\n- `device_profile_minimal.cbor`\n- `fitness_calculation_vectors.json`\n\n## Logging Requirements\n```json\n{\n  \"timestamp\": \"RFC3339\",\n  \"test_name\": \"test_execution_fitness\",\n  \"phase\": \"execute\",\n  \"correlation_id\": \"uuid\",\n  \"device_profile\": {...},\n  \"connector_requirements\": {...},\n  \"fitness_score\": 0.85,\n  \"result\": \"pass\"\n}\n```\n\n## Acceptance Criteria\n- All DeviceProfile fields tested\n- Fitness calculation has golden vectors\n- No panics on malformed profiles\n\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:24:50.434778061-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:24:50.434778061-05:00","labels":["fcp2","mesh","mvp","testing"],"dependencies":[{"issue_id":"flywheel_connectors-u4ej","depends_on_id":"flywheel_connectors-wwq8","type":"blocks","created_at":"2026-01-15T03:24:56.738232992-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-u4ej","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:24:56.824674974-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-u56","title":"fcp.notion: Notion Workspace Connector","description":"# fcp.notion - Notion Workspace Connector (FCP2)\n\n## Goal\nProvide an FCP2-compliant Notion connector for knowledge base and database automation under strict zone isolation.\n\n## Manifest archetypes (closed set)\n- `knowledge`\n- `storage`\n- `operational`\n\n## Zone model\n- Single-zone bound: one connector instance ↔ one `ZoneId`.\n- Recommended: one instance per Notion workspace or per shared-space boundary (policy-owned).\n\n## External surface\n### NetworkConstraints\nDefault-deny; allow only `api.notion.com:443` (and any additional Notion endpoints required by the chosen auth mode).\n\n### Credential injection\n- OAuth token or internal integration token via `CredentialId`.\n\n## Capability model (illustrative)\n- `notion.pages.read` / `notion.pages.write`\n- `notion.databases.read` / `notion.databases.write`\n- `notion.blocks.write`\n- `notion.search.read` (sensitive)\n- `notion.users.read` (PII)\n\n## Operations (representative)\n- pages: create/get/update/archive, children list/append\n- databases: create/get/update/query, items create/update\n- blocks: get/update/delete, children list/append\n- search\n\n## Safety + retries\n- Rate limits enforced.\n- Writes emit receipts/audit.\n\n## Tests\n- Mock-only unit/integration tests with wiremock.\n- E2E compliance run validates default deny + NetworkConstraints + receipts.\n\n## Acceptance Criteria\n- Passes connector compliance runner.\n- Deterministic tests; no live Notion calls in unit tests.\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-11T10:55:27.08326783-05:00","created_by":"ubuntu","updated_at":"2026-01-15T08:37:56.907335576-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-u56","depends_on_id":"flywheel_connectors-lj2","type":"blocks","created_at":"2026-01-11T10:55:38.801413001-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-u56","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T10:55:43.117556505-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-u56","depends_on_id":"flywheel_connectors-iv7","type":"blocks","created_at":"2026-01-11T10:55:47.57532386-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-u56","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T10:55:51.196138591-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-u56","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T01:23:43.946768998-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-u56","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:40:12.170366891-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-u56","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:40:12.313143376-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-u56","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T03:40:12.457879993-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-u56","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:40:12.599238688-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-u56","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T03:40:12.750006777-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-u56","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T03:40:12.88774989-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-u56.1","title":"fcp.notion: Manifest + Capability Map (FCP2)","description":"# fcp.notion: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the Notion connector manifest contract:\n- archetypes (`knowledge`, `storage`, `operational`)\n- operations + schema IDs\n- capability families + per-operation caps\n- NetworkConstraints allowlist\n\n## Acceptance Criteria\n- Complete manifest spec stored here.\n- Good/bad manifest examples exist for static compliance.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:40:21.091473378-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:40:21.091473378-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-u56.1","depends_on_id":"flywheel_connectors-u56","type":"parent-child","created_at":"2026-01-15T03:40:21.09265273-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-u56.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:40:56.993936174-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-u56.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:40:57.140161236-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-u56.2","title":"fcp.notion: Provisioning Automation (OAuth/token)","description":"# fcp.notion: Provisioning Automation (OAuth/token)\n\n## Goal\nAutomate auth onboarding:\n- OAuth token or internal integration token via `CredentialId`\n- validate scopes and NetworkConstraints\n\n## Acceptance Criteria\n- `fcp doctor` validates readiness.\n- Mockable.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:40:26.092144779-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:56.96949947-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-u56.2","depends_on_id":"flywheel_connectors-u56","type":"parent-child","created_at":"2026-01-15T03:40:26.093394443-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-u56.3","title":"fcp.notion: Core Pages/Databases/Blocks","description":"# fcp.notion: Core Pages/Databases/Blocks\n\n## Goal\nImplement core operations:\n- pages CRUD + children list/append\n- databases CRUD + query\n- blocks update/delete + children list/append\n\n## Requirements\n- Capability gated.\n- Writes emit receipts/audit.\n- Rate limits enforced.\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:40:32.685029511-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:28:12.514003807-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-u56.3","depends_on_id":"flywheel_connectors-u56","type":"parent-child","created_at":"2026-01-15T03:40:32.686246904-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-u56.3","depends_on_id":"flywheel_connectors-u56.1","type":"blocks","created_at":"2026-01-15T03:40:57.297505763-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-u56.4","title":"fcp.notion: Search (sensitive)","description":"# fcp.notion: Search (sensitive)\n\n## Goal\nImplement workspace search.\n\n## Requirements\n- Capability gated.\n- Treat results as sensitive.\n- Strong redaction.\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:40:37.996060822-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:28:14.137776628-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-u56.4","depends_on_id":"flywheel_connectors-u56","type":"parent-child","created_at":"2026-01-15T03:40:38.023074649-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-u56.5","title":"TEST: Notion Connector Unit/Integration Tests (mock-only)","description":"# TEST: Notion Connector Unit/Integration Tests (mock-only)\n\n## Must cover\n- Manifest determinism + interface_hash.\n- Error taxonomy mapping.\n- Redaction.\n\n## Acceptance Criteria\n- Deterministic.\n- Structured JSON logs.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:40:43.388725279-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:40:43.388725279-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-u56.5","depends_on_id":"flywheel_connectors-u56","type":"parent-child","created_at":"2026-01-15T03:40:43.390070163-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-u56.5","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T03:40:57.541222815-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-u56.6","title":"E2E: Notion Connector Compliance Run","description":"# E2E: Notion Connector Compliance Run\n\n## Goal\nAdd Notion scenarios to the shared compliance harness.\n\n## Scenarios\n- Default deny.\n- Allow with valid token.\n- Network guard allow/deny.\n- Writes emit receipts.\n\n## Acceptance Criteria\n- `cargo test --package fcp-e2e --features notion` passes deterministically.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:40:50.8172305-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:40:50.8172305-05:00","labels":["conformance","connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-u56.6","depends_on_id":"flywheel_connectors-u56","type":"parent-child","created_at":"2026-01-15T03:40:50.818673769-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-u56.6","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T03:40:57.751219025-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-uau","title":"fcp.salesforce: Workflow and Process Builder integration","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:18:35.727861303-05:00","created_by":"ubuntu","updated_at":"2026-01-11T12:09:27.2400798-05:00","closed_at":"2026-01-11T12:09:27.2400798-05:00","close_reason":"CONSOLIDATED: All Salesforce sub-features merged into comprehensive parent connector bead flywheel_connectors-4m0 (fcp.salesforce: Salesforce CRM Platform Connector)"}
{"id":"flywheel_connectors-ucp9","title":"TEST: fcp-core Unit Test Suite","description":"# TEST: fcp-core Unit Test Suite\n\n## Scope\nComprehensive unit tests for the FCP core library - the foundation all connectors depend on.\n\n## Test Categories\n\n### Zone System\n- [ ] ZoneId parsing and validation\n- [ ] Zone hierarchy traversal\n- [ ] Trust level calculations\n- [ ] Zone boundary enforcement\n- [ ] Cross-zone access denial\n\n### Capability System\n- [ ] CapabilityId parsing\n- [ ] Capability matching and subsumption\n- [ ] Constraint validation\n- [ ] Resource limit enforcement\n\n### Capability Token (FCT)\n- [ ] Token serialization/deserialization\n- [ ] Ed25519 signature creation\n- [ ] Signature verification (valid/invalid/expired)\n- [ ] Token field validation\n- [ ] Expiration handling\n- [ ] Audience verification\n\n### Protocol Types\n- [ ] HandshakeRequest/Response serialization\n- [ ] InvokeRequest/Response serialization\n- [ ] SubscribeRequest/Response serialization\n- [ ] All message types round-trip correctly\n\n### Error Handling\n- [ ] FcpError code mapping\n- [ ] Error serialization\n- [ ] Retryable error detection\n- [ ] AI recovery hint generation\n\n### Provenance\n- [ ] Taint label propagation\n- [ ] Origin tracking\n- [ ] Causal chain validation\n\n### Introspection\n- [ ] OperationInfo serialization\n- [ ] EventInfo serialization\n- [ ] JSON Schema generation\n- [ ] AI hints formatting\n\n### Connector Traits\n- [ ] FcpConnector trait default implementations\n- [ ] BaseConnector helper methods\n- [ ] Metrics collection accuracy\n\n## Golden Vectors\nLocation: `tests/vectors/core/`\n- `zone_id_valid.json` - Valid ZoneId examples with expected parsing\n- `zone_id_invalid.json` - Invalid ZoneIds that should be rejected\n- `capability_token.cbor` - Serialized capability token\n- `object_header.cbor` - Canonical ObjectHeader\n\n## Fuzz Targets\n- `fuzz_zone_id_parse` - ZoneId parsing with arbitrary input\n- `fuzz_capability_token` - CapabilityToken deserialization\n- `fuzz_object_header` - ObjectHeader parsing\n\n## Logging Requirements\nAll tests MUST emit structured JSON logs:\n```json\n{\n  \"timestamp\": \"RFC3339\",\n  \"level\": \"info|warn|error\",\n  \"test_name\": \"test_zone_id_parsing\",\n  \"module\": \"fcp-core\",\n  \"phase\": \"setup|execute|verify|teardown\",\n  \"correlation_id\": \"uuid\",\n  \"result\": \"pass|fail\",\n  \"duration_ms\": 5,\n  \"assertions_passed\": 10,\n  \"assertions_failed\": 0\n}\n```\n\n### For Zone Tests\n```json\n{\n  \"zone_id\": \"z:work\",\n  \"zone_hash\": \"...\",\n  \"parent_zone\": \"z:owner\"\n}\n```\n\n### For Capability Tests\n```json\n{\n  \"token_id\": \"...\",\n  \"issuer_kid\": \"...\",\n  \"grant_count\": 3,\n  \"expiry\": \"RFC3339\"\n}\n```\n\n## CI Integration\n```bash\ncargo test -p fcp-core -- --nocapture 2\u003e\u00261 | tee test_output.log\njq -s '.' test_output.log \u003e test_results.json\n```\n\n## Coverage Target: \u003e95% (core library is critical)\n\n## Acceptance Criteria\n- All core types have round-trip tests\n- Golden vectors match exactly\n- Fuzz targets run without panics\n- Structured logs produced for all tests\n- No regressions in coverage\n\n","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-11T12:31:49.170323696-05:00","created_by":"ubuntu","updated_at":"2026-01-15T03:30:29.62851056-05:00","labels":["fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-ucp9","depends_on_id":"flywheel_connectors-1n78.4","type":"parent-child","created_at":"2026-01-15T01:57:03.925243479-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ucp9","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:23:55.913357294-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-uek4","title":"TEST: Provenance/Taint Unit Tests (Label Propagation, Approval Enforcement, Sanitizer Receipts)","description":"# TEST: Provenance/Taint Unit Tests\n\n## Goal\nProve that information flow controls work correctly and cannot be bypassed.\n\n## Test Categories\n\n### Provenance Field Handling\n- [ ] origin_zone correctly tracked\n- [ ] current_zone updated on zone crossing\n- [ ] integrity_label correctly propagated\n- [ ] confidentiality_label correctly propagated\n- [ ] taints accumulated correctly\n\n### Taint Flags\n- [ ] PUBLIC_INPUT flag applied to public data\n- [ ] EXTERNAL_INPUT flag applied to external API responses\n- [ ] UNVERIFIED_LINK flag applied to unverified references\n- [ ] USER_SUPPLIED flag applied to user inputs\n- [ ] PROMPT_SURFACE flag applied to data reaching prompts\n- [ ] Flags accumulate (union) correctly\n\n### Label Merge Rules\n- [ ] integrity = MIN(input_integrities) - verified\n- [ ] confidentiality = MAX(input_confidentialities) - verified\n- [ ] Property tests: merge is associative and commutative\n- [ ] Edge cases: empty inputs, single input, many inputs\n\n### Integrity Flow (Biba Model)\n- [ ] Down-flow (high→low integrity): allowed without approval\n- [ ] Up-flow (low→high integrity): requires Elevation approval\n- [ ] Missing elevation approval → rejection with reason_code\n- [ ] Valid elevation approval → allow\n\n### Confidentiality Flow (Bell-LaPadula Model)\n- [ ] Up-flow (low→high confidentiality): allowed without approval\n- [ ] Down-flow (high→low confidentiality): requires Declassification approval\n- [ ] Missing declassification approval → rejection\n- [ ] Valid declassification approval → allow\n\n### ApprovalToken Verification\n- [ ] scope = Elevation: validates integrity transition\n- [ ] scope = Declassification: validates confidentiality transition\n- [ ] from_label/to_label binding enforced\n- [ ] Time validity (iat/exp) enforced\n- [ ] Signature verification succeeds/fails correctly\n\n### SanitizerReceipt Verification\n- [ ] Receipt covers input object IDs\n- [ ] Receipt from authorized sanitizer\n- [ ] Receipt within validity period\n- [ ] Taint flags correctly reduced after sanitization\n- [ ] Partial sanitization (some taints remain) handled\n\n### Cross-Zone Operations\n- [ ] Zone crossing requires appropriate approvals\n- [ ] Labels adjusted correctly on zone entry\n- [ ] DecisionReceipt captures zone crossing denial\n\n### Attack Scenarios (Adversarial)\n- [ ] Taint laundering: attempt to remove taint without receipt → rejected\n- [ ] Elevation bypass: low-integrity data to high-integrity zone without approval → rejected\n- [ ] Declassification leak: high-confidentiality data to low-confidentiality sink → rejected\n- [ ] Forged sanitizer receipt: invalid signature → rejected\n- [ ] Stale approval: expired ApprovalToken → rejected\n\n## Golden Vectors\n- Provenance merge scenarios with expected output\n- ApprovalToken for elevation and declassification\n- SanitizerReceipt format and verification\n\n## Property Tests\n- Merge rule properties (associative, commutative)\n- No taint reduction without valid receipt\n- Labels never increase integrity / decrease confidentiality without approval\n\n## Logging Requirements\n```json\n{\n  \"test_name\": \"...\",\n  \"flow_type\": \"integrity|confidentiality\",\n  \"from_label\": \"...\",\n  \"to_label\": \"...\",\n  \"approval_present\": true,\n  \"result\": \"pass|fail\",\n  \"reason_code\": \"...\"\n}\n```\n\n## Acceptance Criteria\n- All label propagation paths tested\n- Approval enforcement verified\n- No taint bypass possible\n\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:08:45.59208129-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:08:45.59208129-05:00","labels":["fcp2","mvp","security","taint","testing"],"dependencies":[{"issue_id":"flywheel_connectors-uek4","depends_on_id":"flywheel_connectors-1n78.8","type":"blocks","created_at":"2026-01-15T03:23:16.675201737-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-uek4","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:23:44.893047618-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ug8j","title":"fcp.trello: Trello Kanban Board Connector","description":"# fcp.trello Connector\n\nFlywheel Connector Protocol implementation for Trello - the popular kanban board platform for project management and team collaboration.\n\n## Overview\n\n- **Value Score**: 63/100 (Tier 4)\n- **Archetype**: Request-Response + Webhook\n- **Platform**: Trello REST API\n- **Model**: Simple kanban (boards, lists, cards)\n\n## Operations\n\n### Board Management\n- Create, read, update, delete boards\n- Board settings and preferences\n- Board backgrounds and power-ups\n- Board templates\n\n### List Management\n- Create, read, update, archive lists\n- List positioning and ordering\n- Move lists between boards\n\n### Card Operations (CRUD)\n- Create, read, update, delete cards\n- Card positioning within lists\n- Move cards between lists/boards\n- Card due dates and reminders\n- Card cover images\n\n### Checklists\n- Create, read, update, delete checklists\n- Checklist items management\n- Item completion tracking\n- Copy checklists between cards\n\n### Labels\n- Create, read, update, delete labels\n- Assign/remove labels from cards\n- Custom label colors and names\n\n### Attachments\n- Upload attachments to cards\n- Link external URLs\n- Delete attachments\n- Attachment previews\n\n### Members\n- List board members\n- Add/remove members from boards\n- Assign/unassign members to cards\n- Member permissions\n\n## Zone Architecture\n\n\u003c!-- fcp2-single-zone-note --\u003e\n**FCP2 single-zone binding note:** A connector instance binds to exactly one `ZoneId` for its entire lifetime.\nThe *\"zones\"* described in this section are a **recommended deployment pattern** (run separate connector instances in separate zones with different capability grants/policies) and/or conceptual risk tiers.\nThe connector MUST NOT multiplex multiple zones internally.\n\n\n### Zone: board_read\n- Read board details and settings\n- List boards for user\n- Read lists and list positions\n- Read cards and card details\n- Read checklists and items\n- Read labels and attachments\n- Read member information\n\n### Zone: card_write\n- Create/update/delete cards\n- Manage card positions\n- Create/update/delete checklists\n- Manage checklist items\n- Add/remove labels from cards\n- Upload/delete attachments\n- Assign/unassign members to cards\n\n### Zone: board_admin\n- Create/update/delete boards\n- Create/update/delete lists\n- Create/update/delete labels\n- Add/remove board members\n- Manage board settings\n- Archive/unarchive boards\n\n## Dependencies\n\n- `fcp-core`: Core FCP types and traits\n- `fcp-oauth`: OAuth 1.0a authentication (Trello uses OAuth 1.0a)\n- `fcp-webhook`: Real-time webhook handling for board/card events\n- `fcp-ratelimit`: Rate limiting (Trello: 100 requests/10s per token, 300/10s per key)\n- `fcp-telemetry`: Metrics and tracing\n\n## Technical Details\n\n### Authentication\n- OAuth 1.0a flow\n- API Key + Token authentication\n- Token expiration handling\n\n### Rate Limits\n- 100 requests per 10 seconds per token\n- 300 requests per 10 seconds per API key\n- Rate limit headers: `X-RateLimit-Limit`, `X-RateLimit-Remaining`\n\n### Webhook Events\n- Card created/updated/deleted\n- Card moved between lists\n- Checklist item completed\n- Member added/removed\n- Board updated\n- List created/archived\n\n### API Considerations\n- Nested resources (board \u003e list \u003e card \u003e checklist)\n- Batch operations support\n- Field selection for response optimization\n- Pagination via `limit` and `before`/`since` parameters\n\n## Implementation Plan\n\n1. **Phase 1**: Core board and list operations\n2. **Phase 2**: Card CRUD and positioning\n3. **Phase 3**: Checklists and labels\n4. **Phase 4**: Attachments and members\n5. **Phase 5**: Webhook integration\n\n## Acceptance Criteria\n\n- [ ] Full board CRUD operations\n- [ ] Complete list management\n- [ ] Card operations with positioning\n- [ ] Checklist and label support\n- [ ] Attachment upload/management\n- [ ] Member management\n- [ ] Webhook event handling\n- [ ] Rate limit compliance\n- [ ] OAuth 1.0a authentication flow\n- [ ] Zone-based permission model\n- [ ] Comprehensive test coverage","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T22:03:18.156864543-05:00","created_by":"ubuntu","updated_at":"2026-01-15T07:23:30.03900067-05:00","labels":["connector","kanban","tier-4"],"dependencies":[{"issue_id":"flywheel_connectors-ug8j","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T22:08:22.060054399-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-ug8j","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T22:08:22.085446311-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-ug8j","depends_on_id":"flywheel_connectors-lj2","type":"blocks","created_at":"2026-01-11T22:08:32.535038563-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-ug8j","depends_on_id":"flywheel_connectors-vi7","type":"blocks","created_at":"2026-01-11T22:08:32.779823474-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-ug8j","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:37:14.954423635-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ug8j","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T07:07:32.238590079-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ug8j","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T07:09:55.294676843-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ug8j","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T07:09:55.71213141-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ug8j","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T07:09:56.127647081-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ug8j","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T07:09:56.553331613-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ug8j","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T07:09:56.963007155-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ug8j","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:09:57.395100118-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ug8j.1","title":"fcp.trello: Manifest + Capability Map (FCP2)","description":"## Goal\nProduce the full FCP2 manifest and capability map for this connector.\n\nThis bead is where we translate the connector’s functional surface (operations) into a **mechanically checkable** contract:\n- operation schemas + schema IDs\n- capability families per operation\n- per-operation NetworkConstraints (default deny)\n- sandbox profile requirements\n- declared state model (stateless / singleton_writer / crdt)\n\n## Required content (must be explicit)\n- Operation list is exhaustive and stable for the current phase.\n- Capability IDs DO NOT encode hostnames/ports.\n- NetworkConstraints are minimal and per-operation.\n- Risk tier for each operation (Safe / Dangerous).\n- Explicit bounds: timeouts, max response sizes, pagination limits.\n\n## Tests\n- Add good/bad manifest examples for the compliance runner.\n\n## Acceptance Criteria\n- Passes static checks in `flywheel_connectors-1n78.21.5`.\n- Default-deny is enforced by manifest + capability requirements.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:14:08.318240312-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:14:08.318240312-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-ug8j.1","depends_on_id":"flywheel_connectors-ug8j","type":"parent-child","created_at":"2026-01-15T07:14:08.378159569-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ug8j.2","title":"fcp.trello: Provisioning Automation","description":"## Goal\nAutomate provisioning and configuration with minimal human steps.\n\nThis bead owns:\n- auth setup (OAuth / API keys / webhook secrets) via `CredentialObject`/`CredentialId` (egress proxy injection preferred)\n- endpoint configuration\n- `fcp doctor` readiness checks\n- deterministic, mockable provisioning flows\n\n## FCP2 requirements\n- Secrets never touch disk.\n- Provisioning is deterministic and testable.\n- Error messages are actionable and do not leak secrets/PII.\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Provisioning emits structured logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:14:08.992259253-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:57.031223365-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-ug8j.2","depends_on_id":"flywheel_connectors-ug8j","type":"parent-child","created_at":"2026-01-15T07:14:09.050442487-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ug8j.2","depends_on_id":"flywheel_connectors-ug8j.1","type":"blocks","created_at":"2026-01-15T07:14:09.669020443-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ug8j.3","title":"TEST: fcp.trello Unit/Integration Tests (mock-only)","description":"## Goal\nMock-only unit/integration tests for this connector.\n\n## Required coverage\n- schema validation (inputs + outputs)\n- error taxonomy mapping (retry semantics)\n- pagination and bounds\n- rate limit behavior\n- redaction (no token/secret/PII leakage)\n- idempotency + receipts for Dangerous operations\n\n## Logging\nAll tests emit structured JSON logs per `flywheel_connectors-1n78.35`.\n\n## Acceptance Criteria\n- Deterministic tests; no live external calls.\n- Includes adversarial cases (timeouts, malformed responses, partial failures).\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:14:10.287243449-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:14:10.287243449-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-ug8j.3","depends_on_id":"flywheel_connectors-ug8j","type":"parent-child","created_at":"2026-01-15T07:14:10.346551885-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ug8j.3","depends_on_id":"flywheel_connectors-ug8j.1","type":"blocks","created_at":"2026-01-15T07:14:10.961585839-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ug8j.3","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:14:11.578213238-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ug8j.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T07:32:20.154865494-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ug8j.4","title":"E2E: fcp.trello Connector Compliance Run","description":"## Goal\nRun the shared connector compliance runner and capture an evidence bundle.\n\n## Must validate\n- handshake + introspection correctness\n- default deny (no CapabilityToken → deny + DecisionReceipt)\n- NetworkConstraints enforcement\n- receipts/audit for Dangerous operations\n- structured logs\n\n## Acceptance Criteria\n- E2E run is deterministic and produces a stable artifact bundle.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:14:12.153460258-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:14:12.153460258-05:00","labels":["connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-ug8j.4","depends_on_id":"flywheel_connectors-ug8j","type":"parent-child","created_at":"2026-01-15T07:14:12.21702633-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ug8j.4","depends_on_id":"flywheel_connectors-ug8j.1","type":"blocks","created_at":"2026-01-15T07:14:12.837077734-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ug8j.4","depends_on_id":"flywheel_connectors-ug8j.2","type":"blocks","created_at":"2026-01-15T07:14:13.463698601-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ug8j.4","depends_on_id":"flywheel_connectors-ug8j.3","type":"blocks","created_at":"2026-01-15T07:14:14.156246652-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ug8j.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T07:14:14.860450526-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ugp","title":"fcp.twilio: Webhook handling for incoming messages","description":"# fcp.twilio: Webhook handling for incoming messages (FCP2)\n\n## Goal\nSafely ingest Twilio webhooks for:\n- inbound SMS/MMS\n- delivery status updates\n- voice call status events (if configured)\n\nWebhooks are a primary streaming surface and must be treated as **tainted untrusted input**.\n\n## Scope\n### Webhook ingestion\n- Validate `X-Twilio-Signature` (or equivalent) against the configured webhook secret.\n- Parse form-encoded payloads into typed event objects.\n- Emit connector events with:\n  - stable event IDs\n  - correlation_id linkage\n\n### Idempotency and replay safety\n- Deduplicate repeated webhook deliveries.\n- Handle out-of-order status callbacks safely.\n\n## Capability model (illustrative)\n- `twilio.webhook.ingest`\n\n## FCP2 requirements\n- Single-zone binding.\n- Default deny: webhook ingestion itself is capability gated.\n- Taint:\n  - all inbound content (message body, sender number, media URLs) is tainted by default\n- NetworkConstraints:\n  - do not follow arbitrary media URLs unless pinned/allowed\n\n## Deliverables\n- Operation schema:\n  - `twilio.webhook.ingest`\n- Event envelopes:\n  - `twilio.sms.incoming`\n  - `twilio.sms.status`\n  - `twilio.voice.status` (optional)\n- Dedup state model:\n  - store webhook delivery IDs / message SIDs / call SIDs as needed\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - signature validation (golden vectors)\n  - taint propagation\n  - dedupe/out-of-order handling\n  - refusal on invalid signature\n\n## Acceptance criteria\n- Invalid signatures are rejected with a clear reason code.\n- Webhook replays do not create duplicate downstream events.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:14:52.163427194-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:31:51.286875876-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-ugp","depends_on_id":"flywheel_connectors-otqy","type":"parent-child","created_at":"2026-01-15T02:29:05.801765092-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ugp","depends_on_id":"flywheel_connectors-otqy.1","type":"blocks","created_at":"2026-01-15T04:31:54.825849841-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ugp","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T04:31:55.154441473-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-un5y","title":"TEST: Audit Chain Unit Tests (Hash Linking, Checkpoints, DecisionReceipts, Fork Detection)","description":"# TEST: Audit Chain Unit Tests\n\n## Goal\nProve that the audit chain provides tamper-evident history with explainable decisions.\n\n## Test Categories\n\n### AuditEvent Chain\n- [ ] Events hash-linked correctly (prev_hash binding)\n- [ ] Monotonic seq enforced\n- [ ] Event types correctly discriminated\n- [ ] Timestamp ordering reasonable (within skew)\n- [ ] Zone binding correct\n- [ ] Event payload schema-validated\n\n### AuditHead\n- [ ] Quorum signatures required (n-f for CriticalWrite)\n- [ ] Insufficient signatures rejected\n- [ ] Signature from non-member rejected\n- [ ] Signature set canonicalized (sorted by node_id)\n- [ ] AuditHead references correct chain tip\n\n### ZoneCheckpoint\n- [ ] Binds audit_head correctly (id + seq)\n- [ ] Binds revocation_head correctly (id + seq)\n- [ ] Binds policy_head correctly\n- [ ] Binds config_head correctly\n- [ ] Quorum signatures valid\n- [ ] seq is monotonic\n\n### DecisionReceipt\n- [ ] Content-addressed (stable ObjectId)\n- [ ] reason_code is stable and enumerable\n- [ ] evidence ObjectIds are present and resolvable\n- [ ] Denied operations produce DecisionReceipt\n- [ ] DecisionReceipt is in audit chain\n\n### Fork Detection\n- [ ] Same seq, different id → fork detected\n- [ ] Fork detection halts checkpoint advancement\n- [ ] Fork emits audit event\n- [ ] Fork requires manual intervention\n- [ ] No auto-resolution of forks\n\n### TraceContext Propagation\n- [ ] trace_id preserved through invoke → receipt → audit\n- [ ] span_id correctly propagated\n- [ ] Missing trace_id handled gracefully\n\n### Explainability (fcp explain)\n- [ ] DecisionReceipt can be fetched by operation_id\n- [ ] Evidence chain can be traversed\n- [ ] Reason code maps to human explanation\n- [ ] AI recovery hints available where applicable\n\n## Golden Vectors\n- Valid AuditEvent chain segment\n- AuditHead with quorum signatures\n- ZoneCheckpoint binding all heads\n- DecisionReceipt with evidence\n\n## Property Tests\n- Seq is always monotonic\n- Hash linking is consistent\n- No event can be removed without detection\n\n## Fuzz Targets\n- AuditEvent parsing\n- AuditHead signature verification\n- DecisionReceipt parsing\n\n## Logging Requirements\n```json\n{\n  \"test_name\": \"...\",\n  \"chain_seq\": 123,\n  \"event_type\": \"...\",\n  \"checkpoint_seq\": 456,\n  \"result\": \"pass|fail\",\n  \"reason_code\": \"...\"\n}\n```\n\n## Acceptance Criteria\n- Chain integrity verified\n- Fork detection works\n- DecisionReceipts are explainable\n\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:09:16.388357877-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:09:16.388357877-05:00","labels":["audit","fcp2","mvp","testing"],"dependencies":[{"issue_id":"flywheel_connectors-un5y","depends_on_id":"flywheel_connectors-1n78.11","type":"blocks","created_at":"2026-01-15T03:23:17.28974739-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-un5y","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:23:44.973092602-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-uwn","title":"fcp.salesforce: SOQL query execution engine","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:18:15.498049135-05:00","created_by":"ubuntu","updated_at":"2026-01-11T12:09:27.281072974-05:00","closed_at":"2026-01-11T12:09:27.281072974-05:00","close_reason":"CONSOLIDATED: All Salesforce sub-features merged into comprehensive parent connector bead flywheel_connectors-4m0 (fcp.salesforce: Salesforce CRM Platform Connector)"}
{"id":"flywheel_connectors-v6w","title":"Study: Clawdbot Discord Connector Implementation","description":"# Study: Clawdbot Discord Connector Implementation\n\n## Objective\n\nResearch and document the existing clawdbot Discord connector implementation to extract patterns, learnings, and reusable components for building FCP connectors.\n\n## Research Areas\n\n### 1. Architecture Overview\n- [ ] Overall connector structure\n- [ ] Module organization\n- [ ] Dependency graph\n- [ ] Configuration management\n- [ ] Entry point and initialization\n\n### 2. Discord API Integration\n- [ ] Gateway connection handling\n- [ ] REST API usage patterns\n- [ ] Rate limiting implementation\n- [ ] Retry logic and backoff\n- [ ] Error handling strategies\n\n### 3. Event Handling\n- [ ] Event subscription model\n- [ ] Event parsing and validation\n- [ ] Event dispatching mechanism\n- [ ] Event filtering capabilities\n- [ ] Async event processing\n\n### 4. Authentication \u0026 Security\n- [ ] Token management\n- [ ] Permission handling\n- [ ] Credential storage patterns\n- [ ] Security best practices used\n\n### 5. Message Processing\n- [ ] Message parsing\n- [ ] Command extraction\n- [ ] Response formatting\n- [ ] Attachment handling\n- [ ] Embed construction\n\n### 6. State Management\n- [ ] Guild/server state tracking\n- [ ] User session management\n- [ ] Cache strategies\n- [ ] Persistence patterns\n\n### 7. Testing Approach\n- [ ] Unit test patterns\n- [ ] Integration test setup\n- [ ] Mock strategies for Discord API\n- [ ] Test coverage areas\n\n## Deliverables\n\n1. **Architecture Diagram** - Visual representation of connector structure\n2. **Pattern Catalog** - Documented patterns that can be reused\n3. **Anti-Pattern Notes** - What to avoid based on learnings\n4. **Reusable Components List** - Code/patterns that can be extracted\n5. **Recommendations** - Suggestions for FCP connector design\n\n## Questions to Answer\n\n- How does clawdbot handle Discord's rate limits?\n- What reconnection strategy is used for the gateway?\n- How are slash commands registered and handled?\n- How is state synchronized across restarts?\n- What logging/observability patterns are used?\n\n## Resources\n\n- Clawdbot repository\n- Discord.js/Discord.py documentation (for comparison)\n- Discord API documentation\n- Existing connector documentation\n\n## Time Estimate\n\n- Research: 4-6 hours\n- Documentation: 2-3 hours\n- Total: 6-9 hours\n\n## Acceptance Criteria\n- Runs deterministically in CI (no flake due to timing/network).\n- Uses mocks only (no real external network).\n- Emits structured JSON logs per `flywheel_connectors-1n78.35` with stable `test_name` identifiers.\n","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-11T10:23:33.249763282-05:00","created_by":"ubuntu","updated_at":"2026-01-15T05:28:11.798907188-05:00","labels":["connectors","fcp2","study","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-v6w","depends_on_id":"flywheel_connectors-lszk.2","type":"parent-child","created_at":"2026-01-15T03:21:54.295937215-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-vc5","title":"fcp.jira: Automation rule management","description":"# fcp.jira: Automation rule management (FCP2)\n\n## Goal\nSupport Jira Automation (\"Automation for Jira\") rule management for organizations that want:\n- agent-assisted creation of automation rules\n- safe enable/disable workflows\n- auditing of automation changes\n\nAutomation configuration is **admin-level** and can have broad blast radius. This bead is explicitly treated as *dangerous*.\n\n## Scope\n### Read\n- List automation rules (project-scoped / global-scoped where allowed).\n- Get rule definition + status (enabled/disabled).\n\n### Write (dangerous; approval-gated)\n- Create rule (from a constrained schema).\n- Update rule.\n- Enable/disable rule.\n- Delete rule.\n\n## Capability model (illustrative)\n- `jira.automation.read`\n- `jira.automation.write` (dangerous)\n- `jira.admin` (dangerous; optional umbrella)\n\nPolicy guidance:\n- Require ApprovalToken for any write.\n- Include a two-person rule if the org policy requires it.\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- Receipts + audit events for all writes with:\n  - rule id\n  - project id\n  - diff summary (structural; no secrets)\n\n## Deliverables\n- Operation schemas:\n  - `jira.automation.rule.list`\n  - `jira.automation.rule.get`\n  - `jira.automation.rule.create`\n  - `jira.automation.rule.update`\n  - `jira.automation.rule.enable`\n  - `jira.automation.rule.disable`\n  - `jira.automation.rule.delete`\n- A constrained rule representation:\n  - avoid arbitrary script injection\n  - prefer templates + parameterization\n\n## Test strategy (MUST)\n### Unit/integration (mock-only)\n- Rule CRUD happy paths.\n- Permission denied.\n- Validation failures (unsafe actions rejected).\n- Idempotency: repeated enable/disable does not drift.\n\n### Compliance\n- Ensure all write ops require appropriate capabilities + approval.\n- Ensure audit evidence includes a stable structural hash of the rule definition.\n\n## Acceptance criteria\n- Connector can manage automation rules without enabling arbitrary code execution.\n- All writes are approval-gated and produce receipts/audit events.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:14:38.374987933-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:15:14.05533607-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-vc5","depends_on_id":"flywheel_connectors-x9af","type":"parent-child","created_at":"2026-01-15T02:28:43.575680244-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-vc5","depends_on_id":"flywheel_connectors-x9af.1","type":"blocks","created_at":"2026-01-15T04:15:18.278615683-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-vi7","title":"fcp-webhook: Shared Webhook Handling Library","description":"# fcp-webhook: Shared Webhook Handling Library\n\n## Overview\nProduction webhook handling library supporting signature verification, event routing, and delivery management for inbound webhooks.\n\n## Signature Verification\n- HMAC-SHA256 (Stripe, GitHub, Slack)\n- HMAC-SHA1 (legacy)\n- Ed25519 signatures\n- Timestamp validation (replay prevention)\n- Multiple algorithm support per provider\n\n## Provider Support\n- GitHub (X-Hub-Signature-256)\n- Stripe (Stripe-Signature with timestamp)\n- Slack (X-Slack-Signature)\n- Linear (Linear-Signature)\n- Discord (Ed25519)\n- Custom providers via configuration\n\n## Event Processing\n- Event type routing\n- Payload parsing (JSON, form-encoded)\n- Event filtering and subscription\n- Priority queue processing\n\n## Delivery Management\n- Idempotency (deduplication by event ID)\n- At-least-once delivery guarantee\n- Retry scheduling for failures\n- Dead letter queue\n- Delivery status tracking\n\n## Security\n- IP allowlist verification\n- Request size limits\n- Timeout enforcement\n- TLS certificate validation\n\n## Observability\n- Delivery metrics\n- Latency tracking\n- Error categorization\n- Audit logging\n\n## Dependencies\n- hmac, sha2, ed25519-dalek\n- serde_json, chrono\n- fcp-core, fcp-telemetry","status":"closed","priority":0,"issue_type":"feature","created_at":"2026-01-11T10:38:06.716686365-05:00","created_by":"ubuntu","updated_at":"2026-01-11T13:55:12.050039158-05:00","closed_at":"2026-01-11T13:55:12.050039158-05:00","close_reason":"Implemented fcp-webhook crate with HMAC/Ed25519 signature verification, provider handlers (GitHub, Stripe, Slack, Linear), event routing, idempotency, and dead letter queue. All 18 tests passing."}
{"id":"flywheel_connectors-vq0","title":"fcp.zendesk: Auto-Categorize Incoming Tickets","description":"# fcp.zendesk: Auto-Categorize Incoming Tickets (FCP2)\n\n## Goal\nProvide an automation pipeline that turns inbound tickets into structured, actionable metadata:\n- category labels\n- priority suggestions\n- macro suggestions\n- escalation flags (SLA risk, sentiment)\n\nThis bead must be **safe-by-default**: it may *recommend* actions, but must not silently mutate tickets without explicit capability + (policy) approval.\n\n## Trigger sources\n- Ticket-created / ticket-updated webhooks (tainted input).\n\n## Scope\n### Classification (suggest-only)\n- Produce a `TicketClassification` object:\n  - category (billing/tech/account/etc)\n  - priority suggestion\n  - confidence\n  - recommended macros\n  - recommended routing queue\n\n### Optional apply step (dangerous)\n- Apply tags/fields/macro to a ticket **only** when explicitly invoked and authorized.\n\n## Capability model (illustrative)\n- `zendesk.webhook.ingest`\n- `zendesk.tickets.read`\n- `zendesk.classify` (produces suggestions)\n- `zendesk.tickets.write` (dangerous; for applying results)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- Taint:\n  - ticket bodies and requester text are tainted\n  - suggestions derived from tainted inputs must carry provenance/taint metadata\n- For any mutation:\n  - receipts + audit events\n  - approval gating recommended\n\n## Deliverables\n- Event ingestion schema:\n  - `zendesk.webhook.ticket_ingest`\n- Operation schemas:\n  - `zendesk.ticket.classify`\n  - Optional: `zendesk.ticket.apply_classification`\n- State:\n  - webhook delivery dedupe\n  - last-classified fingerprint to avoid repeated work\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - webhook replay/idempotency\n  - classification object schema stability\n  - deny-by-default for mutation without capability/approval\n\n## Acceptance criteria\n- Inbound tickets can be categorized deterministically with clear evidence.\n- No automatic mutations occur without explicit authorization.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:21:51.790976491-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:37:06.507791704-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-vq0","depends_on_id":"flywheel_connectors-pwff","type":"parent-child","created_at":"2026-01-15T02:34:38.5925313-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-vq0","depends_on_id":"flywheel_connectors-pwff.1","type":"blocks","created_at":"2026-01-15T04:37:11.375799374-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-vq0","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T04:37:11.700031304-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-vu5","title":"fcp.zendesk: Macro/Canned Response Management","description":"# fcp.zendesk: Macro/Canned Response Management (FCP2)\n\n## Goal\nEnable safe use of Zendesk macros/canned responses to:\n- retrieve available macros\n- apply macros to tickets (with controlled variable substitution)\n- optionally manage macros (admin-only; dangerous)\n\n## Scope\n### Read\n- List macros.\n- Get macro details (actions/conditions).\n\n### Write\n- Apply macro to a ticket (dangerous-ish: mutates ticket state / adds comments).\n- Optional: create/update/delete macros (dangerous; admin).\n\n## Capability model (illustrative)\n- `zendesk.macros.read`\n- `zendesk.macros.apply` (dangerous-ish)\n- Optional: `zendesk.macros.write` (dangerous)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- For macro apply:\n  - receipts + audit events include ticket id + macro id\n  - never log macro-expanded ticket content\n\n## Deliverables\n- Operation schemas:\n  - `zendesk.macro.list`\n  - `zendesk.macro.get`\n  - `zendesk.macro.apply`\n  - Optional: `zendesk.macro.create/update/delete`\n- Safe template handling:\n  - restrict which fields can be mutated\n  - sanitize substitutions\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - apply macro happy path\n  - variable substitution safety\n  - receipts/audit for apply\n\n## Acceptance criteria\n- Macros can be applied safely without content leakage.\n- Admin macro management (if enabled) is approval gated.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:21:49.604272059-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:36:17.718961442-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-vu5","depends_on_id":"flywheel_connectors-pwff","type":"parent-child","created_at":"2026-01-15T02:34:38.678867438-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-vu5","depends_on_id":"flywheel_connectors-pwff.1","type":"blocks","created_at":"2026-01-15T04:36:21.633264361-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-vuwy","title":"fcp.figma: Design Collaboration and Asset Extraction Connector","description":"# fcp.figma - Design Collaboration and Asset Extraction Connector\n\n## Overview\n\nComprehensive Figma connector enabling AI agents to access design files, extract components, export assets, manage comments, and bridge the gap between design and code. Essential for design-to-code workflows and design system automation.\n\n## Strategic Importance\n\n**Value Score: 86/100** (from prioritized connector analysis)\n\n### Why This Matters\n- **Design-to-code bridge** - Extract design tokens, components, assets\n- **Design system automation** - Sync design systems with code\n- **Visual verification** - Compare implementation to design\n- **Comment management** - Handle design feedback programmatically\n\n### Flywheel Ecosystem Synergy\n- **fcp.browser**: Screenshot for visual diff comparison\n- **fcp.github**: Link designs to PRs\n- **Coding agents**: Design-to-code workflows\n- **CASS**: Index design decisions and documentation\n\n## Manifest archetypes (closed set)\n\n- `operational`\n- `streaming`\n\n\u003e Interaction patterns (non-archetype): Request/Response + Webhook\n\n| Pattern | Use Case |\n|---------|----------|\n| Request-Response | All read operations, exports |\n| Webhook | Comment notifications, file updates |\n\n## Key Operations\n\n### File Operations\n- `figma.file.get` - Get file with full node tree\n- `figma.file.nodes` - Get specific nodes by ID\n- `figma.file.images` - Render nodes as images\n- `figma.file.components` - Get file component set\n- `figma.file.styles` - Get file styles (colors, text, effects)\n- `figma.file.versions` - List file versions\n- `figma.file.version.get` - Get specific version\n\n### Project Operations\n- `figma.projects.list` - List team projects\n- `figma.project.files` - List files in project\n- `figma.project.get` - Get project details\n\n### Team Operations\n- `figma.teams.list` - List user teams\n- `figma.team.projects` - List team projects\n- `figma.team.components` - Get team component library\n- `figma.team.styles` - Get team style library\n\n### Component Operations\n- `figma.components.list` - List components in file/library\n- `figma.component.get` - Get component details\n- `figma.component.instances` - Find component instances\n- `figma.component_sets.list` - List component sets (variants)\n\n### Style Operations\n- `figma.styles.list` - List styles in file/library\n- `figma.style.get` - Get style details\n- `figma.style.paint` - Get color/gradient info\n- `figma.style.text` - Get typography info\n- `figma.style.effect` - Get effect info\n\n### Export Operations\n- `figma.export.png` - Export as PNG\n- `figma.export.svg` - Export as SVG\n- `figma.export.pdf` - Export as PDF\n- `figma.export.jpg` - Export as JPG\n- `figma.export.batch` - Batch export multiple nodes\n- `figma.export.tokens` - Export design tokens\n\n### Comment Operations\n- `figma.comments.list` - List file comments\n- `figma.comments.create` - Add comment\n- `figma.comments.reply` - Reply to comment\n- `figma.comments.delete` - Delete comment\n- `figma.comments.resolve` - Resolve comment thread\n\n### Variables Operations (Dev Mode)\n- `figma.variables.list` - List local variables\n- `figma.variables.get` - Get variable details\n- `figma.variable_collections.list` - List variable collections\n\n### Webhook Operations\n- `figma.webhook.create` - Register webhook\n- `figma.webhook.list` - List webhooks\n- `figma.webhook.delete` - Remove webhook\n- `figma.webhook.events` - Configure event types\n\n## Design Token Extraction\n\n### Token Types\n```rust\npub enum DesignToken {\n    Color { name: String, rgba: [f32; 4], hex: String },\n    Typography { \n        name: String, \n        family: String, \n        weight: u16, \n        size: f32, \n        line_height: f32 \n    },\n    Spacing { name: String, value: f32 },\n    BorderRadius { name: String, value: f32 },\n    Shadow { name: String, offset: [f32; 2], blur: f32, color: [f32; 4] },\n    Gradient { name: String, stops: Vec\u003cGradientStop\u003e },\n}\n```\n\n### Export Formats\n- **CSS Variables**: `--color-primary: #007AFF;`\n- **SCSS Variables**: `$color-primary: #007AFF;`\n- **Tailwind Config**: `colors: { primary: \"#007AFF\" }`\n- **JSON Tokens**: Design Tokens Community Group format\n- **TypeScript**: Type-safe token exports\n\n### Token Extraction Pipeline\n```\nFigma File → Extract Styles → Normalize → Transform → Export\n     |              |              |           |          |\n     +--colors-----+--dedupe------+--scale---+--css-----+\n     +--typography-+--validate----+--name----+--scss----+\n     +--effects----+              +          +--json----+\n```\n\n## Component Code Generation\n\n### Supported Frameworks\n- **React**: JSX with styled-components or Tailwind\n- **Vue**: SFC with scoped styles\n- **HTML/CSS**: Static markup with CSS\n- **Swift**: UIKit or SwiftUI (basic)\n\n### Code Gen Pipeline\n```\nComponent → Analyze Structure → Generate Layout → Apply Styles → Output Code\n    |              |                   |              |              |\n    +--frames-----+--auto-layout------+--flexbox----+--css-vars---+\n    +--vectors----+--constraints------+--grid-------+--tailwind---+\n    +--text-------+--responsive-------+--absolute---+--inline-----+\n```\n\n## Zone Architecture\n\n\u003c!-- fcp2-single-zone-note --\u003e\n**FCP2 single-zone binding note:** A connector instance binds to exactly one `ZoneId` for its entire lifetime.\nThe *\"zones\"* described in this section are a **recommended deployment pattern** (run separate connector instances in separate zones with different capability grants/policies) and/or conceptual risk tiers.\nThe connector MUST NOT multiplex multiple zones internally.\n\n\n```\nZone 0 (Public):     Public files, shared libraries\nZone 1 (Authorized): Team files user has access to\nZone 2 (Private):    Draft files, unpublished components\nZone 3 (Sensitive):  OAuth tokens, personal access tokens\n```\n\n### Capability Mapping\n| Capability | Zone | Risk Level | Description |\n|------------|------|------------|-------------|\n| `figma.file.read` | 1 | Low | Read file content |\n| `figma.export` | 1 | Low | Export assets |\n| `figma.comments.read` | 1 | Low | Read comments |\n| `figma.comments.write` | 1 | Medium | Add/modify comments |\n| `figma.library.publish` | 2 | High | Publish to library |\n\n## Dependencies\n\n### Required FCP Crates\n- `fcp-core`: Base connector traits, zone management\n- `fcp-oauth`: OAuth 2.0 authentication\n- `fcp-webhook`: Webhook handling\n- `fcp-ratelimit`: Rate limit management\n- `fcp-telemetry`: Metrics and tracing\n\n## Implementation Notes\n\n### Authentication\n- **OAuth 2.0**: For user-facing apps\n- **Personal Access Token**: For automation\n- Scopes: `file_read`, `files:write`, `webhooks:write`\n\n### File Node Tree\n- Files contain nested node hierarchy\n- Navigate via `document` → `children` recursively\n- Each node has unique `id` for reference\n- Large files may have thousands of nodes\n\n### Image Export\n- Export is async - returns URLs\n- URLs expire after 14 days\n- Rate limit: 10 exports/minute\n- Use batch export for efficiency\n\n### Rate Limiting\n- **30 requests/minute** for most endpoints\n- **10 exports/minute** for render endpoints\n- Implement request queuing\n\n### Error Handling\n| Code | Meaning | Recovery |\n|------|---------|----------|\n| 400 | Bad Request | Check parameters |\n| 403 | Forbidden | Check file access |\n| 404 | Not Found | File/node deleted |\n| 429 | Rate Limited | Backoff |\n| 500 | Server Error | Retry |\n\n## Integration Patterns\n\n### Design-to-Code Workflow\n1. Designer creates/updates component in Figma\n2. Webhook notifies FCP connector\n3. Connector extracts component structure\n4. Code generator creates React/Vue component\n5. PR created in GitHub via `fcp.github`\n6. Visual diff confirms match\n\n### Design Token Sync\n1. Designer updates brand colors in Figma\n2. Token extractor pulls changes\n3. Generate CSS/Tailwind variables\n4. Commit to design system repo\n5. Build pipeline updates apps\n\n### Visual QA\n1. Implementation screenshot via `fcp.browser`\n2. Design export via `fcp.figma`\n3. Visual diff comparison\n4. Report discrepancies\n5. Create Bead for fixes\n\n## Testing Strategy\n\n- Mock Figma API with `fcp-testkit`\n- Test node tree traversal\n- Test token extraction accuracy\n- Test code generation quality\n- Test webhook signature validation\n\n## Success Criteria\n- The epic includes (or references) the standard base beads `.1`..`.4` per `flywheel_connectors-lszk.5`.\n- The connector passes `flywheel_connectors-1n78.21.5` (static + dynamic) and has an E2E compliance run wired through `flywheel_connectors-e3i9`.\n- Unit/integration tests are mock-only (no real external calls) and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-11T21:40:44.809851849-05:00","created_by":"ubuntu","updated_at":"2026-01-15T07:39:57.211116653-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-vuwy","depends_on_id":"flywheel_connectors-lj2","type":"blocks","created_at":"2026-01-11T22:08:02.042122183-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-vuwy","depends_on_id":"flywheel_connectors-vi7","type":"blocks","created_at":"2026-01-11T22:08:02.069347467-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-vuwy","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T22:08:02.097293499-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-vuwy","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T22:08:02.122809685-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-vuwy","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:30:03.192112175-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-vuwy","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T04:19:26.271736529-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-vuwy","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T04:19:26.452551052-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-vuwy","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T04:19:26.626257706-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-vuwy","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T04:19:26.806821086-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-vuwy","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T04:19:26.997825103-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-vuwy","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T04:19:27.181882304-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-vuwy.1","title":"fcp.figma: Manifest + Capability Map (FCP2)","description":"# fcp.figma: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the Figma connector’s **mechanical manifest contract** so the platform can sandbox, authorize, and mechanically test it under FCP2.\n\n## Required contents\n- Manifest archetypes (closed set):\n  - `knowledge` (read designs, metadata, versions)\n  - `operational` (comments, webhooks management)\n  - `streaming` (webhook/event ingestion)\n- Operation list + schema IDs.\n- Capability families + per-operation required caps.\n- NetworkConstraints:\n  - pin Figma API host(s)\n  - pin image export hosts / CDN hosts if distinct\n  - deny broad egress; deny redirects by default\n- State model declaration:\n  - webhook subscription state\n  - optional cache keys (must be bounded)\n\n## Output artifacts\n- Full manifest spec stored here.\n- Good/bad examples for static compliance (especially export/download constraints).\n\n## Acceptance criteria\n- Another engineer can implement `--manifest` from this bead alone.\n- Static compliance can mechanically reject:\n  - overly-broad export/download egress\n  - host/port-encoded capability IDs\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:18:47.118748945-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:18:47.118748945-05:00","dependencies":[{"issue_id":"flywheel_connectors-vuwy.1","depends_on_id":"flywheel_connectors-vuwy","type":"parent-child","created_at":"2026-01-15T04:18:47.120044525-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-vuwy.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T04:18:50.45904521-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-vuwy.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T04:18:50.629275595-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-vuwy.2","title":"fcp.figma: Provisioning Automation (OAuth, webhooks, scopes)","description":"# fcp.figma: Provisioning Automation (OAuth, webhooks, scopes)\n\n## Goal\nAutomate Figma onboarding with minimal human steps, while keeping secrets zone-scoped and never written to disk.\n\n## Requirements\n- OAuth2 (PKCE) flow support via provisioning recipes.\n- Optional: Personal Access Token support (policy-gated).\n- Scope selection:\n  - minimal viable scopes for read operations\n  - separate scopes/capabilities for comment writes and webhook management\n- Webhook registration automation:\n  - create/list/delete webhooks\n  - verify webhook secret configuration\n\n## Safety rules\n- Validate credentials with safe read-only calls.\n- Validate NetworkConstraints before declaring readiness.\n- Never log access tokens.\n\n## Acceptance criteria\n- `fcp doctor` verifies readiness (scopes + webhook reachability) without leaking secrets.\n- Fully mockable for unit tests.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:18:56.892284506-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:18:56.892284506-05:00","dependencies":[{"issue_id":"flywheel_connectors-vuwy.2","depends_on_id":"flywheel_connectors-vuwy","type":"parent-child","created_at":"2026-01-15T04:18:56.893477083-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-vuwy.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T04:19:02.122513245-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-vuwy.3","title":"TEST: Figma Connector Unit/Integration Tests (mock-only)","description":"# TEST: Figma Connector Unit/Integration Tests (mock-only)\n\n## Goal\nComprehensive mock-only tests for fcp.figma with structured JSON logs.\n\n## Requirements\n- No real Figma API calls in CI.\n- Mock endpoints for:\n  - file/project listing\n  - node fetch + traversal\n  - image export URL generation + download (bounded)\n  - comment thread CRUD\n  - webhook event ingestion\n- Tests for:\n  - pagination correctness\n  - large file node trees (bounded memory)\n  - export size limits and host pinning\n  - rate limiting + backoff\n\n## Acceptance criteria\n- Deterministic test suite runnable in CI.\n- Denial paths are explainable via reason codes in logs.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:19:09.355393146-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:19:09.355393146-05:00","dependencies":[{"issue_id":"flywheel_connectors-vuwy.3","depends_on_id":"flywheel_connectors-vuwy","type":"parent-child","created_at":"2026-01-15T04:19:09.356878284-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-vuwy.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T04:19:12.24037065-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-vuwy.4","title":"E2E: Figma Connector Compliance Run","description":"# E2E: Figma Connector Compliance Run\n\n## Goal\nRun the shared Mechanical Connector Compliance Runner against fcp.figma.\n\n## Must verify\n- Default deny via CapabilityTokens.\n- NetworkConstraints:\n  - only allowed Figma API + export/download hosts\n  - deny redirects to new hosts\n- Receipts/audit for any write operations (comments, webhook management).\n- Structured logs (JSON) with correlation_id + reason codes.\n\n## Acceptance criteria\n- Runner output bundle is green for fcp.figma.\n- Failures are fully actionable from logs alone.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:19:18.076269969-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:19:18.076269969-05:00","dependencies":[{"issue_id":"flywheel_connectors-vuwy.4","depends_on_id":"flywheel_connectors-vuwy","type":"parent-child","created_at":"2026-01-15T04:19:18.077393075-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-vuwy.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T04:19:21.407793068-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-vwb","title":"fcp.zendesk: Knowledge Base Access","description":"# fcp.zendesk: Knowledge Base Access (FCP2)\n\n## Goal\nAllow agents to search and retrieve Zendesk Guide/Help Center articles to support:\n- response drafting\n- macro suggestion\n- ticket deflection analysis\n\n## Scope\n- Search articles (keyword and optional semantic ranking if available).\n- Fetch article by id.\n- Retrieve article metadata (locale, section/category).\n\n## Capability model (illustrative)\n- `zendesk.kb.read`\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- Treat article text as external content (tainted).\n\n## Deliverables\n- Operation schemas:\n  - `zendesk.kb.search`\n  - `zendesk.kb.article.get`\n  - `zendesk.kb.section.list` (optional)\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - search pagination\n  - locale handling\n\n## Acceptance criteria\n- Agents can reliably retrieve KB content with stable metadata and no log leakage.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:21:48.92611277-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:36:03.872193087-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-vwb","depends_on_id":"flywheel_connectors-pwff","type":"parent-child","created_at":"2026-01-15T02:34:38.76461635-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-vwb","depends_on_id":"flywheel_connectors-pwff.1","type":"blocks","created_at":"2026-01-15T04:36:07.807852798-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-w1g","title":"Study: Clawdbot Telegram Connector Implementation","description":"# Study: Clawdbot Telegram Connector Implementation\n\n## Objective\n\nResearch and document the existing clawdbot Telegram connector implementation to extract patterns, learnings, and reusable components for building FCP connectors.\n\n## Research Areas\n\n### 1. Architecture Overview\n- [ ] Overall connector structure\n- [ ] Module organization\n- [ ] Dependency graph\n- [ ] Configuration management\n- [ ] Entry point and initialization\n\n### 2. Telegram Bot API Integration\n- [ ] Long polling vs webhook mode\n- [ ] Update handling\n- [ ] API client implementation\n- [ ] Rate limiting compliance\n- [ ] Error handling strategies\n\n### 3. Event/Update Handling\n- [ ] Update types supported\n- [ ] Update parsing and validation\n- [ ] Update dispatching mechanism\n- [ ] Async processing patterns\n- [ ] Update acknowledgment\n\n### 4. Authentication \u0026 Security\n- [ ] Bot token management\n- [ ] User authorization patterns\n- [ ] Admin permission handling\n- [ ] Security best practices used\n\n### 5. Message Processing\n- [ ] Message parsing (text, commands, entities)\n- [ ] Inline query handling\n- [ ] Callback query handling\n- [ ] Media message processing\n- [ ] Keyboard/button interactions\n\n### 6. State Management\n- [ ] Conversation state tracking\n- [ ] User session management\n- [ ] Cache strategies\n- [ ] Persistence patterns\n\n### 7. Testing Approach\n- [ ] Unit test patterns\n- [ ] Integration test setup\n- [ ] Mock strategies for Telegram API\n- [ ] Test coverage areas\n\n## Deliverables\n\n1. **Architecture Diagram** - Visual representation of connector structure\n2. **Pattern Catalog** - Documented patterns that can be reused\n3. **Anti-Pattern Notes** - What to avoid based on learnings\n4. **Reusable Components List** - Code/patterns that can be extracted\n5. **Comparison with Discord** - Similarities and differences\n\n## Questions to Answer\n\n- How does clawdbot handle Telegram's update offset mechanism?\n- What approach is used: long polling or webhooks?\n- How are inline keyboards and callbacks managed?\n- How is conversation context maintained?\n- What logging/observability patterns are used?\n- How does it compare to the Discord connector?\n\n## Resources\n\n- Clawdbot repository\n- Telegram Bot API documentation\n- Teloxide/python-telegram-bot (for comparison)\n- Existing connector documentation\n\n## Time Estimate\n\n- Research: 4-6 hours\n- Documentation: 2-3 hours\n- Total: 6-9 hours\n\n## Acceptance Criteria\n- Runs deterministically in CI (no flake due to timing/network).\n- Uses mocks only (no real external network).\n- Emits structured JSON logs per `flywheel_connectors-1n78.35` with stable `test_name` identifiers.\n","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-11T10:23:48.530527446-05:00","created_by":"ubuntu","updated_at":"2026-01-15T05:28:11.694001694-05:00","labels":["connectors","fcp2","study","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-w1g","depends_on_id":"flywheel_connectors-lszk.1","type":"parent-child","created_at":"2026-01-15T03:21:49.623317267-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-w2v","title":"fcp.jira: Workflow transitions and status management","description":"# fcp.jira: Workflow transitions and status management (FCP2)\n\n## Goal\nProvide a safe, typed interface for Jira issue workflow operations:\n- discover allowed transitions\n- transition issues\n- query statuses/priorities/issue types relevant to workflow handling\n\nThis bead is critical for “agent takes action” flows, because transitions are the canonical state changes in Jira.\n\n## Scope\n### Read\n- List available transitions for an issue (permission + workflow-driven).\n- Get statuses/priorities/issue types.\n- Optional: get workflow scheme metadata if permitted.\n\n### Write\n- Perform a transition on an issue, including optional field updates required by the transition.\n\n## Capability model (illustrative)\n- `jira.workflow.read`\n- `jira.workflow.transition` (write)\n- Optional: `jira.admin` for scheme-level inspection\n\nPolicy guidance:\n- Certain transitions (e.g., \"Done\", \"Closed\", \"Deployed\") may be policy-gated with ApprovalToken depending on org rules.\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned to Jira base hostname.\n- For transitions:\n  - emit OperationReceipt + AuditEvent with issue key + transition id\n  - include a DecisionReceipt reason code when denied\n\n## Deliverables\n- Operation schemas:\n  - `jira.workflow.transitions.list`\n  - `jira.workflow.transition.apply`\n  - `jira.status.list`\n  - `jira.priority.list`\n  - `jira.issuetype.list`\n- Transition validation:\n  - reject invalid transition IDs early\n  - enforce required fields schema before sending\n\n## Test strategy (MUST)\n### Unit/integration (mock-only)\n- Transition discovery tests (different workflows).\n- Transition apply tests:\n  - happy path\n  - missing required fields\n  - forbidden\n- Ensure transitions are idempotent where possible (replaying same transition should fail cleanly and not corrupt state).\n\n### Compliance\n- Ensure default deny + capability enforcement.\n- Ensure all transitions produce receipts/audit.\n\n## Acceptance criteria\n- Agents can reliably move issues through workflows with explicit, auditable evidence.\n- Denials are explainable via reason codes and decision receipts.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:14:36.158629934-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:15:30.897903324-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-w2v","depends_on_id":"flywheel_connectors-x9af","type":"parent-child","created_at":"2026-01-15T02:28:43.646556892-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-w2v","depends_on_id":"flywheel_connectors-x9af.1","type":"blocks","created_at":"2026-01-15T04:15:33.830069686-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-w3a2","title":"fcp.gitlab connector - GitLab DevOps platform integration","description":"# FCP GitLab Connector\n\nDevOps platform connector (GitHub alternative) for the GitLab ecosystem.\n\n## Overview\n\nThe `fcp.gitlab` connector provides comprehensive integration with GitLab's DevOps platform, enabling repository management, merge request workflows, CI/CD pipeline control, container registry access, and collaboration features.\n\n## Value Assessment\n\n- **Value Score**: 71/100 (Tier 4)\n- **Archetype**: Request-Response + Webhook\n- **Priority**: P3\n\n## Core Operations\n\n### Repository Management\n- Repository CRUD operations (create, read, update, delete/archive)\n- Branch management (create, delete, protect, unprotect)\n- Tag management and release creation\n- Fork operations and upstream sync\n- Repository mirroring configuration\n\n### Merge Request Management\n- MR creation with source/target branch specification\n- Review workflows (approve, unapprove, merge, close, reopen)\n- Inline comments and discussions\n- MR labels, milestones, and assignees\n- Draft/WIP MR handling\n- Merge conflict detection and resolution hints\n- Squash and merge options\n\n### Issue Tracking\n- Issue CRUD with full metadata\n- Labels, milestones, weights, due dates\n- Issue boards and swimlanes\n- Related issues and blocking relationships\n- Time tracking (estimates and spent time)\n- Issue templates\n\n### CI/CD Pipelines\n- Pipeline triggering and cancellation\n- Job management (retry, cancel, play manual jobs)\n- Pipeline schedules\n- Environment deployments\n- Artifact download and browsing\n- Pipeline variables and secrets (scoped)\n- Multi-project pipelines\n- Parent-child pipelines\n\n### Container Registry\n- Image listing and metadata\n- Tag management\n- Image deletion and garbage collection triggers\n- Repository-level registry operations\n\n### Wiki\n- Wiki page CRUD\n- Attachment handling\n- Wiki export\n\n### Snippets\n- Project and personal snippets\n- Multi-file snippet support\n- Snippet versioning\n\n## Zone Architecture\n\n\u003c!-- fcp2-single-zone-note --\u003e\n**FCP2 single-zone binding note:** A connector instance binds to exactly one `ZoneId` for its entire lifetime.\nThe *\"zones\"* described in this section are a **recommended deployment pattern** (run separate connector instances in separate zones with different capability grants/policies) and/or conceptual risk tiers.\nThe connector MUST NOT multiplex multiple zones internally.\n\n\n### Zone 1: Code Read\n- Repository metadata and content read\n- Branch and tag listing\n- MR and issue viewing\n- Pipeline status viewing\n- Wiki reading\n- Snippet viewing\n\n### Zone 2: Code Write\n- Repository content modifications\n- Branch and tag creation/deletion\n- MR and issue creation/modification\n- Wiki editing\n- Snippet management\n\n### Zone 3: CI/CD Control\n- Pipeline triggering and management\n- Job control (retry, cancel, play)\n- Environment management\n- Artifact access\n- Registry operations\n\n### Zone 4: Admin\n- Repository settings modification\n- Access level management\n- Webhook configuration\n- Protected branch rules\n- Deploy keys and tokens\n- Group/project transfer\n\n## API Integration\n\n### GitLab REST API v4\n- Primary API for most operations\n- Pagination handling (keyset and offset)\n- Rate limit awareness (429 responses)\n- Personal Access Token and OAuth2 authentication\n\n### GitLab GraphQL API\n- Complex queries with field selection\n- Batch operations\n- Efficient nested data retrieval\n- Mutation support for write operations\n\n## Dependencies\n\n- **fcp-core**: Base connector traits and types\n- **fcp-oauth**: OAuth2 authentication flow for GitLab\n- **fcp-webhook**: Webhook event handling for GitLab events\n- **fcp-ratelimit**: Rate limiting with GitLab-specific headers\n- **fcp-telemetry**: Observability and metrics\n\n## Webhook Events\n\nSupported GitLab webhook event types:\n- Push events\n- Tag push events\n- Merge request events\n- Issue events\n- Pipeline events\n- Job events\n- Deployment events\n- Wiki page events\n- Note (comment) events\n- Release events\n\n## Authentication Methods\n\n1. **Personal Access Token (PAT)**: Scoped tokens for API access\n2. **OAuth2**: Full OAuth2 flow for user authorization\n3. **CI Job Token**: For pipeline-initiated operations\n4. **Deploy Token**: Read-only access for deployments\n5. **Group/Project Access Token**: Scoped to specific resources\n\n## Rate Limiting\n\n- Standard: 2000 requests/minute for authenticated users\n- GraphQL: Complexity-based limiting\n- Retry-After header support\n- Automatic backoff on 429 responses\n\n## Design Considerations\n\n- Support for both GitLab.com and self-hosted instances\n- Configurable base URL for self-hosted\n- API version negotiation\n- Feature flag detection for instance capabilities\n- Graceful degradation for missing features\n\n## Acceptance Criteria\n\n- [ ] Repository CRUD operations functional\n- [ ] MR lifecycle management complete\n- [ ] Issue tracking integration working\n- [ ] Pipeline triggering and monitoring operational\n- [ ] Container registry operations functional\n- [ ] Wiki and snippet support implemented\n- [ ] Webhook event handling for all event types\n- [ ] OAuth2 and PAT authentication working\n- [ ] Rate limiting properly handled\n- [ ] Both REST and GraphQL APIs integrated\n- [ ] Self-hosted instance support verified\n- [ ] Zone-based permission model implemented\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T22:01:29.572827062-05:00","created_by":"ubuntu","updated_at":"2026-01-15T07:23:30.098389938-05:00","labels":["archetype:request-response","archetype:webhook","connector","devops","tier-4"],"dependencies":[{"issue_id":"flywheel_connectors-w3a2","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T22:08:21.823543869-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-w3a2","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T22:08:21.848140573-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-w3a2","depends_on_id":"flywheel_connectors-lj2","type":"blocks","created_at":"2026-01-11T22:08:32.424956372-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-w3a2","depends_on_id":"flywheel_connectors-vi7","type":"blocks","created_at":"2026-01-11T22:08:32.668209099-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-w3a2","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:36:49.408461549-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-w3a2","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T07:07:28.711726995-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-w3a2","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T07:09:25.802149912-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-w3a2","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T07:09:26.224005014-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-w3a2","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T07:09:26.636359306-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-w3a2","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T07:09:27.066342131-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-w3a2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T07:09:27.481509896-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-w3a2","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:09:27.904456376-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-w3a2.1","title":"fcp.gitlab: Manifest + Capability Map (FCP2)","description":"## Goal\nProduce the full FCP2 manifest and capability map for this connector.\n\nThis bead is where we translate the connector’s functional surface (operations) into a **mechanically checkable** contract:\n- operation schemas + schema IDs\n- capability families per operation\n- per-operation NetworkConstraints (default deny)\n- sandbox profile requirements\n- declared state model (stateless / singleton_writer / crdt)\n\n## Required content (must be explicit)\n- Operation list is exhaustive and stable for the current phase.\n- Capability IDs DO NOT encode hostnames/ports.\n- NetworkConstraints are minimal and per-operation.\n- Risk tier for each operation (Safe / Dangerous).\n- Explicit bounds: timeouts, max response sizes, pagination limits.\n\n## Tests\n- Add good/bad manifest examples for the compliance runner.\n\n## Acceptance Criteria\n- Passes static checks in `flywheel_connectors-1n78.21.5`.\n- Default-deny is enforced by manifest + capability requirements.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:53.652086647-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:12:53.652086647-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-w3a2.1","depends_on_id":"flywheel_connectors-w3a2","type":"parent-child","created_at":"2026-01-15T07:12:53.709912848-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-w3a2.2","title":"fcp.gitlab: Provisioning Automation","description":"## Goal\nAutomate provisioning and configuration with minimal human steps.\n\nThis bead owns:\n- auth setup (OAuth / API keys / webhook secrets) via `CredentialObject`/`CredentialId` (egress proxy injection preferred)\n- endpoint configuration\n- `fcp doctor` readiness checks\n- deterministic, mockable provisioning flows\n\n## FCP2 requirements\n- Secrets never touch disk.\n- Provisioning is deterministic and testable.\n- Error messages are actionable and do not leak secrets/PII.\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Provisioning emits structured logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:54.291253045-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:57.094271435-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-w3a2.2","depends_on_id":"flywheel_connectors-w3a2","type":"parent-child","created_at":"2026-01-15T07:12:54.354122704-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-w3a2.2","depends_on_id":"flywheel_connectors-w3a2.1","type":"blocks","created_at":"2026-01-15T07:12:54.894869786-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-w3a2.3","title":"TEST: fcp.gitlab Unit/Integration Tests (mock-only)","description":"## Goal\nMock-only unit/integration tests for this connector.\n\n## Required coverage\n- schema validation (inputs + outputs)\n- error taxonomy mapping (retry semantics)\n- pagination and bounds\n- rate limit behavior\n- redaction (no token/secret/PII leakage)\n- idempotency + receipts for Dangerous operations\n\n## Logging\nAll tests emit structured JSON logs per `flywheel_connectors-1n78.35`.\n\n## Acceptance Criteria\n- Deterministic tests; no live external calls.\n- Includes adversarial cases (timeouts, malformed responses, partial failures).\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:55.447607974-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:12:55.447607974-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-w3a2.3","depends_on_id":"flywheel_connectors-w3a2","type":"parent-child","created_at":"2026-01-15T07:12:55.507112529-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-w3a2.3","depends_on_id":"flywheel_connectors-w3a2.1","type":"blocks","created_at":"2026-01-15T07:12:56.052321433-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-w3a2.3","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:12:56.594849012-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-w3a2.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T07:32:20.778393744-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-w3a2.4","title":"E2E: fcp.gitlab Connector Compliance Run","description":"## Goal\nRun the shared connector compliance runner and capture an evidence bundle.\n\n## Must validate\n- handshake + introspection correctness\n- default deny (no CapabilityToken → deny + DecisionReceipt)\n- NetworkConstraints enforcement\n- receipts/audit for Dangerous operations\n- structured logs\n\n## Acceptance Criteria\n- E2E run is deterministic and produces a stable artifact bundle.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:57.062598572-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:12:57.062598572-05:00","labels":["connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-w3a2.4","depends_on_id":"flywheel_connectors-w3a2","type":"parent-child","created_at":"2026-01-15T07:12:57.119698064-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-w3a2.4","depends_on_id":"flywheel_connectors-w3a2.1","type":"blocks","created_at":"2026-01-15T07:12:57.659605353-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-w3a2.4","depends_on_id":"flywheel_connectors-w3a2.2","type":"blocks","created_at":"2026-01-15T07:12:58.203385493-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-w3a2.4","depends_on_id":"flywheel_connectors-w3a2.3","type":"blocks","created_at":"2026-01-15T07:12:58.816349646-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-w3a2.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T07:12:59.443803765-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-w94","title":"fcp.airtable: View filtering and sorting support","description":"# fcp.airtable: View Filtering and Sorting Support\n\n## Goal\nSupport Airtable views as a first-class query primitive (views encode filters/sorts that humans already curate).\n\n## Scope\nOperations (representative):\n- `airtable.views.list`\n- `airtable.views.get`\n- `airtable.views.records` (list records through a view)\n\n## Key requirements\n- Capability gated (`airtable.records.read` and/or `airtable.views.read`).\n- Views must be treated as “query presets”:\n  - do not silently broaden access beyond what the view returns\n  - enforce field selection and page size bounds\n- Sorting:\n  - preserve deterministic ordering when paginating\n- Filter formulas:\n  - validate/escape inputs to prevent injection into filter expressions\n\n## Tests\n- Mock-only tests cover:\n  - pagination stability under view sorting\n  - malformed view configs\n  - permission failures and rate limits\n\n## Acceptance Criteria\n- Agents can reliably paginate view results without duplicates.\n- Filter and sort behavior matches Airtable semantics.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:14:34.627840326-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:02:52.121059635-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-w94","depends_on_id":"flywheel_connectors-soft","type":"parent-child","created_at":"2026-01-15T02:29:57.435216289-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-w94","depends_on_id":"flywheel_connectors-soft.1","type":"blocks","created_at":"2026-01-15T04:02:57.303991672-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-wke","title":"fcp.qdrant: Qdrant Vector Database Connector","description":"# fcp.qdrant - Qdrant Vector Database Connector (FCP2)\n\n## Goal\nProvide an FCP2-compliant connector for Qdrant (self-hosted or managed) supporting vector storage and semantic retrieval under strict zone isolation.\n\n## Manifest archetypes (closed set)\n- `storage` (CRUD: collections/points)\n- `knowledge` (semantic retrieval/search)\n\n## Zone model\n- Single-zone bound: one connector instance ↔ one `ZoneId`.\n- Zone policies decide which datasets are accessible; the connector must never multiplex zones.\n\n## External surface\n### NetworkConstraints\nDefault-deny; allow only the configured Qdrant endpoint(s) and port(s) required by declared operations.\n\n**Important:** host restrictions are expressed via NetworkConstraints, not capability IDs.\n\n### Credential injection\n- API key / bearer token (if used) via `CredentialId`.\n- Optional TLS client auth via `CredentialId` (if required by deployment).\n\n## Capability model (illustrative)\n- `qdrant.collections.manage` (create/delete/update collections)\n- `qdrant.points.read`\n- `qdrant.points.write`\n- `qdrant.search.query`\n- `qdrant.snapshots.manage` (Dangerous)\n\n## Operations (initial)\n- Collections: create/get/list/delete\n- Points: upsert/get/delete/scroll\n- Search: query / batch query\n\n## Retry / idempotency\n- Upsert by point id is naturally idempotent; safe retries are allowed.\n- Delete operations must be receipt-bound and fail closed on uncertain outcomes.\n\n## Tests\n- Mock-only unit tests using wiremock.\n- E2E compliance run validates:\n  - default deny\n  - NetworkConstraints enforcement\n  - receipts/audit for writes\n\n## Acceptance Criteria\n- Passes connector compliance runner (static + dynamic).\n- No real Qdrant calls in unit tests.\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-11T10:12:06.686780504-05:00","created_by":"ubuntu","updated_at":"2026-01-15T08:37:57.156910135-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-wke","depends_on_id":"flywheel_connectors-iv7","type":"blocks","created_at":"2026-01-11T10:43:27.920659844-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-wke","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T10:43:27.951217643-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-wke","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T12:38:29.779089632-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-wke","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:27:15.995442734-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-wke","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:27:09.518802477-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-wke","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:27:09.608290546-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-wke","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T03:27:09.705013283-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-wke","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:27:09.799030003-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-wke","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T03:27:09.905042679-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-wke","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T07:09:59.485879081-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-wke","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:09:59.9196095-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-wke.1","title":"fcp.qdrant: Manifest + Capability Map (FCP2)","description":"# fcp.qdrant: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the Qdrant connector manifest contract:\n- archetypes (`storage`, `knowledge`)\n- operations + schema IDs\n- capability families + per-operation caps\n- NetworkConstraints bound to configured endpoint\n\n## Acceptance Criteria\n- Complete manifest spec stored here.\n- Good/bad manifest examples exist for static compliance.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:27:16.32408372-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:27:16.32408372-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-wke.1","depends_on_id":"flywheel_connectors-wke","type":"parent-child","created_at":"2026-01-15T03:27:16.325300762-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-wke.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:27:39.384030799-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-wke.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:27:39.473419883-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-wke.2","title":"fcp.qdrant: Core CRUD + Search Operations","description":"# fcp.qdrant: Core CRUD + Search Operations\n\n## Goal\nImplement the initial operations slice:\n- collections: create/get/list/delete\n- points: upsert/get/delete/scroll\n- search: query + batch query\n\n## Requirements\n- Capability gated.\n- Writes emit receipts/audit.\n- NetworkConstraints enforced.\n\n## Acceptance Criteria\n- Mock-only integration tests cover CRUD + search.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:27:20.988720797-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:27:20.988720797-05:00","labels":["connectors","fcp2","tier1"],"dependencies":[{"issue_id":"flywheel_connectors-wke.2","depends_on_id":"flywheel_connectors-wke","type":"parent-child","created_at":"2026-01-15T03:27:20.990354855-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-wke.2","depends_on_id":"flywheel_connectors-wke.1","type":"blocks","created_at":"2026-01-15T03:27:39.577153275-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-wke.3","title":"TEST: Qdrant Connector Unit/Integration Tests (mock-only)","description":"# TEST: Qdrant Connector Unit/Integration Tests (mock-only)\n\n## Must cover\n- Manifest determinism + interface_hash.\n- Request/response parsing.\n- Error taxonomy mapping.\n- Redaction.\n\n## Acceptance Criteria\n- Deterministic.\n- Structured JSON logs.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:27:27.001405225-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:27:27.001405225-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-wke.3","depends_on_id":"flywheel_connectors-wke","type":"parent-child","created_at":"2026-01-15T03:27:27.0026983-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-wke.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T03:27:39.750466958-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-wke.4","title":"E2E: Qdrant Connector Compliance Run","description":"# E2E: Qdrant Connector Compliance Run\n\n## Goal\nAdd Qdrant scenarios to the shared compliance harness.\n\n## Scenarios\n- Default deny.\n- Allow reads/writes with valid tokens.\n- Network guard allow/deny.\n\n## Acceptance Criteria\n- `cargo test --package fcp-e2e --features qdrant` passes deterministically.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:27:32.592446286-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:27:32.592446286-05:00","labels":["conformance","connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-wke.4","depends_on_id":"flywheel_connectors-wke","type":"parent-child","created_at":"2026-01-15T03:27:32.62550231-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-wke.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T03:27:39.911323588-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-wke.5","title":"fcp.qdrant: Provisioning Automation (Endpoint + Auth)","description":"## Goal\nAutomate provisioning and configuration with minimal human steps.\n\nThis bead owns:\n- auth setup (OAuth / API keys / webhook secrets) via `CredentialObject`/`CredentialId` (egress proxy injection preferred)\n- endpoint configuration\n- `fcp doctor` readiness checks\n- deterministic, mockable provisioning flows\n\n## FCP2 requirements\n- Secrets never touch disk.\n- Provisioning is deterministic and testable.\n- Error messages are actionable and do not leak secrets/PII.\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Provisioning emits structured logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:14:45.087684634-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:57.220091206-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-wke.5","depends_on_id":"flywheel_connectors-wke","type":"parent-child","created_at":"2026-01-15T07:14:45.144704346-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-wke.5","depends_on_id":"flywheel_connectors-wke.1","type":"blocks","created_at":"2026-01-15T07:14:45.756655268-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-wwq8","title":"[FCP2] DeviceProfile: Capability Reporting, Resource Constraints, Execution Fitness","description":"# [FCP2] DeviceProfile: Capability Reporting, Resource Constraints, Execution Fitness\n\n## Goal\nDefine and implement the DeviceProfile schema used by the execution planner to make device-aware routing and execution decisions.\n\n## Why This Matters\nThe spec envisions operations routing to devices based on capabilities (GPU, TPU, memory, battery, network). Without a concrete DeviceProfile schema, execution planning is guesswork.\n\n## DeviceProfile Schema (NORMATIVE)\n\n### Hardware Capabilities\n```\nDeviceProfile {\n  node_id: TailscaleNodeId,\n  profile_version: u32,\n  timestamp: u64,\n  \n  // Compute\n  cpu_cores: u16,\n  cpu_arch: CpuArch,  // x86_64, aarch64, wasm32\n  memory_mb: u32,\n  gpu: Option\u003cGpuProfile\u003e,\n  tpu: Option\u003cTpuProfile\u003e,\n  \n  // Storage\n  local_storage_mb: u64,\n  symbol_store_quota_mb: u32,\n  \n  // Power\n  power_source: PowerSource,  // Mains, Battery(percent), Solar\n  battery_percent: Option\u003cu8\u003e,\n  \n  // Network\n  bandwidth_estimate_kbps: u32,\n  latency_class: LatencyClass,  // Local, LAN, Internet, DERP\n  metered: bool,\n  \n  // Availability\n  availability: AvailabilityProfile,  // AlwaysOn, Scheduled, BestEffort\n  next_expected_downtime: Option\u003cu64\u003e,\n  \n  // Installed Connectors\n  connectors: Vec\u003cInstalledConnector\u003e,\n}\n```\n\n### GpuProfile\n```\nGpuProfile {\n  vendor: GpuVendor,  // Nvidia, AMD, Apple, Intel\n  model: String,\n  vram_mb: u32,\n  compute_capability: Option\u003cString\u003e,  // CUDA version, etc.\n}\n```\n\n### InstalledConnector\n```\nInstalledConnector {\n  connector_id: ConnectorId,\n  version: Version,\n  binary_hash: ObjectId,\n  capabilities: Vec\u003cCapabilityGrant\u003e,\n}\n```\n\n## Profile Publication\n- Nodes MUST publish DeviceProfile to mesh on:\n  - startup\n  - significant capability change\n  - connector install/remove\n  - periodic refresh (every 5min default)\n- Profile is a canonical mesh object (content-addressed)\n- Profiles are gossipped to all zone members\n\n## Execution Fitness Scoring\nThe execution planner uses DeviceProfile to compute fitness:\n```\nfitness = base_score\n  - derp_penalty (if would use DERP)\n  + locality_bonus (if symbols already present)\n  - battery_penalty (if on battery \u003c 20%)\n  + capability_bonus (if has required GPU/TPU)\n  - latency_penalty (based on latency_class)\n```\n\n## Tests\n- Unit tests: DeviceProfile serialization roundtrip\n- Unit tests: fitness scoring with various profiles\n- Integration tests: profile gossip propagation\n- Property tests: fitness ordering is stable and deterministic\n\n## Acceptance Criteria\n- DeviceProfile schema is canonical and versioned\n- Execution planner can query available profiles and compute fitness\n- Profile changes trigger re-evaluation of pending operations\n\n","status":"open","priority":0,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T02:53:06.636306865-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T02:53:06.636306865-05:00","labels":["fcp2","mesh","mvp","ux"],"dependencies":[{"issue_id":"flywheel_connectors-wwq8","depends_on_id":"flywheel_connectors-1n78","type":"blocks","created_at":"2026-01-15T02:54:35.345936928-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-wwq8","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T02:54:35.417688926-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-wwq8","depends_on_id":"flywheel_connectors-1n78.16","type":"blocks","created_at":"2026-01-15T02:54:35.495307994-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-wwq8","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T02:54:35.569991053-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-wyz0","title":"TEST: Tailscale Integration Unit Tests (MeshIdentity, NodeKeyAttestation, Peer Discovery)","description":"# TEST: Tailscale Integration Unit Tests\n\n## Scope\nComprehensive tests for Tailscale mesh identity and peer discovery.\n\n## Test Categories\n\n### MeshIdentity\n- [ ] Node ID derived from WireGuard pubkey\n- [ ] Identity is stable across restarts\n- [ ] Identity is unique per device\n- [ ] Identity format is canonical\n\n### NodeKeyAttestation\n- [ ] Attestation binds node signing key to mesh identity\n- [ ] Attestation is owner-signed\n- [ ] Attestation includes timestamp\n- [ ] Stale attestation detection\n- [ ] Attestation verification\n\n### Peer Discovery\n- [ ] Peers discovered via Tailscale API\n- [ ] Peer list updates on join/leave\n- [ ] Peer health monitoring\n- [ ] Peer capability detection\n- [ ] Peer filtering by ACL tags\n\n### ACL Tag Mapping\n- [ ] tag:fcp-owner maps to z:owner\n- [ ] tag:fcp-private maps to z:private\n- [ ] tag:fcp-work maps to z:work\n- [ ] tag:fcp-community maps to z:community\n- [ ] tag:fcp-public maps to z:public\n- [ ] Unknown tags handled gracefully\n\n### Transport Security\n- [ ] FCPS uses WireGuard encryption\n- [ ] Additional AEAD layer verified\n- [ ] No plaintext fallback\n- [ ] Connection failures logged\n\n## Golden Vectors\nLocation: `tests/vectors/tailscale/`\n- `mesh_identity.cbor`\n- `node_key_attestation.cbor`\n- `peer_discovery_response.json`\n\n## Logging Requirements\n```json\n{\n  \"timestamp\": \"RFC3339\",\n  \"test_name\": \"test_peer_discovery\",\n  \"phase\": \"execute\",\n  \"correlation_id\": \"uuid\",\n  \"node_id\": \"...\",\n  \"peers_discovered\": 3,\n  \"acl_tags\": [\"tag:fcp-work\"],\n  \"result\": \"pass\"\n}\n```\n\n## Acceptance Criteria\n- Mesh identity is stable and unique\n- Peer discovery works reliably\n- ACL tags map correctly to zones\n\n","status":"open","priority":0,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:27:30.019638948-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:27:30.019638948-05:00","labels":["fcp2","mesh","mvp","testing"],"dependencies":[{"issue_id":"flywheel_connectors-wyz0","depends_on_id":"flywheel_connectors-1n78.16","type":"blocks","created_at":"2026-01-15T03:27:40.39959743-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-wyz0","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T03:27:40.492396917-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-x9af","title":"fcp.jira: Atlassian Jira Enterprise Issue Tracking Connector","description":"# fcp.jira - Atlassian Jira Connector (FCP2)\n\n## Goal\nBuild a production-grade Jira connector that is **fully FCP2-compliant** for enterprise issue/project automation.\n\nHard requirements:\n- **Single-zone binding**: one connector instance ↔ exactly one `ZoneId`.\n- **Default deny**: every operation requires explicit CapabilityTokens.\n- **Sandbox + NetworkConstraints** enforced mechanically.\n- **Secrets never touch disk**; never appear in logs.\n\n## Manifest archetypes (closed set)\n- `operational` (REST CRUD + JQL)\n- `streaming` (webhook/event ingestion)\n- `bidirectional` (optional: Beads↔Jira sync)\n\n\u003e Note: “request-response” and “webhook” are interaction patterns, not manifest archetype values.\n\n## External surface (mechanical)\n### NetworkConstraints\nDefault-deny; allow only:\n- Jira Cloud: the configured `*.atlassian.net` hostname\n- Jira Server/DC: the configured self-hosted base URL hostname\n- Attachment download hosts if distinct (must be enumerated/pinned)\n\n### Credential injection\n- Cloud: OAuth2 or API token via `CredentialId`.\n- Server/DC: basic auth / PAT via `CredentialId` (only if policy allows).\n\n## Capability model (illustrative)\nCapability IDs MUST NOT encode hosts/ports.\n\nSuggested families:\n- `jira.issues.read` / `jira.issues.write`\n- `jira.issues.delete` (Dangerous)\n- `jira.comments.write`\n- `jira.attachments.read` / `jira.attachments.write` (Dangerous)\n- `jira.worklogs.write`\n- `jira.admin` (Dangerous)\n- `jira.webhooks.manage` (Dangerous)\n\n## Testing strategy (MUST)\n- Mock-only unit/integration tests (cloud + server variants).\n- E2E compliance run through the shared Mechanical Connector Compliance Runner:\n  - default deny\n  - NetworkConstraints enforcement\n  - receipts/audit for writes/dangerous ops\n  - structured JSON logs with correlation IDs\n\n---\n\n## Overview\nFull-featured Jira Cloud and Jira Server/Data Center connector enabling AI agents to manage issues, sprints, boards, and workflows in enterprise environments. Implements bidirectional sync with Flywheel Beads for seamless human↔agent task handoff.\n\n## Strategic Importance\n\n**Value Score: 90/100** (from prioritized connector analysis)\n\n### Why This Matters\n- **Jira dominates enterprise** (70%+ market share in issue tracking)\n- **Enterprise-ready agents** require Jira integration\n- Complements `fcp.linear` for organizations using Jira\n- **Bidirectional Beads sync** creates unified task management\n\n### Flywheel Ecosystem Synergy\n- **Beads (BV)**: Bidirectional sync with Jira issues\n- **Agent Mail**: Auto-assign based on Jira workflow transitions\n- **NTM**: Spawn agents for Jira issues automatically\n- **CASS**: Link code sessions to Jira tickets\n- **UBS**: Create Jira tickets from scan findings\n\n## Interaction patterns (non-archetype)\n\n**Request/Response + Webhook**\n| Pattern | Use Case |\n|---------|----------|\n| Request-Response | All CRUD operations via REST API |\n| Webhook | Real-time issue updates, workflow transitions |\n\n## Key Operations\n\n### Issue Operations\n- `jira.issue.create` - Create issue with full metadata\n- `jira.issue.get` - Get issue by key or ID\n- `jira.issue.update` - Update issue fields\n- `jira.issue.delete` - Delete issue (admin only)\n- `jira.issue.search` - JQL search with pagination\n- `jira.issue.assign` - Assign to user\n- `jira.issue.transition` - Move through workflow\n- `jira.issue.link` - Create issue link (blocks, relates, duplicates)\n- `jira.issue.unlink` - Remove issue link\n- `jira.issue.watch` - Add/remove watchers\n- `jira.issue.vote` - Vote on issue\n- `jira.issue.archive` - Archive issue\n\n### Comment Operations\n- `jira.comment.create` - Add comment (with visibility)\n- `jira.comment.update` - Edit comment\n- `jira.comment.delete` - Delete comment\n- `jira.comment.list` - List issue comments\n\n### Attachment Operations\n- `jira.attachment.add` - Attach file to issue\n- `jira.attachment.get` - Download attachment\n- `jira.attachment.delete` - Remove attachment\n- `jira.attachment.list` - List issue attachments\n\n### Worklog Operations (Time Tracking)\n- `jira.worklog.add` - Log work on issue\n- `jira.worklog.update` - Update worklog entry\n- `jira.worklog.delete` - Delete worklog\n- `jira.worklog.list` - List issue worklogs\n- `jira.worklog.user` - Get user timesheet\n\n### Sprint Operations\n- `jira.sprint.create` - Create sprint\n- `jira.sprint.get` - Get sprint details\n- `jira.sprint.update` - Update sprint\n- `jira.sprint.start` - Start sprint\n- `jira.sprint.complete` - Complete sprint\n- `jira.sprint.issues` - Get sprint issues\n- `jira.sprint.move_issues` - Move issues to sprint\n\n### Board Operations\n- `jira.board.list` - List boards\n- `jira.board.get` - Get board configuration\n- `jira.board.backlog` - Get backlog issues\n- `jira.board.sprints` - List board sprints\n- `jira.board.configuration` - Get board config\n\n### Project Operations\n- `jira.project.list` - List accessible projects\n- `jira.project.get` - Get project details\n- `jira.project.create` - Create project\n- `jira.project.update` - Update project settings\n- `jira.project.versions` - Manage versions/releases\n- `jira.project.components` - Manage components\n- `jira.project.roles` - Get project roles\n\n### User Operations\n- `jira.user.get` - Get user details\n- `jira.user.search` - Search users\n- `jira.user.assignable` - Get assignable users for project\n- `jira.myself` - Get authenticated user\n\n### Workflow Operations\n- `jira.workflow.transitions` - Get available transitions\n- `jira.workflow.schemes` - List workflow schemes\n- `jira.status.list` - List all statuses\n- `jira.priority.list` - List priorities\n- `jira.issuetype.list` - List issue types\n\n### Custom Field Operations\n- `jira.customfield.list` - List custom fields\n- `jira.customfield.options` - Get field options\n- `jira.customfield.context` - Get field context\n\n### JQL Search\n- `jira.jql.search` - Execute JQL query\n- `jira.jql.validate` - Validate JQL syntax\n- `jira.jql.autocomplete` - JQL autocomplete suggestions\n\n### Webhook Operations\n- `jira.webhook.register` - Register webhook\n- `jira.webhook.delete` - Remove webhook\n- `jira.webhook.list` - List webhooks\n\n### Automation Operations\n- `jira.automation.rules` - List automation rules\n- `jira.automation.trigger` - Manually trigger rule\n\n## JQL (Jira Query Language) Support\n\n### Query Builder\n```rust\n// Build type-safe JQL queries\nJqlBuilder::new()\n    .project(\"PROJ\")\n    .status_in([\"Open\", \"In Progress\"])\n    .assignee_is_empty()\n    .updated_after(\"-7d\")\n    .order_by(\"priority\", Desc)\n    .build()\n// → \"project = PROJ AND status IN (\\\"Open\\\", \\\"In Progress\\\") \n//    AND assignee IS EMPTY AND updated \u003e -7d ORDER BY priority DESC\"\n```\n\n### Common Queries\n- Find unassigned high-priority issues\n- Get issues updated in last 24h\n- Find issues blocking others\n- Sprint burndown data\n\n## Bidirectional Beads Sync Protocol (optional)\n\n```\nFlywheel Bead \u003c-----\u003e Jira Issue\n    |                     |\n    +-- title --------\u003e summary\n    +-- description --\u003e description (ADF markdown)\n    +-- status -------\u003e status (mapped via workflow)\n    +-- priority -----\u003e priority (mapped 1-5 scale)\n    +-- assignee -----\u003e assignee\n    +-- labels -------\u003e labels\n    +-- parent -------\u003e parent (epic/subtask)\n    +-- due_date -----\u003e duedate\n    +-- estimate -----\u003e timeoriginalestimate\n    +-- bead_id ------\u003e custom field (fcp.bead_id)\n```\n\n### Sync Configuration\n```toml\n[sync.jira]\nproject = \"PROJ\"\nfield_mapping = \"standard\"  # or \"custom\"\nconflict_resolution = \"last_write_wins\"\nsync_direction = \"bidirectional\"  # or \"jira_to_beads\", \"beads_to_jira\"\nissue_types = [\"Task\", \"Bug\", \"Story\"]\nexcluded_statuses = [\"Done\", \"Won't Do\"]\n```\n\n### Sync Events\n- Issue created in Jira → Create bead\n- Issue updated in Jira → Update bead (if mapped)\n- Bead created → Create issue (if sync enabled)\n- Bead status change → Transition issue\n- Conflict detected → Log + optionally notify\n\n## Jira Cloud vs Server/DC\n\n### API Differences\n| Feature | Cloud | Server/DC |\n|---------|-------|-----------|\n| Auth | OAuth 2.0 / API Token | Basic Auth / PAT |\n| Base URL | `*.atlassian.net` | Self-hosted |\n| API Version | REST v3 | REST v2 |\n| Webhooks | Cloud webhooks | Server webhooks |\n| Rate Limits | Per-user limits | Server capacity |\n\n### Configuration\n```toml\n[jira]\ndeployment = \"cloud\"  # or \"server\"\nbase_url = \"https://company.atlassian.net\"  # or self-hosted URL\napi_version = \"3\"  # or \"2\" for server\n\n[jira.auth.cloud]\noauth_client_id = \"...\"\noauth_client_secret = \"...\"\n\n[jira.auth.server]\nusername = \"...\"\napi_token = \"...\"\n```\n\n## Zone model (single-zone; policy-owned naming)\nThis connector is **single-zone bound**. Any “zone architecture” below is informational guidance about typical sensitivity, not a multi-zone runtime model.\n\nRecommended zone patterns (policy-owned):\n- `z:work:jira:\u003corg\u003e`\n- `z:project:\u003cname\u003e:jira`\n\n## Dependencies\n\n### Required FCP Crates\n- `fcp-core`: Base connector traits, zone management\n- `fcp-oauth`: OAuth 2.0 for Cloud, Basic Auth for Server (policy-gated)\n- `fcp-webhook`: Webhook registration and handling\n- `fcp-ratelimit`: Rate limit management\n- `fcp-telemetry`: Metrics and tracing\n\n## Implementation Notes\n\n### Custom Field Handling\n- Discover custom field IDs at runtime\n- Map common fields (Story Points, Sprint, Epic Link)\n- Support custom field types (cascading select, multi-select)\n- Handle field contexts (different projects = different options)\n\n### Atlassian Document Format (ADF)\n- Jira Cloud uses ADF for rich text (description, comments)\n- Convert markdown ↔ ADF\n- Handle embedded images, mentions, links\n- Preserve formatting on round-trip\n\n### Pagination\n- Use `startAt` and `maxResults` for standard pagination\n- Handle `nextPage` links in v3 API\n- Implement automatic depagination for searches\n\n### Error Handling\n| Code | Meaning | Recovery |\n|------|---------|----------|\n| 400 | Bad Request | Check field values |\n| 401 | Unauthorized | Refresh token |\n| 403 | Forbidden | Check permissions |\n| 404 | Not Found | Issue/project deleted |\n| 429 | Rate Limited | Backoff and retry |\n\n## Testing Strategy\n- Mock Jira API with `fcp-testkit`\n- Test both Cloud and Server API variants\n- Test JQL query building and parsing\n- Test ADF ↔ Markdown conversion\n- Validate bidirectional sync logic\n\n## Success Criteria\n- The epic includes (or references) the standard base beads `.1`..`.4` per `flywheel_connectors-lszk.5`.\n- The connector passes `flywheel_connectors-1n78.21.5` (static + dynamic) and has an E2E compliance run wired through `flywheel_connectors-e3i9`.\n- Unit/integration tests are mock-only (no real external calls) and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-11T21:38:50.694755557-05:00","created_by":"ubuntu","updated_at":"2026-01-15T08:37:57.283430105-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-x9af","depends_on_id":"flywheel_connectors-lj2","type":"blocks","created_at":"2026-01-11T22:07:52.758885628-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-x9af","depends_on_id":"flywheel_connectors-vi7","type":"blocks","created_at":"2026-01-11T22:07:52.786207444-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-x9af","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T22:07:52.811491934-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-x9af","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T22:07:52.83817155-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-x9af","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:28:14.107676545-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-x9af","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T04:05:55.321707326-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-x9af","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T04:05:55.494559405-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-x9af","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T04:05:55.670664742-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-x9af","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T04:05:55.843137486-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-x9af","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T04:05:56.026108487-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-x9af","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T04:05:56.195178872-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-x9af.1","title":"fcp.jira: Manifest + Capability Map (FCP2)","description":"# fcp.jira: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the Jira connector’s mechanical manifest contract:\n- archetypes (`operational`, `streaming`, optional `bidirectional`)\n- operations + schema IDs\n- capability families + per-operation required caps\n- NetworkConstraints bound to configured Jira host (cloud or server)\n- attachment host handling (enumerate/pin if required)\n\n## Outputs\n- Complete manifest spec stored here.\n- Good/bad manifest examples for static compliance.\n\n## Acceptance Criteria\n- Another engineer can implement `--manifest` from this bead alone.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:05:24.579784804-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:05:24.579784804-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-x9af.1","depends_on_id":"flywheel_connectors-x9af","type":"parent-child","created_at":"2026-01-15T04:05:24.581094932-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-x9af.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T04:05:54.357112242-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-x9af.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T04:05:54.518578021-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-x9af.2","title":"fcp.jira: Provisioning Automation (Cloud OAuth / Server PAT)","description":"# fcp.jira: Provisioning Automation (Cloud OAuth / Server PAT)\n\n## Goal\nAutomate Jira onboarding while keeping secrets zone-scoped.\n\n## Requirements\n- Cloud:\n  - OAuth2 via AutomationRecipe (preferred)\n  - API token only if policy allows\n- Server/DC:\n  - PAT/basic auth only if policy allows\n- All secrets via `CredentialId`.\n- Validate permissions and NetworkConstraints.\n\n## Acceptance Criteria\n- `fcp doctor` validates readiness.\n- Fully mockable.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:05:32.229836671-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:57.345167606-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-x9af.2","depends_on_id":"flywheel_connectors-x9af","type":"parent-child","created_at":"2026-01-15T04:05:32.231171416-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-x9af.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T04:05:54.699601984-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-x9af.3","title":"TEST: Jira Connector Unit/Integration Tests (mock-only)","description":"# TEST: Jira Connector Unit/Integration Tests (mock-only)\n\n## Must cover\n- Manifest determinism + interface_hash.\n- Cloud vs Server/DC API differences.\n- JQL builder and pagination.\n- ADF ↔ Markdown conversion.\n- Attachment URL validation and bounds.\n- Rate limits (429) and Retry-After.\n- Redaction (no tokens, no raw issue bodies by default).\n\n## Logging\nStructured JSON logs with correlation IDs; include request/response metadata (redacted) and latency.\n\n## Acceptance Criteria\n- Deterministic in CI.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:05:38.466024121-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:05:38.466024121-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-x9af.3","depends_on_id":"flywheel_connectors-x9af","type":"parent-child","created_at":"2026-01-15T04:05:38.467210566-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-x9af.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T04:05:54.884410887-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-x9af.4","title":"E2E: Jira Connector Compliance Run","description":"# E2E: Jira Connector Compliance Run\n\n## Goal\nAdd Jira scenarios to the shared connector compliance runner.\n\n## Scenarios\n- Default deny.\n- Allow with valid token.\n- Network guard allow/deny (host-bound).\n- Dangerous op gating (delete issue, admin actions).\n\n## Acceptance Criteria\n- `cargo test --package fcp-e2e --features jira` passes deterministically.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:05:44.326032935-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:05:44.326032935-05:00","labels":["conformance","connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-x9af.4","depends_on_id":"flywheel_connectors-x9af","type":"parent-child","created_at":"2026-01-15T04:05:44.327375905-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-x9af.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T04:05:55.126602708-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-xk2","title":"Add Slack connector","description":"Implement fcp-slack connector using Slack Web API and Socket Mode for real-time events. Support send_message, list_channels, get_user operations.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T09:38:34.936319491-05:00","created_by":"ubuntu","updated_at":"2026-01-15T03:47:46.548255416-05:00","closed_at":"2026-01-15T03:47:46.548255416-05:00","close_reason":"Duplicate of fcp.slack connector bead (flywheel_connectors-i1b)","dependencies":[{"issue_id":"flywheel_connectors-xk2","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:36:45.181111251-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-xme","title":"fcp.terraform: Plan generation and review (read-only)","description":"# fcp.terraform: Plan generation and review (read-only) (FCP2)\n\n## Goal\nProvide safe, read-only plan generation so agents can:\n- run `terraform plan` deterministically\n- parse plan output into a canonical object\n- review diffs without making changes\n\n## Scope\n- Validate configuration (no mutations).\n- Generate a plan artifact with:\n  - stable hash\n  - explicit backend/workspace context\n- Render plan summary (adds/changes/destroys counts).\n\n## Capability model (illustrative)\n- `terraform.plan` (read-only)\n- `terraform.state.read` (may be required)\n\n## FCP2 requirements\n- Single-zone binding.\n- Sandbox profile must forbid:\n  - interactive prompts\n  - uncontrolled filesystem writes\n- NetworkConstraints default deny unless backend/providers require explicit egress.\n- Plan artifacts must be integrity-checked (hash) before any apply.\n\n## Deliverables\n- Operation schemas:\n  - `terraform.validate`\n  - `terraform.plan.generate`\n  - `terraform.plan.show`\n- Canonical plan object type:\n  - resource change set\n  - outputs diff\n  - provider/version metadata\n\n## Test strategy (MUST)\n- Unit tests with a terraform shim/fake fixture:\n  - command args are correct (`-input=false`)\n  - parsing correctness\n  - bounds on stdout/stderr capture\n\n## Acceptance criteria\n- Plan generation is deterministic and safe-by-default.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:14:58.84801556-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:44:07.696612721-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-xme","depends_on_id":"flywheel_connectors-r6ty","type":"parent-child","created_at":"2026-01-15T02:33:01.539098728-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xme","depends_on_id":"flywheel_connectors-r6ty.1","type":"blocks","created_at":"2026-01-15T04:44:12.769741453-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-xmv","title":"fcp.datadog: APM trace inspection and analysis","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:17:46.543885375-05:00","created_by":"ubuntu","updated_at":"2026-01-11T12:10:12.874682992-05:00","closed_at":"2026-01-11T12:10:12.874682992-05:00","close_reason":"CONSOLIDATED: All Datadog sub-features merged into comprehensive parent connector bead flywheel_connectors-cu3 (fcp.datadog: Datadog Observability Platform Connector)"}
{"id":"flywheel_connectors-xo3e","title":"fcp.elasticsearch: Elasticsearch Search and Analytics Connector","description":"# fcp.elasticsearch - Elasticsearch Search and Analytics Connector\n\n## Overview\nElasticsearch connector for full-text search, analytics, and log aggregation.\n\n## Manifest archetypes (closed set)\n- `storage`\n- `knowledge`\n- `operational`\n\n\u003e Interaction patterns (non-archetype): Search/analytics DB (Request/Response)\n\n## Key Operations\n\n### Document Operations\n- `es.index` - Index document\n- `es.get` - Get document by ID\n- `es.delete` - Delete document\n- `es.update` - Update document\n- `es.bulk` - Bulk operations\n- `es.mget` - Multi-get\n- `es.reindex` - Reindex documents\n\n### Search Operations\n- `es.search` - Search documents\n- `es.msearch` - Multi-search\n- `es.count` - Count documents\n- `es.scroll` - Scroll API for large results\n- `es.point_in_time` - Point-in-time search\n- `es.search_template` - Templated search\n- `es.explain` - Explain query scoring\n\n### Query Types\n- match, match_phrase, multi_match\n- term, terms, range\n- bool (must, should, must_not, filter)\n- nested, has_child, has_parent\n- geo_distance, geo_bounding_box\n- fuzzy, wildcard, regexp\n- more_like_this\n\n### Aggregations\n- Metric: avg, sum, min, max, stats, cardinality\n- Bucket: terms, histogram, date_histogram, range\n- Pipeline: derivative, moving_avg, cumulative_sum\n- Matrix: matrix_stats\n\n### Index Operations\n- `es.indices.create` - Create index\n- `es.indices.delete` - Delete index\n- `es.indices.get` - Get index info\n- `es.indices.exists` - Check existence\n- `es.indices.refresh` - Refresh index\n- `es.indices.flush` - Flush index\n- `es.indices.open/close` - Open/close index\n\n### Mapping Operations\n- `es.indices.mapping.get` - Get mapping\n- `es.indices.mapping.put` - Update mapping\n\n### Alias Operations\n- `es.indices.alias.get` - Get aliases\n- `es.indices.alias.add/remove` - Manage aliases\n\n### Cluster Operations\n- `es.cluster.health` - Cluster health\n- `es.cluster.stats` - Cluster statistics\n- `es.nodes.info` - Node information\n\n### Analysis\n- `es.indices.analyze` - Analyze text\n- Custom analyzers, tokenizers, filters\n\n## Providers Supported\n- Elasticsearch (self-hosted)\n- Elastic Cloud\n- AWS OpenSearch\n- Azure Cognitive Search (partial)\n\n## Authentication\n- Basic authentication\n- API key\n- Cloud ID (Elastic Cloud)\n- AWS IAM (OpenSearch)\n\n## Rate Limits\n- Bulk request size limits\n- Scroll context limits\n- Circuit breaker settings\n\n## Zone Architecture\n\n\u003c!-- fcp2-single-zone-note --\u003e\n**FCP2 single-zone binding note:** A connector instance binds to exactly one `ZoneId` for its entire lifetime.\nThe *\"zones\"* described in this section are a **recommended deployment pattern** (run separate connector instances in separate zones with different capability grants/policies) and/or conceptual risk tiers.\nThe connector MUST NOT multiplex multiple zones internally.\n\n```\nZone 0 (Public):     Cluster info\nZone 1 (Authorized): Search operations\nZone 2 (Private):    Document data\nZone 3 (Sensitive):  Admin operations, credentials\n```\n\n## Dependencies\n- fcp-core, fcp-ratelimit, fcp-testkit, fcp-telemetry\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T12:37:09.690582798-05:00","created_by":"ubuntu","updated_at":"2026-01-15T07:42:51.718860942-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-xo3e","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T12:48:00.098142606-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-xo3e","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T12:48:00.135038456-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-xo3e","depends_on_id":"flywheel_connectors-iv7","type":"blocks","created_at":"2026-01-11T12:48:00.171264513-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-xo3e","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:31:48.397107948-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xo3e","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T07:09:22.816598453-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xo3e","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T07:09:23.260789081-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xo3e","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T07:09:23.694595774-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xo3e","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T07:09:24.118305473-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xo3e","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T07:09:24.543663729-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xo3e","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T07:09:24.956637369-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xo3e","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:09:25.390592101-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-xo3e.1","title":"fcp.elasticsearch: Manifest + Capability Map (FCP2)","description":"## Goal\nProduce the full FCP2 manifest and capability map for this connector.\n\nThis bead is where we translate the connector’s functional surface (operations) into a **mechanically checkable** contract:\n- operation schemas + schema IDs\n- capability families per operation\n- per-operation NetworkConstraints (default deny)\n- sandbox profile requirements\n- declared state model (stateless / singleton_writer / crdt)\n\n## Required content (must be explicit)\n- Operation list is exhaustive and stable for the current phase.\n- Capability IDs DO NOT encode hostnames/ports.\n- NetworkConstraints are minimal and per-operation.\n- Risk tier for each operation (Safe / Dangerous).\n- Explicit bounds: timeouts, max response sizes, pagination limits.\n\n## Tests\n- Add good/bad manifest examples for the compliance runner.\n\n## Acceptance Criteria\n- Passes static checks in `flywheel_connectors-1n78.21.5`.\n- Default-deny is enforced by manifest + capability requirements.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:47.481057176-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:12:47.481057176-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-xo3e.1","depends_on_id":"flywheel_connectors-xo3e","type":"parent-child","created_at":"2026-01-15T07:12:47.538533207-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-xo3e.2","title":"fcp.elasticsearch: Provisioning Automation","description":"## Goal\nAutomate provisioning and configuration with minimal human steps.\n\nThis bead owns:\n- auth setup (OAuth / API keys / webhook secrets) via `CredentialObject`/`CredentialId` (egress proxy injection preferred)\n- endpoint configuration\n- `fcp doctor` readiness checks\n- deterministic, mockable provisioning flows\n\n## FCP2 requirements\n- Secrets never touch disk.\n- Provisioning is deterministic and testable.\n- Error messages are actionable and do not leak secrets/PII.\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Provisioning emits structured logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:48.072680168-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:57.410506856-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-xo3e.2","depends_on_id":"flywheel_connectors-xo3e","type":"parent-child","created_at":"2026-01-15T07:12:48.130147002-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xo3e.2","depends_on_id":"flywheel_connectors-xo3e.1","type":"blocks","created_at":"2026-01-15T07:12:48.660810906-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-xo3e.3","title":"TEST: fcp.elasticsearch Unit/Integration Tests (mock-only)","description":"## Goal\nMock-only unit/integration tests for this connector.\n\n## Required coverage\n- schema validation (inputs + outputs)\n- error taxonomy mapping (retry semantics)\n- pagination and bounds\n- rate limit behavior\n- redaction (no token/secret/PII leakage)\n- idempotency + receipts for Dangerous operations\n\n## Logging\nAll tests emit structured JSON logs per `flywheel_connectors-1n78.35`.\n\n## Acceptance Criteria\n- Deterministic tests; no live external calls.\n- Includes adversarial cases (timeouts, malformed responses, partial failures).\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:49.195423193-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:12:49.195423193-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-xo3e.3","depends_on_id":"flywheel_connectors-xo3e","type":"parent-child","created_at":"2026-01-15T07:12:49.251845438-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xo3e.3","depends_on_id":"flywheel_connectors-xo3e.1","type":"blocks","created_at":"2026-01-15T07:12:49.784256706-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xo3e.3","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:12:50.316170897-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xo3e.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T07:32:21.396498481-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-xo3e.4","title":"E2E: fcp.elasticsearch Connector Compliance Run","description":"## Goal\nRun the shared connector compliance runner and capture an evidence bundle.\n\n## Must validate\n- handshake + introspection correctness\n- default deny (no CapabilityToken → deny + DecisionReceipt)\n- NetworkConstraints enforcement\n- receipts/audit for Dangerous operations\n- structured logs\n\n## Acceptance Criteria\n- E2E run is deterministic and produces a stable artifact bundle.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:50.773267114-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:12:50.773267114-05:00","labels":["connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-xo3e.4","depends_on_id":"flywheel_connectors-xo3e","type":"parent-child","created_at":"2026-01-15T07:12:50.831523156-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xo3e.4","depends_on_id":"flywheel_connectors-xo3e.1","type":"blocks","created_at":"2026-01-15T07:12:51.37246228-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xo3e.4","depends_on_id":"flywheel_connectors-xo3e.2","type":"blocks","created_at":"2026-01-15T07:12:51.907564181-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xo3e.4","depends_on_id":"flywheel_connectors-xo3e.3","type":"blocks","created_at":"2026-01-15T07:12:52.534381218-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xo3e.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T07:12:53.142551574-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-xz3g","title":"fcp.bitbucket - Atlassian DevOps Connector","description":"# fcp.bitbucket - Atlassian Bitbucket Connector\n\n## Overview\n\nFlywheel Connector Platform connector for Atlassian Bitbucket Cloud and Server. Provides comprehensive repository management, pull request workflows, CI/CD pipeline integration, and Atlassian ecosystem connectivity.\n\n**Value Score:** 70/100 (Tier 4)\n**Archetype:** Request-Response + Webhook\n**API:** Bitbucket REST API 2.0\n\n## Architecture\n\n### Zone-Based Permission Model\n\n```\n┌─────────────────────────────────────────────────────────────┐\n│                    fcp.bitbucket Zones                       │\n├─────────────────┬─────────────────┬─────────────────────────┤\n│   code:read     │   code:write    │   pipeline:control      │\n│   - repo list   │   - commits     │   - trigger builds      │\n│   - branches    │   - branches    │   - stop pipelines      │\n│   - PRs (view)  │   - PR create   │   - deployments         │\n│   - snippets    │   - PR merge    │   - environments        │\n├─────────────────┴─────────────────┴─────────────────────────┤\n│                       admin                                  │\n│   - workspace settings, webhooks, access control             │\n└─────────────────────────────────────────────────────────────┘\n```\n\n### Core Operations\n\n**Repository Management**\n- `repo.list` - List repositories in workspace\n- `repo.get` - Get repository details\n- `repo.create` - Create new repository\n- `repo.update` - Update repository settings\n- `repo.delete` - Delete repository\n- `repo.fork` - Fork repository\n- `repo.transfer` - Transfer repository ownership\n\n**Pull Request Workflows**\n- `pr.list` - List pull requests with filters\n- `pr.get` - Get PR details with diff stats\n- `pr.create` - Create pull request\n- `pr.update` - Update PR title/description\n- `pr.merge` - Merge pull request\n- `pr.decline` - Decline pull request\n- `pr.approve` - Approve pull request\n- `pr.unapprove` - Remove approval\n- `pr.request_changes` - Request changes\n- `pr.comment` - Add inline/general comments\n- `pr.diff` - Get PR diff\n\n**Issue Tracking**\n- `issue.list` - List repository issues\n- `issue.get` - Get issue details\n- `issue.create` - Create issue\n- `issue.update` - Update issue\n- `issue.delete` - Delete issue\n- `issue.comment` - Add comment\n\n**Pipeline/CI Operations**\n- `pipeline.list` - List pipeline runs\n- `pipeline.get` - Get pipeline details\n- `pipeline.trigger` - Trigger pipeline\n- `pipeline.stop` - Stop running pipeline\n- `pipeline.steps` - Get pipeline steps\n- `pipeline.logs` - Get step logs\n- `deployment.list` - List deployments\n- `deployment.promote` - Promote to environment\n\n**Snippets (Gists equivalent)**\n- `snippet.list` - List snippets\n- `snippet.get` - Get snippet content\n- `snippet.create` - Create snippet\n- `snippet.update` - Update snippet\n- `snippet.delete` - Delete snippet\n\n**Branch Operations**\n- `branch.list` - List branches\n- `branch.create` - Create branch\n- `branch.delete` - Delete branch\n- `branch.restrictions` - Manage branch restrictions\n\n## Dependencies\n\n```toml\n[dependencies]\nfcp-core = { path = \"../fcp-core\" }\nfcp-oauth = { path = \"../fcp-oauth\" }\nfcp-webhook = { path = \"../fcp-webhook\" }\nfcp-ratelimit = { path = \"../fcp-ratelimit\" }\nfcp-telemetry = { path = \"../fcp-telemetry\" }\n\n# Runtime\ntokio = { version = \"1\", features = [\"full\"] }\nreqwest = { version = \"0.12\", features = [\"json\", \"stream\"] }\nserde = { version = \"1\", features = [\"derive\"] }\nserde_json = \"1\"\nasync-trait = \"0.1\"\nthiserror = \"2\"\ntracing = \"0.1\"\n```\n\n## Authentication\n\n### OAuth 2.0 (Bitbucket Cloud)\n- Authorization Code flow for user access\n- App Passwords as fallback\n- Workspace-level app authorization\n\n### Personal Access Tokens (Bitbucket Server/DC)\n- HTTP Access Tokens\n- Project/repo-level permissions\n\n### Scopes Required\n```\naccount              - Read user account info\nrepository           - Read repository data\nrepository:write     - Write repository data  \npullrequest          - Read pull requests\npullrequest:write    - Create/modify PRs\npipeline             - Read pipeline data\npipeline:write       - Trigger pipelines\nwebhook              - Manage webhooks\nsnippet              - Read snippets\nsnippet:write        - Create/modify snippets\n```\n\n## Webhook Events\n\n```rust\npub enum BitbucketWebhookEvent {\n    // Repository events\n    RepoCreated,\n    RepoUpdated,\n    RepoDeleted,\n    RepoFork,\n    RepoTransfer,\n    RepoPush,\n    \n    // Pull Request events\n    PrCreated,\n    PrUpdated,\n    PrApproved,\n    PrUnapproved,\n    PrMerged,\n    PrDeclined,\n    PrCommentCreated,\n    PrCommentUpdated,\n    PrCommentDeleted,\n    \n    // Issue events\n    IssueCreated,\n    IssueUpdated,\n    IssueCommentCreated,\n    \n    // Pipeline events\n    PipelineCreated,\n    PipelineCompleted,\n    PipelineFailed,\n    \n    // Deployment events\n    DeploymentCreated,\n    DeploymentCompleted,\n    DeploymentFailed,\n}\n```\n\n## Atlassian Ecosystem Integration\n\n### Jira Integration\n- Smart commits (transition issues from commit messages)\n- PR-to-issue linking\n- Development panel data\n- Automation triggers\n\n### Confluence Integration\n- Repository documentation links\n- Code snippet embedding\n\n### Trello Integration\n- Card attachments from commits/PRs\n\n## Rate Limiting\n\n```rust\npub struct BitbucketRateLimits {\n    // Cloud API limits\n    pub cloud_requests_per_hour: u32,     // 1000 authenticated\n    pub cloud_burst_limit: u32,            // 30 per second\n    \n    // Server/DC limits (configurable)\n    pub server_requests_per_hour: Option\u003cu32\u003e,\n    \n    // Git operations\n    pub git_clone_concurrent: u32,         // 5\n    pub git_push_size_mb: u32,             // 100\n}\n```\n\n## Implementation Phases\n\n### Phase 1: Core Repository Operations\n- [ ] OAuth 2.0 authentication flow\n- [ ] Repository CRUD operations\n- [ ] Branch management\n- [ ] Basic rate limiting\n\n### Phase 2: Pull Request Workflows\n- [ ] PR lifecycle management\n- [ ] Review/approval workflow\n- [ ] Inline comments with suggestions\n- [ ] Merge strategies (merge, squash, fast-forward)\n\n### Phase 3: CI/CD Integration\n- [ ] Pipeline triggers\n- [ ] Build status reporting\n- [ ] Deployment environments\n- [ ] Pipeline logs streaming\n\n### Phase 4: Advanced Features\n- [ ] Webhook receiver setup\n- [ ] Real-time event streaming\n- [ ] Jira deep integration\n- [ ] Snippet management\n\n## API Endpoints Reference\n\nBase URLs:\n- Cloud: `https://api.bitbucket.org/2.0`\n- Server: `https://{server}/rest/api/1.0`\n\nKey endpoints:\n```\nGET    /repositories/{workspace}\nGET    /repositories/{workspace}/{repo_slug}\nPOST   /repositories/{workspace}/{repo_slug}\nPUT    /repositories/{workspace}/{repo_slug}\nDELETE /repositories/{workspace}/{repo_slug}\n\nGET    /repositories/{workspace}/{repo_slug}/pullrequests\nPOST   /repositories/{workspace}/{repo_slug}/pullrequests\nGET    /repositories/{workspace}/{repo_slug}/pullrequests/{pr_id}\nPUT    /repositories/{workspace}/{repo_slug}/pullrequests/{pr_id}\nPOST   /repositories/{workspace}/{repo_slug}/pullrequests/{pr_id}/merge\nPOST   /repositories/{workspace}/{repo_slug}/pullrequests/{pr_id}/decline\nPOST   /repositories/{workspace}/{repo_slug}/pullrequests/{pr_id}/approve\n\nGET    /repositories/{workspace}/{repo_slug}/pipelines\nPOST   /repositories/{workspace}/{repo_slug}/pipelines\nGET    /repositories/{workspace}/{repo_slug}/pipelines/{pipeline_uuid}\nPOST   /repositories/{workspace}/{repo_slug}/pipelines/{pipeline_uuid}/stopPipeline\n```\n\n## Testing Strategy\n\n- Unit tests for API response parsing\n- Integration tests with Bitbucket Cloud sandbox\n- Webhook signature verification tests\n- Rate limit handling tests\n- OAuth flow tests with mock server\n\n## Acceptance Criteria\n\n- [ ] All CRUD operations for repositories work correctly\n- [ ] Pull request workflow complete (create, review, merge)\n- [ ] Pipeline triggering and status monitoring functional\n- [ ] Webhook events properly received and parsed\n- [ ] Rate limiting prevents API abuse\n- [ ] OAuth refresh tokens handled automatically\n- [ ] Jira integration links work bidirectionally\n- [ ] Both Cloud and Server APIs supported","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T22:06:40.4001574-05:00","created_by":"ubuntu","updated_at":"2026-01-11T22:06:40.4001574-05:00","labels":["atlassian","connector","devops","tier-4"],"dependencies":[{"issue_id":"flywheel_connectors-xz3g","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T22:08:22.421614003-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-xz3g","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T22:08:22.448317265-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-xz3g","depends_on_id":"flywheel_connectors-lj2","type":"blocks","created_at":"2026-01-11T22:08:32.588595058-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-xz3g","depends_on_id":"flywheel_connectors-vi7","type":"blocks","created_at":"2026-01-11T22:08:32.861455986-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-xz3g","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:37:25.881644379-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xz3g","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T07:07:27.828532797-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xz3g","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T07:09:14.862452961-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xz3g","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T07:09:15.289145643-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xz3g","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T07:09:15.699268328-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xz3g","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T07:09:16.133911528-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xz3g","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T07:09:16.541751109-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xz3g","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:09:16.960842943-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-xz3g.1","title":"fcp.bitbucket: Manifest + Capability Map (FCP2)","description":"## Goal\nProduce the full FCP2 manifest and capability map for this connector.\n\nThis bead is where we translate the connector’s functional surface (operations) into a **mechanically checkable** contract:\n- operation schemas + schema IDs\n- capability families per operation\n- per-operation NetworkConstraints (default deny)\n- sandbox profile requirements\n- declared state model (stateless / singleton_writer / crdt)\n\n## Required content (must be explicit)\n- Operation list is exhaustive and stable for the current phase.\n- Capability IDs DO NOT encode hostnames/ports.\n- NetworkConstraints are minimal and per-operation.\n- Risk tier for each operation (Safe / Dangerous).\n- Explicit bounds: timeouts, max response sizes, pagination limits.\n\n## Tests\n- Add good/bad manifest examples for the compliance runner.\n\n## Acceptance Criteria\n- Passes static checks in `flywheel_connectors-1n78.21.5`.\n- Default-deny is enforced by manifest + capability requirements.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:29.202061185-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:12:29.202061185-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-xz3g.1","depends_on_id":"flywheel_connectors-xz3g","type":"parent-child","created_at":"2026-01-15T07:12:29.261486711-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-xz3g.2","title":"fcp.bitbucket: Provisioning Automation","description":"## Goal\nAutomate provisioning and configuration with minimal human steps.\n\nThis bead owns:\n- auth setup (OAuth / API keys / webhook secrets) via `CredentialObject`/`CredentialId` (egress proxy injection preferred)\n- endpoint configuration\n- `fcp doctor` readiness checks\n- deterministic, mockable provisioning flows\n\n## FCP2 requirements\n- Secrets never touch disk.\n- Provisioning is deterministic and testable.\n- Error messages are actionable and do not leak secrets/PII.\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Provisioning emits structured logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:29.783331961-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:57.472694034-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-xz3g.2","depends_on_id":"flywheel_connectors-xz3g","type":"parent-child","created_at":"2026-01-15T07:12:29.840840293-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xz3g.2","depends_on_id":"flywheel_connectors-xz3g.1","type":"blocks","created_at":"2026-01-15T07:12:30.353240327-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-xz3g.3","title":"TEST: fcp.bitbucket Unit/Integration Tests (mock-only)","description":"## Goal\nMock-only unit/integration tests for this connector.\n\n## Required coverage\n- schema validation (inputs + outputs)\n- error taxonomy mapping (retry semantics)\n- pagination and bounds\n- rate limit behavior\n- redaction (no token/secret/PII leakage)\n- idempotency + receipts for Dangerous operations\n\n## Logging\nAll tests emit structured JSON logs per `flywheel_connectors-1n78.35`.\n\n## Acceptance Criteria\n- Deterministic tests; no live external calls.\n- Includes adversarial cases (timeouts, malformed responses, partial failures).\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:30.872239471-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:12:30.872239471-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-xz3g.3","depends_on_id":"flywheel_connectors-xz3g","type":"parent-child","created_at":"2026-01-15T07:12:30.929265304-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xz3g.3","depends_on_id":"flywheel_connectors-xz3g.1","type":"blocks","created_at":"2026-01-15T07:12:31.447275413-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xz3g.3","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:12:31.958473151-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xz3g.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T07:32:22.009523211-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-xz3g.4","title":"E2E: fcp.bitbucket Connector Compliance Run","description":"## Goal\nRun the shared connector compliance runner and capture an evidence bundle.\n\n## Must validate\n- handshake + introspection correctness\n- default deny (no CapabilityToken → deny + DecisionReceipt)\n- NetworkConstraints enforcement\n- receipts/audit for Dangerous operations\n- structured logs\n\n## Acceptance Criteria\n- E2E run is deterministic and produces a stable artifact bundle.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:32.401339102-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:12:32.401339102-05:00","labels":["connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-xz3g.4","depends_on_id":"flywheel_connectors-xz3g","type":"parent-child","created_at":"2026-01-15T07:12:32.460316273-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xz3g.4","depends_on_id":"flywheel_connectors-xz3g.1","type":"blocks","created_at":"2026-01-15T07:12:32.978400673-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xz3g.4","depends_on_id":"flywheel_connectors-xz3g.2","type":"blocks","created_at":"2026-01-15T07:12:33.527942044-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xz3g.4","depends_on_id":"flywheel_connectors-xz3g.3","type":"blocks","created_at":"2026-01-15T07:12:34.140168766-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xz3g.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T07:12:34.7407311-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-xz6e","title":"fcp.reddit","description":"# FCP Reddit Connector - Community Intelligence Platform\n\n## Overview\nThe fcp.reddit connector provides access to Reddit's vast community-driven content ecosystem. Reddit serves as one of the most valuable sources for authentic user opinions, niche community expertise, and real-time sentiment analysis. This connector enables AI agents to read, search, and interact with Reddit's millions of communities.\n\n## Value Assessment\n\n**Value Score: 77/100 (Tier 3 - Specialized)**\n\n| Dimension | Score | Rationale |\n|-----------|-------|-----------|\n| Data Uniqueness | 85 | Authentic user opinions unavailable elsewhere; deep niche expertise |\n| AI Agent Utility | 75 | Excellent for research, sentiment, community insights |\n| Integration Complexity | 70 | OAuth required, rate limits, content policies |\n| Market Demand | 78 | High demand for social listening and community research |\n\n**Why Tier 3**: Reddit offers irreplaceable access to authentic community discussions and sentiment, but requires careful handling of rate limits, content policies, and the distinction between read-only and write operations.\n\n## Manifest archetypes (closed set)\n\n- `knowledge`\n- `operational`\n- `streaming`\n\n\u003e Interaction patterns (non-archetype): Request/Response + Polling (monitoring -\u003e Streaming events)\n\n```\n┌─────────────────────────────────────────────────────────────┐\n│                    FCP Reddit Connector                      │\n├─────────────────────────────────────────────────────────────┤\n│                                                              │\n│  ┌──────────────┐    ┌──────────────┐    ┌──────────────┐  │\n│  │   Browse     │    │    Search    │    │   Monitor    │  │\n│  │  Subreddits  │    │   Content    │    │   (Polling)  │  │\n│  └──────┬───────┘    └──────┬───────┘    └──────┬───────┘  │\n│         │                   │                   │           │\n│         └───────────────────┼───────────────────┘           │\n│                             ▼                               │\n│                    ┌────────────────┐                       │\n│                    │  Reddit API    │                       │\n│                    │  (OAuth 2.0)   │                       │\n│                    └────────────────┘                       │\n│                             │                               │\n│         ┌───────────────────┼───────────────────┐           │\n│         ▼                   ▼                   ▼           │\n│  ┌──────────────┐    ┌──────────────┐    ┌──────────────┐  │\n│  │    Read      │    │    Write     │    │  Moderate    │  │\n│  │   (Public)   │    │   (Auth)     │    │   (Mod)      │  │\n│  └──────────────┘    └──────────────┘    └──────────────┘  │\n│                                                              │\n└─────────────────────────────────────────────────────────────┘\n```\n\n## Core Operations\n\n### Read Operations (Zone: Public/Authenticated)\n```rust\n// Subreddit browsing\nfn get_subreddit_info(name: \u0026str) -\u003e SubredditInfo;\nfn get_subreddit_posts(name: \u0026str, sort: Sort, limit: u32) -\u003e Vec\u003cPost\u003e;\nfn get_post_comments(post_id: \u0026str, sort: CommentSort) -\u003e CommentTree;\n\n// Search\nfn search_subreddit(name: \u0026str, query: \u0026str, opts: SearchOpts) -\u003e Vec\u003cPost\u003e;\nfn search_all(query: \u0026str, opts: SearchOpts) -\u003e Vec\u003cPost\u003e;\nfn search_comments(query: \u0026str, opts: SearchOpts) -\u003e Vec\u003cComment\u003e;\n\n// User content\nfn get_user_posts(username: \u0026str) -\u003e Vec\u003cPost\u003e;\nfn get_user_comments(username: \u0026str) -\u003e Vec\u003cComment\u003e;\n```\n\n### Write Operations (Zone: Authenticated)\n```rust\n// Posting\nfn submit_post(subreddit: \u0026str, post: NewPost) -\u003e Post;\nfn submit_comment(parent_id: \u0026str, body: \u0026str) -\u003e Comment;\nfn edit_content(thing_id: \u0026str, body: \u0026str) -\u003e Result\u003c()\u003e;\nfn delete_content(thing_id: \u0026str) -\u003e Result\u003c()\u003e;\n\n// Voting and saving\nfn vote(thing_id: \u0026str, direction: Vote) -\u003e Result\u003c()\u003e;\nfn save(thing_id: \u0026str) -\u003e Result\u003c()\u003e;\nfn unsave(thing_id: \u0026str) -\u003e Result\u003c()\u003e;\n\n// Messaging\nfn send_message(to: \u0026str, subject: \u0026str, body: \u0026str) -\u003e Result\u003c()\u003e;\nfn get_inbox() -\u003e Vec\u003cMessage\u003e;\n```\n\n### Moderation Operations (Zone: Moderator)\n```rust\nfn approve(thing_id: \u0026str) -\u003e Result\u003c()\u003e;\nfn remove(thing_id: \u0026str, reason: Option\u003c\u0026str\u003e) -\u003e Result\u003c()\u003e;\nfn ban_user(subreddit: \u0026str, user: \u0026str, opts: BanOpts) -\u003e Result\u003c()\u003e;\nfn get_mod_queue(subreddit: \u0026str) -\u003e Vec\u003cModQueueItem\u003e;\nfn get_reports(subreddit: \u0026str) -\u003e Vec\u003cReport\u003e;\n```\n\n### Monitoring Operations (Polling Pattern)\n```rust\n// Real-time-ish monitoring via polling\nfn poll_new_posts(subreddit: \u0026str, interval: Duration) -\u003e Stream\u003cPost\u003e;\nfn poll_new_comments(subreddit: \u0026str, interval: Duration) -\u003e Stream\u003cComment\u003e;\nfn poll_mentions(interval: Duration) -\u003e Stream\u003cComment\u003e;\n```\n\n## Data Models\n\n```rust\npub struct Post {\n    pub id: String,\n    pub title: String,\n    pub author: String,\n    pub subreddit: String,\n    pub selftext: Option\u003cString\u003e,\n    pub url: Option\u003cString\u003e,\n    pub score: i32,\n    pub upvote_ratio: f32,\n    pub num_comments: u32,\n    pub created_utc: i64,\n    pub permalink: String,\n    pub is_self: bool,\n    pub link_flair_text: Option\u003cString\u003e,\n    pub over_18: bool,\n    pub spoiler: bool,\n    pub locked: bool,\n    pub archived: bool,\n}\n\npub struct Comment {\n    pub id: String,\n    pub author: String,\n    pub body: String,\n    pub body_html: String,\n    pub score: i32,\n    pub created_utc: i64,\n    pub parent_id: String,\n    pub link_id: String,\n    pub subreddit: String,\n    pub is_submitter: bool,\n    pub edited: Option\u003ci64\u003e,\n    pub replies: Vec\u003cComment\u003e,\n}\n\npub struct SubredditInfo {\n    pub name: String,\n    pub display_name: String,\n    pub title: String,\n    pub description: String,\n    pub subscribers: u64,\n    pub active_users: u32,\n    pub created_utc: i64,\n    pub over18: bool,\n    pub subreddit_type: SubredditType,  // public, private, restricted\n}\n\npub enum Sort {\n    Hot,\n    New,\n    Top(TimeFilter),\n    Rising,\n    Controversial(TimeFilter),\n}\n\npub enum TimeFilter {\n    Hour,\n    Day,\n    Week,\n    Month,\n    Year,\n    All,\n}\n```\n\n## Zone Architecture\n\n\u003c!-- fcp2-single-zone-note --\u003e\n**FCP2 single-zone binding note:** A connector instance binds to exactly one `ZoneId` for its entire lifetime.\nThe *\"zones\"* described in this section are a **recommended deployment pattern** (run separate connector instances in separate zones with different capability grants/policies) and/or conceptual risk tiers.\nThe connector MUST NOT multiplex multiple zones internally.\n\n\n```\n┌─────────────────────────────────────────────────────────────────────┐\n│                        PERMISSION ZONES                              │\n├─────────────────────────────────────────────────────────────────────┤\n│                                                                      │\n│  ┌─────────────────────────────────────────────────────────────┐   │\n│  │  ZONE 1: Read-Only (Public)                                  │   │\n│  │  - Browse public subreddits                                  │   │\n│  │  - Read posts and comments                                   │   │\n│  │  - Search content                                            │   │\n│  │  - View user profiles (public)                               │   │\n│  │  Scopes: read                                                │   │\n│  └─────────────────────────────────────────────────────────────┘   │\n│                                                                      │\n│  ┌─────────────────────────────────────────────────────────────┐   │\n│  │  ZONE 2: Authenticated User                                  │   │\n│  │  - All Zone 1 capabilities                                   │   │\n│  │  - Submit posts and comments                                 │   │\n│  │  - Vote, save, hide content                                  │   │\n│  │  - Send/receive messages                                     │   │\n│  │  - Manage subscriptions                                      │   │\n│  │  - Access saved items                                        │   │\n│  │  Scopes: read, submit, vote, privatemessages, save, subscribe│   │\n│  └─────────────────────────────────────────────────────────────┘   │\n│                                                                      │\n│  ┌─────────────────────────────────────────────────────────────┐   │\n│  │  ZONE 3: Moderator Access                                    │   │\n│  │  - All Zone 2 capabilities                                   │   │\n│  │  - Approve/remove content                                    │   │\n│  │  - Ban/mute users                                            │   │\n│  │  - Manage mod queue                                          │   │\n│  │  - Edit subreddit settings (if permissions allow)            │   │\n│  │  Scopes: modposts, modcontributors, modmail, modconfig       │   │\n│  └─────────────────────────────────────────────────────────────┘   │\n│                                                                      │\n└─────────────────────────────────────────────────────────────────────┘\n```\n\n## Research Value\n\n### Unique Data Characteristics\n- **Authentic Opinions**: Pseudonymous users share genuine thoughts\n- **Niche Expertise**: Deep communities for every topic imaginable\n- **Historical Discussions**: Years of archived conversations\n- **Real-time Sentiment**: Immediate reactions to events/products\n- **Community Moderation**: Quality content surfaces through voting\n\n### AI Agent Use Cases\n\n1. **Sentiment Analysis**: \"What are people saying about X on Reddit?\"\n2. **Trend Monitoring**: \"Monitor r/programming for emerging trends\"\n3. **Error Resolution**: \"Find discussions about this error message\"\n4. **Community Engagement**: \"Post to relevant subreddits about our launch\"\n5. **Market Research**: \"What do users think about competitor product Y?\"\n6. **Expert Discovery**: \"Find experts discussing topic Z\"\n\n## Dependencies\n\n```toml\n[dependencies]\nfcp-core = { path = \"../fcp-core\" }        # Core connector traits\nfcp-oauth = { path = \"../fcp-oauth\" }      # OAuth 2.0 flow management\nfcp-ratelimit = { path = \"../fcp-ratelimit\" }  # Rate limit handling\nfcp-telemetry = { path = \"../fcp-telemetry\" }  # Observability\n```\n\n## Implementation Notes\n\n### Reddit API Details\n- **Authentication**: OAuth 2.0 required for all operations\n- **Base URL**: https://oauth.reddit.com\n- **Rate Limits**: 60 requests per minute (OAuth), 10 req/min (anonymous)\n- **User-Agent**: Required custom user-agent string\n\n### Rate Limiting Strategy\n```rust\npub struct RedditRateLimiter {\n    requests_remaining: AtomicU32,\n    reset_time: AtomicI64,\n    // Reddit provides rate limit headers:\n    // X-Ratelimit-Remaining\n    // X-Ratelimit-Used\n    // X-Ratelimit-Reset\n}\n\nimpl RateLimiter for RedditRateLimiter {\n    fn check_limit(\u0026self) -\u003e RateLimitResult {\n        // Respect Reddit's headers\n        // Implement exponential backoff on 429\n        // Track per-endpoint limits\n    }\n}\n```\n\n### PRAW-like Patterns\nInspired by Python's PRAW library for familiar patterns:\n```rust\n// Lazy loading of content\nlet subreddit = reddit.subreddit(\"rust\");\nlet posts = subreddit.hot().limit(25);  // Not fetched yet\nfor post in posts {  // Fetched on iteration\n    println!(\"{}\", post.title);\n}\n\n// Comment forest traversal\nlet comments = post.comments();\ncomments.replace_more(limit: 32);  // Expand \"more comments\"\nfor comment in comments.list() {\n    // Flat list of all comments\n}\n```\n\n### Content Policies\n- Respect subreddit rules programmatically\n- Handle quarantined/NSFW content appropriately\n- Rate limit posting to avoid spam detection\n- Include proper attribution for cross-posts\n\n### Error Handling\n```rust\npub enum RedditError {\n    RateLimited { retry_after: Duration },\n    Forbidden { reason: String },\n    NotFound,\n    Banned { subreddit: String },\n    Quarantined { subreddit: String },\n    AuthExpired,\n    NetworkError(reqwest::Error),\n}\n```\n\n## Testing Strategy\n- Mock Reddit API responses for unit tests\n- Integration tests against Reddit's test environment\n- Rate limit simulation tests\n- OAuth flow end-to-end tests\n\n## Open Questions\n- [ ] Should we support Reddit's streaming API (if available)?\n- [ ] How to handle shadow-banned detection?\n- [ ] Cache strategy for frequently accessed subreddits?\n- [ ] Support for Reddit Premium features?\n\n## References\n- [Reddit API Documentation](https://www.reddit.com/dev/api/)\n- [Reddit OAuth2 Guide](https://github.com/reddit-archive/reddit/wiki/OAuth2)\n- [PRAW Documentation](https://praw.readthedocs.io/) (Python reference)\n- [Reddit Content Policy](https://www.redditinc.com/policies/content-policy)\n\n## Success Criteria\n- The epic includes (or references) the standard base beads `.1`..`.4` per `flywheel_connectors-lszk.5`.\n- The connector passes `flywheel_connectors-1n78.21.5` (static + dynamic) and has an E2E compliance run wired through `flywheel_connectors-e3i9`.\n- Unit/integration tests are mock-only (no real external calls) and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-11T21:46:36.885714381-05:00","created_by":"ubuntu","updated_at":"2026-01-15T07:39:57.331316217-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-xz6e","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T22:08:10.860569156-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-xz6e","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T22:08:10.887618178-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-xz6e","depends_on_id":"flywheel_connectors-lj2","type":"blocks","created_at":"2026-01-11T22:08:10.994851785-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-xz6e","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T02:33:49.084442222-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xz6e","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T04:23:39.530038051-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xz6e","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T04:23:39.732279115-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xz6e","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T04:23:39.967199859-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xz6e","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T04:23:40.197107589-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xz6e","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T04:23:40.412893669-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xz6e","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T04:23:40.619330016-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-xz6e.1","title":"fcp.reddit: Manifest + Capability Map (FCP2)","description":"# fcp.reddit: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the Reddit connector’s **mechanical manifest contract** under FCP2.\n\n## Required contents\n- Manifest archetypes (closed set):\n  - `knowledge` (read/search/browse)\n  - `operational` (posting, messaging, moderation)\n  - `streaming` (optional: polling streams represented as event streaming)\n- Operation list + schema IDs.\n- Capability families + per-operation required caps.\n- NetworkConstraints:\n  - pin Reddit OAuth + API hosts\n  - explicitly restrict any media download hosts\n- State model declaration:\n  - pagination cursors / polling checkpoints (if persisted)\n  - idempotency keys for posting (if used)\n\n## Acceptance criteria\n- Another engineer can implement `--manifest` from this bead alone.\n- Capability IDs do not encode hosts/ports.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:22:57.05437337-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:22:57.05437337-05:00","dependencies":[{"issue_id":"flywheel_connectors-xz6e.1","depends_on_id":"flywheel_connectors-xz6e","type":"parent-child","created_at":"2026-01-15T04:22:57.055723604-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xz6e.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T04:23:02.416154626-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xz6e.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T04:23:02.612812674-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-xz6e.2","title":"fcp.reddit: Provisioning Automation (OAuth, scopes, rate limits)","description":"# fcp.reddit: Provisioning Automation (OAuth, scopes, rate limits)\n\n## Goal\nAutomate Reddit onboarding with minimal human steps while keeping secrets zone-scoped.\n\n## Requirements\n- OAuth2 flow via provisioning recipes.\n- Scope selection:\n  - read-only scopes for research/browsing\n  - separate scopes/capabilities for posting/messaging/moderation\n- Validate User-Agent configuration (Reddit requires a clear UA string).\n- Validate NetworkConstraints pinning.\n- Validate rate-limit handling configuration (headers-based).\n\n## Acceptance criteria\n- `fcp doctor` verifies readiness without leaking secrets.\n- Mockable in CI.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:23:09.563668833-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:23:09.563668833-05:00","dependencies":[{"issue_id":"flywheel_connectors-xz6e.2","depends_on_id":"flywheel_connectors-xz6e","type":"parent-child","created_at":"2026-01-15T04:23:09.564956549-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xz6e.2","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T04:23:14.947255113-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-xz6e.3","title":"TEST: Reddit Connector Unit/Integration Tests (mock-only)","description":"# TEST: Reddit Connector Unit/Integration Tests (mock-only)\n\n## Goal\nMock-only tests for fcp.reddit covering read/search, posting, messaging, saved items, and moderation surfaces.\n\n## Requirements\n- No real Reddit calls in CI.\n- Mock endpoints for:\n  - subreddit browse/search\n  - post/comment fetch\n  - post/comment submit/edit/delete\n  - inbox/messages\n  - save/unsave/vote\n  - moderation actions (approve/remove/ban)\n- Tests for:\n  - rate limit header handling + backoff\n  - capability gating for write/mod ops\n  - taint handling of untrusted content\n\n## Acceptance criteria\n- Deterministic CI suite.\n- Structured JSON logs with correlation_id + reason codes.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:23:21.614172132-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:23:21.614172132-05:00","dependencies":[{"issue_id":"flywheel_connectors-xz6e.3","depends_on_id":"flywheel_connectors-xz6e","type":"parent-child","created_at":"2026-01-15T04:23:21.615424531-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xz6e.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T04:23:24.426449951-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-xz6e.4","title":"E2E: Reddit Connector Compliance Run","description":"# E2E: Reddit Connector Compliance Run\n\n## Goal\nRun the shared Mechanical Connector Compliance Runner against fcp.reddit.\n\n## Must verify\n- Default deny via CapabilityTokens.\n- NetworkConstraints enforcement.\n- Receipts/audit for any write/moderation operations.\n- Structured JSON logs with correlation_id + reason codes.\n\n## Acceptance criteria\n- Runner output bundle is green for fcp.reddit.\n","status":"open","priority":2,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:23:31.362224301-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T04:23:31.362224301-05:00","dependencies":[{"issue_id":"flywheel_connectors-xz6e.4","depends_on_id":"flywheel_connectors-xz6e","type":"parent-child","created_at":"2026-01-15T04:23:31.363545539-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-xz6e.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T04:23:34.74253454-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-y1q8","title":"Connector Lifecycle Management (Activate/Update/Rollback)","description":"# [FCP2] Connector Lifecycle Management (Activate / Update / Rollback)\n\n## Goal\nImplement connector lifecycle management as specified in Spec V2 §14.1–14.2:\n- secure activation (sandbox + policy + capability gating)\n- staged updates\n- crash-loop detection\n- rollback / pinning\n\nThis bead is **host/orchestrator** behavior (MeshNode / `fcp-host`), not connector-specific code.\n\n## Why This Matters\nConnectors are security-critical binaries that execute with zone-scoped authority. Lifecycle management is where we:\n- prevent “unsigned code ran” incidents\n- enforce sandbox defaults *before* first byte of connector code executes\n- provide safe operations ergonomics (predictable rollback, explainable failures)\n\n## Hard Requirements (V2-only)\n- No FCP1 compatibility paths.\n- Single-zone binding per connector instance.\n- Default deny: a connector cannot perform an operation without a valid CapabilityToken.\n- Fail closed on ambiguous outcomes (esp. during update/rollback).\n\n## Normative Alignment (Spec §14)\n### §14.1 Activation Requirements\nOn activation, MeshNode MUST ensure (in order):\n1. **Supply-chain verification**: manifest+binary verification chain passes (see `flywheel_connectors-1n78.27`).\n2. **Policy ceilings**: requested capabilities/sandbox/network constraints are within zone ceilings (see `flywheel_connectors-1n78.26`).\n3. **Sandbox creation**: OS/WASI sandbox instantiated from manifest profile (see `flywheel_connectors-1n78.18`).\n4. **Credential injection discipline**: secrets never touch disk; secretless-by-default egress injection preferred (see `flywheel_connectors-kt9r`).\n5. **Handshake + readiness**: connector standard method surface is reachable and stable (`handshake`, `health`, etc.).\n6. **Audit**: activation emits an audit event with evidence (manifest id, binary id, policy heads, zone checkpoint).\n\n### §14.2 Updates and Rollback\n- Updates MUST be verifiable and staged (not “swap binary in place blindly”).\n- Crash loops MUST trigger a safe fallback.\n- Owner can pin a known-good version.\n\n## Design / Deliverables\n### A) Connector lifecycle state machine\nA host-visible state machine that drives deterministic behavior:\n\n- NotInstalled\n- Installed (verified artifacts present)\n- Activating (phased)\n- Running (healthy)\n- Unhealthy (recoverable)\n- Failed (crash-loop / policy refusal)\n- RolledBack\n\n### B) Activation workflow\nActivation is phased to make failures diagnosable:\n1. Resolve requested connector version and retrieve artifacts (registry or mesh mirror).\n2. Verify manifest/binary + policy requirements.\n3. Build sandbox profile (fs/network/time/mem/cpu limits) and start connector.\n4. Perform standard method checks:\n   - `--manifest` extractable without execution\n   - `handshake` succeeds\n   - `describe`/`introspect` callable\n5. Register connector instance with the node runtime (zone-bound).\n6. Start health monitor.\n\n### C) Update manager\n- Staged rollout strategy:\n  - canary → expand → full\n  - per-zone policy may require manual approval for risky connectors\n- Version pinning:\n  - per connector + zone\n  - explicit reason + audit event\n\n### D) Crash-loop detection + rollback\nCrashLoopDetector:\n- detects N crashes in M seconds\n- emits audit event with evidence\n- rolls back to last-known-good version if available\n- fails closed if no verified previous version exists\n\nRollback must preserve:\n- revocation enforcement\n- policy ceilings\n- audit trail\n\n### E) Observability and error mapping\n- All lifecycle failures map to FCP error taxonomy (`flywheel_connectors-1n78.29`).\n- Structured logs include:\n  - connector_id, zone_id, version\n  - binary_id + manifest_id\n  - phase + reason_code\n\n## Tests\n- Unit tests: state machine transitions and crash-loop detection.\n- Integration tests: staged update and rollback in deterministic harness.\n- Adversarial tests:\n  - attempt to activate without verification → denied\n  - attempt to activate with policy-incompatible sandbox/network → denied\n  - crash-loop triggers rollback deterministically\n\n## Acceptance Criteria\n- Activation fails closed unless verification + policy checks succeed.\n- Rollback is deterministic and auditable.\n- Crash-loop behavior is tested and produces actionable logs.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T04:43:45.965006161-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:39:58.303435723-05:00","dependencies":[{"issue_id":"flywheel_connectors-y1q8","depends_on_id":"flywheel_connectors-1n78.4","type":"blocks","created_at":"2026-01-15T04:44:33.13230292-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-y1q8","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T04:44:33.382523176-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-y1q8","depends_on_id":"flywheel_connectors-kt9r","type":"blocks","created_at":"2026-01-15T05:39:16.190313834-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-y1q8","depends_on_id":"flywheel_connectors-1n78.11","type":"blocks","created_at":"2026-01-15T05:39:16.43773218-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-y1q8","depends_on_id":"flywheel_connectors-1n78.27","type":"blocks","created_at":"2026-01-15T05:39:16.679456611-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-y1q8","depends_on_id":"flywheel_connectors-1n78.29","type":"blocks","created_at":"2026-01-15T05:39:16.922428233-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-y1q8","depends_on_id":"flywheel_connectors-1n78.9","type":"blocks","created_at":"2026-01-15T05:39:17.163210537-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-y1q8","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T05:39:17.422344032-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-y1q8","depends_on_id":"flywheel_connectors-1n78","type":"parent-child","created_at":"2026-01-15T05:39:21.947158308-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-ydo","title":"fcp.kubernetes: Log streaming from pods and containers","description":"# fcp.kubernetes: Log streaming from pods and containers (FCP2)\n\n## Goal\nProvide safe log access:\n- fetch recent logs\n- stream logs with follow/backpressure\n\nLogs may contain secrets/PII; treat as tainted.\n\n## Scope\n- Get logs for a pod/container with limits:\n  - tail lines\n  - since seconds\n- Stream logs (follow) with:\n  - bounded buffering\n  - cancellation\n  - reconnect strategy (optional)\n\n## Capability model (illustrative)\n- `k8s.logs.read` (sensitive)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- Bounded streaming:\n  - max bytes per stream\n  - max duration unless renewed\n- Logs must never be written to disk by default.\n\n## Deliverables\n- Operation schemas:\n  - `k8s.logs.get`\n  - `k8s.logs.stream`\n- Event envelope for streaming chunks with correlation IDs.\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - bounds enforcement\n  - backpressure behavior\n  - taint propagation\n\n## Acceptance criteria\n- Log streaming is reliable and cannot cause unbounded memory growth.\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T10:14:46.165921049-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:46:45.068960445-05:00","labels":["connectors","fcp2","tier3"],"dependencies":[{"issue_id":"flywheel_connectors-ydo","depends_on_id":"flywheel_connectors-gxx2","type":"parent-child","created_at":"2026-01-15T02:32:43.073576121-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ydo","depends_on_id":"flywheel_connectors-gxx2.1","type":"blocks","created_at":"2026-01-15T04:46:50.831046292-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-ydo","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T04:46:51.214509765-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-yff","title":"fcp.twitter - X/Twitter API Connector","description":"# fcp.twitter - X/Twitter API Connector (FCP2)\n\n## Goal\nProvide an FCP2-compliant X/Twitter connector for social listening + publishing with strict zone isolation, sandboxing, and mechanical authorization.\n\n## Manifest archetypes (closed set)\n- `operational` (REST actions)\n- `streaming` (filtered stream)\n- `bidirectional` (read + publish)\n\n## Threat model\nX/Twitter content is an adversarial prompt surface.\n\nHard requirements:\n- inbound content is tainted as external input by default\n- strong redaction (no OAuth secrets; avoid logging raw tweet/DM bodies)\n\n## Zone model\n- Single-zone bound: one connector instance ↔ one `ZoneId`.\n- Recommended (policy-owned): `z:public:twitter:\u003ctopic\u003e` or `z:community:twitter:\u003caccount\u003e`.\n\n## External surface\n### NetworkConstraints\nDefault-deny; allow only the configured Twitter/X API host(s) required by:\n- REST API\n- streaming endpoint\n\n### Credential injection\n- OAuth secrets/tokens via `CredentialId`.\n\n## Capability model (illustrative)\n- `twitter.read.public` (search/public tweets)\n- `twitter.read.account` (timelines)\n- `twitter.write.tweets` (Dangerous)\n- `twitter.write.dms` (Dangerous; high sensitivity)\n- `twitter.stream.read`\n- `twitter.webhooks.manage` (Dangerous, optional)\n\n## Operations (representative)\nRead:\n- search, user lookup, timelines, tweet fetch, trends\n\nWrite:\n- create/reply/thread/delete/retweet/like\n- DMs (high sensitivity)\n\nStreaming:\n- filtered stream + rule management\n\n## Rate limiting\n- Parse and obey rate-limit headers.\n- Never retry blindly; respect Retry-After.\n\n## Tests\n- Mock-only unit/integration tests with wiremock + streaming simulation.\n- E2E compliance run validates default deny + NetworkConstraints + tainting.\n\n## Acceptance Criteria\n- Passes connector compliance runner.\n- Deterministic tests; no live Twitter/X calls in unit tests.\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-11T10:11:16.535999911-05:00","created_by":"ubuntu","updated_at":"2026-01-15T08:37:57.532820447-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-yff","depends_on_id":"flywheel_connectors-lj2","type":"blocks","created_at":"2026-01-11T10:41:02.752417122-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-yff","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T10:41:03.293153677-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-yff","depends_on_id":"flywheel_connectors-9co","type":"blocks","created_at":"2026-01-11T10:41:03.794751598-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-yff","depends_on_id":"flywheel_connectors-iv7","type":"blocks","created_at":"2026-01-11T10:41:04.354450547-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-yff","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T10:41:04.912417755-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-yff","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T01:23:43.539086673-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-yff","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:36:09.106923067-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-yff","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:36:09.227286762-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-yff","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T03:36:09.353863641-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-yff","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:36:09.477788504-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-yff","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T03:36:09.642252804-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-yff","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T03:36:09.780787408-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-yff","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T03:36:09.909877922-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-yff.1","title":"fcp.twitter: Manifest + Capability Map (FCP2)","description":"# fcp.twitter: Manifest + Capability Map (FCP2)\n\n## Goal\nDefine the Twitter/X connector manifest contract:\n- archetypes (`operational`, `streaming`, `bidirectional`)\n- operations + schema IDs\n- capability families + per-operation caps\n- NetworkConstraints allowlist for API + streaming\n\n## Acceptance Criteria\n- Complete manifest spec stored here.\n- Good/bad manifest examples exist for static compliance.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:36:15.810738424-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:36:15.810738424-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-yff.1","depends_on_id":"flywheel_connectors-yff","type":"parent-child","created_at":"2026-01-15T03:36:15.812012424-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-yff.1","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T03:36:56.298954009-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-yff.1","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T03:36:56.428139772-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-yff.2","title":"fcp.twitter: Provisioning Automation (OAuth)","description":"# fcp.twitter: Provisioning Automation (OAuth)\n\n## Goal\nAutomate OAuth onboarding for the selected auth mode.\n\n## Requirements\n- Secrets via `CredentialId`.\n- Validate scopes/permissions.\n- Validate NetworkConstraints.\n\n## Acceptance Criteria\n- `fcp doctor` can validate readiness.\n- Mockable.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:36:20.995107014-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:57.592374501-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-yff.2","depends_on_id":"flywheel_connectors-yff","type":"parent-child","created_at":"2026-01-15T03:36:20.99630451-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-yff.3","title":"fcp.twitter: Read Operations (search/timelines/lookups)","description":"# fcp.twitter: Read Operations (search/timelines/lookups)\n\n## Goal\nImplement read-only operations:\n- search\n- tweet fetch\n- user lookup\n- timelines\n- trends\n\n## Requirements\n- Capability gated.\n- Taint inbound content as external input.\n- Strong redaction.\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:36:26.122147723-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:28:13.325733081-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-yff.3","depends_on_id":"flywheel_connectors-yff","type":"parent-child","created_at":"2026-01-15T03:36:26.123718622-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-yff.3","depends_on_id":"flywheel_connectors-yff.1","type":"blocks","created_at":"2026-01-15T03:36:56.566615696-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-yff.4","title":"fcp.twitter: Write Operations (tweets/DMs)","description":"# fcp.twitter: Write Operations (tweets/DMs)\n\n## Goal\nImplement publishing operations:\n- create/reply/thread/delete/retweet/like\n- DMs (high sensitivity)\n\n## Requirements\n- Capability gated.\n- Side effects emit receipts/audit.\n- Dangerous operations require ApprovalToken `Execution` scope.\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":1,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:36:32.576951745-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:28:13.221713187-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-yff.4","depends_on_id":"flywheel_connectors-yff","type":"parent-child","created_at":"2026-01-15T03:36:32.578114826-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-yff.5","title":"fcp.twitter: Streaming Ingestion (filtered stream)","description":"# fcp.twitter: Streaming Ingestion (filtered stream)\n\n## Goal\nConsume the filtered stream API and emit EventEnvelopes.\n\n## Requirements\n- Singleton-writer lease for any long-lived stream connection.\n- Backpressure and bounded buffers.\n- Strict parsing.\n\n## Acceptance Criteria\n- The functionality described in this bead is implemented with typed schemas + validation (no unstructured “stringly” interfaces).\n- Errors map to the FCP error taxonomy with correct retry semantics and no secret/PII leakage.\n- Mock-only unit/integration tests cover success paths and common failures and emit structured JSON logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":2,"issue_type":"feature","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:36:38.654462511-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T05:28:14.442515337-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-yff.5","depends_on_id":"flywheel_connectors-yff","type":"parent-child","created_at":"2026-01-15T03:36:38.655636553-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-yff.5","depends_on_id":"flywheel_connectors-1n78.33","type":"blocks","created_at":"2026-01-15T03:36:56.819556503-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-yff.6","title":"TEST: Twitter/X Connector Unit/Integration Tests (mock-only)","description":"# TEST: Twitter/X Connector Unit/Integration Tests (mock-only)\n\n## Must cover\n- Manifest determinism + interface_hash.\n- Streaming parsing.\n- Error taxonomy mapping.\n- Redaction.\n\n## Acceptance Criteria\n- Deterministic.\n- Structured JSON logs.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:36:45.004299552-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:36:45.004299552-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-yff.6","depends_on_id":"flywheel_connectors-yff","type":"parent-child","created_at":"2026-01-15T03:36:45.00544522-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-yff.6","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T03:36:56.965628266-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-yff.7","title":"E2E: Twitter/X Connector Compliance Run","description":"# E2E: Twitter/X Connector Compliance Run\n\n## Goal\nAdd Twitter/X scenarios to the shared compliance harness.\n\n## Scenarios\n- Default deny.\n- Allow with valid token.\n- Network guard allow/deny.\n- Streaming connection behavior.\n\n## Acceptance Criteria\n- `cargo test --package fcp-e2e --features twitter` passes deterministically.\n","status":"open","priority":1,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T03:36:50.714547227-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T03:36:50.714547227-05:00","labels":["conformance","connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-yff.7","depends_on_id":"flywheel_connectors-yff","type":"parent-child","created_at":"2026-01-15T03:36:50.715836085-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-yff.7","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T03:36:57.158786327-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-yr0","title":"fcp.figma: Comment thread management","description":"# fcp.figma: Comment thread management (FCP2)\n\n## Goal\nEnable agents to manage Figma comment threads for design review workflows:\n- list comments\n- create comment\n- reply\n- resolve/unresolve\n\n## Scope\n### Read\n- List comments for a file (pagination).\n\n### Write (sensitive)\n- Create comment on a node.\n- Reply to a thread.\n- Resolve/unresolve threads.\n- Delete comment (dangerous; optional).\n\n## Capability model (illustrative)\n- `figma.comments.read`\n- `figma.comments.write` (dangerous-ish)\n- Optional: `figma.comments.delete` (dangerous)\n\n## FCP2 requirements\n- Single-zone binding.\n- NetworkConstraints pinned.\n- Comments contain human text and may contain sensitive info:\n  - treat as tainted\n  - never log raw comment bodies\n- For writes:\n  - receipts + audit events include file key + comment id\n\n## Deliverables\n- Operation schemas:\n  - `figma.comment.list`\n  - `figma.comment.create`\n  - `figma.comment.reply`\n  - `figma.comment.resolve`\n  - Optional: `figma.comment.delete`\n\n## Test strategy (MUST)\n- Mock-only tests for:\n  - pagination\n  - write flows + audit/receipt\n  - permission denied\n  - log redaction\n\n## Acceptance criteria\n- Comment operations are safe, auditable, and do not leak content into logs.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:14:48.577853924-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:34:17.645997031-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-yr0","depends_on_id":"flywheel_connectors-vuwy","type":"parent-child","created_at":"2026-01-15T02:30:18.685181113-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-yr0","depends_on_id":"flywheel_connectors-vuwy.1","type":"blocks","created_at":"2026-01-15T04:34:22.540575359-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-yvul","title":"TEST: fcp-graphql Unit Test Suite","description":"# TEST: fcp-graphql Unit Test Suite\n\n## Scope\nComprehensive unit tests for GraphQL client infrastructure.\n\n## Test Categories\n\n### Query Execution\n- [ ] Simple query execution\n- [ ] Query with variables\n- [ ] Mutations\n- [ ] Subscriptions setup\n\n### Query Building\n- [ ] Fragment composition\n- [ ] Nested selections\n- [ ] Aliases\n- [ ] Directives (@include, @skip)\n\n### Pagination\n- [ ] Cursor-based (Relay) pagination\n- [ ] Offset-based pagination\n- [ ] Automatic page traversal\n- [ ] Total count handling\n\n### Error Handling\n- [ ] GraphQL errors parsing\n- [ ] Partial data handling\n- [ ] Network errors\n- [ ] Timeout handling\n\n### Batching \u0026 Deduplication\n- [ ] Request batching\n- [ ] Query deduplication\n- [ ] Cache integration\n\n### Schema Introspection\n- [ ] Schema fetching\n- [ ] Type validation\n- [ ] Deprecation handling\n\n## Mocking Strategy\n- Mock GraphQL endpoints with wiremock\n- Test against Linear-like, GitHub-like schemas\n- Inject various error conditions\n\n## Coverage Target: \u003e90%\n\n## Acceptance Criteria\n- Runs deterministically in CI (no flake due to timing/network).\n- Uses mocks only (no real external network).\n- Emits structured JSON logs per `flywheel_connectors-1n78.35` with stable `test_name` identifiers.\n","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-11T12:12:49.692207844-05:00","created_by":"ubuntu","updated_at":"2026-01-15T05:28:11.482860587-05:00","labels":["connector-utility"],"dependencies":[{"issue_id":"flywheel_connectors-yvul","depends_on_id":"flywheel_connectors-k4ka","type":"blocks","created_at":"2026-01-11T12:21:36.126862471-05:00","created_by":"ubuntu"}]}
{"id":"flywheel_connectors-z5o","title":"fcp.airtable: Formula and computed field access","description":"# fcp.airtable: Formula and Computed Field Access\n\n## Goal\nExpose formula/computed behavior safely and predictably.\n\n## Scope\n- Read computed fields (formula/rollup/lookup) with explicit typing.\n- Provide helpers for validating formulas where the API supports it.\n\n## Key requirements\n- Capability gated:\n  - schema write / formula changes are Dangerous\n  - computed field reads are normal read caps\n- Never claim computed fields are writable.\n- Bounded evaluation:\n  - do not implement a “shadow formula engine” locally unless required; prefer server validation\n\n## Tests\n- Computed field decode/typing.\n- Formula validation error mapping.\n- Redaction (computed results may contain sensitive data).\n\n## Acceptance Criteria\n- Computed fields are correctly labeled read-only.\n- Errors are deterministic and map to the FCP error taxonomy.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T10:14:37.007755184-05:00","created_by":"ubuntu","updated_at":"2026-01-15T04:03:39.291218107-05:00","labels":["connectors","fcp2","tier2"],"dependencies":[{"issue_id":"flywheel_connectors-z5o","depends_on_id":"flywheel_connectors-soft","type":"parent-child","created_at":"2026-01-15T02:29:57.508099597-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-z5o","depends_on_id":"flywheel_connectors-soft.1","type":"blocks","created_at":"2026-01-15T04:03:43.150914934-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-zcmu","title":"fcp.snowflake connector - Cloud data platform enterprise data warehouse","description":"## Summary\nImplement the fcp.snowflake connector for Snowflake cloud data warehouse integration. This is a Tier 4 connector (Value Score: 48/100) providing enterprise data warehouse capabilities through a Request-Response archetype.\n\n## Problem Statement\nOrganizations using Snowflake need a standardized connector to integrate their cloud data warehouse with the Flywheel ecosystem. Snowflake is a leading enterprise cloud data platform requiring SQL query execution, warehouse management, and data loading capabilities.\n\n## Proposed Solution\nBuild an fcp-snowflake crate implementing the FCP connector interface for Snowflake's cloud data warehouse platform.\n\n### Architecture\n\n**Archetype:** Request-Response\n- Synchronous SQL query execution\n- Statement polling for long-running queries\n- Result set pagination and streaming\n\n**Zone Architecture:**\n1. **Query Zone** - SQL query execution, result fetching, query history\n2. **DDL Zone** - Database/schema/table operations, object management\n3. **Admin/Warehouse Control Zone** - Warehouse management, resource monitoring, access control\n\n### Core Operations\n\n**Query Operations:**\n- Execute SQL statements (sync and async)\n- Fetch query results with pagination\n- Cancel running queries\n- Query history and metadata\n\n**Warehouse Management:**\n- Create/alter/drop warehouses\n- Suspend/resume warehouses\n- Resize warehouses\n- Monitor warehouse usage\n\n**Database/Schema Operations:**\n- Create/drop databases and schemas\n- List databases, schemas, tables, views\n- Describe table structures\n- Manage table clustering\n\n**Stage Management:**\n- Create/list/drop stages\n- List stage files\n- Remove stage files\n\n**Data Loading:**\n- COPY INTO operations\n- PUT/GET file operations\n- Load history and monitoring\n\n### Implementation Approach\n\n**API Integration Options:**\n1. **Snowflake REST API (SQL API)** - Primary approach\n   - Statement execution endpoint\n   - Polling for async results\n   - OAuth 2.0 / key-pair authentication\n   \n2. **ODBC/JDBC** - Alternative for complex scenarios\n   - Native driver support\n   - Connection pooling\n\n**Authentication:**\n- OAuth 2.0 (recommended for enterprise)\n- Key-pair authentication\n- Username/password (legacy)\n- External browser authentication\n\n### Dependencies\n- `fcp-core` - Core connector traits and types\n- `fcp-oauth` - OAuth 2.0 authentication flow\n- `fcp-ratelimit` - API rate limiting\n- `fcp-telemetry` - Observability and metrics\n\n### Key Features\n- Statement-level transaction control\n- Multi-statement query support\n- Result caching\n- Query result streaming for large datasets\n- Warehouse auto-suspend/resume awareness\n- Role-based access control integration\n\n## Technical Notes\n\n**Rate Limiting:**\n- API rate limits per account\n- Query concurrency limits per warehouse\n- Statement queuing for limit management\n\n**Error Handling:**\n- SQL error codes and messages\n- Warehouse state errors (suspended, dropped)\n- Network and timeout handling\n- Result expiration handling\n\n**Data Types:**\n- Snowflake-specific type mapping (VARIANT, ARRAY, OBJECT, GEOGRAPHY)\n- Timestamp with timezone handling\n- Semi-structured data support (JSON, Avro, Parquet)\n\n## Acceptance Criteria\n- [ ] Query zone: Execute SQL, fetch results, handle pagination\n- [ ] DDL zone: Database/schema/table CRUD operations\n- [ ] Admin zone: Warehouse create/suspend/resume/resize\n- [ ] Stage management: Create, list, drop stages\n- [ ] Data loading: COPY INTO support\n- [ ] OAuth 2.0 and key-pair authentication\n- [ ] Rate limiting integration\n- [ ] Comprehensive error handling\n- [ ] Query result streaming for large datasets\n- [ ] Unit and integration tests\n\n## Design Notes\n- Use Snowflake SQL API as primary implementation path\n- Implement statement polling with exponential backoff\n- Support both sync and async query patterns\n- Consider warehouse state when executing queries\n- Map Snowflake types to FCP canonical types\n\n## Value Assessment\n- **Value Score:** 48/100 (Tier 4)\n- **Market Position:** Leading cloud data warehouse\n- **Use Cases:** Analytics, data lake, ML/AI pipelines, reporting","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T22:05:32.965102283-05:00","created_by":"ubuntu","updated_at":"2026-01-11T22:05:32.965102283-05:00","dependencies":[{"issue_id":"flywheel_connectors-zcmu","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T22:08:22.318363266-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-zcmu","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T22:08:22.344036147-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-zcmu","depends_on_id":"flywheel_connectors-lj2","type":"blocks","created_at":"2026-01-11T22:08:32.641056311-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-zcmu","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:37:25.609961627-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-zcmu","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T07:07:31.799184576-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-zcmu","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T07:09:52.782095707-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-zcmu","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T07:09:53.199976677-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-zcmu","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T07:09:53.615147499-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-zcmu","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T07:09:54.039843517-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-zcmu","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T07:09:54.454156281-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-zcmu","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:09:54.877575933-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-zcmu.1","title":"fcp.snowflake: Manifest + Capability Map (FCP2)","description":"## Goal\nProduce the full FCP2 manifest and capability map for this connector.\n\nThis bead is where we translate the connector’s functional surface (operations) into a **mechanically checkable** contract:\n- operation schemas + schema IDs\n- capability families per operation\n- per-operation NetworkConstraints (default deny)\n- sandbox profile requirements\n- declared state model (stateless / singleton_writer / crdt)\n\n## Required content (must be explicit)\n- Operation list is exhaustive and stable for the current phase.\n- Capability IDs DO NOT encode hostnames/ports.\n- NetworkConstraints are minimal and per-operation.\n- Risk tier for each operation (Safe / Dangerous).\n- Explicit bounds: timeouts, max response sizes, pagination limits.\n\n## Tests\n- Add good/bad manifest examples for the compliance runner.\n\n## Acceptance Criteria\n- Passes static checks in `flywheel_connectors-1n78.21.5`.\n- Default-deny is enforced by manifest + capability requirements.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:14:01.344937221-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:14:01.344937221-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-zcmu.1","depends_on_id":"flywheel_connectors-zcmu","type":"parent-child","created_at":"2026-01-15T07:14:01.404559358-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-zcmu.2","title":"fcp.snowflake: Provisioning Automation","description":"## Goal\nAutomate provisioning and configuration with minimal human steps.\n\nThis bead owns:\n- auth setup (OAuth / API keys / webhook secrets) via `CredentialObject`/`CredentialId` (egress proxy injection preferred)\n- endpoint configuration\n- `fcp doctor` readiness checks\n- deterministic, mockable provisioning flows\n\n## FCP2 requirements\n- Secrets never touch disk.\n- Provisioning is deterministic and testable.\n- Error messages are actionable and do not leak secrets/PII.\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Provisioning emits structured logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:14:02.023023599-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:57.6540847-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-zcmu.2","depends_on_id":"flywheel_connectors-zcmu","type":"parent-child","created_at":"2026-01-15T07:14:02.082335251-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-zcmu.2","depends_on_id":"flywheel_connectors-zcmu.1","type":"blocks","created_at":"2026-01-15T07:14:02.682241648-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-zcmu.3","title":"TEST: fcp.snowflake Unit/Integration Tests (mock-only)","description":"## Goal\nMock-only unit/integration tests for this connector.\n\n## Required coverage\n- schema validation (inputs + outputs)\n- error taxonomy mapping (retry semantics)\n- pagination and bounds\n- rate limit behavior\n- redaction (no token/secret/PII leakage)\n- idempotency + receipts for Dangerous operations\n\n## Logging\nAll tests emit structured JSON logs per `flywheel_connectors-1n78.35`.\n\n## Acceptance Criteria\n- Deterministic tests; no live external calls.\n- Includes adversarial cases (timeouts, malformed responses, partial failures).\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:14:03.28135518-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:14:03.28135518-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-zcmu.3","depends_on_id":"flywheel_connectors-zcmu","type":"parent-child","created_at":"2026-01-15T07:14:03.341539477-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-zcmu.3","depends_on_id":"flywheel_connectors-zcmu.1","type":"blocks","created_at":"2026-01-15T07:14:03.941876465-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-zcmu.3","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:14:04.544377514-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-zcmu.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T07:32:22.623244194-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-zcmu.4","title":"E2E: fcp.snowflake Connector Compliance Run","description":"## Goal\nRun the shared connector compliance runner and capture an evidence bundle.\n\n## Must validate\n- handshake + introspection correctness\n- default deny (no CapabilityToken → deny + DecisionReceipt)\n- NetworkConstraints enforcement\n- receipts/audit for Dangerous operations\n- structured logs\n\n## Acceptance Criteria\n- E2E run is deterministic and produces a stable artifact bundle.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:14:05.093743484-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:14:05.093743484-05:00","labels":["connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-zcmu.4","depends_on_id":"flywheel_connectors-zcmu","type":"parent-child","created_at":"2026-01-15T07:14:05.152253845-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-zcmu.4","depends_on_id":"flywheel_connectors-zcmu.1","type":"blocks","created_at":"2026-01-15T07:14:05.773213671-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-zcmu.4","depends_on_id":"flywheel_connectors-zcmu.2","type":"blocks","created_at":"2026-01-15T07:14:06.381082548-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-zcmu.4","depends_on_id":"flywheel_connectors-zcmu.3","type":"blocks","created_at":"2026-01-15T07:14:07.058372014-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-zcmu.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T07:14:07.745754187-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-zx0","title":"fcp-ratelimit: Shared Rate Limiting Library","description":"# fcp-ratelimit: Shared Rate Limiting Library\n\n## Overview\nProduction-grade rate limiting library supporting multiple algorithms, provider-specific header parsing, and intelligent backoff strategies.\n\n## Algorithms\n\n### Token Bucket\n- Configurable bucket size and refill rate\n- Burst handling\n- Per-endpoint buckets\n\n### Sliding Window\n- Fixed window with sliding calculation\n- Accurate request counting\n- Memory-efficient implementation\n\n### Leaky Bucket\n- Smooth request pacing\n- Queue management\n- Overflow handling\n\n## Provider Header Parsing\n- X-RateLimit-Limit/Remaining/Reset (standard)\n- Retry-After header\n- X-Rate-Limit-* variations\n- Provider-specific formats (GitHub, Twitter, Stripe, OpenAI)\n\n## Backoff Strategies\n- Exponential backoff with configurable base/max\n- Decorrelated jitter\n- Truncated exponential\n- Custom strategy support\n\n## Features\n- Thread-safe implementations\n- Async-first design\n- Request queueing with priorities\n- Quota tracking (daily/hourly/monthly)\n- Multi-tenant support\n\n## Integration\n- Middleware for HTTP clients\n- Decorator for FCP operations\n- Metrics emission\n- Logging integration\n\n## Dependencies\n- tokio (async), parking_lot (sync primitives)\n- fcp-core, fcp-telemetry","status":"closed","priority":0,"issue_type":"feature","created_at":"2026-01-11T10:36:25.276288662-05:00","created_by":"ubuntu","updated_at":"2026-01-11T13:04:26.849292962-05:00","closed_at":"2026-01-11T13:04:26.849292962-05:00","close_reason":"Implemented fcp-ratelimit crate with token bucket, sliding/fixed window, leaky bucket algorithms, provider header parsing, and backoff strategies. All 20 tests passing."}
{"id":"flywheel_connectors-zzpa","title":"fcp.algolia: Search-as-a-Service connector","description":"## Summary\n\nImplement the fcp.algolia connector crate for Algolia search-as-a-service integration. Algolia provides fast, hosted search infrastructure with millisecond response times, making it ideal for search-heavy applications.\n\n**Value Score:** 53/100 (Tier 4)\n**Archetype:** Request-Response\n**Implementation:** Algolia REST API with API key authentication\n\n## Technical Design\n\n### Architecture\n\nThe connector follows the Request-Response archetype pattern, optimized for Algolia's low-latency search infrastructure.\n\n#### Zone Architecture\n\n1. **Search Zone (Read)**\n   - Index searching with filters, facets, and pagination\n   - Multi-index search (federated search)\n   - Browse operations for large result sets\n   - Geo-search capabilities\n\n2. **Index Management Zone**\n   - Index creation and configuration\n   - Index settings (searchable attributes, ranking, facets)\n   - Index replication and copying\n   - Index deletion\n\n3. **Admin Zone**\n   - API key management\n   - Usage analytics\n   - A/B testing configuration\n   - Query rules and synonyms\n\n### Core Operations\n\n#### Search Operations\n- `search` - Single index search with query, filters, facets\n- `search_multi` - Federated search across multiple indices\n- `browse` - Cursor-based browsing for large datasets\n- `search_for_facet_values` - Facet value suggestions\n\n#### Record CRUD\n- `save_object` - Add or update a single record\n- `save_objects` - Batch add/update records\n- `get_object` - Retrieve a record by objectID\n- `delete_object` - Remove a single record\n- `delete_objects` - Batch delete records\n- `partial_update_object` - Partial record updates\n\n#### Index Management\n- `list_indices` - List all indices\n- `create_index` - Create new index\n- `delete_index` - Remove index\n- `get_settings` - Retrieve index settings\n- `set_settings` - Configure index settings\n- `copy_index` - Copy index to new name\n- `move_index` - Rename index\n\n#### Synonyms\n- `save_synonym` - Add/update synonym\n- `get_synonym` - Retrieve synonym by ID\n- `delete_synonym` - Remove synonym\n- `search_synonyms` - Search through synonyms\n- `clear_synonyms` - Remove all synonyms\n- `batch_synonyms` - Bulk synonym operations\n\n#### Query Rules\n- `save_rule` - Add/update query rule\n- `get_rule` - Retrieve rule by ID\n- `delete_rule` - Remove rule\n- `search_rules` - Search through rules\n- `clear_rules` - Remove all rules\n- `batch_rules` - Bulk rule operations\n\n#### Analytics\n- `get_search_analytics` - Search query analytics\n- `get_click_analytics` - Click-through analytics\n- `get_conversion_analytics` - Conversion tracking\n- `get_ab_test_results` - A/B test performance\n\n#### A/B Testing\n- `create_ab_test` - Create new A/B test\n- `get_ab_test` - Retrieve test configuration\n- `stop_ab_test` - End running test\n- `delete_ab_test` - Remove test\n- `list_ab_tests` - List all tests\n\n### Authentication\n\nAlgolia uses API key-based authentication with different key types:\n- **Admin API Key** - Full access (index management, settings)\n- **Search API Key** - Read-only search access\n- **Write API Key** - Record CRUD operations\n\n```rust\npub struct AlgoliaAuth {\n    pub application_id: String,\n    pub api_key: String,\n    pub key_type: ApiKeyType,\n}\n\npub enum ApiKeyType {\n    Admin,\n    Search,\n    Write,\n}\n```\n\n### Rate Limiting\n\nAlgolia has plan-based rate limits:\n- Search: Varies by plan (typically 1000+ QPS)\n- Indexing: Varies by plan\n- Admin operations: Lower limits\n\n```rust\nimpl RateLimitConfig for AlgoliaRateLimit {\n    fn zones() -\u003e Vec\u003cZone\u003e {\n        vec![\n            Zone::new(\"search\", RateLimit::per_second(1000)),\n            Zone::new(\"indexing\", RateLimit::per_second(100)),\n            Zone::new(\"admin\", RateLimit::per_second(10)),\n        ]\n    }\n}\n```\n\n### Error Handling\n\nMap Algolia-specific errors to FCP error types:\n- `400` - Invalid query/parameters -\u003e `FcpError::InvalidRequest`\n- `401` - Invalid API key -\u003e `FcpError::AuthenticationFailed`\n- `403` - Insufficient permissions -\u003e `FcpError::PermissionDenied`\n- `404` - Index/object not found -\u003e `FcpError::NotFound`\n- `429` - Rate limited -\u003e `FcpError::RateLimited`\n\n### Dependencies\n\n- `fcp-core` - Core connector traits and types\n- `fcp-ratelimit` - Rate limiting infrastructure\n- `fcp-telemetry` - Observability and metrics\n\n## Implementation Notes\n\n### Search Response Handling\n\nAlgolia returns rich search responses with:\n- Hits (matching records)\n- Facet counts\n- Query processing time\n- Number of hits\n- Pagination info\n\n```rust\npub struct SearchResponse\u003cT\u003e {\n    pub hits: Vec\u003cHit\u003cT\u003e\u003e,\n    pub nb_hits: u64,\n    pub page: u32,\n    pub nb_pages: u32,\n    pub hits_per_page: u32,\n    pub processing_time_ms: u32,\n    pub facets: Option\u003cHashMap\u003cString, HashMap\u003cString, u64\u003e\u003e\u003e,\n    pub query: String,\n}\n\npub struct Hit\u003cT\u003e {\n    pub object_id: String,\n    pub data: T,\n    pub highlight_result: Option\u003cHighlightResult\u003e,\n    pub snippet_result: Option\u003cSnippetResult\u003e,\n    pub ranking_info: Option\u003cRankingInfo\u003e,\n}\n```\n\n### Batch Operations\n\nAlgolia supports efficient batch operations:\n```rust\npub enum BatchAction {\n    AddObject { body: Value },\n    UpdateObject { object_id: String, body: Value },\n    PartialUpdateObject { object_id: String, body: Value },\n    DeleteObject { object_id: String },\n}\n\npub async fn batch(\u0026self, index: \u0026str, actions: Vec\u003cBatchAction\u003e) -\u003e Result\u003cBatchResponse\u003e;\n```\n\n### Wait for Task\n\nAlgolia operations are asynchronous. The connector should support waiting for task completion:\n```rust\npub async fn wait_for_task(\u0026self, index: \u0026str, task_id: u64) -\u003e Result\u003cTaskStatus\u003e;\n```\n\n## File Structure\n\n```\ncrates/fcp-algolia/\n├── Cargo.toml\n├── src/\n│   ├── lib.rs           # Public API exports\n│   ├── client.rs        # Algolia client implementation\n│   ├── auth.rs          # Authentication handling\n│   ├── search.rs        # Search operations\n│   ├── records.rs       # Record CRUD operations\n│   ├── indices.rs       # Index management\n│   ├── synonyms.rs      # Synonym operations\n│   ├── rules.rs         # Query rules\n│   ├── analytics.rs     # Analytics operations\n│   ├── ab_testing.rs    # A/B testing\n│   ├── batch.rs         # Batch operations\n│   ├── types.rs         # Type definitions\n│   └── error.rs         # Error handling\n└── tests/\n    ├── integration/\n    │   ├── search_test.rs\n    │   ├── records_test.rs\n    │   └── indices_test.rs\n    └── unit/\n        └── types_test.rs\n```\n\n## References\n\n- Algolia REST API: https://www.algolia.com/doc/rest-api/search/\n- Algolia API Clients: https://www.algolia.com/doc/api-client/getting-started/what-is-the-api-client/\n- Rate Limits: https://www.algolia.com/doc/rest-api/search/#rate-limits\n\n## Acceptance Criteria\n\n- [ ] Implement core search operations (search, multi-search, browse)\n- [ ] Implement record CRUD with batch support\n- [ ] Implement index management operations\n- [ ] Implement synonym and query rule management\n- [ ] Implement analytics read operations\n- [ ] Implement A/B testing operations\n- [ ] API key authentication with key type support\n- [ ] Zone-based rate limiting\n- [ ] Wait-for-task support for async operations\n- [ ] Proper error mapping to FCP error types\n- [ ] Unit tests for type serialization\n- [ ] Integration tests with Algolia sandbox","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-11T22:05:40.438660198-05:00","created_by":"ubuntu","updated_at":"2026-01-11T22:05:40.438660198-05:00","dependencies":[{"issue_id":"flywheel_connectors-zzpa","depends_on_id":"flywheel_connectors-krt","type":"blocks","created_at":"2026-01-11T22:08:22.369804137-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-zzpa","depends_on_id":"flywheel_connectors-zx0","type":"blocks","created_at":"2026-01-11T22:08:22.39460678-05:00","created_by":"ubuntu"},{"issue_id":"flywheel_connectors-zzpa","depends_on_id":"flywheel_connectors-1n78.20","type":"blocks","created_at":"2026-01-15T03:37:25.745254534-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-zzpa","depends_on_id":"flywheel_connectors-lszk","type":"parent-child","created_at":"2026-01-15T07:07:26.48594774-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-zzpa","depends_on_id":"flywheel_connectors-1n78.18","type":"blocks","created_at":"2026-01-15T07:09:07.280402867-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-zzpa","depends_on_id":"flywheel_connectors-1n78.19","type":"blocks","created_at":"2026-01-15T07:09:07.695824472-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-zzpa","depends_on_id":"flywheel_connectors-1n78.21.5","type":"blocks","created_at":"2026-01-15T07:09:08.107352536-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-zzpa","depends_on_id":"flywheel_connectors-1n78.26","type":"blocks","created_at":"2026-01-15T07:09:08.535142046-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-zzpa","depends_on_id":"flywheel_connectors-1n78.31","type":"blocks","created_at":"2026-01-15T07:09:08.940711177-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-zzpa","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:09:09.36803059-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-zzpa.1","title":"fcp.algolia: Manifest + Capability Map (FCP2)","description":"## Goal\nProduce the full FCP2 manifest and capability map for this connector.\n\nThis bead is where we translate the connector’s functional surface (operations) into a **mechanically checkable** contract:\n- operation schemas + schema IDs\n- capability families per operation\n- per-operation NetworkConstraints (default deny)\n- sandbox profile requirements\n- declared state model (stateless / singleton_writer / crdt)\n\n## Required content (must be explicit)\n- Operation list is exhaustive and stable for the current phase.\n- Capability IDs DO NOT encode hostnames/ports.\n- NetworkConstraints are minimal and per-operation.\n- Risk tier for each operation (Safe / Dangerous).\n- Explicit bounds: timeouts, max response sizes, pagination limits.\n\n## Tests\n- Add good/bad manifest examples for the compliance runner.\n\n## Acceptance Criteria\n- Passes static checks in `flywheel_connectors-1n78.21.5`.\n- Default-deny is enforced by manifest + capability requirements.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:11.587712007-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:12:11.587712007-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-zzpa.1","depends_on_id":"flywheel_connectors-zzpa","type":"parent-child","created_at":"2026-01-15T07:12:11.644874267-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-zzpa.2","title":"fcp.algolia: Provisioning Automation","description":"## Goal\nAutomate provisioning and configuration with minimal human steps.\n\nThis bead owns:\n- auth setup (OAuth / API keys / webhook secrets) via `CredentialObject`/`CredentialId` (egress proxy injection preferred)\n- endpoint configuration\n- `fcp doctor` readiness checks\n- deterministic, mockable provisioning flows\n\n## FCP2 requirements\n- Secrets never touch disk.\n- Provisioning is deterministic and testable.\n- Error messages are actionable and do not leak secrets/PII.\n\n## Acceptance Criteria\n- No real external calls in unit tests.\n- Provisioning emits structured logs per `flywheel_connectors-1n78.35`.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:12.14690352-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T08:37:57.716579207-05:00","labels":["connectors","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-zzpa.2","depends_on_id":"flywheel_connectors-zzpa","type":"parent-child","created_at":"2026-01-15T07:12:12.204292076-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-zzpa.2","depends_on_id":"flywheel_connectors-zzpa.1","type":"blocks","created_at":"2026-01-15T07:12:12.701856162-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-zzpa.3","title":"TEST: fcp.algolia Unit/Integration Tests (mock-only)","description":"## Goal\nMock-only unit/integration tests for this connector.\n\n## Required coverage\n- schema validation (inputs + outputs)\n- error taxonomy mapping (retry semantics)\n- pagination and bounds\n- rate limit behavior\n- redaction (no token/secret/PII leakage)\n- idempotency + receipts for Dangerous operations\n\n## Logging\nAll tests emit structured JSON logs per `flywheel_connectors-1n78.35`.\n\n## Acceptance Criteria\n- Deterministic tests; no live external calls.\n- Includes adversarial cases (timeouts, malformed responses, partial failures).\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:13.209164738-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:12:13.209164738-05:00","labels":["connectors","fcp2","testing"],"dependencies":[{"issue_id":"flywheel_connectors-zzpa.3","depends_on_id":"flywheel_connectors-zzpa","type":"parent-child","created_at":"2026-01-15T07:12:13.266714788-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-zzpa.3","depends_on_id":"flywheel_connectors-zzpa.1","type":"blocks","created_at":"2026-01-15T07:12:13.763011375-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-zzpa.3","depends_on_id":"flywheel_connectors-1n78.35","type":"blocks","created_at":"2026-01-15T07:12:14.257014647-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-zzpa.3","depends_on_id":"flywheel_connectors-h32","type":"blocks","created_at":"2026-01-15T07:32:23.261907507-05:00","created_by":"Dicklesworthstone"}]}
{"id":"flywheel_connectors-zzpa.4","title":"E2E: fcp.algolia Connector Compliance Run","description":"## Goal\nRun the shared connector compliance runner and capture an evidence bundle.\n\n## Must validate\n- handshake + introspection correctness\n- default deny (no CapabilityToken → deny + DecisionReceipt)\n- NetworkConstraints enforcement\n- receipts/audit for Dangerous operations\n- structured logs\n\n## Acceptance Criteria\n- E2E run is deterministic and produces a stable artifact bundle.\n","status":"open","priority":3,"issue_type":"task","owner":"jeff141421@gmail.com","created_at":"2026-01-15T07:12:14.711601494-05:00","created_by":"Dicklesworthstone","updated_at":"2026-01-15T07:12:14.711601494-05:00","labels":["connectors","e2e","fcp2"],"dependencies":[{"issue_id":"flywheel_connectors-zzpa.4","depends_on_id":"flywheel_connectors-zzpa","type":"parent-child","created_at":"2026-01-15T07:12:14.773107052-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-zzpa.4","depends_on_id":"flywheel_connectors-zzpa.1","type":"blocks","created_at":"2026-01-15T07:12:15.268326407-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-zzpa.4","depends_on_id":"flywheel_connectors-zzpa.2","type":"blocks","created_at":"2026-01-15T07:12:15.765677331-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-zzpa.4","depends_on_id":"flywheel_connectors-zzpa.3","type":"blocks","created_at":"2026-01-15T07:12:16.34530489-05:00","created_by":"Dicklesworthstone"},{"issue_id":"flywheel_connectors-zzpa.4","depends_on_id":"flywheel_connectors-e3i9","type":"blocks","created_at":"2026-01-15T07:12:16.919160126-05:00","created_by":"Dicklesworthstone"}]}
