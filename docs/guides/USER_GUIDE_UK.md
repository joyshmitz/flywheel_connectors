# Посібник Користувача: Flywheel Connector Protocol (FCP)

**Версія:** 2.0.0
**Статус:** Draft (в активній розробці)
**Останнє оновлення:** 2026-01-27

---

## Зміст

1. [Що таке FCP?](#1-що-таке-fcp)
2. [Для кого цей посібник?](#2-для-кого-цей-посібник)
3. [Основні поняття простою мовою](#3-основні-поняття-простою-мовою)
4. [Поточний стан проекту](#4-поточний-стан-проекту)
5. [Доступні з'єднувачі](#5-доступні-зєднувачі)
6. [Як це працює на практиці](#6-як-це-працює-на-практиці)
7. [Вимоги до системи](#7-вимоги-до-системи)
8. [Встановлення](#8-встановлення)
9. [Налаштування середовища](#9-налаштування-середовища)
10. [Приклади використання](#10-приклади-використання)
11. [Безпека та дозволи](#11-безпека-та-дозволи)
12. [Часті питання](#12-часті-питання)
13. [Глосарій термінів](#13-глосарій-термінів)

---

## 1. Що таке FCP?

### Простими словами

**FCP (Flywheel Connector Protocol)** — це система, яка дозволяє AI-асистентам (таким як Claude, ChatGPT) безпечно взаємодіяти з вашими сервісами: Twitter, Telegram, Discord та іншими.

**Аналогія:** Уявіть, що FCP — це перекладач між AI та зовнішніми сервісами. AI каже "надішли повідомлення в Telegram", а FCP перевіряє чи AI має на це право, і якщо так — виконує дію безпечно.

### Головна проблема, яку вирішує FCP

Без FCP AI-асистенти або:
- **Не мають доступу** до ваших сервісів взагалі
- **Мають повний доступ** без обмежень (небезпечно)

FCP дає **контрольований доступ**: ви вирішуєте, що AI може робити, а що — ні.

### Ключові переваги

| Перевага | Що це означає |
|----------|---------------|
| **Безпека** | AI не може зробити більше, ніж ви дозволили |
| **Контроль** | Ви бачите кожну дію AI в журналі |
| **Розподіленість** | Працює на ваших пристроях, не в хмарі |
| **Офлайн-доступ** | Частково працює навіть без інтернету |

---

## 2. Для кого цей посібник?

Цей посібник призначений для:

- **Менеджерів проектів** — щоб зрозуміти можливості та обмеження
- **Технічних спеціалістів** — для налаштування та експлуатації
- **Усіх членів команди** — для розуміння базових принципів

**Не потрібні попередні знання** програмування для розуміння концепцій. Технічні деталі позначені як `[ТЕХНІЧНО]` і їх можна пропустити.

---

## 3. Основні поняття простою мовою

### 3.1 З'єднувач (Connector)

**Що це:** Програма-посередник між AI та конкретним сервісом.

**Приклад:** Є з'єднувач для Twitter. Він "розуміє" як працює Twitter API і може:
- Читати твіти
- Публікувати твіти
- Надсилати приватні повідомлення

**Аналогія:** З'єднувач — як перекладач, який знає мову конкретного сервісу.

### 3.2 Зона (Zone)

**Що це:** Рівень довіри та конфіденційності.

**П'ять стандартних зон:**

| Зона | Призначення | Приклад даних |
|------|-------------|---------------|
| `z:owner` | Найвищий рівень довіри | Паролі, ключі доступу |
| `z:private` | Особисті дані | Особиста пошта, календар |
| `z:work` | Робочі дані | Робочі чати, документи |
| `z:community` | Напівдовірені | Discord сервери |
| `z:public` | Публічні/недовірені | Публічні API |

**Навіщо це потрібно:** Дані з різних зон не змішуються. AI, що працює в зоні `z:public`, не може отримати доступ до даних зони `z:private`.

### 3.3 Capability (Дозвіл)

**Що це:** Конкретний дозвіл на виконання конкретної дії.

**Приклад:**
- `twitter.read` — дозвіл читати твіти
- `twitter.write` — дозвіл публікувати твіти
- `twitter.dm.read` — дозвіл читати приватні повідомлення

**Важливо:** Без явного дозволу — дія неможлива. Це не питання "чи AI послухається", а технічна неможливість.

### 3.4 Mesh (Меш-мережа)

**Що це:** Ваші пристрої, з'єднані в єдину захищену мережу.

**Приклад:** Ваш комп'ютер, ноутбук і телефон — це ваш mesh. Вони можуть обмінюватися даними напряму, без хмарних серверів.

**Перевага:** Якщо один пристрій офлайн — інші продовжують працювати.

### 3.5 Tailscale

**Що це:** Технологія, яка з'єднує ваші пристрої в безпечну мережу.

**Аналогія:** Tailscale — як приватний тунель між вашими пристроями. Трафік шифрується, ніхто сторонній не може його прочитати.

**Факт:** FCP використовує Tailscale для ідентифікації пристроїв та шифрування зв'язку.

---

## 4. Поточний стан проекту

### Статус: Draft (Чернетка)

**Що це означає:**
- Проект в **активній розробці**
- Специфікація **не фінальна** і може змінюватися
- **Не рекомендується** для production-використання
- Підходить для **тестування та вивчення**

### Що вже реалізовано

| Компонент | Статус | Примітка |
|-----------|--------|----------|
| Базові типи (fcp-core) | Готово | Зони, capabilities, provenance |
| Протокол (fcp-protocol) | Готово | FCPS/FCPC framing |
| Twitter з'єднувач | Готово | Читання, постинг, streaming |
| Telegram з'єднувач | Готово | Читання, надсилання, polling |
| Discord з'єднувач | Готово | Gateway, API |
| OpenAI з'єднувач | Готово | API інтеграція |
| Anthropic з'єднувач | Готово | Claude API |
| CLI інструменти | Готово | audit, bench, doctor, explain |
| RaptorQ інтеграція | В роботі | Symbol encoding/decoding |
| Mesh orchestration | В роботі | Gossip, routing |
| End-to-end тести | В роботі | Нещодавно розпочато |

### Що ще не готово

- Повноцінний mesh bootstrap (church ceremony)
- Production-grade secret management
- Повна інтеграція з MCP серверами
- UI/Dashboard для моніторингу

---

## 5. Доступні з'єднувачі

### 5.1 Twitter (fcp-twitter)

**Можливості:**
- Читання твітів
- Публікація твітів
- Пошук твітів
- Читання та надсилання приватних повідомлень
- Streaming (потокове отримання нових твітів)

**Необхідні credentials:**
- Consumer Key
- Consumer Secret
- Access Token
- Access Token Secret

**Отримання credentials:** Через [Twitter Developer Portal](https://developer.twitter.com/)

### 5.2 Telegram (fcp-telegram)

**Можливості:**
- Отримання повідомлень (polling)
- Надсилання повідомлень
- Робота з чатами та групами
- Отримання інформації про бота

**Необхідні credentials:**
- Bot Token

**Отримання credentials:** Через [@BotFather](https://t.me/BotFather) в Telegram

### 5.3 Discord (fcp-discord)

**Можливості:**
- Підключення до Gateway (real-time)
- Читання повідомлень
- Надсилання повідомлень
- Робота з серверами та каналами

**Необхідні credentials:**
- Bot Token

**Отримання credentials:** Через [Discord Developer Portal](https://discord.com/developers/applications)

### 5.4 OpenAI (fcp-openai)

**Можливості:**
- Виклик OpenAI API
- Генерація тексту
- Робота з різними моделями

**Необхідні credentials:**
- API Key

**Отримання credentials:** Через [OpenAI Platform](https://platform.openai.com/)

### 5.5 Anthropic (fcp-anthropic)

**Можливості:**
- Виклик Claude API
- Генерація тексту
- Робота з Claude моделями

**Необхідні credentials:**
- API Key

**Отримання credentials:** Через [Anthropic Console](https://console.anthropic.com/)

---

## 6. Як це працює на практиці

### Сценарій: AI публікує твіт

```
Крок 1: Користувач просить AI "Опублікуй твіт про погоду"
           │
           ▼
Крок 2: AI формує запит до FCP
           │
           ▼
Крок 3: FCP Gateway перевіряє:
        - В якій зоні працює AI? (наприклад, z:work)
        - Чи є capability twitter.write для цієї зони?
        - Чи не відкликано дозвіл?
           │
           ▼
Крок 4: Якщо все ОК → Twitter з'єднувач виконує запит
        Якщо НІ → Повертає помилку "Access Denied"
           │
           ▼
Крок 5: Результат (успіх або помилка) повертається AI
           │
           ▼
Крок 6: Дія записується в audit log (журнал)
```

### Що записується в журнал

Кожна дія записується з такою інформацією:
- Хто запросив (який AI/агент)
- Що запросив (яка операція)
- Коли (timestamp)
- Який результат (успіх/помилка)
- Який з'єднувач виконав

**Це дозволяє:** Завжди знати, хто і що робив у вашій системі.

---

## 7. Вимоги до системи

### Мінімальні вимоги

| Компонент | Вимога |
|-----------|--------|
| Операційна система | macOS 12+, Linux (Ubuntu 20.04+), Windows 10+ |
| Процесор | x86_64 або ARM64 |
| Пам'ять | 4 GB RAM |
| Диск | 500 MB вільного місця |
| Rust | Nightly (2024 edition) |
| Tailscale | Встановлений та авторизований |

### Для розробки/тестування

| Компонент | Вимога |
|-----------|--------|
| Пам'ять | 8 GB RAM |
| Диск | 2 GB вільного місця |
| Git | 2.40+ |

---

## 8. Встановлення

### Крок 1: Встановлення Rust

**macOS/Linux:**
```bash
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
```

**Після встановлення:**
```bash
# Перезавантажте термінал, потім:
rustup default nightly
rustup update
```

**Перевірка:**
```bash
rustc --version
# Має показати: rustc 1.85.0-nightly або новіше
```

### Крок 2: Встановлення Tailscale

**macOS:**
```bash
brew install tailscale
```

**Linux (Ubuntu/Debian):**
```bash
curl -fsSL https://tailscale.com/install.sh | sh
```

**Авторизація:**
```bash
sudo tailscale up
# Відкриється браузер для входу
```

**Перевірка:**
```bash
tailscale status
# Має показати ваш пристрій як "online"
```

### Крок 3: Клонування репозиторію

```bash
git clone https://github.com/joyshmitz/flywheel_connectors.git
cd flywheel_connectors
```

### Крок 4: Збірка проекту

```bash
# Перевірка компіляції (без повної збірки)
cargo check --workspace

# Повна збірка
cargo build --release
```

**Час збірки:** 5-15 хвилин залежно від комп'ютера.

### Крок 5: Перевірка

```bash
# Запуск тестів
cargo test

# Перевірка CLI
./target/release/fcp --help
```

---

## 9. Налаштування середовища

### 9.1 Створення конфігурації

Створіть файл `~/.fcp/config.toml`:

```toml
# Базова конфігурація FCP
[general]
log_level = "info"

[zones]
# Визначення зон для вашого mesh
default = "z:work"

[tailscale]
# Tailscale автоматично виявляється
# Ці налаштування опціональні
```

### 9.2 Налаштування з'єднувача (приклад: Telegram)

**Крок 1:** Отримайте токен бота від @BotFather

**Крок 2:** Створіть файл конфігурації `~/.fcp/connectors/telegram.toml`:

```toml
[connector]
name = "telegram"
zone = "z:work"

[credentials]
# ВАЖЛИВО: Не зберігайте токени у відкритому вигляді в production!
# Для тестування це прийнятно.
token = "YOUR_BOT_TOKEN_HERE"

[options]
poll_timeout = 30
```

### 9.3 Налаштування з'єднувача (приклад: Twitter)

**Крок 1:** Отримайте credentials з Twitter Developer Portal

**Крок 2:** Створіть файл `~/.fcp/connectors/twitter.toml`:

```toml
[connector]
name = "twitter"
zone = "z:work"

[credentials]
consumer_key = "YOUR_CONSUMER_KEY"
consumer_secret = "YOUR_CONSUMER_SECRET"
access_token = "YOUR_ACCESS_TOKEN"
access_token_secret = "YOUR_ACCESS_TOKEN_SECRET"
```

---

## 10. Приклади використання

### 10.1 Перевірка стану системи

```bash
# Діагностика системи
./target/release/fcp doctor

# Очікуваний результат:
# Zone: z:work
# Status: Healthy
# Checkpoint: Fresh (5s ago)
# Revocation: Current
```

### 10.2 Перегляд доступних з'єднувачів

```bash
# Список з'єднувачів
./target/release/fcp connector list

# Очікуваний результат:
# ┌────────────┬─────────┬────────┬──────────┐
# │ Connector  │ Version │ Zone   │ Status   │
# ├────────────┼─────────┼────────┼──────────┤
# │ twitter    │ 0.1.0   │ z:work │ Active   │
# │ telegram   │ 0.1.0   │ z:work │ Active   │
# │ discord    │ 0.1.0   │ z:work │ Inactive │
# └────────────┴─────────┴────────┴──────────┘
```

### 10.3 Інтроспекція з'єднувача

```bash
# Детальна інформація про з'єднувач
./target/release/fcp connector introspect twitter

# Покаже:
# - Доступні операції (post_tweet, search_tweets, etc.)
# - Необхідні capabilities
# - Формат параметрів
```

### 10.4 Перегляд журналу операцій

```bash
# Останні 10 операцій
./target/release/fcp audit tail --zone z:work --limit 10

# Очікуваний результат:
# 2026-01-27T10:15:32Z | twitter | post_tweet | SUCCESS | user=@example
# 2026-01-27T10:14:28Z | telegram | send_message | SUCCESS | chat_id=123456
```

### 10.5 Пояснення відмови (якщо дія заблокована)

```bash
# Чому операція не виконалась
./target/release/fcp explain --request <request-id>

# Очікуваний результат:
# Decision: DENIED
# Reason: Missing capability 'twitter.dm.read' for zone 'z:public'
# Required: twitter.dm.read
# Granted: twitter.read, twitter.write
# Suggestion: Request capability grant from zone administrator
```

---

## 11. Безпека та дозволи

### 11.1 Принцип мінімальних привілеїв

**Правило:** Надавайте лише ті дозволи, які дійсно потрібні.

**Приклад:**
- AI потрібно лише читати твіти → надайте `twitter.read`
- НЕ надавайте `twitter.write`, якщо це не потрібно

### 11.2 Зони та ізоляція

**Правило:** Дані не переміщуються між зонами без явного дозволу.

**Приклад:**
- AI працює в `z:public`
- Ваша особиста пошта в `z:private`
- AI **технічно не може** отримати доступ до пошти

### 11.3 Журнал (Audit Log)

**Що записується:**
- Кожен запит до з'єднувача
- Кожен успіх або помилка
- Кожна зміна налаштувань

**Навіщо:** Для виявлення проблем та відстеження дій.

### 11.4 Відкликання (Revocation)

**Що це:** Миттєве скасування дозволу.

**Коли використовувати:**
- Підозра на компрометацію
- Зміна вимог безпеки
- Завершення проекту/задачі

**Як працює:** Після відкликання дозволу, жодна операція з цим дозволом неможлива, навіть якщо токен ще не закінчився.

---

## 12. Часті питання

### Q: Чи можна використовувати FCP в production?

**A:** На даний момент — **ні**. Проект в статусі Draft. Підходить для тестування та вивчення.

### Q: Чи потрібен Tailscale?

**A:** **Так.** Tailscale — обов'язковий компонент для mesh-мережі та ідентифікації пристроїв.

### Q: Де зберігаються мої credentials (токени, ключі)?

**A:** В поточній версії — в локальних файлах конфігурації. В production-версії планується threshold secret sharing (розподілене зберігання).

### Q: Чи працює офлайн?

**A:** **Частково.** Локальні операції працюють. Операції, що вимагають зовнішніх API (Twitter, Telegram) — потребують інтернету.

### Q: Скільки пристроїв можна підключити до mesh?

**A:** Обмежень FCP не встановлює. Обмеження Tailscale залежать від вашого плану (безкоштовний — до 100 пристроїв).

### Q: Чи можна створити власний з'єднувач?

**A:** **Так.** Документація з розробки з'єднувачів знаходиться в `docs/fcp_model_connectors_rust.md`.

### Q: Які AI-асистенти підтримуються?

**A:** FCP планує інтеграцію через MCP (Model Context Protocol). Це дозволить використовувати Claude, ChatGPT, та інші LLM, що підтримують MCP.

---

## 13. Глосарій термінів

| Термін | Визначення |
|--------|------------|
| **API** | Програмний інтерфейс для взаємодії з сервісом |
| **Capability** | Конкретний дозвіл на виконання дії |
| **CLI** | Командний інтерфейс (робота через термінал) |
| **Connector** | Програма-посередник між FCP та зовнішнім сервісом |
| **Credential** | Облікові дані для доступу (токен, ключ) |
| **FCPS/FCPC** | Протоколи FCP для передачі даних та управління |
| **Gateway** | Точка входу, що перевіряє дозволи |
| **Mesh** | Мережа з'єднаних пристроїв |
| **MCP** | Model Context Protocol — протокол для AI-асистентів |
| **Polling** | Періодичне опитування сервісу на наявність нових даних |
| **RaptorQ** | Технологія розподілу даних на фрагменти (символи) |
| **Receipt** | Підтвердження виконання операції |
| **Revocation** | Відкликання (скасування) дозволу |
| **Streaming** | Потокове отримання даних в реальному часі |
| **Tailscale** | Сервіс для створення захищеної mesh-мережі |
| **Zone** | Рівень довіри та конфіденційності |

---

## Контакти та ресурси

- **Репозиторій:** https://github.com/joyshmitz/flywheel_connectors
- **Специфікація:** `FCP_Specification_V2.md` (в корені репозиторію)
- **Документація для розробників:** `docs/fcp_model_connectors_rust.md`

---

*Документ створено 2026-01-27. Актуальність інформації залежить від версії проекту.*
